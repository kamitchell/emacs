2007-08-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-send): Handle CTRL-D more carefully.

2007-08-12  Richard Stallman  <rms@gnu.org>

	* pcvs.el (cvs-reread-cvsrc, cvs-checkout, cvs-mode-checkout)
	(cvs-execute-single-file): Use new name split-string-and-unquote.
	(cvs-header-msg): Use new name combine-and-quote-strings.

	* emulation/vi.el (vi-next-line): Ignore return value of line-move.

	* progmodes/gud.el (gud-common-init): Use new name
	split-string-and-unquote.

	* progmodes/flymake.el (flymake-err-line-patterns): Fix infloop
	in javac regexp.

	* pcvs-util.el (cvs-qtypedesc-strings): Use new names
	combine-and-quote-strings and split-string-and-unquote.

	* subr.el (combine-and-quote-strings): Renamed from strings->string.
	(split-string-and-unquote): Renamed from string->strings.

2007-08-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-font-lock-keywords): Use `eval' so as to adapt
	to buffer-local settings.

	* emacs-lisp/backquote.el (backquote-delay-process): New function.
	(backquote-process): Add internal arg `level'.  Use the two to
	correctly handle nested backquotes.

2007-08-09  Riccardo Murri  <riccardo.murri@gmail.com>

	* vc-bzr.el (vc-bzr-registered): Use \0 instead of literal NULs.
	(vc-bzr-state-words): Add "kind changed" state word.
	(vc-bzr-status): New function.  Return Bzr idea of file status,
	which is different from VC's.
	(vc-bzr-state): Use vc-bzr-status.
	(vc-workfile-unchanged-p): Use vc-bzr-status.
	(vc-bzr-revert): Use synchronous process; expect exitcode 0.
	(vc-dired-state): Process "kind changed" state word.

2007-08-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el (vc-default-find-file-not-found-hook): Do nothing.

	* vc-rcs.el (vc-rcs-find-file-not-found-hook):
	Move from vc-default-find-file-not-found-hook.

2007-08-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* man.el: Remove spurious * in docstrings.
	Merge defvars and toplevel setq-defaults.
	(Man-highlight-references0): Limit=nil rather than point-max.
	(Man-mode-map): Move initialization into the declaration.
	(Man-strip-page-headers, Man-unindent): Use dolist & inhibit-read-only.
	(Man-view-header-file): Use expand-file-name rather than concat.
	(Man-notify-when-ready, Man-bgproc-sentinel): Use with-current-buffer.

	* man.el (Man-next-section): Make sure we do not move backward.

2007-08-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (auto-mode-alist): Use the purecopied text (duh!).

2007-08-08  Glenn Morris  <rgm@gnu.org>

	* Replace `iff' in doc-strings and comments.

2007-08-08  Martin Rudalics  <rudalics@gmx.at>

	* dired.el (dired-pop-to-buffer):
	* mouse-drag.el (mouse-drag-should-do-col-scrolling):
	* calendar/calendar.el (generate-calendar-window):
	* progmodes/compile.el (compilation-set-window-height):
	* textmodes/two-column.el (2C-two-columns, 2C-merge):
	Use window-full-width-p instead of comparing frame-width and
	window-width.

	* progmodes/compile.el (compilation-find-buffer): Remove extra
	argument in call to compilation-buffer-internal-p.

2007-08-07  Tom Tromey  <tromey@redhat.com>

	* progmodes/tcl.el (tcl-indent-level, tcl-continued-indent-level):
	Add safe-local-variable property.

2007-08-07  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-toggle-display): Use image-refresh.

2007-08-07  Riccardo Murri  <riccardo.murri@gmail.com>

	* vc-bzr.el: Remove comments about vc-bzr.el being a modified
	unofficial version.
	(vc-bzr-command): Remove redundant setting of process-connection-type.
	(vc-bzr-admin-checkout-format-file): Add autoload.
	(vc-bzr-root-dir): Remove in favor of vc-bzr-root.
	(vc-bzr-root): Switch to implementation of vc-bzr-root-dir.
	(vc-bzr-registered): Compare dirstate format tag with known good
	value, abort parsing if match fails.  Warn user in docstring.
	(vc-bzr-workfile-version): Case for different Bzr branch formats.
	See bzrlib/branch.py in Bzr sources.
	(vc-bzr-diff): First argument FILES may be a string rather than a list.
	(vc-bzr-shell-command): Remove in favor of
	vc-bzr-command-discarding-stderr.
	(vc-bzr-command-discarding-stderr): New function.

2007-08-06  Riccardo Murri  <riccardo.murri@gmail.com>

	* vc-bzr.el (vc-bzr-registered): Gracefully handle missing "bzr"
	program, and return nil
	(vc-bzr-state): Gracefully handle missing "bzr" program, and return nil.
	(vc-bzr-state): Look for path names relative to the repository
	root after status keyword.
	(vc-bzr-file-name-relative): New function.
	(vc-bzr-admin-dirname): Reinstate, as other vc-bzr-admin-... paths
	depend on it.
	(vc-bzr-admin-dirname, ...-checkout-format-file)
	(...-branch-format-file, ...-revhistory): Paths to some Bzr internal
	files that we now parse directly for speed.
	(vc-bzr-root-dir): Use `vc-bzr-admin-checkout-format-file' as witness.
	(vc-bzr-registered): Only parse vc-bzr-admin-dirstate file if it exists.
	(vc-bzr-state): "bzr status" successful only if exitcode is 0
	(vc-bzr-root): Use `vc-bzr-shell-command'.  Stderr may contain
	Bzr warnings, so we must discard it.
	(vc-bzr-workfile-version): Speedup counting lines from
	`vc-bzr-admin-revhistory' file, but fallback to spawning "bzr revno"
	if that file doesn't exist.
	(vc-bzr-responsible-p): Use `vc-bzr-root' instead of
	`vc-bzr-root-dir' for speed.  Add `vc-bzr-admin-dirname'
	(not ".bzr"!) to `vc-directory-exclusion-list'
	(vc-bzr-shell-command): New function.

2007-08-06  Tom Tromey  <tromey@redhat.com>

	* diff-mode.el (diff-unified->context, diff-reverse-direction)
	(diff-fixup-modifs): Typo in docstring.

2007-08-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emulation/tpu-edt.el (tpu-current-line): Use posn-at-point and
	count-screen-lines.
	(tpu-edt-off): Disable relevant pieces of advice.

	* emulation/tpu-extras.el (tpu-before-save-hook): Rename from
	tpu-write-file-hook.  Activate it with add-hook on buffer-save-hook.
	(newline, newline-and-indent, do-auto-fill): Use advice instead of
	redefining the function.
	(tpu-set-scroll-margins): Activate the pieces of advice.

2007-08-06  Martin Rudalics  <rudalics@gmx.at>

	* help.el (resize-temp-buffer-window): Use window-full-width-p
	instead of comparing frame-width and window-width.

2007-08-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (autoload-print-form): Use print-quoted.

2007-08-12  Richard Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh): Delete group `unix'.

	* progmodes/gud.el (gud): Change to group `processes'.

2007-08-11  Glenn Morris  <rgm@gnu.org>

	* progmodes/compile.el (compilation-buffer-name): Don't check
	compilation-arguments.  It is superfluous, and the variable isn't
	even set when this function is called.

2007-08-10  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-ae-reopen-application): New function.
	(mac-apple-event-map): Bind "reopen application" Apple event to it.

2007-08-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-unfontify-region): Fix to
	take tex-font-script-display into account.
	(tex-font-script-display, tex-font-lock-suscript): Change from a cons
	cell to a list of 2 elements to simplify the unfontify code.

2007-08-09  Edward O'Connor  <hober0@gmail.com> (tiny change)

	* url/url-auth.el (url-basic-auth): When prompting for username
	and password, default to the username and password in the URL.

2007-08-08  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-default-fg, ps-default-bg): Docstring fix.
	(ps-begin-job): Use ps-default-fg and ps-default-bg only when
	ps-print-color-p is neither nil nor black-white.  Reported by Christian
	Schlauer <cs-muelleimer-rubbish.bin@arcor.de>.

2007-08-08  Andreas Schwab  <schwab@suse.de>

	* mail/mailabbrev.el (sendmail-pre-abbrev-expand-hook): Check for
	self-insert-command, not self-insert.

2007-08-08  Glenn Morris  <rgm@gnu.org>

	* emacs-lisp/eldoc.el (eldoc-get-fnsym-args-string): Make second
	argument optional, for backwards compatibility, and only highlight
	args when present.  Fix symbol name typo (doc/args).

	* help-mode.el (help-make-xrefs): Search for symbol constituents,
	rather than just `-'.

2007-08-07  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-units.el (calc-convert-temperature):
	Use `/' to create fractions.

2007-08-07  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-wrong-passwd-regexp): Make the regexp more
	global matching.
	(tramp-handle-shell-command): Handle OUTPUT-BUFFER and
	ERROR-BUFFER more robust.  Display output.
	(tramp-file-name-handler): Add a connection property when we found
	a foreign file name handler.  This allows backends like ftp to
	profit also from usr/host name completion based on connection
	cache.
	(tramp-send-command-and-read): Search for trash after the regexp
	until eol only.  In XEmacs, there is a problem with \n.

	* net/tramp-cache.el (top): Read persistent connection history
	when cache is empty.

2007-08-07  Nic Ferrier  <nferrier@tapsellferrier.co.uk>  (tiny change)

	* net/tramp.el (tramp-handle-process-file): Fix bug inserting
	resulting output.

2007-08-07  Sam Steingold  <sds@gnu.org>

	* progmodes/compile.el (compilation-start): Pass nil as startfile
	to comint-exec.

2007-08-07  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-decoded): New variable.
	(longlines-mode): Avoid encoding or decoding the buffer twice.

2007-08-07  Martin Rudalics  <rudalics@gmx.at>

	* format.el (format-insert-file): Make sure that at most one undo
	entry is recorded for the insertion.  Inhibit point-motion and
	modification hooks around call to insert-file-contents.

2007-08-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-annotate): Select temp-buffer before running vc-exec-after.
	Select the buffer's window before moving point.

2007-08-07  Richard Stallman  <rms@gnu.org>

	* term.el (term): Remove parent group `unix'.

	* simple.el (default-indent-new-line): New function.
	It calls comment-line-break-function if there are comments.
	(do-auto-fill): Use that.

2007-08-07  Ivan Kanis  <apple@kanis.eu>

	* time.el (display-time-world-mode, display-time-world-display)
	(display-time-world, display-time-world-list)
	(display-time-world-time-format, display-time-world-buffer-name)
	(display-time-world-timer-enable)
	(display-time-world-timer-second, display-time-world-mode-map): 
	New.
	
2007-08-07  Sean O'Rourke  <sorourke@cs.ucsd.edu>

	* complete.el (PC-lisp-complete-symbol): Complete symbol around point.
	(PC-do-completion): Add "acronym completion" for symbols and
	filenames, so e.g. "mvbl" expands to "make-variable-buffer-local".

2007-08-06  Sam Steingold  <sds@gnu.org>

	* mouse.el (mouse-buffer-menu): Pass mode-name through
	format-mode-line because it may be a list,
	e.g., (sgml-xml-mode "XML" "SGML"), and not a string.

2007-08-06  Vinicius Jose Latorre  <viniciusig@ig.com.br>

	* printing.el (pr-update-menus): Docstring fix.

2007-08-06  Jason Rumney  <jasonr@gnu.org>

	* menu-bar.el (menu-bar-vc-filter): Use vc-call-backend.

	* vc-hooks.el (vc-call): Add doc string.

2007-08-06  Michael Albinus  <michael.albinus@gmx.de>

	* net/ange-ftp.el (ange-ftp-hook-function): Catch also errors in
	process-filter.

2007-08-06  Kenichi Handa  <handa@m17n.org>

	* international/quail.el: Wrap (require 'help-mode) by
	eval-when-compile.
	(quail-help-init): New function.
	(quail-help): Call quail-help-init.
	(quail-store-decode-map-key): Change it to a function.

2007-08-05  Jason Rumney  <jasonr@gnu.org>

	* vc.el (vc-rollback): Add norevert argument back.
	(vc-revert-buffer): Add back as obsolete alias.

2007-08-05  Peter Povinec  <ppovinec@yahoo.com>  (tiny change)

	* term.el: Honor term-default-fg-color and term-default-bg-color
	settings when modifying term-current-face.
	(term-default-fg-color, term-default-bg-color): Initialize from
	default term-current-face.
	(term-mode, term-reset-terminal): Set term-current-face with
	term-default-fg-color and term-default-bg-color.
	(term-handle-colors-array): term-current-face has term-default-fg-color
	and term-default-bg-color after reset escape sequence.
	(term-handle-colors-array): Set term-current-color with
	term-default-fg/bg-color instead of ansi-term-color-vector when the
	index (term-ansi-current-color or term-ansi-current-bg-color) is zero.

2007-08-05  Jay Belanger  <belanger@localhost.localdomain>

	* calc/calc-nlfit.el (math-nlfit-curve):
	Remove unnecessary variables.
	(math-nlfit-givens): Let bind free variables.

2007-08-05  Vinicius Jose Latorre  <viniciusig@ig.com.br>

	* printing.el: Require lpr and ps-print when loading printing package.
	Reported by Glenn Morris <rgm@gnu.org>.

2007-08-05  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (set-auto-mode): Handle also remote files wrt
	`auto-mode-alist'.

2007-08-04  Jay Belanger  <belanger@localhost.localdomain>

	* calc/calcalg3.el (calc-curve-fit): Add support for nonlinear
	curves and plotting.

	* calc/calc-nlfit.el: New file.

2007-08-04  Glenn Morris  <rgm@gnu.org>

	* autorevert.el (auto-revert-tail-mode): auto-revert-tail-pos is
	zero, not nil, when the library is first loaded.  Check for a file
	that has been modified on disk.

	* progmodes/cperl-mode.el (cperl-compilation-error-regexp-alist):
	Remove duplicate defvar preventing initialization.
	(cperl-mode): Fix compilation-error-regexp-alist-alist setting.

2007-08-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-font-lock-keywords): Fix up false positives.
	(diff-beginning-of-file): Adjust to the fact that diff-file-header-re
	may match up to 4 lines.
	(diff-beginning-of-file-and-junk): Rewrite.

2007-08-03  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* printing.el: Evaluate require only during compilation.
	(pr-version): New version 6.9.1.
	(deactivate-mark): Replace (defvar VAR nil) by (defvar VAR).
	(pr-global-menubar): Fix code.

2007-08-03  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-erase-in-display): Fix case when point is not at
	the beginning of the line.

2007-08-03  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-ext.el (math-get-value,math-get-sdev)
	(math-contains-sdev): New functions.

	* calc/calc-graph.el (calc-graph-format-data)
	(calc-graph-add-curve): Check for error forms.
	(calc-graph-set-styles): Add option for error forms.

2007-08-03  Miles Bader  <miles@gnu.org>

	* vc-hooks.el (vc-handled-backends): Change capitalization of VC
	backend names for new backends to `Git', `Hg', and `Bzr'.
	* vc-hg.el (vc-hg-dired-state-info): Use `Hg' as VC backend name,
	not `HG'.
	* vc-git.el (vc-git-dired-state-info): Use `Git' as VC backend
	name, not `GIT'.
	* vc-bzr.el (vc-bzr-dir-state, vc-bzr-dired-state-info)
	(vc-bzr-unload-hook): Use `Bzr' as VC backend name, not `BZR'.

2007-08-03  Richard Stallman  <rms@gnu.org>

	* mail/rmailsum.el (rmail-make-summary-line): Find end of msg number
	to update deleted flag.

	* cus-edit.el (customize-apropos, customize-apropos-options)
	(customize-apropos-faces, customize-apropos-groups): Improve prompt.

	* menu-bar.el (menu-bar-help-menu): Add "About GNU" menu item.

	* startup.el (fancy-splash-head, startup-echo-area-message):
	Change message text.

	* emulation/tpu-edt.el (next-line-internal): Setting deleted.
	All callers use line-move.

	* progmodes/compile.el (compilation-find-buffer): Return current
	buffer immediately if suitable.
	(compile, compilation-buffer-name, compilation-start): Doc fixes.

2007-08-03  Daiki Ueno  <ueno@unixuser.org>

	* faces.el (face-normalize-spec): New function.
	(frame-set-background-mode): Normalize face-spec before calling
	face-spec-match-p.

2007-08-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* server.el (server-window): Add switch-to-buffer-other-frame option.

2007-08-03  Glenn Morris  <rgm@gnu.org>

	* cus-edit.el (customize-apropos): Make the error message indicate
	what kind of thing the user was trying to customize.

	* net/telnet.el (telnet-mode): Set comint-use-prompt-regexp to t.

	* progmodes/fortran.el (fortran-font-lock-syntactic-keywords): Fix
	off-by-one error in previous change.

2007-08-03  Drew Adams  <drew.adams@oracle.com>

	* emacs-lisp/pp.el (pp-eval-expression): Add progress message.
	Make buffer writable.

2007-08-01  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-math.el (math-sqrt-raw,math-sin-raw-2)
	(math-cos-raw-2,math-arctan-raw,math-ln-raw):
	Use native Emacs functions, when appropriate.

2007-08-01  Dan Nicolaescu  <dann@ics.uci.edu>
	    Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el: Document new VC operation `extra-menu'.

	* vc-hooks.el (vc-default-extra-menu): New function.

	* menu-bar.el (menu-bar-vc-filter): New function.
	(menu-bar-tools-menu): Use it as a filter.

2007-08-01  Eric Hanchrow  <offby1@blarg.net>  (tiny change)

	* ibuf-ext.el (ibuffer-mark-old-buffers): Docstring fix.

2007-08-01  Glenn Morris  <rgm@gnu.org>

	* progmodes/fortran.el: Remove leading `*' from all defcustom doc
	strings.
	(fortran-tab-mode-default): Remove needless autoload.
	(fortran-tab-mode-string): Add help-echo and mouse properties, and
	mark as risky.
	(fortran-line-length): New buffer-local variable, safe if integer.
	(fortran-if-start-re, fortran-end-prog-re1, fortran-end-prog-re):
	Change from variables to constants.
	(fortran-font-lock-syntactic-keywords): Delete as a variable,
	replace with a new function definition.
	(fortran-mode): Use fortran-line-length, and
	fortran-font-lock-syntactic-keywords as a function.  Add a
	hack-local-variables-hook function.
	(fortran-line-length, fortran-hack-local-variables): New functions.
	(fortran-window-create, fortran-strip-sequence-nos): Doc fix.
	Use fortran-line-length rather than 72.
	(fortran-window-create-momentarily): Doc fix.

2007-07-31  Drew Adams  <drew.adams@oracle.com>  (tiny change)

	* cus-edit.el (custom-group-value-create, custom-goto-parent):
	Fix parent groups link.

2007-07-31  Paul Pogonyshev  <pogonyshev@gmx.net>

	* progmodes/python.el (python-current-defun): Adjust to never fall
	into infinite loop.

2007-07-31  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-vc-command-advice): Handle the new fileset case.

2007-07-29  Kimit Yada  <kimitto@gmail.com>  (tiny change)

	* emacs-lisp/copyright.el (copyright-update-year, copyright-update)
	(copyright-fix-years, copyright): Correctly handle the case where
	copyright-limit is nil.

2007-07-28  Konstantin Novitsky  <knovitsk@Bear.com>  (tiny change)

	* progmodes/python.el (run-python): Fix path separator under w32.

2007-07-30  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table):
	Treat non-break space as whitespace in Lisp.

2007-07-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-dired-hook): Use inhibit-read-only.

	* progmodes/compile.el (compilation-forget-errors):
	Reset compilation-auto-jump-to-next.

2007-07-30  Michael Olson  <mwolson@gnu.org>

	* cus-edit.el (custom-group-save): Fix void function definition
	error.  Thanks to Zhang Wei for the report.

	* ps-print.el: Check in trivial changes to the autoloads section
	caused by the build process.  These autoloads really ought to be
	placed in a separate file, methinks.

2007-07-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/calendar.el (calendar-mode): Make sure
	displayed-(month|year) are set.
	(calendar-basic-setup): Display buffer before adjusting window sizes.
	(generate-calendar-window): Use inhibit-read-only.  Simplify.
	Generate buffer and set displayed-month and displayed-year before
	calling update-calendar-mode-line.

2007-07-29  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el:
	* net/tramp-uu.el:
	* net/trampver.el: Use utf-8 encoding with coding cookie.

	* net/tramp-cache.el:
	* net/tramp-fish.el:
	* net/tramp-ftp.el:
	* net/tramp-gw.el:
	* net/tramp-smb.el: Remove coding cookie.

	* net/tramp.el (tramp-handle-verify-visited-file-modtime):
	Flush buffer file-name's file property.
	(tramp-handle-file-remote-p): The first parameter is FILENAME.

	* net/trampver.el: Update release number.

2007-07-29  Juri Linkov  <juri@jurta.org>

	* dired.el (dired-mode-map): Bind C-x C-q to dired-toggle-read-only.
	Filter out menu item "Edit File Names" `wdired-change-to-wdired-mode'
	when major-mode is not dired-mode.
	(dired-toggle-read-only): New function.
	(dired-recursive-deletes): Remove obsolete comments about old
	default value.
	(dired-do-flagged-delete, dired-do-delete): Refill docstring.

	* wdired.el (wdired-exit): New function.
	(wdired-mode-map): Bind C-x C-q to wdired-exit.

2007-07-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* cus-edit.el (customize-read-group): New fun.
	(customize-group-other-window, customize-face-other-window):
	Prompt before delegating to customize-(group|face).
	Bind pop-up-windows rather than use the other-window argument.
	(customize-group, customize-face): Prompt from the interactive spec.
	Remove args `prompt-for-group' and `other-window'.

	* emacs-lisp/advice.el (ad-interactive-form): Re-introduce.
	(ad-body-forms, ad-advised-interactive-form): Revert this part of
	last change.

2007-07-28  Masatake YAMATO  <jet@gyve.org>

	* vc.el (vc-dired-mode): Add a menu for VC related operation.
	Use backend name as the menu label Suggested by David Kastrup.

2007-07-28  Alan Mackenzie  <acm@muc.de>

	Fix problem with modes derived from CC Mode:
	* progmodes/cc-mode.el (c-make-emacs-variables-local): Move this
	macro to cc-langs.
	(c-init-language-vars-for): Remove call to above macro.
	* progmodes/cc-langs.el (c-make-emacs-variables-local): Macro has
	been moved to here.
	(c-make-init-lang-vars-fun): Call c-make-emacs-variables-local.

2007-07-28  Eli Zaretskii  <eliz@gnu.org>

	* net/trampver.el: Fix the `coding' cookie.

2007-07-28  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el (vc-git-print-log): Support both the old single file
	interface and the new one.

2007-07-28  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (mode-line-remote): Use updated %@ construct.

2007-07-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/cal-bahai.el (calendar-bahai-month-name-array)
	(calendar-bahai-epoch, calendar-bahai-leap-year-p)
	(calendar-bahai-leap-base, calendar-bahai-prompt-for-date)
	(diary-list-bahai-entries, diary-bahai-mark-entries)
	(calendar-bahai-mark-date-pattern, diary-insert-bahai-entry)
	(diary-bahai-insert-monthly-entry, diary-bahai-insert-yearly-entry):
	New names to clean up namespace.
	(list-bahai-diary-entries, mark-bahai-diary-entries)
	(insert-bahai-diary-entry, insert-monthly-bahai-diary-entry)
	(insert-yearly-bahai-diary-entry, mark-bahai-calendar-date-pattern):
	Add compatibility aliases.

	* calendar/appt.el: Don't wrap defvar within eval-when-compile.

	* calendar/cal-move.el (calendar-scroll-left, calendar-scroll-right)
	(calendar-scroll-left-three-months)
	(calendar-scroll-right-three-months): Clean up namespace.
	(scroll-calendar-left, scroll-calendar-right)
	(scroll-calendar-left-three-months)
	(scroll-calendar-right-three-months): Add compatibility aliases.

	* calendar/cal-move.el (calendar-scroll-left, calendar-scroll-right):
	Behave like mouse-scroll-calendar-* when used from the mouse.

	* calendar/cal-menu.el (cal-menu-scroll-menu)
	(cal-menu-global-mouse-menu):
	* calendar/calendar.el (calendar-mode-map):
	Use new calendar-scroll-* names.
	(mouse-scroll-calendar-left, mouse-scroll-calendar-right):
	Remove.  Use calendar-scroll-* directly instead.

2007-07-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/advice.el (ad-interactive-p, ad-interactive-form): Remove.
	(ad-body-forms, ad-advised-interactive-form, ad-make-cache-id)
	(ad-make-advised-definition, ad-cache-id-verification-code):
	Use commandp and interactive-form instead.

2007-07-26  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el: Relicense to GPLv3 or later.
	(vc-directory-exclusion-list, vc-handled-backends): Remove.

	* vc-hooks.el (vc-handled-backends): Add GIT.

	* vc.el (vc-directory-exclusion-list): Add .git.

2007-07-26  Alexandre Julliard  <julliard@winehq.org>

	* vc-git.el (vc-git-revision-table)
	(vc-git-revision-completion-table): New functions.

2007-07-26  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* progmodes/ebnf-abn.el (ebnf-abn-skip-comment):
	* progmodes/ebnf-bnf.el (ebnf-bnf-skip-comment):
	* progmodes/ebnf-dtd.el (ebnf-dtd-skip-comment):
	* progmodes/ebnf-ebx.el (ebnf-ebx-skip-comment):
	* progmodes/ebnf-iso.el (ebnf-iso-skip-comment):
	* progmodes/ebnf-yac.el (ebnf-yac-skip-comment): New version.
	New command actions for EPS header and EPS footer.

	* progmodes/ebnf2ps.el: New command actions for EPS header and EPS
	footer.  Fix some problems with one-or-more, zero-or-more and
	alternative constructions generation.  Some log messages
	implementation.  Doc fix.
	(ebnf-version): New version 4.4.
	(ebnf-eps-header-font, ebnf-eps-header, ebnf-eps-footer-font)
	(ebnf-eps-footer, ebnf-log): New options.
	(ebnf-find-style, ebnf-eps-header-footer, ebnf-eps-header)
	(ebnf-eps-footer, ebnf-eps-string, ebnf-eps-header-footer-comment)
	(ebnf-eps-header-footer-p, ebnf-eps-header-comment)
	(ebnf-eps-footer-comment, ebnf-eps-header-footer-file)
	(ebnf-eps-header-footer-set, ebnf-log-header, ebnf-log): New funs.
	(ebnf-style-custom-list, ebnf-style-database): Put new values.
	(ebnf-print-directory, ebnf-print-file, ebnf-print-buffer)
	(ebnf-print-region, ebnf-spool-directory, ebnf-spool-file)
	(ebnf-spool-buffer, ebnf-spool-region, ebnf-eps-directory)
	(ebnf-eps-file, ebnf-eps-buffer, ebnf-eps-region)
	(ebnf-syntax-directory, ebnf-syntax-file, ebnf-syntax-buffer)
	(ebnf-syntax-region, ebnf-parse-and-sort, ebnf-begin-job)
	(ebnf-dimensions, ebnf-production-dimension, ebnf-terminal-dimension)
	(ebnf-non-terminal-dimension, ebnf-special-dimension)
	(ebnf-terminal-dimension1, ebnf-repeat-dimension)
	(ebnf-except-dimension, ebnf-alternative-dimension)
	(ebnf-optional-dimension, ebnf-one-or-more-dimension)
	(ebnf-zero-or-more-dimension, ebnf-sequence-dimension): Insert log
	message fun.
	(ebnf-setup, ebnf-generate-one-or-more, ebnf-generate-zero-or-more)
	(ebnf-begin-job, ebnf-begin-file, ebnf-eps-finish-and-write)
	(ebnf-insert-ebnf-prologue, ebnf-production-dimension)
	(ebnf-terminal-dimension1, ebnf-alternative-dimension)
	(ebnf-one-or-more-dimension, ebnf-zero-or-more-dimension)
	(ebnf-eps-add-context, ebnf-eps-add-production): Fix code.
	(ebnf-eps-filename, ebnf-trim-right): Replace `?\s' by `?\ ' to keep
	compatibility with Emacs 20 & 21.
	(ebnf-eps-header-comment, ebnf-eps-footer-comment)
	(ebnf-eps-file-alist, ebnf-basic-width-extra)
	(ebnf-basic-empty-height): New vars.
	(ebnf-prologue): Fix PostScript code.
	(ebnf-make-empty, ebnf-make-terminal1, ebnf-make-or-more1)
	(ebnf-make-production, ebnf-make-alternative, ebnf-make-optional)
	(ebnf-make-except, ebnf-make-repeat, ebnf-make-sequence)
	(ebnf-make-dup-sequence, ebnf-token-alternative): Add comments.

2007-07-25  Glenn Morris  <rgm@gnu.org>

	* Relicense all FSF files to GPLv3 or later.

	* COPYING: Switch to GPLv3.

2007-07-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-temp-buffer): Undo last ill-conceived change.
	Replace it with another one which disables undo before calling
	erase-buffer and then turns it back on if needed.

2007-07-24  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Problem with foreground and background color when
	printing a buffer with and without faces.  Reported by Christian
	Schlauer <cs-muelleimer-rubbish.bin@arcor.de>.
	(ps-print-version): New version 6.7.5.
	(ps-default-fg): Change default value to nil, so black color is used
	when a face does not specify a foreground color.
	(ps-default-bg): Change default value to nil, so white color is used
	for background color.
	(ps-begin-job): Fix code.

2007-07-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-revision-completion-table): Temporarily comment out.

2007-07-24  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-tex.el (cal-tex-holidays, cal-tex-diary)
	(cal-tex-rules, cal-tex-buffer, cal-tex-24)
	(cal-tex-cursor-month-landscape, cal-tex-cursor-month)
	(cal-tex-cursor-week, cal-tex-cursor-week2)
	(cal-tex-cursor-week-iso, cal-tex-week-hours)
	(cal-tex-cursor-week-monday, cal-tex-weekly4-box)
	(cal-tex-cursor-filofax-2week, cal-tex-cursor-filofax-week)
	(cal-tex-cursor-filofax-daily, cal-tex-daily-page): Doc fix.

2007-07-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/calendar.el (calendar-mode-map): Move initialization
	into declaration.  Add menu bindings (used to be done in cal-menu).
	(calendar-mode): Don't add an activate-menubar-hook.

	* calendar/cal-menu.el: Break dependency on calendar.el (i.e. do not
	modify calendar-mode-map), use easy-menu, and make sure that C-h k
	can be used on the menu entries.
	(cal-menu-holiday-window-suffix, cal-menu-set-date-title): New funs.
	(cal-menu-moon-menu, cal-menu-diary-menu, cal-menu-holidays-menu)
	(cal-menu-goto-menu, cal-menu-scroll-menu): New consts.
	(cal-menu-context-mouse-menu, cal-menu-global-mouse-menu): New menus.
	(calendar-flatten, cal-menu-update): Remove.
	(calendar-mouse-insert-hebrew-diary-entry)
	(calendar-mouse-insert-islamic-diary-entry)
	(calendar-mouse-insert-bahai-diary-entry):
	Remove (fold into cal-menu-diary-menu).
	(calendar-mouse-2-date-menu, calendar-mouse-cal-tex-menu)
	(cal-tex-mouse-filofax): Remove (fold into cal-menu-context-mouse-menu).
	(calendar-mouse-3-map): Remove (turn into cal-menu-global-mouse-menu).
	(calendar-mouse-view-diary-entries): Minor simplifications.
	(calendar-event-to-date): Use with-current-buffer.

2007-07-25  Nick Roberts  <nickrob@snap.net.nz>

	* add-log.el (change-log-redate): Remove (not needed anymore and
	doesn't appear to work).

2007-07-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* frame.el: Use mapc and dolist instead of mapcar where possible.
	(close-display-connection): New command.

2007-07-25  Alexandre Julliard  <julliard@winehq.org>

	* vc-git.el (vc-git-log-view-mode): Port to the multi-file vc interface.
	(vc-git-create-snapshot, vc-git-retrieve-snapshot): New functions.

2007-07-25  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-multibyte-buffer): Docstring fix.

	* ps-mule.el: Doc fix.
	(ps-multibyte-buffer, ps-mule-font-info-database-default)
	(ps-mule-external-libraries, ps-mule-begin-job): Docstring fix.

2007-07-25  Glenn Morris  <rgm@gnu.org>

	* calendar/cal-tex.el (cal-tex-which-days, cal-tex-holidays)
	(cal-tex-diary, cal-tex-daily-string, cal-tex-daily-start)
	(cal-tex-daily-end, cal-tex-hook)
	(cal-tex-cal-one-month, cal-tex-cal-multi-month)
	(cal-tex-year, cal-tex-cursor-week, cal-tex-cursor-week2)
	(cal-tex-cursor-week-iso, cal-tex-week-hours)
	(cal-tex-cursor-week-monday, cal-tex-weekly4-box)
	(cal-tex-cursor-day, cal-tex-insert-preamble): Doc fix.
	(cal-tex-day-prefix, cal-tex-day-name-format)
	(cal-tex-cal-one-month, cal-tex-cal-multi-month, cal-tex-myday)
	(cal-tex-caldate, cal-tex-LaTeX-hourbox)
	(cal-tex-LaTeX-subst-list): Change from variables to constants.
	(cal-tex-preamble, cal-tex-arg, cal-tex-nl): Simplify with `format'.
	(cal-tex-cursor-filofax-year, cal-tex-weekly4-box): Use \textbf,
	etc, rather than \bf.
	(cal-tex-mini-calendar): Fix typos in previous change.
	(cal-tex-latexify-list): Remove inner let binding.
	(cal-tex-end-document, cal-tex-banner): Use multi-line
	cal-tex-comment.
	(cal-tex-comment): Handle embedded newlines.
	(cal-tex-LaTeXify-string): Use substring-no-properties.

2007-07-25  Joakim Verona  <joakim@verona.se>  (tiny change)

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Add support for the Maden build tool.

2007-07-25  William Xu  <william.xwl@gmail.com>  (tiny change)

	* net/webjump.el (webjump-url-encode): Fix for non-ASCII characters.

2007-07-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-temp-buffer): Disable undo in temp buffers.

2007-07-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* dired.el (dired-mode-map): Bind wdired-change-to-wdired-mode to
	C-x C-q.

	* vc-git.el (vc-git-print-log): Fix previous change.

2007-07-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* window.el (save-selected-window): Minor optimization.
	(bw-adjust-window): If operation failed, try with a smaller delta.
	(window-fixed-size-p): New function.
	(window-area-factor): New var.
	(balance-windows-area): New command.

	* ps-mule.el (ps-multibyte-buffer): Docstring fixes.
	(ps-mule-encode-ethiopic): Make it clear that it's always defined.
	(ps-mule-prepare-font-for-components, ps-mule-encode-header-string)
	(ps-mule-encode-bit, ps-mule-encode-ucs2): Use dotimes.
	(ps-mule-begin-job): Use dolist.

2007-07-24  Michael Albinus  <michael.albinus@gmx.de>

	* subr.el (start-file-process-shell-command)
	(process-file-shell-command): New defuns.

	* progmodes/compile.el (compilation-start):
	Apply `start-file-process-shell-command'.

2007-07-24  Alexandre Julliard  <julliard@winehq.org>

	* vc-git.el (vc-git-checkout, vc-directory-exclusion-list): Fix typos.

2007-07-24  Alan Mackenzie  <acm@muc.de>

	* emacs-lisp/bytecomp.el (byte-compile-from-buffer):
	Initialise byte-compile-unresolved-functions before rather than
	after a compilation.
	(byte-compile-unresolved-functions): Amplify doc string.

2007-07-24  Glenn Morris  <rgm@gnu.org>

	* startup.el (normal-splash-screen): Use `emacs-copyright'.

	* calendar/cal-tex.el (cal-tex-holidays, cal-tex-diary)
	(cal-tex-rules, cal-tex-buffer, cal-tex-24)
	(cal-tex-cursor-month-landscape, cal-tex-cursor-month)
	(cal-tex-cursor-week, cal-tex-cursor-week2)
	(cal-tex-cursor-week-iso, cal-tex-week-hours)
	(cal-tex-cursor-week-monday, cal-tex-weekly4-box)
	(cal-tex-cursor-filofax-2week, cal-tex-cursor-filofax-week)
	(cal-tex-cursor-filofax-daily, cal-tex-daily-page): Doc fix.

	* calendar/cal-tex.el: Remove leading `*' from defcustom docs.
	(cal-tex-daily-string, cal-tex-daily-start, cal-tex-daily-end)
	(cal-tex-day-name-format, cal-tex-cal-one-month)
	(cal-tex-cal-multi-month, cal-tex-myday, cal-tex-preamble)
	(cal-tex-comment, cal-tex-nl, cal-tex-cmd, cal-tex-e-parbox)
	(cal-tex-mini-calendar, cal-tex-em): Doc fix.
	(cal-tex-list-holidays, cal-tex-cursor-year)
	(cal-tex-cursor-year-landscape, cal-tex-year)
	(cal-tex-cursor-filofax-year, cal-tex-cursor-month-landscape)
	(cal-tex-cursor-month, cal-tex-insert-days)
	(cal-tex-insert-day-names, cal-tex-insert-blank-days)
	(cal-tex-first-blank-p, cal-tex-cursor-week)
	(cal-tex-cursor-week2, cal-tex-cursor-week-iso)
	(cal-tex-week-hours, cal-tex-cursor-week-monday)
	(cal-tex-weekly4-box, cal-tex-cursor-filofax-2week)
	(cal-tex-cursor-filofax-week, cal-tex-cursor-filofax-daily)
	(cal-tex-cursor-day, cal-tex-daily-page, cal-tex-mini-calendar)
	(cal-tex-latexify-list, cal-tex-previous-month)
	(cal-tex-next-month, cal-tex-insert-preamble): General tidy-up and
	modernization, including using dotimes rather than
	calendar-for-loop.
	(cal-tex-LaTeX-subst-list): Remove `@'.
	(cal-tex-em, cal-tex-bf, cal-tex-Huge-bf, cal-tex-large-bf):
	Use \textit and \textbf rather than \em and \it.

	* calendar/cal-bahai.el (list-bahai-diary-entries)
	* calendar/cal-hebrew.el (list-hebrew-diary-entries)
	* calendar/cal-islam.el (list-islamic-diary-entries)
	* calendar/calendar.el (generate-calendar, generate-calendar-month)
	* calendar/diary-lib.el (diary-list-entries)
	(mark-calendar-date-pattern): Use `dotimes' rather than
	`calendar-for-loop'.

	* calendar/calendar.el (calendar-for-loop): Doc fix.

2007-07-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* ses.el (ses-cleanup): Prevent Emacs from spuriously checking if the
	underlying file is uptodate.

2007-07-23   Christopher J. Madsen  <cjm@cjmweb.net>

	* replace.el (perform-replace): Use isearch-no-upper-case-p.

2007-07-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el (vc-mode-line-map): New const.
	(vc-mode-line): Use it.

2007-07-23  Alexandre Julliard  <julliard@winehq.org>

	* vc-git.el (vc-git-delete-file, vc-git-rename-file)
	(vc-git-unregister): New functions.
	(vc-git-find-version): Use the result of ls-files as a parameter
	for cat-file.

2007-07-23  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-perl-file-attributes)
	(tramp-perl-directory-files-and-attributes)
	(tramp-handle-file-attributes-with-stat)
	(tramp-handle-directory-files-and-attributes-with-stat)
	(tramp-convert-file-attributes): Handle huge file sizes.

2007-07-23  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-message-function): New variable.
	(isearch-update, isearch-search): Use it.

	* simple.el (goto-history-element): New function created from
	next-history-element.
	(next-history-element): Most code moved to goto-history-element.
	Call goto-history-element with (- minibuffer-history-position n).
	(previous-history-element): Call goto-history-element with (+
	minibuffer-history-position n).
	(minibuffer-setup-hook): Add minibuffer-history-isearch-setup.
	(minibuffer-history-isearch-message-overlay): New buffer-local variable.
	(minibuffer-history-isearch-setup, minibuffer-history-isearch-end)
	(minibuffer-history-isearch-search, minibuffer-history-isearch-message)
	(minibuffer-history-isearch-wrap, minibuffer-history-isearch-push-state)
	(minibuffer-history-isearch-pop-state): New functions.

2007-07-23  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* vc-hooks.el (vc-stay-local-p): Fix bug: Avoid remove-if-not.
	Also, if FILE is a list, return non-nil if any of its elements
	should stay local.  Update docstring.

2007-07-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/copyright.el (copyright-update-year): Fix 2007-05-25
	change by reverting a small part.

2007-07-23  Richard Stallman  <rms@gnu.org>

	* progmodes/octave-inf.el (inferior-octave-prompt): Accept .exe.

2007-07-23  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el (vc-git-checkin): Delete unused parameter and the code
	handling it.  Use vc-git-command.
	(vc-git-find-version, vc-git-diff-tree): New functions.
	(vc-git-revert): Use vc-git-command.
	(vc-git--run-command): Delete.

2007-07-23  Alexandre Julliard  <julliard@winehq.org>

	* vc-git.el (vc-git-workfile-unchanged-p): Update comment.

2007-07-20  Kenichi Handa  <handa@m17n.org>

	* international/utf-8.el (utf-8-post-read-conversion):
	Temporarily bind utf-8-compose-scripts to nil while running
	*-compose-region functions.

2007-07-23  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el: Update status.
	(vc-directory-exclusion-list): Use eval-after-load.

2007-07-22  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (mode-line-remote): New variable.
	(help-echo): Add to default values of mode-line-format.

	* files.el: Mark mode-line-remote as risky.

2007-07-22  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-edit-string): Save old point and
	isearch-other-end to old-point and old-other-end before reading
	the search string from minibuffer.  After exiting minibuffer set
	point to old-other-end if point and the search direction is the
	same as before reading the search string.
	(isearch-del-char): Don't set isearch-yank-flag to t.  Put point
	to isearch-other-end.  Instead of isearch-search-and-update call
	three functions isearch-search, isearch-push-state and isearch-update.

2007-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el (vc-git-register, vc-git-checkin): Use vc-git-command,
	deal with multiple file arguments.
	(vc-git-print-log): Deal with multiple file arguments.

2007-07-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-refine-ignore-spaces-hunk): Rename from
	diff-refine-hunk.  Adjust users.
	(diff-unified-hunk-p, diff-splittable-p): New functions.
	(diff-mode-menu): Use it to disable Split when it doesn't work.

2007-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* diff-mode.el (diff-mode-menu): New entries.

2007-07-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-unified->context): Use the new `apply' undo entry
	if applicable, so as to save undo-log space.

	* diff-mode.el (diff-find-file-name): Add arg `batch'.

	* diff-mode.el (diff-beginning-of-file-and-junk): New function.
	(diff-file-kill): Use it.
	(diff-beginning-of-hunk): Add arg `try-harder' using it.
	(diff-restrict-view, diff-find-source-location, diff-refine-hunk):
	Use it so they find the hunk even when we're in the file header.

2007-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-git.el (vc-git-revision-granularity, vc-git-root)
	(vc-git-command, vc-git-dir-state, vc-git-dired-state-info)
	(vc-git-create-repo): New functions.
	(vc-git-registered): New autoloaded function definition.
	(vc-git-registered): Use vc-git-root.
	(vc-git-responsible-p): New defalias.
	(vc-git-annotate-extract-revision-at-line): Uncomment.
	(vc-git-print-log): Add the file name to the log.
	(vc-git-log-view-mode): New derived mode.
	(vc-git-diff, vc-git-annotate-command): Use vc-git-command.

2007-07-22  Michael Albinus  <michael.albinus@gmx.de>

	* progmodes/grep.el (grep-compute-defaults): Keep default values.

2007-07-22  Ralf Angeli  <angeli@caeruleus.net>

	* textmodes/reftex.el (reftex-access-parse-file): Create parse
	file in a way that does not interfere with recentf mode.
	(reftex-access-parse-file): Do not risk destroying an existing
	buffer.

2007-07-22  Alexandre Julliard  <julliard@winehq.org>

	* vc-git.el: New file.

2007-07-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-script-display): Change default.

2007-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-cvs.el (vc-cvs-mode-line-string): Add support for tooltips
	for branches and new files.

	* vc-hooks.el (vc-default-mode-line-string): Move mouse-face and
	local-map handling ...
	(vc-mode-line): ... here.  Improve handling of help-echo.

	* vc.el (mode-line-string): Document help-echo usage.

2007-07-22  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.1.10.

	* net/tramp.el (tramp-get-ls-command): Fyx typo.

	* net/trampver.el: Update release number.

2007-07-22  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* startup.el (command-line-x-option-alist): Use x-handle-no-bitmap-icon.

	* term/x-win.el (x-handle-no-bitmap-icon): New function.

2007-07-22  Martin Rudalics  <rudalics@gmx.at>

	* add-log.el (change-log-fill-parenthesized-list): New function.
	(change-log-indent): Call change-log-fill-parenthesized-list.
	(change-log-fill-paragraph): Bind fill-indent-according-to-mode to t.
	Have lines with leading asterisk start a paragraph.

2007-07-21  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-math.el (math-emacs-precision)
	(math-largest-emacs-expt, math-smallest-emacs-expt):
	New variables.
	(math-use-emacs-fn): New function.
	(math-exp-raw): Evaluate with `math-use-emacs-fn', when
	appropriate.

2007-07-21  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* image-dired.el (image-dired-sane-db-file): New func.
	(image-dired-write-tags, image-dired-remove-tag)
	(image-dired-list-tags, image-dired-write-comments)
	(image-dired-get-comment, image-dired-mark-tagged-files)
	(image-dired-create-gallery-lists): Call new func.
	Reported by Dieter Wilhelm <dieter@duenenhof-wilhelm.de>.

2007-07-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-dir-state): Fix loop.
	(vc-hg-print-log): Fix expected return value for vc-hg-command.
	(vc-hg-next-version, vc-hg-delete-file, vc-hg-rename-file)
	(vc-hg-register, vc-hg-create-repo, vc-hg-checkin)
	(vc-hg-revert): Likewise.
	(vc-hg-revision-table, vc-hg-revision-completion-table): New
	functions.

2007-07-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* add-log.el (change-log-resolve-conflict): Don't lose data if the
	merge fails.

2007-07-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/compile.el (compilation-auto-jump-to-first-error):
	Add group and version.

2007-07-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* add-log.el (add-log-file-name): Use file-relative-name.
	(add-change-log-entry): Delay reading
	add-log-(full-name|mailing-address) to after we've switched to the
	ChangeLog buffer so we get the right value.
	(add-change-log-entry, add-log-current-defun, change-log-merge):
	Use derived-mode-p rather than checking major-mode directly.

	* pcvs.el (cvs-mode-add-change-log-entry-other-window): Use a directory
	name for buffer-file-name if it refers to a directory.

	* vc-arch.el (vc-arch-diff): Fix last change.

	* progmodes/compile.el (compilation-start): Remember the original
	directory in a buffer-local compilation-directory.
	(compile): Set the global value of compilation-directory.
	(recompile): Use compilation-directory even in the compilation buffer.

2007-07-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-diff): Use vc-hg-command.

2007-07-20  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Problem with foreground and background color when
	printing a buffer with and without faces.  Reported by Christian
	Schlauer <cs-muelleimer-rubbish.bin@arcor.de>.
	(ps-print-version): New version 6.7.5.
	(ps-default-fg): Change default value to nil, so black color is used
	when a face does not specify a foreground color.
	(ps-default-bg): Change default value to nil, so white color is used
	for background color.
	(ps-begin-job): Fix code.

2007-07-20  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (install-lisp-SH): Don't create subdirectories
	in $(INSTALL_DIR)/lisp/ if they already exist.

2007-07-20  Dhruva Krishnamurthy  <dhruvakm@gmail.com>  (tiny change)

	* makefile.w32-in (install-lisp-CMD): Don't create subdirectories
	in $(INSTALL_DIR)/lisp/ if they already exist.

2007-07-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/vera-mode.el (vera-re-search-forward)
	(vera-re-search-backward): Remove use of store-match-data.
	(vera-mode-map): Move initialization into declaration.

	* progmodes/flymake.el (flymake-buildfile-dirs): Remove.
	(flymake-find-buildfile): Use locate-dominating-file.

	* vc.el (vc-delistify): Use mapconcat.
	(vc-do-command): Minor simplification.
	(vc-expand-dirs): Use push.

	* vc-mcvs.el (vc-mcvs-create-repo):
	* vc-cvs.el (vc-cvs-create-repo): Remove.

	* vc-hooks.el (vc-find-root): Fix case where `file' is the current
	directory and the root as well.

2007-07-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hooks.el (vc-default-workfile-unchanged-p): Pass a list
	instead of a file.

	* vc-hg.el (vc-hg-print-log): Deal with multiple file arguments.
	(vc-hg-registered): Replace if with when.
	(vc-hg-state): Deal with nonexistent files and handle removed files.
	(vc-hg-dir-state, vc-hg-dired-state-info): New functions.
	(vc-hg-checkout): Re-enable.
	(vc-hg-create-repo): Fix typos.
	(vc-hg-print-log): Fix for multiple files.
	(vc-hg-workfile-unchanged-p): New function.

	* vc.el: Fix typo.
	(vc-print-log): Fix call to print-log.
	(vc-default-comment-history): Likewise.
	(vc-directory-exclusion-list): Add .hg and .bzr.
	(vc-diff-internal): Pass a list instead of a file.

	* vc-mcvs.el (vc-mcvs-create-repo): Fix typos.

	* vc-bzr.el (vc-bzr-create-repo): New function.

2007-07-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el (vc-find-root): Walk up the tree to find an existing
	`file' from which to start the search.

2007-07-19  Eric S. Raymond  <esr@snark.thyrsus.com>

	* vc-cvs.el: vc-cvs-checkin had some reference problems, now fixed.

2007-07-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (locate-dominating-file): New function.

2007-07-18  Michael Albinus  <michael.albinus@gmx.de>

	* progmodes/grep.el (grep-host-defaults-alist): New defvar.
	(grep-compute-defaults): Use it.

2007-07-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* uniquify.el: Docstring fixes.

2007-07-18  Eric S. Raymond  <esr@snark.thyrsus.com>

	* vc-hooks.el: Generalize stay-local-p to operate on lists of
	files.  Change two keybindings to point to new function names.
	* vc-arch.el, vc-bzr.el, vc-cvs.el, vc-hg.el, vc-mcvs.el, vc-rcs.el,
	vc-sccs.el, vc-svn.el: These now implement the NewVC-fileset.
	* vc.el: Adapted for NewVC-fileset, but no functional changes yet.

2007-07-18  Juanma Barranquero  <lekktu@gmail.com>

	* follow.el (follow-mode-hook, follow-mode-off-hook, follow-mode)
	(follow-delete-other-windows-and-split, follow-recenter)
	(follow-windows-aligned-p, follow-point-visible-all-windows-p)
	(follow-redisplay, follow-estimate-first-window-start)
	(follow-xemacs-scrollbar-support, follow-intercept-process-output):
	Fix typos in docstrings.

2007-07-18  Martin Rudalics  <rudalics@gmx.at>

	* add-log.el (change-log-mode): Use fill-nobreak-predicate to
	avoid that filling introduces lines with a single asterisk.

	* kmacro.el (kmacro-end-macro): When ignoring empty macro
	avoid incorrect kmacro-ring-empty-p messages.
	Reported by Michael Schierl <schierlm@gmx.de>.

2007-07-17  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc.el: Add more info about the vc-registered function.

2007-07-17  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (file-remote-p): Introduce optional parameter
	IDENTIFICATION.

	* recentf.el (recentf-keep-default-predicate): Adapt call of
	`file-remote-p'.

	* progmodes/grep.el (grep-probe): Use `process-file'.
	(grep-compute-defaults): Handle variables host specific.

	* net/ange-ftp.el (ange-ftp-file-remote-p): Handle optional
	parameter IDENTIFICATION.

	* net/tramp.el (tramp-handle-file-remote-p): Handle optional
	parameter IDENTIFICATION.
	(tramp-handle-set-file-times): New defun.  Replaces `tramp-touch'.
	(tramp-file-name-handler-alist, tramp-file-name-for-operation):
	Add entry for `set-file-times'.
	(tramp-do-copy-or-rename-file-via-buffer)
	(tramp-do-copy-or-rename-file-out-of-band): Use `set-file-times'.
	(tramp-handle-unhandled-file-name-directory): Rewrite.
	(tramp-convert-file-attributes): Add error handling when inode is
	extraordinary big.
	(tramp-get-inode): Change parameter from FILE to VEC.
	(tramp-handle-start-file-process): Use (current-buffer) if BUFFER
	is nil.  This is according to the specification.  Goto (point-max)
	when ready.
	(tramp-handle-shell-command): Rewrite completely, using
	`process-file' and `start-file-process'.
	(tramp-methods, tramp-find-shell)
	(tramp-open-connection-setup-interactive-shell)
	(tramp-maybe-open-connection): Guard against $PROMPT_COMMAND shell
	var.  Reported by Steve Youngs <steve@sxemacs.org>.

	* net/tramp-fish.el (tramp-fish-file-name-handler-alist): Add
	entry for `set-file-times'.  Rename `start-process' into
	`start-file-process'.  Remove `call-process' entry.
	(tramp-fish-handle-set-file-times): New defun.
	(tramp-fish-handle-executable-find): Use `process-file'.
	(tramp-fish-handle-process-file): New defun.  Replaces
	`tramp-fish-handle-call-process'.
	(tramp-fish-do-copy-or-rename-file-directly): Use
	`set-file-times'.
	(tramp-fish-get-file-entries): Change `tramp-get-inode' parameter.

	* net/tramp-smb.el (tramp-smb-handle-file-attributes): Change
	`tramp-get-inode' parameter.

2007-07-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-bzr.el (vc-bzr-version, vc-bzr-at-least-version)
	(vc-bzr-post-command-function): Remove.  Version 0.8 is already old
	nowadays, and by the time Emacs-23 comes out, nobody will even remember
	it has ever existed.

2007-07-17  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc.el: Undo previous change.

2007-07-16  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (clean): Don't delete *~.

2007-07-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-verbatim-environments):
	Add safe-local-variable property.
	(tex-font-lock-syntactic-keywords): Lookup tex-verbatim-environments
	when starting font-lock rather than when loading tex-mode.el.

	* progmodes/sh-script.el (sh-font-lock-quoted-subshell): Skip over the
	whole $( rather than just the $.  Rename from sh-quoted-subshell.
	(sh-font-lock-syntactic-keywords): Adjust call accordingly.

2007-07-16  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* bookmark.el (bookmark-maybe-sort-alist): Don't modify
	bookmark-alist.  Instead, if not sorting, simply return it.
	(bookmark-bmenu-list): Call bookmark-maybe-sort-alist
	for its return value, not for its side effect.

	* emacs-lisp/lisp-mode.el (calculate-lisp-indent): In the
	case of alignment under a constant symbol, find and consider
	the sexp actually at indentation to be the "last sexp".

2007-07-16  Drew Adams  <drew.adams@oracle.com>

	* mouse.el (mouse-yank-secondary): Better error message if no
	secondary selection.

2007-07-16  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hooks.el (vc-handled-backends): Move BZR later in the list.

	* term/xterm.el (xterm-turn-on-modify-other-keys)
	(xterm-turn-off-modify-other-keys): New functions.
	(terminal-init-xterm): Enable the modifyOtherKeys feature if the
	terminal supports it.

2007-07-16  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* bookmark.el (bookmark-show-all-annotations):
	Make sure each inserted annotation ends with newline.

2007-07-15  Richard Stallman  <rms@gnu.org>

	* kmacro.el (kmacro-bind-to-key): Avoid comparisons on function keys.

	* tutorial.el (tutorial--find-changed-keys):
	Handle C-x specially like ESC.

2007-07-15  Aaron Hawley  <aaronh@garden.org>

	* tar-mode.el (tar-get-descriptor): No error for zero-length file.

2007-07-15  Juri Linkov  <juri@jurta.org>

	* delsel.el (delete-selection-pre-hook):
	* emulation/cua-base.el (cua-paste): Before a yank command,
	check also whether last-command is one of mouse-save-then-kill,
	mouse-secondary-save-then-kill, mouse-set-region, mouse-drag-region.

2007-07-15  Michael Albinus  <michael.albinus@gmx.de>

	* recentf.el (recentf-keep-default-predicate): New defun.
	(recentf-keep): Use it as initial value.

2007-07-15  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el: Revert revision 1.90 (commitid mWoPbju3pgNotDps),
	thus restoring bookmark bindings to three slots under C-x r.  See
	http://lists.gnu.org/archive/html/emacs-devel/2007-07/msg00705.html.

2007-07-15  Jeff Miller  <jmiller@cablespeed.com>  (tiny change)

	* calendar/calendar.el (calendar-goto-bahai-date): Autoload it.

2007-07-15  Jason Rumney  <jasonr@gnu.org>

	* w32-fns.el (set-default-process-coding-system): Use dos line ends
	for input to cmdproxy on all versions of Windows.
	Use dos line ends for input to plink.

	* comint.el (comint-simple-send): Concat newline before sending.
	(comint-password-prompt-regexp): Recognize plink's passphrase prompt.

2007-07-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (generated-autoload-file): Autoload the
	safe-local-variable setting.

2007-07-14  David Kastrup  <dak@gnu.org>

	* emacs-lisp/advice.el (defadvice): Doc fix.

2007-07-14  Juanma Barranquero  <lekktu@gmail.com>

	* subr.el (when, unless): Doc fix.

2007-07-13  Dan Nicolaescu  <dann@ics.uci.edu>

	* replace.el (match): Use yellow1 instead of yellow.

	* progmodes/gdb-ui.el (breakpoint-enabled): Use red1 instead of red.

	* pcvs-info.el (cvs-unknown): Likewise.

2007-07-13  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (install-lisp-SH, install-lisp-CMD): New targets.
	(install): Use them to copy all *.el files before *.elc.

2007-07-13  Drew Adams  <drew.adams@oracle.com>

	* bookmark.el (bookmark-jump-other-window): New function.
	(bookmark-map): Bind it to "o".

	http://lists.gnu.org/archive/html/emacs-devel/2007-07/msg00633.html
	and its thread contains discussion about this change.
	The original patch was slightly tweaked by Karl Fogel
	<kfogel@red-bean.com> before committing.

2007-07-13  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el: Shorten some comments to fit within 80 lines.

2007-07-13  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el: Don't define bookmark keys under the "C-xr" map;
	instead, make "C-xp" a prefix for bookmark-map.  Patch by Drew
	Adams <drew.adams@oracle.com>, mildly tweaked by me.  See
	http://lists.gnu.org/archive/html/emacs-devel/2007-07/msg00633.html.

2007-07-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el: Bug fixes.
	(org-end-of-line): Move to end of line if in headline without tags.

2007-07-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el: Remove spurious * in docstrings.
	(vc-handled-backends): Add BZR.

	* vc-hooks.el (vc-find-file-hook): Use with-demoted-errors.

2007-07-12  Davis Herring  <herring@lanl.gov>

	* desktop.el (desktop-buffer-info, desktop-save):
	Use `desktop-dirname' instead of `dirname'.

2007-07-12  Paul Pogonyshev  <pogonyshev@gmx.net>

	* progmodes/which-func.el (which-func-modes): Add `python-mode'.

	* progmodes/python.el (python-which-func-length-limit): New var.
	(python-which-func): New function.
	(python-current-defun): Add optional `length-limit' and try to fit
	computed function name to that length.
	(python-mode): Hook `python-which-func' up.

2007-07-12  Sean O'Rourke  <sorourke@cs.ucsd.edu>  (tiny change)

	* pcomplete.el (pcomplete-entries): Obey pcomplete-ignore-case.

	* comint.el (comint-dynamic-complete-as-filename):
	Use read-file-name-completion-ignore-case.

2007-07-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* comint.el (comint-dynamic-list-filename-completions):
	Use read-file-name-completion-ignore-case.

	* vc-cvs.el: Require CL.
	(vc-cvs-revision-table, vc-cvs-revision-completion-table):
	New functions to provide completion of revision names.

	* vc-cvs.el (vc-functions): Clear up the cache when reloading the file.
	(vc-cvs-annotate-first-line-re): New const.
	(vc-cvs-annotate-process-filter): New fun.
	(vc-cvs-annotate-command): Use them and run the command asynchronously.

2007-07-12  Paul Pogonyshev  <pogonyshev@gmx.net>

	* emacs-lisp/eldoc.el (eldoc-last-data): Revise documentation.
	(eldoc-print-current-symbol-info): Adjust for changed helper
	function signatures.
	(eldoc-get-fnsym-args-string): Add `args' argument.  Use new
	`eldoc-highlight-function-argument'.
	(eldoc-highlight-function-argument): New function.
	(eldoc-get-var-docstring): Format documentation with
	`font-lock-variable-name-face'.
	(eldoc-docstring-format-sym-doc): Add `face' argument and apply it
	where suited.
	(eldoc-fnsym-in-current-sexp): Return a list with argument index.
	(eldoc-beginning-of-sexp): Return number of skipped sexps.

2007-07-11  Michael Albinus  <michael.albinus@gmx.de>

	* progmodes/compile.el (compilation-start): `start-process' must
	still be redefined when calling `start-process-shell-command'.

	* progmodes/gud.el (gud-file-name): When `default-directory' is a
	remote file name, prepend its remote part to the filename.
	(gud-common-init): When `default-directory' is a remote file name,
	make the filename relative to it.
	Based on a patch by Nick Roberts <nickrob@snap.net.nz>.

2007-07-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hooks.el (vc-default-mode-line-string): Add a mouse face,
	mouse binding and a tooltip.

2007-07-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* menu-bar.el (vc-menu-map): New defalias.

2007-07-10  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (eval-defun):
	Explain special handling of `defface'.

2007-07-10  Jim Meyering  <jim@meyering.net>  (tiny change)

	* emacs-lisp/copyright.el (copyright-current-gpl-version): Set to 3.

	* autoinsert.el (auto-insert-alist): s/2/3/ in the generated comment.

2007-07-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/cl.el: Load cl-loaddefs.el quietly.

	* vc-arch.el (vc-arch-complete): Remove.
	(vc-arch-revision-completion-table): Use complete-with-action.

	* subr.el (condition-case-no-debug, with-demoted-errors): New macros.
	(complete-with-action): New function.
	(dynamic-completion-table): Use it.

2007-07-10  Michael Albinus  <michael.albinus@gmx.de>

	* comint.el (make-comint, make-comint-in-buffer)
	(comint-exec-1): Replace `start-process' by `start-file-process'.

	* progmodes/compile.el (compilation-start): Revert redefining
	`start-process'.

2007-07-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (autoload-generate-file-autoloads): Be careful
	with EOLs when generating MD5 checksums.

	* follow.el: Don't change the global map from the follow-mode-map
	defvar, but from the toplevel.  Use easy-menu to unify the Emacs and
	XEmacs code.
	(turn-on-follow-mode, turn-off-follow-mode): Remove interactive spec
	since `follow-mode' should be used instead for that.

	* emacs-lisp/easymenu.el (easy-menu-binding): New function.
	(easy-menu-do-define): Use it.
	(easy-menu-do-add-item): Inline into easy-menu-add-item and then remove.

	* progmodes/compile.el (compilation-auto-jump-to-first-error)
	(compilation-auto-jump-to-next): New vars.
	(compilation-auto-jump): New function.
	(compilation-error-properties): Use them to jump to first error.
	(compilation-start): Set the var if requested.

	* emacs-lisp/autoload.el (update-directory-autoloads): Remove
	duplicates without also removing entries from other directories.

2007-07-10  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-day-view, org-agenda-week-view):
	Remember span as default.
	(org-columns-edit-value): Rename from `org-column-edit'.
	(org-columns-display-here-title): Rename from
	`org-overlay-columns-title'.
	(org-columns-remove-overlays): Rename from org-remove-column-overlays.
	(org-columns-get-autowidth-alist): Rename from
	`org-get-columns-autowidth-alist'.
	(org-columns-display-here): Rename from `org-overlay-columns'.
	(org-columns-new-overlay): Rename from `org-new-column-overlay'.
	(org-columns-quit): Rename from `org-column-quit'.
	(org-columns-show-value): Rename from `org-column-show-value'.
	(org-columns-content, org-columns-widen)
	(org-columns-next-allowed-value)
	(org-columns-edit-allowed, org-columns-store-format)
	(org-columns-uncompile-format, org-columns-redo)
	(org-columns-edit-attributes, org-delete-property)
	(org-set-property, org-columns-update)
	(org-columns-compute, org-columns-eval)
	(org-columns-not-in-agenda, org-columns-compute-all)
	(org-property-next-allowed-value)
	(org-columns-compile-format)
	(org-fill-paragraph-experimental)
	(org-string-to-number, org-property-action)
	(org-columns-move-left, org-columns-new)
	(org-column-number-to-string)
	(org-property-previous-allowed-value)
	(org-at-property-p, org-columns-delete)
	(org-columns-previous-allowed-value)
	(org-columns-move-right, org-columns-narrow)
	(org-property-get-allowed-values)
	(org-verify-version, org-column-string-to-number)
	(org-delete-property-globally): New functions.
	(org-columns-current-fmt): Rename from `org-current-columns-fmt'.
	(org-columns-overlays): Rename from `org-column-overlays'.
	(org-columns-map): Rename from `org-column-map'.
	(org-columns-current-maxwidths): Rename from
	`org-current-columns-maxwidths'.
	(org-columns-begin-marker, org-columns-current-fmt-compiled)
	(org-previous-header-line-format)
	(org-columns-inhibit-recalculation)
	(org-columns-top-level-marker): New variables.
	(org-columns-default-format): Rename from `org-default-columns-format'.
	(org-property-re): New constant.

2007-07-10  Guanpeng Xu  <herberteuler@hotmail.com>

	* subr.el (looking-at-p, string-match-p): New functions.

2007-07-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* textmodes/tex-mode.el (tex-fontify-script)
	(tex-font-script-display): New variables to make display of
	superscripts and subscripts customizable.
	(tex-font-lock-suscript, tex-font-lock-match-suscript): Use them.

2007-07-09  Richard Stallman  <rms@gnu.org>

	* isearch.el (isearch-edit-string): Call to isearch-push-state
	after the search.

2007-07-09  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* window.el (fit-window-to-buffer): Remove setting of window-min-height
	to 1 as enlarge-window uses the value to resize/shrink windows other
	than WINDOW if needed.

2007-07-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* cus-start.el (file-coding-system-alist): Fix custom type.

2007-07-08  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-wrap-region): Avoid marking buffer as
	modified.
	(longlines-auto-wrap, longlines-window-change-function):
	Remove unnecessary calls to set-buffer-modified-p.

2007-07-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* cus-start.el (file-coding-system-alist): Fix custom type.

2007-07-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-cvs.el (vc-cvs-revert): Use vc-default-revert.
	(vc-cvs-checkout): Remove last arg now unused; simplify.

2007-07-08  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (file-remote-p): Introduce optional parameter CONNECTED.

	* net/tramp.el:
	* net/tramp-ftp.el:
	* net/tramp-smb.el:
	* net/tramp-uu.el:
	* net/trampver.el: Migrate to Tramp 2.1.

	* net/tramp-cache.el:
	* net/tramp-fish.el:
	* net/tramp-gw.el: New Tramp packages.

	* net/tramp-util.el:
	* net/tramp-vc.el: Removed.

	* net/ange-ftp.el: Add ange-ftp property to 'start-file-process
	(ange-ftp-file-remote-p): Handle optional parameter CONNECTED.

	* net/rcompile.el (remote-compile): Handle Tramp 2.1 arguments.

	* progmodes/compile.el (compilation-start): Redefine
	`start-process' temporarily when `default-directory' is remote.
	Remove case of synchronous compilation, this won't happen ever.
	(compilation-setup): Make local variable `comint-file-name-prefix'
	for remote compilation.

2007-07-08  Martin Rudalics  <rudalics@gmx.at>

	* novice.el (disabled-command-function): Fit window to buffer to
	make last line visible.
	Reported by Stephen Berman <Stephen.Berman at gmx.net>.

	* mouse.el (mouse-drag-track): Reset transient-mark-mode to nil
	when handling the terminating event.

2007-07-07  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (math-read-number-simple): Remove leading 0s.
	(math-bignum-digit-length): Change to optimal value.

	* calc/calc-bin.el (math-bignum-logb-digit-size)
	(math-bignum-digit-power-of-two): Evaluate when compiled.

	* calc/calc-comb.el (math-small-factorial-table)
	(math-init-random-base, math-prime-test): Remove unnecessary calls
	to `math-read-number-simple'.

	* calc/calc-ext.el (math-approx-pi, math-approx-sqrt-e)
	(math-approx-gamma-const): Add docstrings.

	* calc/calc-forms.el (math-julian-date-beginning)
	(math-julian-date-beginning-int): New constants.
	(math-format-date-part, math-parse-standard-date, calcFunc-julian):
	Use the new constants.

	* calc/calc-funcs.el (math-gammap1-raw): Add docstring.

	* calc/calc-math.el (math-approx-ln-10, math-approx-ln-2):
	Add docstrings.

2007-07-07  Tom Tromey  <tromey@redhat.com>

	* vc.el (vc-annotate): Jump to line and output message only after the
	process is really all done.

2007-07-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-exec-after): Don't move point from the sentinel.
	Forcefully read all the remaining text in the pipe upon process exit.
	(vc-annotate-display-autoscale, vc-annotate-lines):
	Don't stop at the first unrecognized line.
	(vc-annotate-display-select): Run autoscale after the process is done
	since it depends on the whole result.

2007-07-07  Eli Zaretskii  <eliz@gnu.org>

	* term/w32-win.el (menu-bar-open): New function.
	Bind <f10> to it.

2007-07-07  Michael Albinus  <michael.albinus@gmx.de>

	* simple.el (start-file-process): New defun.

2007-07-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (find-file-confirm-nonexistent-file): Rename from
	find-file-confirm-inexistent-file.  Update users.

	* emacs-lisp/autoload.el (autoload-find-destination): Understand a new
	format of autoload block where the file's time-stamp is replaced by its
	MD5 checksum.
	(autoload-generate-file-autoloads): Use MD5 checksum instead of
	time-stamp for secondary autoloads files.
	(update-directory-autoloads): Remove duplicate entries.
	Use time-less-p for time-stamps, as done in autoload-find-destination.

2007-07-07  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (math-read-number): Replace number by variable.
	(math-read-number-simple): Properly parse small integers.

2007-07-07  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc.el: Fix doc for the checkout function.

2007-07-06  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-root): New function.
	(vc-hg-registered): Use it.
	(vc-hg-diff-tree): New defalias.
	(vc-hg-responsible-p): Likewise.
	(vc-hg-checkout): Comment out, not needed.
	(vc-hg-delete-file, vc-hg-rename-file, vc-hg-could-register)
	(vc-hg-find-version, vc-hg-next-version): New functions.

2007-07-06  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/lisp-mode.el (eval-last-sexp): Avoid introducing any
	dynamic bindings around the evaluation of the expression.
	Reported by Jay Belanger <jay.p.belanger@gmail.com>.

2007-07-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* autorevert.el (auto-revert-tail-handler): Use inhibit-read-only.
	Run before-revert-hook.  Suggested by Denis Bueno <denbuen@sandia.gov>.
	Use run-hooks rather than run-mode-hooks.

2007-07-05  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-comb.el (math-random-digit): Rename to
	`math-random-three-digit-number'.
	(math-random-digits): Don't depend on representation of integer.

	* calc/calc-bin.el (math-bignum-logb-digit-size)
	(math-bignum-digit-power-of-two): New constants.
	(math-and-bignum, math-or-bignum, math-xor-bignum, math-diff-bignum)
	(math-not-bignum, math-clip-bignum): Use the constants
	`math-bignum-digit-power-of-two' and `math-bignum-logb-digit-size'
	instead of their values.
	(math-clip): Use math-small-integer-size instead of its value.

	* calc/calc.el (math-add-bignum): Replace number by constant.

2007-07-05  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-documentation-string-value-create):
	Insert indentation spaces.

2007-07-05  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* emacs-lisp/byte-opt.el: Revert last change.

2007-07-05  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hooks.el (vc-handled-backends): Add HG.

	* vc-hg.el (vc-handled-backends): Remove, done in vc-hooks.el now.

2007-07-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* complete.el (PC-do-complete-and-exit): Add support for the new
	`confirm-only' confirmation mode.

2007-07-05  Chong Yidong  <cyd@stupidchicken.com>

	* cus-edit.el (custom-commands): New variable.
	(custom-tool-bar-map): New variable.  Initialize using
	`custom-commands'.
	(custom-mode): Use `custom-tool-bar-map'.
	(custom-buffer-create-internal): Insert action buttons only if
	tool bar is not used.  Use `custom-commands'.
	(Custom-help, custom-command-apply): New function.
	(custom-command-apply, Custom-set, Custom-save)
	(Custom-reset-current, Custom-reset-saved, Custom-reset-standard):
	Use `custom-command-apply' instead of duplicating code.
	(customize-group-other-window): Call `customize-group' instead of
	duplicating code.
	(customize-face-other-window): Call `customize-face' instead of
	duplicating code.
	(customize-group, customize-face): Add optional args for opening
	in another window.
	(custom-variable-tag): Don't inherit `variable-pitch' face.
	(custom-group-tag): Inherit `variable-pitch' face.
	(custom-variable-value-create): Set documentation indentation.
	(custom-group-value-create): Make group name a link, instead of
	using an extra "go to group" button.
	(custom-prompt-variable, custom-group-set, custom-group-save)
	(custom-group-reset-current, custom-group-reset-saved)
	(custom-group-reset-standard): Minor cleanup.

2007-07-05  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* Makefile.in (bootstrap-prepare): When copying from
	ldefs-boot.el, make sure loaddefs.el is writeable.

	(bootstrap-prepare): Make $(lisp)/ps-print.el
	and $(lisp)/emacs-lisp/cl-loaddefs.el writable, as well.

2007-07-05  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-internal-status): Inline in `vc-hg-state', the
	only caller, and delete.
	(vc-hg-state): Deal with exceptions and only parse the output on
	successful return.
	(vc-hg-internal-log): Inline in `vc-hg-workfile-version', the only
	caller, and delete.
	(vc-hg-workfile-version): Deal with exceptions and only parse the
	output on successful return.
	(vc-hg-revert): New function.

2007-07-04  Jay Belanger  <jay.p.belanger@gmail.com>

	* calculator.el (calculator-expt): Use more cases to determine
	the value.

2007-07-03  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/gud.el (auto-mode-alist): Match more valid gdb init
	file names.

2007-07-03  Jay Belanger  <jay.p.belanger@gmail.com>

	* calculator.el (calculator-expt, calculator-integer-p):
	New functions.
	(calculator-fact): Check to see if the factorial will be too
	large before computing it.
	(calculator-initial-operators): Use `calculator-expt' to
	compute "^".
	(calculator-mode): Mention that results which are too large
	will return inf.
	* calc/calc-comb.el (math-small-factorial-table): Replace list
	by vector.

2007-07-03  David Kastrup  <dak@gnu.org>

	* shell.el: On request of the authors, remove their addresses for
	the sake of bug reports, and add the developer list address as
	maintainer information.

2007-07-03  Richard Stallman  <rms@gnu.org>

	* files.el (make-directory): Doc fix.
	(find-file-confirm-inexistent-file): Make it a defcustom.
	Make nil the default.

2007-07-02  Richard Stallman  <rms@gnu.org>

	* startup.el (command-line): Set buffer-offer-save in *scratch*
	and enable auto-save in it.

2007-07-02  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (orgstruct-mode-map): New variable.
	(orgstruct-mode): New minor mode.
	(turn-on-orgstruct, orgstruct-error, orgstruct-setup)
	(orgstruct-make-binding, org-context-p, org-get-local-variables)
	(org-run-like-in-org-mode): New functions.
	(org-cycle-list-bullet): New command.
	(org-special-properties, org-property-start-re)
	(org-property-end-re): New constants.
	(org-with-point-at): New macro.
	(org-get-property-block, org-entry-properties, org-entry-get)
	(org-entry-delete, org-entry-get-with-inheritance)
	(org-entry-put, org-buffer-property-keys): New functions.
	(org-insert-property-drawer): New command.
	(org-entry-property-inherited-from): New variable.
	(org-column): New face.
	(org-column-overlays, org-current-columns-fmt)
	(org-current-columns-maxwidths, org-column-map): New variables.
	(org-column-menu): New menu.
	(org-new-column-overlay, org-overlay-columns)
	(org-overlay-columns-title, org-remove-column-overlays)
	(org-column-show-value, org-column-quit, org-column-edit): New
	functions.
	(org-columns, org-agenda-columns): New commands.
	(org-get-columns-autowidth-alist): New functions.
	(org-properties): New customize group.
	(org-default-columns-format): New option.
	(org-priority): Realign tags after changing priority.
	(org-preserve-lc): New macro.
	(org-update-checkbox-count): Catch case when there is no headline.
	(org-agenda-quit): Remove any column overlays.
	(org-beginning-of-item-list): Fixed bug when non-item line is
	indented too deep.
	(org-cached-props): New variable.
	(org-cached-entry-get): New function.
	(org-make-tags-matcher): Handle property matches.
	(org-table-recalculate): Swap evaluation order: Field formula
	first, then column formulas, but don't allow them to overwrite the
	field formulas.
	(org-table-eval-formula): New argument untouchable.
	(org-table-put-field-property): New function.

2007-07-02  Martin Rudalics  <rudalics@gmx.at>

	* help-mode.el (help-make-xrefs): Skip spaces too when
	skipping tabs.

	* ffap.el (dired-at-point-prompter): Improve prompt in
	list-directory case.

2007-07-01  Richard Stallman  <rms@gnu.org>

	* files.el (find-file-visit-truename): Fix safe-local-variable value.

2007-07-01  Richard Stallman  <rms@gnu.org>

	* cus-start.el (max-mini-window-height): Added.

2007-07-01  Sean O'Rourke  <sorourke@cs.ucsd.edu>  (tiny change)

	* complete.el (partial-completion-mode): Remove advice of
	read-file-name-internal.
	(PC-do-completion): Rebind minibuffer-completion-table.
	(PC-read-file-name-internal): New function doing what
	read-file-name-internal advice did.

2007-07-01  Paul Pogonyshev  <pogonyshev@gmx.net>

	* emacs-lisp/byte-opt.el: Set `binding-is-magic'
	property on a few symbols.
	(byte-compile-side-effect-free-dynamically-safe-ops): New defconst.
	(byte-optimize-lapcode): Remove bindings that are not referenced
	and certainly will not effect through dynamic scoping.

2007-07-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (find-file-confirm-inexistent-file): New var.
	(find-file, find-file-other-window, find-file-other-frame)
	(find-file-read-only, find-file-read-only-other-window)
	(find-file-read-only-other-frame): Use it.

2007-06-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/rx.el (rx-constituents): Fix up `anything'.

2007-06-29  Juanma Barranquero  <lekktu@gmail.com>

	* generic-x.el (generic-define-mswindows-modes)
	(generic-define-unix-modes, apache-log-generic-mode)
	(bat-generic-mode-keymap, java-manifest-generic-mode)
	(show-tabs-generic-mode): Fix typos in docstrings.

2007-06-29  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-server-alist): Rename from rcirc-connections.
	(rcirc-default-full-name): Rename from rcirc-default-user-full-name.
	(rcirc-clear-activity): Make sure RCIRC-ACTIVITY isn't modified.
	(rcirc-print): Never ignore messages from ourself.

2007-06-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (lisp-font-lock-keywords-2): Recognize the new \(?1:..\)
	syntax as well.  Reported by Juri Linkov <juri@jurta.org>.

2007-06-28  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* dnd.el (dnd-get-local-file-name): Set fixcase to t in call to
	replace-regexp-in-string.

2007-06-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/cl.el: Set edebug and indentation before loading
	cl-loaddefs.el so that its use of dolist doesn't load cl-macs.

2007-06-28  Andreas Schwab  <schwab@suse.de>

	* Makefile.in ($(lisp)/mh-e/mh-loaddefs.el): Depend on
	$(lisp)/subdirs.el.

2007-06-28  Juanma Barranquero  <lekktu@gmail.com>

	* speedbar.el (speedbar-handle-delete-frame): Don't try to delete
	the speedbar frame if nil; that deletes the current frame or
	causes an error if it is the only frame.
	Reported by Angelo Graziosi <Angelo.Graziosi@roma1.infn.it>.

2007-06-28  Kevin Ryde  <user42@zip.com.au>

	* textmodes/nroff-mode.el: Groff \# comments.
	(nroff-mode-syntax-table): \# comment intro,
	plain # as punct per global table.
	(nroff-font-lock-keywords): Add # as a single char escape.
	(nroff-mode): In comment-start-skip, match \#.

2007-06-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-bzr.el (vc-functions): Clear up the cache when reloading the file.
	(vc-bzr-workfile-version, vc-bzr-could-register): Don't hardcode
	point-min == 1.

2007-06-28  Nick Roberts  <nickrob@snap.net.nz>

	* pcvs-util.el (cvs-strings->string, cvs-string->strings):
	Rename and move to...

	* subr.el (strings->string, string->strings): ...here.

	* pcvs.el (cvs-reread-cvsrc, cvs-header-msg, cvs-checkout)
	(cvs-mode-checkout, cvs-execute-single-file): Use new function names.

	* progmodes/gud.el (gud-common-init): Call string->strings instead
	of split-string.

2007-06-27  Michael Albinus  <michael.albinus@gmx.de>

	* dired-aux.el: Remove `dired-call-process'.
	(dired-check-process): Call `process-file'.

	* wdired.el (wdired-do-perm-changes): Call `process-file'.

	* net/ange-ftp.el (ange-ftp-dired-call-process): Reimplement it as
	`ange-ftp-process-file'.

2007-06-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/cl.el: Use cl-loaddefs.el rather than manual autoloads.

	* emacs-lisp/cl-extra.el:
	* emacs-lisp/cl-seq.el:
	* emacs-lisp/cl-macs.el: Set generated-autoload-file to cl-loaddefs.el.
	Add autoload cookies on all defs autoloaded manually in cl.el.

	* emacs-lisp/cl-loaddefs.el: New file.

	* textmodes/texinfmt.el (texinfo-raisesections-alist)
	(texinfo-lowersections-alist): Merge definition and declaration.
	(texinfo-start-of-header, texinfo-end-of-header): Remove.
	(texinfo-format-syntax-table): Merge init into declaration.
	(texinfo-format-parse-line-args, texinfo-format-parse-args)
	(texinfo-format-parse-defun-args, texinfo-format-node)
	(texinfo-push-stack, texinfo-multitable-widths)
	(texinfo-define-info-enclosure, texinfo-alias)
	(texinfo-format-defindex, batch-texinfo-format): Use push.
	(texinfo-footnote-number): Remove duplicate declaration.

	* ps-print.el: Update with auto-generated autoloads.

	* ps-mule.el: Set generated-autoload-file to "ps-print.el".

2007-06-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (autoload-generated-file): Interpret names
	relative to current dir for file-local settings.
	(autoload-generate-file-autoloads): Add `outfile' arg.
	(update-directory-autoloads): Use it to directly call
	autoload-generate-file-autoloads instead of going through
	update-file-autoloads so we avoid redundant searches and so we can know
	the set of buffers changed so we can save them all.

	* emacs-lisp/autoload.el (autoload-find-destination): Return nil
	rather than throwing `up-to-date'.
	(autoload-generate-file-autoloads): Adjust correspondingly.
	(update-file-autoloads): Be careful to let-bind
	autoload-modified-buffers and adjust to new calling conventions.
	(autoload-modified-buffers): Make it a dynamically scoped var.
	(update-directory-autoloads): Use file-relative-name instead of
	autoload-trim-file-name.
	(autoload-insert-section-header): Don't use autoload-trim-file-name
	since the file is already relative now.
	(autoload-trim-file-name): Remove.

	* vc-arch.el (vc-arch-add-tagline): Do a slightly cleaner job.
	(vc-arch-complete, vc-arch--version-completion-table)
	(vc-arch-revision-completion-table): New functions to provide
	completion of revision names.
	(vc-arch-trim-find-least-useful-rev, vc-arch-trim-make-sentinel)
	(vc-arch-trim-one-revlib, vc-arch-trim-revlib): New functions
	to let the user trim the revlib.

	* vc.el: Add new VC operation `revision-completion-table'.
	(vc-default-revision-completion-table): New function.
	(vc-version-diff, vc-version-other-window): Use it to provide
	completion of revision names if the backend provides it.

	* log-edit.el (log-edit-changelog-entries): Use with-current-buffer.

	* vc-svn.el (vc-svn-repository-hostname): Adjust to non-XML format
	of newer .svn/entries.

2007-06-25  David Kastrup  <dak@gnu.org>

	* calc/calc-poly.el (math-padded-polynomial)
	(math-partial-fractions): Add some function comments.

2007-06-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (autoload-generate-file-autoloads):
	Make `outbuf' optional.
	(update-file-autoloads): Use it.

2007-06-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (autoload-modified-buffers): New var.
	(autoload-find-destination): Keep it uptodate.
	(autoload-save-buffers): New fun.
	(update-file-autoloads): Use it.  Re-add the "up to date" message.

	* emacs-lisp/autoload.el: Refactor for upcoming changes.
	(autoload-find-destination): New function extracted from
	update-file-autoloads.
	(update-file-autoloads): Use it.
	(autoload-generate-file-autoloads): New function extracted from
	generate-file-autoloads.  Use file-relative-name.  Delay computation of
	output-start to the first cookie.  Remove done-any, replaced by
	output-start.
	(generate-file-autoloads): Use it.

2007-06-24  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-comb.el (math-init-random-base, math-prime-test):
	Use math-read-number-simple to insert constants.
	(math-prime-test): Redo calculation of sum.

	* calc/calc-misc.el (math-div2-bignum): Use math-bignum-digit-size.

	* calc/calc-math.el (math-scale-bignum-digit-size): Rename from
	math-scale-bignum-3.
	(math-isqrt-bignum): Use math-scale-bignum-digit-size and
	math-bignum-digit-size.
	(math-isqrt-small): Add another possible initial guess.

2007-06-23  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-entry-format): New options
	`whitespace', `braces', and `string'.
	(bibtex-field-braces-alist, bibtex-field-strings-alist)
	(bibtex-field-braces-opt, bibtex-field-strings-opt)
	(bibtex-cite-matcher-alist): New variables.
	(bibtex-font-lock-keywords): Use bibtex-cite-matcher-alist.
	(bibtex-flash-head): Use blink-matching-delay.
	(bibtex-insert-kill, bibtex-mark-entry): Use push-mark.
	(bibtex-format-entry, bibtex-reformat): Handle new options of
	bibtex-entry-format.
	(bibtex-field-re-init, bibtex-font-lock-cite, bibtex-dist):
	New functions.
	(bibtex-complete-internal): Do not display messages while
	minibuffer is used.  Do not leave around a completions buffer
	that is out of date.
	(bibtex-copy-summary-as-kill): New optional arg.
	(bibtex-font-lock-url): New optional arg no-button.
	(bibtex-find-crossref): Use `bibtex-cite-matcher-alist'.
	(bibtex-url): Allow multiple URLs per entry.

2007-06-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/autoload.el (autoload-generated-file): New function.
	(update-file-autoloads, update-directory-autoloads): Use it.
	(autoload-file-load-name): New function.
	(generate-file-autoloads, update-file-autoloads): Use it.
	(autoload-find-file): Accept non-absolute argument.  Set default-dir.
	(generate-file-autoloads): If the autoloaded form is malformed,
	indicate the problem with a warning instead of aborting.

2007-06-23  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* simple.el (next-error-recenter): Accept `(4)' as well;
	also, specify `integer' instead of `number'.

2007-06-23  Eli Zaretskii  <eliz@gnu.org>

	* ls-lisp.el (insert-directory): If an invalid regexp error is
	thrown, try using FILE as a literal file name, not a wildcard.

2007-06-23  Juanma Barranquero  <lekktu@gmail.com>

	* ruler-mode.el (ruler-mode): Prevent clobbering the original
	`header-line-format' when reentering ruler mode.

2007-06-23  Eli Zaretskii  <eliz@gnu.org>

	* ls-lisp.el (insert-directory): Don't treat FILE as a wildcard if
	FILE exists as a file.

2007-06-22  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (math-bignum-digit-length)
	(math-bignum-digit-size, math-small-integer-size):
	New constants.
	(math-normalize, math-bignum-big, math-make-float)
	(math-div10-bignum, math-scale-left, math-scale-left-bignum)
	(math-scale-right, math-scale-right-bignum, math-scale-rounding)
	(math-add, math-add-bignum, math-sub-bignum, math-sub, math-mul)
	(math-mul-bignum, math-mul-bignum-digit, math-idivmod)
	(math-quotient, math-div-bignum, math-div-bignum-digit)
	(math-div-bignum-part, math-format-bignum-decimal)
	(math-read-bignum): Use math-bignum-digit-length,
	math-bignum-digit-size and math-small-integer-size.

	* calc/calc-ext.el (math-fixnum-big): Use the variable
	math-bignum-digit-size.

2007-06-23  Dan Nicolaescu  <dann@ics.uci.edu>

	* log-view.el (log-view-mode-menu): New menu.

2007-06-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-font-lock-keywords): Fix M. Kifer's last change
	differently.

	* vc-hg.el (vc-hg-registered): Add an autoloaded version.
	(vc-hg-log-view-mode): Use log-view-font-lock-keywords.

2007-06-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-print-log): Insert the file name.
	(vc-hg-log-view-mode): Fontify the file name.

2007-06-22  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-forms.el (math-format-date-part, calc-parse-standard-date)
	(calcFunc-julian): Fix incorrect number used in calculations.

2007-06-22  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* simple.el (next-error-recenter): New defcustom.
	(next-error, next-error-internal): Recenter if specified,
	immediately prior to running `next-error-hook'.

	* progmodes/hideshow.el (hs-show-block): Use line-end-position.
	(hs-hide-block-at-point, hs-hide-comment-region): Likewise.

	* progmodes/hideshow.el (hs-hide-all): Use progress reporter.

2007-06-22  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc-comb.el (math-small-factorial-table): New variable.
	(calcFunc-fact): Use `math-small-factorial-table'.

	* calc/calc-ext.el (math-defcache): Allow forms to evaluate
	initial values.
	(math-approx-pi, math-approx-sqrt-e, math-approx-gamma-const):
	New variables to use in caches.

	* calc/calc-forms.el (math-format-date-part, math-parse-standard-date)
	(calcFunc-julian): Use `math-read-number-simple' to insert bignums.

	* calc/calc-func.el (math-besJ0, math-besJ1, math-besY0, math-besY1)
	(math-bernoulli-b-cache): Use math-read-number-simple to insert
	bignums.

	* calc/calc-math.el (math-approx-ln-10, math-approx-ln-2):
	New variables to use in caches.

2007-06-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-bzr.el (vc-bzr-log-view-mode): Add + to the email address regexp.

	* vc-hg.el (vc-hg-log-view-mode): New mode.

2007-06-21  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (math-read-number-simple): New function.

2007-06-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vera-mode.el (vera-mode): Fix `commend-end-skip' setting.
	(vera-font-lock-match-item): Fix doc string.
	(vera-in-comment-p): Remove unused function.
	(vera-skip-forward-literal, vera-skip-backward-literal): Improve code,
	use `syntax-ppss'.
	(vera-forward-syntactic-ws): Fix argument order.
	(vera-prepare-search): Use `with-syntax-table'.
	(vera-indent-line): Fix doc string.
	(vera-electric-tab): Fix doc string.
	(vera-expand-abbrev): Define alias instead of using `fset'.
	(vera-comment-uncomment-region): Use `comment-start-skip'.

2007-06-21  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-export-with-footnotes): New option.
	(org-export-as-html): Fix replacement bug for XEmacs.
	(org-agenda-default-appointment-duration): New option.

2007-06-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el: Add to do items.
	(vc-hg-diff): Add support for comparing different revisions.
	(vc-hg-diff, vc-hg-annotate-command, vc-hg-annotate-time)
	(vc-hg-annotate-extract-revision-at-line)
	(vc-hg-previous-version, vc-hg-checkin): New functions.
	(vc-hg-annotate-re): New constant.

2007-06-20  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (math-standard-ops): Fix precedence of multiplication.

2007-06-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-font-lock-keywords): Use `eval' to consult the
	buffer-local value of log-view-*-re if applicable.

	* vc-bzr.el (vc-bzr-dir-state): Use setq rather than set.
	Use vc-bzr-command rather than the ill defined vc-bzr-command*.
	(vc-bzr-command*): Remove both (incompatible) versions.
	(vc-bzr-do-command*): Remove.
	(vc-bzr-with-process-environment, vc-bzr-std-process-invocation):
	Remove by folding into its only caller vc-bzr-command.
	(vc-bzr-command): Always set the environment, even when ineffective.
	(vc-bzr-version): Minor fix up.
	(vc-bzr-admin-dirname): New var.
	(vc-bzr-bzr-dir): Remove.
	(vc-bzr-root-dir): New fun.
	(vc-bzr-registered): Use it.  Add an autoloaded version.
	(vc-bzr-responsible-p): Use vc-bzr-root-dir as well.
	(vc-bzr-view-log-function): Remove.
	(vc-bzr-log-view-mode): New major mode to replace it.
	(vc-bzr-print-log): Only activate the old hack if needed.

	* vc.el (vc-default-log-view-mode): New function.
	(vc-print-log): Add new `log-view-mode' VC operation.

2007-06-20  Juanma Barranquero  <lekktu@gmail.com>

	* ido.el (ido-find-file-in-dir): Don't signal an error for
	empty directories.

	* add-log.el (change-log-mode): Set `show-trailing-whitespace'.

	* desktop.el (desktop-read): Run `desktop-not-loaded-hook' in the
	directory where the desktop file was found, as the docstring says.
	(desktop-kill): Use `read-directory-name'.

2007-06-20  Alan Mackenzie  <acm@muc.de>

	* progmodes/cc-mode.el (c-remove-any-local-eval-or-mode-variables):
	When removing lines, also remove the \n.  Correction of patch of
	2007-04-21.

2007-06-20  Martin Rudalics  <rudalics@gmx.at>

	* mouse.el (mouse-drag-mode-line-1): Quit mouse tracking when
	event is not a cons cell.  Do not unread drag-mouse-1 events.
	Select right window in check whether space was stolen from
	window above.

	* help-mode.el (help-make-xrefs): Adjust position of new forward
	button.

2007-06-20  Riccardo Murri  <riccardo.murri@gmail.com>

	* vc-bzr.el (vc-bzr-with-process-environment)
	(vc-bzr-std-process-invocation): New macros.
	(vc-bzr-command, vc-bzr-command*): Use them.
	(vc-bzr-with-c-locale): Remove.
	(vc-bzr-dir-state): Replace its use with vc-bzr-command.
	(vc-bzr-buffer-nonblank-p): New function.
	(vc-bzr-state-words): New const.
	(vc-bzr-state): Look for `bzr status` keywords in output.
	Display everything else as a warning message to the user.
	Fix status report with bzr >= 0.15.

2007-06-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc-hg.el (vc-hg-global-switches): Simplify.
	(vc-hg-state): Handle more states.
	(vc-hg-diff): Fix doc-string.
	(vc-hg-register): New function.
	(vc-hg-checkout): Likewise.

2007-06-20  Reto Zimmermann  <reto@gnu.org>

	* progmodes/vera-mode.el: New file.

2007-06-19  Jay Belanger  <jay.p.belanger@gmail.com>

	* calc/calc.el (calc-multiplication-has-precendence):
	New variable.
	(math-standard-ops, math-standard-ops-p, math-expr-ops):
	New functions.
	(math-expr-opers): Define using math-standard-ops rather than
	math-standard-opers.
	* calc/calc-aent.el (calc-do-calc-eval): Let math-expr-opers
	equal the function math-standard-ops rather than the variable
	math-standard-opers.
	(calc-algebraic-entry): Let math-expr-opers equal
	math-standard-ops or math-expr-ops, as appropriate.
	(math-expr-read-level, math-read-factor): Let math-expr-opers
	equal math-expr-ops.
	* calc/calc-embed.el (calc-embedded-finish-edit):
	Let math-expr-opers equal the function math-standard-ops
	rather than the variable math-standard-opers.
	* calc/calc-ext.el (math-read-plain-expr)
	(math-format-flat-expr-fancy): Let math-expr-opers equal the
	function math-standard-ops rather than the variable
	math-standard-opers.
	* calc/calc-lang.el (calc-set-language, math-read-big-rec):
	Let math-expr-opers equal the function math-standard-ops rather
	than the variable math-standard-opers.
	* calc/calc-prog.el (calc-read-parse-table): Let math-expr-opers
	equal the function math-standard-ops rather than the variable
	math-standard-opers.
	* calc/calc-yank.el (calc-finish-stack-edit): Let math-expr-opers
	equal the function math-standard-ops rather than the variable
	math-standard-opers.
	* calc/calccomp.el (math-compose-expr): Let math-expr-opers equal
	math-expr-ops.

2007-06-19  Ivan Kanis  <apple@kanis.eu>

	* vc-hg.el: New file.

2007-06-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-font-lock-paren): Mark the relevant text
	with font-lock-multiline.

2007-06-17  Glenn Morris  <rgm@gnu.org>

	* lpr.el (lpr-page-header-switches): Move %s to separate element
	for correct quoting.  Doc fix.

2007-06-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/sgml-mode.el (sgml-xml-guess): Return the result rather
	than setting sgml-xml-mode.
	(sgml-mode, html-mode): Set sgml-xml-mode.
	(sgml-skip-tag-backward): Tell if we skipped over matched tags.
	(sgml-skip-tag-backward, sgml-electric-tag-pair-overlays): New var.
	(sgml-electric-tag-pair-before-change-function)
	(sgml-electric-tag-pair-flush-overlays): New functions.
	(sgml-electric-tag-pair-mode): New minor mode.
	(sgml-font-lock-keywords-2, sgml-get-context, sgml-unclosed-tag-p)
	(sgml-calculate-indent): Use assoc-string.

2007-06-16  Karl Fogel  <kfogel@red-bean.com>

	* thingatpt.el (thing-at-point-email-regexp): Don't require two
	chars before the "@" in an email address.  Andreas Roehler noticed
	this problem.

2007-06-15  Karl Fogel  <kfogel@red-bean.com>

	* thingatpt.el: Add support for email addresses (`email').
	(thing-at-point, bounds-of-thing-at-point): Document `email' support.
	(thing-at-point-email-regexp): New variable.
	(`email'): Put `bounds-of-thing-at-point' and `thing-at-point'
	properties on this symbol, with lambda forms for values.

2007-06-15  Masatake YAMATO  <jet@gyve.org>

	* vc-bzr.el (vc-bzr-root): Cache the output of shell command execution.

	* vc.el (vc-dired-hook): Check the backend returned from
	`vc-responsible-backend' can really handle `subdir'.

2007-06-15  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-add-documentation-string-button):
	Fix handling of documentation indent.

2007-06-15  Miles Bader  <miles@fencepost.gnu.org>

	* mb-depth.el: New file.

2007-06-15  Masatake YAMATO  <jet@gyve.org>

	* vc.el (vc-dired-mode): Show backend name as part of mode name.

2007-06-14  Chong Yidong  <cyd@stupidchicken.com>

	* wid-edit.el (widget-default-create): Move ?h handling here...
	(widget-default-format-handler): ...from here.
	(widget-docstring, widget-add-documentation-string-button): New funs.
	(documentation-string): Add :visibility-widget property.
	(widget-documentation-string-value-create): Use it.

	* cus-edit.el (custom-split-regexp-maybe): Simplify.
	(custom-buffer-create-internal): Simplify message.
	(custom-variable-tag): Reduce height to normal.
	(custom-variable-value-create, custom-face-value-create)
	(custom-visibility): New widget.
	(custom-visibility): New face.
	(custom-group-value-create):
	Call widget-add-documentation-string-button, using `custom-visibility'.

2007-06-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/bytecomp.el (byte-compile-current-group)
	(byte-compile-nogroup-warn, byte-compile-file): Revert part of last
	change.  Apparently the "warning even if the group is implicit" is
	a feature rather than a bug.

2007-06-14  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper.el (viper-describe-key-ad, viper-describe-key-briefly-ad):
	Different advices for Emacs and XEmacs.  Compile them conditionally.
	(viper-version): Belated version change.

2007-06-14  Juanma Barranquero  <lekktu@gmail.com>

	* follow.el (follow-all-followers, follow-generic-filter):
	* pcomplete.el (pcomplete-restore-windows):
	* x-dnd.el (x-dnd-maybe-call-test-function, x-dnd-save-state)
	(x-dnd-drop-data):
	* emacs-lisp/edebug.el (edebug-pop-to-buffer, edebug-display):
	* progmodes/python.el (python-complete-symbol):
	* term/mac-win.el (mac-dnd-drop-data): Remove redundant check.

2007-06-13  Ryan Yeske  <rcyeske@gmail.com>

	* rcirc.el (rcirc-format-response-string): Use rcirc-nick-syntax
	around bright and dim regexps.  Make sure bright and dim matches
	use word anchors.  Send text through rcirc-markup functions.
	(rcirc-url-regexp): Add single quote character.
	(rcirc-connect): Write logs to disk on auto-save-hook.
	Make server a non-optional argument.
	(rcirc-log-alist): New variable.
	(rcirc-log-directory): Make customizable.
	(rcirc-log-flag): New customizable variable.
	(rcirc-log): New function.
	(rcirc-print): Use above function.
	(rcirc-log-write): New function.
	(rcirc-generate-new-buffer-name): Strip text properties.
	(rcirc-switch-to-buffer-function): Remove variable.
	(rcirc-last-non-irc-buffer): Remove variable.
	(rcirc-non-irc-buffer): Add function.
	(rcirc-next-active-buffer): Use above function.
	(rcirc-keepalive): Send KEEPALIVE ctcp instead of a PING.
	(rcirc-handler-ctcp-KEEPALIVE): Add handler.
	(rcirc-handler-CTCP): Don't print KEEPALIVE responses.
	(rcirc-omit-mode): Add minor-mode.
	(rcirc-mode-map): Change C-c C-o binding.
	(rcirc-mode): Clear mode-line-process.  Use a custom
	fill-paragraph-function.  Set up buffer-invisibility-spec.
	(rcirc-response-formats): Remove timestamp code.
	(rcirc-omit-responses): Add variable.
	(rcirc-print): Don't put the overlay arrow on potentially omitted
	lines.  Log line to disk.  Record activity for private messages
	from /dim nicks.  Facify the fill-prefix with rcirc-timestamp face.
	(rcirc-jump-to-first-unread-line): Print message if there is no
	unread text.
	(rcirc-clear-unread): New function.
	(rcirc-markup-text-functions): Add variable.
	(rcirc-markup-timestamp, rcirc-markup-fill): Add functions.
	(rcirc-debug): Don't mess with window configuration.
	(rcirc-send-message): Send message before printing locally.
	Add SILENT argument, do not print message if non-nil.
	(rcirc-visible-buffers): New function and variable.
	(rcirc-window-configuration-change-1): Add function.
	(rcirc-target-buffer): Make sure ACTIONs don't get sent to the
	server buffer.
	(rcirc-clean-up-buffer): Set rcirc-target to nil when finished.
	(rcirc-fill-paragraph): Add function.
	(rcirc-record-activity, rcirc-window-configuration-change-1):
	Only update the activity string if it has actually changed.
	(rcirc-update-activity-string): Remove padding characters from the
	mode-line string.
	(rcirc-disconnect-buffer): New function to be called when a
	channel is parted or the user quits.
	(rcirc-server-name): Warn when the server-name hasn't been set.
	(rcirc-window-configuration-change): Postpone work until
	post-command-hook.
	(rcirc-window-configuration-change-1): Update mode-line and
	overlay arrows here.
	(rcirc-authenticate): Fixc hanserv identification.
	(rcirc-default-server): Remove variable.
	(rcirc): Connect according to rcirc-connections.
	(rcirc-connections): Add variable.
	(rcirc-startup-channels-alist): Remove variable.
	(rcirc-startup-channels): Remove function.

2007-06-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-font-lock-keywords): Fix M. Kifer's last change.

2007-06-13  Johan Bockg,Ae(Brd  <bojohan@dd.chalmers.se>  (tiny change)

	* term/xterm.el (terminal-init-xterm): Escape parens in character
	constants.

2007-06-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el: Remove unneeded * from docstrings.
	Use [:alpha:] and [:alnum:] where applicable.
	(sh-quoted-subshell): Rewrite to correctly
	handle nested mixes of `...` and $(...).
	(sh-apply-quoted-subshell): Remove.
	(sh-font-lock-syntactic-keywords): Adjust call to sh-quoted-subshell.

	* vc-arch.el (vc-arch-command): Remove bzr.  It's a different program.

2007-06-13  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-ptch.el (ediff-context-diff-label-regexp): Partially undo
	previous change.

2007-06-12  Tom Tromey  <tromey@redhat.com>

	* subr.el (user-emacs-directory): New defconst.
	* cmuscheme.el (scheme-start-file):
	* shell.el (shell):
	* completion.el (save-completions-file-name):
	* custom.el (custom-theme-directory):
	* term/x-win.el (emacs-session-filename):
	* filesets.el (filesets-menu-cache-file):
	* thumbs.el (thumbs-thumbsdir):
	* server.el (server-auth-dir):
	* image-dired.el (image-dired-dir):
	(image-dired-db-file):
	(image-dired-temp-image-file):
	(image-dired-gallery-dir):
	(image-dired-temp-rotate-image-file):
	* play/gamegrid.el (gamegrid-user-score-file-directory):
	* savehist.el (savehist-file):
	* tutorial.el (tutorial--saved-dir):
	* startup.el (auto-save-list-file-prefix): Use user-emacs-directory.

2007-06-12  Ralf Angeli  <angeli@caeruleus.net>

	* scroll-lock.el (scroll-lock-mode): Doc fix.

2007-06-12  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-ptch.el (ediff-context-diff-label-regexp): Spurious parenthesis.

	* ediff-init.el: Doc strings.

2007-06-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/bytecomp.el (byte-compile-current-group): New var.
	(byte-compile-file): Bind it.
	(byte-compile-nogroup-warn): Use it to avoid spurious warnings when the
	group argument is provided implicitly.
	(byte-compile-format-warn, byte-compile-from-buffer)
	(byte-compile-insert-header): Don't hardcode point-min==1.
	(byte-compile-file-form-require): Remove unused var old-load-list.
	(byte-compile-eval): Remove unused vars old-autoloads and hist-nil-new.

2007-06-12  Michael Kifer  <kifer@cs.stonybrook.edu>

	* emulation/viper-cmd.el (viper-prefix-arg-com, viper-prefix-arg-value):
	Display error messages.
	(viper-prev-destructive-command, viper-insert-prev-from-insertion-ring):
	Get rid of cl.el dependencies.

	* emulation/viper-init.el (viper-suppress-input-method-change-message):
	New variable.
	(viper-activate-input-method-action)
	(viper-inactivate-input-method-action):
	Use viper-suppress-input-method-change-message.

	* emulation/viper-kem.el (viper-vi-basic-map): Disable the bindings
	for C-s, C-r.

	* emulation/viper-util.el (viper-set-cursor-color-according-to-state):
	Use viper-replace-overlay-cursor-color instead of
	viper-replace-overlay-cursor-color.
	(viper-sit-for-short): Use sit-for with 3 arguments.

	* emulation/viper.el (viper-insert-state-mode-list): Add gud-mode.
	(viper-major-mode-modifier-list): Add viper-comint-mode-modifier-map
	to gud-mode.

	* ediff-mult.el (ediff-meta-buffer-brief-message)
	(ediff-meta-buffer-verbose-message): New variables.
	(ediff-meta-buffer-message): Variable deleted.
	(ediff-verbose-help-enabled): New variable.
	(ediff-toggle-verbose-help-meta-buffer): New function.
	(ediff-redraw-directory-group-buffer): Made aware of short/verbose
	message options.

	* ediff-ptch.el (ediff-context-diff-label-regexp): Better regexp.
	(ediff-fixup-patch-map): Improve heuristic.

2007-06-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-file-re, log-view-message-re): Use \(?1:...\).
	(log-view-font-lock-keywords): Simplify.
	(log-view-current-file, log-view-current-tag): Simplify.

2007-06-12  Sam Steingold  <sds@gnu.org>

	* vc-arch.el (vc-arch-command): Also try "baz" and "bzr".

2007-06-12  Juanma Barranquero  <lekktu@gmail.com>

	* desktop.el (desktop-load-locked-desktop): New option.
	(desktop-read): Use it.
	(desktop-truncate, desktop-outvar, desktop-restore-file-buffer):
	Use `when'.

2007-06-12  Davis Herring  <herring@lanl.gov>

	* desktop.el (desktop-save-mode-off): New function.
	(desktop-base-lock-name, desktop-not-loaded-hook): New variables.
	(desktop-full-lock-name, desktop-file-modtime, desktop-owner)
	(desktop-claim-lock, desktop-release-lock): New functions.
	(desktop-kill): Tell `desktop-save' that this is the last save.
	Release the lock afterwards.
	(desktop-buffer-info): New function.
	(desktop-save): Use it.  Run `desktop-save-hook' where the doc
	says to.  Detect conflicts, and manage the lock.
	(desktop-read): Detect conflicts.  Manage the lock.

2007-06-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emulation/tpu-mapper.el (tpu-emacs-map-key): Use new keymap names.

	* emulation/tpu-edt.el (tpu-gold-map): Rename from GOLD-map.
	(tpu-lucid-emacs-p): Remove.  Use (featurep 'xemacs) instead.
	(CSI-map, GOLD-CSI-map, GOLD-SS3-map, SS3-map): Delete vars.
	(tpu-gold-map, tpu-global-map): Add all the SS3 and CSI bindings, using
	keysyms rather than byte sequences.
	(tpu-copy-keyfile): Don't force the user to use tpu-mapper.el.

2007-06-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-add-keywords): In case font-lock was only
	half-activated, forcefully activate it completely.

2007-06-11  Richard Stallman  <rms@gnu.org>

	* cus-edit.el (custom-variable-type): Doc fix.

2007-06-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-font-lock-backslash-quote)
	(sh-font-lock-flush-syntax-ppss-cache): New functions.
	(sh-font-lock-syntactic-keywords): Use them to distinguish the
	different possible cases for \'.

	* complete.el (PC-bindings): Don't bind things already bound in the
	parent keymap.

	* textmodes/bibtex-style.el: New file.

2007-06-11  Riccardo Murri  <riccardo.murri@gmail.com>

	* vc-bzr.el: New file.

2007-06-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-svn.el (vc-svn-program): New var.
	(vc-svn-command): Use it.

2007-06-11  Juanma Barranquero  <lekktu@gmail.com>

	* server.el (server-switch-buffer): Remove redundant check.

2007-06-10  Martin Rudalics  <rudalics@gmx.at>

	* emacs-lisp/bytecomp.el (byte-compile-find-cl-functions):
	Match against file-name-nondirectory.
	Fix text on user customization variables.
	Reported by Johan Bockg,Ae(Brd <bojohan@dd.chalmers.se>.

2007-06-09  Alfred M. Szmidt  <ams@gnu.org>  (tiny change)

	* mail/rmail.el (rmail-movemail-variant-in-use): Fix doc typo.

2007-06-09  Davis Herring  <herring@lanl.gov>

	* desktop.el (desktop-minor-mode-table): Doc fix.

2007-06-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/css-mode.el (css-navigation-syntax-table):
	Use set-char-table-range so it also works in the unicode branch.

2007-06-08  Nick Roberts  <nickrob@snap.net.nz>

	* help-mode.el (help-xref-forward-stack)
	(help-xref-stack-forward-item, help-forward-label): New variables.
	(help-forward): New button type.
	(help-setup-xref): Initialise help-xref-forward-stack.
	(help-make-xrefs): Add forward button, if appropriate.
	(help-xref-go-back): Push item on forward stack.
	(help-xref-go-forward, help-go-forward): New functions.

2007-06-07  Chong Yidong  <cyd@stupidchicken.com>

	* dired.el (dired-mode-map): Remove spurious separator.

2007-06-07  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/ebrowse.el (ebrowse-draw-file-member-info): Doc fix.

	* progmodes/mixal-mode.el (mixal-operation-codes-alist):
	* progmodes/idlwave.el (idlwave-one-key-select): Fix typo in docstring.

2007-06-07  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el: Version number fixed.

2007-06-07  Glenn Morris  <rgm@gnu.org>

	* version.el (emacs-copyright): New constant.
	* startup.el (fancy-splash-tail): Use emacs-copyright.
	* calc/calc-help.el (calc-full-help): Use emacs-copyright.

	* emacs-lisp/bytecomp.el (byte-compile-warnings): Add new option
	`make-local'.
	(byte-compile-warnings-safe-p): Add `make-local'.
	(byte-compile-make-variable-buffer-local):
	Allow byte-compile-warnings to suppress this warning.

	* tutorial.el (tutorial--describe-nonstandard-key): Adjust for new
	format of "menu" description.
	(tutorial--find-changed-keys): Describe the specific menu a
	command is in.

	* dframe.el (dframe-frame-parameter, dframe-mouse-event-p):
	Rewrite compatibility functions to silence byte-compiler.

2007-06-07  Alfred M. Szmidt  <ams@gnu.org>  (tiny change)

	* mail/rmailsum.el (rmail-summary-save-buffer): New command.
	(rmail-summary-mode-map): Add rmail-summary-save-buffer.

2007-06-07  Eric M. Ludlam  <eric@siege-engine.com>

	* emacs-lisp/checkdoc.el (checkdoc-ispell-lisp-words): Remove "iff".

2007-06-07  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/ebrowse.el (ebrowse-member-table):
	* textmodes/org.el (org-export-ascii-bullets, org-batch-agenda)
	(org-batch-agenda-csv): Fix typos in docstrings.

2007-06-06  Juanma Barranquero  <lekktu@gmail.com>

	* international/mule-cmds.el (toggle-enable-multibyte-characters)
	(sort-coding-systems, search-unencodable-char): Doc fixes.
	(coding-system-change-eol-conversion, set-default-coding-systems)
	(prefer-coding-system, find-multibyte-characters, princ-list)
	(leim-list-entry-regexp, set-input-method, locale-language-names)
	(input-method-exit-on-first-char, exit-language-environment-hook)
	(locale-charset-language-names): Fix typos in docstrings.

2007-06-06  Juanma Barranquero  <lekktu@gmail.com>

	* pgg.el (pgg-sign-region, pgg-sign):
	* ses.el (ses-call-printer):
	* calendar/icalendar.el (icalendar--diarytime-to-isotime):
	* textmodes/org.el (org-cycle): Fix typos in docstrings.

2007-06-06  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el
	(org-export-region-as-html, org-replace-region-by-html)
	(org-number-to-letters, org-table-fedit-finish)
	(org-normalize-color, org-table-fedit-ref-right)
	(org-date-to-gregorian, org-table-fedit-move)
	(org-table-convert-refs-to-rc, org-calendar-holiday)
	(org-table-fedit-toggle-ref-type, org-write-agenda)
	(org-colgroup-info-to-vline-list, org-agenda-todo-previousset)
	(org-defkey, org-encode-for-stdout)
	(org-indent-line-function, org-export-as-html-to-buffer)
	(org-store-agenda-views, org-update-mode-line)
	(org-find-if, org-delete-all)
	(org-table-fedit-convert-buffer, org-emphasize)
	(org-uniquify, org-table-fedit-lisp-indent)
	(org-table-fedit-scroll, org-get-todo-sequence-head)
	(org-table-fedit-scroll-down, org-table-fedit-line-down)
	(org-table-fedit-ref-left, org-agenda-export-csv-mapper)
	(org-table-fedit-toggle-coordinates, org-dvipng-color)
	(org-table-fedit-line-up, org-table-fedit-ref-down)
	(org-table-formula-from-user, org-mode-flyspell-verify)
	(org-cycle-show-empty-lines, org-ctrl-c-ret)
	(org-table-formula-to-user, org-diary-to-ical-string)
	(orgtbl-export, org-table-fedit-post-command)
	(org-closed-in-range, org-shiftcontrolright)
	(org-table-convert-refs-to-an, org-table-hline-and-move)
	(org-table-formula-less-p, org-format-table-ascii)
	(org-agenda-get-sexps, org-shift-refpart)
	(org-diary-sexp-entry, org-time-string-to-absolute)
	(org-table-show-reference, org-letters-to-number)
	(org-fix-agenda-info, org-table-fedit-ref-up)
	(org-table-fedit-shift-reference, org-table-fedit-abort)
	(org-closest-date, org-shiftcontrolleft)
	(org-at-heading-or-item-p, org-rematch-and-replace)
	(org-agenda-todo-nextset, org-export-grab-title-from-buffer):
	New functions.
	(org-table-edit-scroll-down, org-finish-edit-formulas)
	(org-table-edit-next-field, org-abort-edit-formulas)
	(org-font-lock-level, org-export-find-first-heading-line)
	(org-table-edit-line-down, org-table-edit-backward-field)
	(org-edit-formula-lisp-indent, org-table-edit-move)
	(org-check-log-option, org-this-word)
	(org-table-edit-line-up, org-table-edit-formulas-post-command)
	(org-agenda-file-to-end, org-expand-file-name)
	(org-fake-empty-table-line, org-table-edit-scroll)
	(org-toggle-log-option, org-show-reference): Function removed.
	(org-inhibit-invisibility, org-table-formula-make-cmp-string):
	New defsubsts.
	(org-unmodified, org-batch-store-agenda-views)
	(org-batch-agenda-csv): New macro.
	(org-agenda-export): New customization group.
	(org-agenda-skip-deadline-if-done, org-agenda-remove-tags)
	(org-highest-priority, org-agenda-exporter-settings)
	(org-log-done-with-time, org-replace-disputed-keys)
	(org-format-latex-header, org-export-table-header-tags)
	(org-cycle-separator-lines, org-export-table-data-tags)
	(org-icalendar-include-sexps)
	(org-empty-line-terminates-plain-lists)
	(org-log-repeat, org-special-ctrl-a)
	(org-table-use-standard-references, org-disputed-keys)
	(org-export-skip-text-before-1st-heading, org-agenda-with-colors)
	(org-agenda-export-html-style): New option.
	(org-allow-auto-repeat, org-agenda-remove-tags-when-in-prefix)
	(org-CUA-compatible): Option removed.
	(org-agenda-structure, org-sexp-date): New face.
	(org-todo-keywords-for-agenda, org-not-done-keywords)
	(org-planning-or-clock-line-re, org-agenda-name)
	(org-table-colgroup-info, org-todo-sets)
	(constants-unit-system, org-clock-mode-line-entry)
	(org-mode-line-timer, org-table-current-begin-pos)
	(org-todo-keywords-1, org-mode-line-string)
	(org-table-clean-did-remove-column, org-table-fedit-map)
	(org-clock-heading, org-table-buffer-is-an)
	(org-agenda-info, org-done-keywords)
	(org-done-keywords-for-agenda, org-todo-heads)
	(org-todo-kwd-alist, org-clock-start-time): New variable.
	(org-todo-kwd-priority-p, org-edit-formulas-map)
	(org-repeat-re, org-todo-kwd-max-priority)
	(org-version, org-done-string)
	(org-table-clean-did-remove-column-1, org-disputed-keys):
	Remove variables.
	(org-table-translate-regexp, org-repeat-re, org-version): New consts.
	(org-ts-lengths): Constant removed.
	(org-follow-gnus-link): Don't ask how many articles to read.
	(org-export-find-first-export-line): Rename from
	`org-export-find-first-heading'.
	Use `org-export-skip-text-before-1st-heading'.
	(org-table-fedit-post-command): Rename from
	`org-table-edit-formulas-post-command'.
	(org-table-fedit-finish): Rename from `org-finish-edit-formulas'.
	(org-table-fedit-abort): Rename from `org-abort-edit-formulas'.
	(org-table-fedit-lisp-indent): Rename from
	`org-edit-formula-lisp-indent'.
	(org-table-show-reference): Rename from `org-show-reference'.
	(org-table-store-formulas): Use `org-table-formula-less-p'.
	(org-table-edit-formulas): Position cursor to current field equation.
	(org-update-checkbox-count, org-hide-archived-subtrees)
	(org-timestamp-up-day, org-timestamp-down-day)
	(org-shiftmetaleft, org-shiftmetaright, org-shiftmetaup)
	(org-shiftmetadown, org-metaleft, org-metaright, org-metaup)
	(org-metadown, org-shiftup, org-shiftdown, org-shiftright)
	(org-shiftleft, org-ctrl-c-ctrl-c, org-context):
	Let `org-on-heading-p' also check for invisible heading.
	(org-read-date): Match am/pm times.
	(org-eval-in-calendar): Fix default date in prompt.

2007-06-05  Chong Yidong  <cyd@stupidchicken.com>

	* files.el (auto-mode-alist): Separate "ChangeLog.1" and
	"ChangeLog.a" entries, giving the latter lower priority.

2007-06-05  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (face-id): If the argument is a face alias,
	return the ID of the target face.

2007-06-05  Michael Albinus  <michael.albinus@gmx.de>

	* net/socks.el (top): Remove unnecessary copyright line.

2007-06-04  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-auto-wrap): Handle argument correctly.

2007-06-04  Michael Albinus  <michael.albinus@gmx.de>

	* net/socks.el: New file, taken from w3 repository.
	(top): Update Copyright.  Don't load cl.el.
	(all): Replace `case' by `cond', `string-to-int' by
	`string-to-number', and `process-kill-without-query' by
	`set-process-query-on-exit-flag'.
	(socks-char-int): Remove defalias and all occurencies.

2007-06-04  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/compile.el (compilation-find-file, compilation-handle-exit):
	Fix typos in docstrings.
	(compilation-search-path, compilation-buffer-name-function): Doc fixes.
	(compilation-finish-function): Fix typo in obsolescence declaration.

2007-06-03  Sam Steingold  <sds@gnu.org>

	* progmodes/compile.el: Add TIMESTAMP to the LOC data structure, to
	handle unending automatic recompilation of changed files (`omake -P').
	(compilation-loop): VISITED is now 5th CDR.
	(compilation-next-error-function): Set TIMESTAMP.

2007-06-03  Sam Steingold  <sds@gnu.org>

	* files.el (kill-buffer-ask): New function.
	(kill-some-buffers): Use it.
	(kill-matching-buffers): New user command.

2007-06-01  David Kastrup  <dak@gnu.org>

	* dired.el (dired-recursive-deletes, dired-recursive-copies):
	Change default to `top'.

2007-05-31  Richard Stallman  <rms@gnu.org>

	* dired.el (dired-do-flagged-delete, dired-do-delete): Doc fix.

2007-05-31  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/css-mode.el: New file.

2007-05-30  Michael Olson  <mwolson@gnu.org>

	* emacs-lisp/tq.el (tq-queue-pop): Stifle error when a process has
	died and we are trying to send a signal to it.  The program using
	tq.el should periodically check to see whether the process has
	died and react appropriately -- this is not the responsibility of
	tq.el, and is consistent with the rest of the tq.el source code.

2007-05-29  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/table.el (table--point-entered-cell-function)
	(table--point-left-cell-function):
	Bind `inhibit-point-motion-hooks' to t.

2007-05-29  Nikolaj Schumacher  <n_schumacher@web.de>  (tiny change)

	* emacs-lisp/rx.el (rx): Doc fix.

2007-05-28  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/idlwave.el (idlwave-routines): Fix typo in docstring.

2007-05-28  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.56.

	* net/tramp.el:
	* net/tramp-ftp.el:
	* net/tramp-smb.el:
	* net/tramp-util.el:
	* net/tramp-vc.el:
	Don't load cl.el, because that pollutes the namespace.  Replace cl
	macros by their implementations where necessary.  Requested by
	Richard Stallman <rms@gnu.org>.

	* net/tramp.el (top): Make `set-buffer-multibyte' an alias if it
	doesn't exist.
	(with-parsed-tramp-file-name): Protect debug spec during compilation.
	(tramp-handle-insert-directory): Check (featurep 'ls-lisp).
	(tramp-file-name-p, tramp-file-name-multi-method)
	(tramp-file-name-method, tramp-file-name-user)
	(tramp-file-name-host, tramp-file-name-localname): New defuns,
	replacing defstruct `tramp-file-name'.
	(tramp-handle-file-remote-p, tramp-completion-dissect-file-name1)
	(tramp-dissect-file-name, tramp-dissect-multi-file-name):
	Apply `vector' instead of `make-tramp-file-name'.
	(tramp-handle-make-auto-save-file-name):
	Apply `tramp-temporary-file-directory' for compatibility reasons.
	(tramp-completion-mode): Use `natnump' instead of `wholenump'
	because of XEmacs.
	(tramp-completion-mode): `last-input-event' is nil when XEmacs is
	started.

2007-05-28  Chong Yidong  <cyd@stupidchicken.com>

	* textmodes/sgml-mode.el (sgml-point-entered): Use condition-case.

2007-05-27  Tetsurou Okazaki  <okazaki@be.to>  (tiny change)

	* log-edit.el (log-edit-changelog-paragraph): Return point-max
	as the end of the ChangeLog paragraph when it ends without a line
	termination.

2007-05-27  Ryan Yeske  <rcyeske@gmail.com>

	* net/webjump.el (webjump-sample-sites):
	Add simple Wikipedia query.

2007-05-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/derived.el (define-derived-mode): Remove bogus
	compatibility code.

	* emacs-lisp/copyright.el (copyright-names-regexp): New var.
	(copyright-update-year): Use it.

	* edmacro.el (edmacro-format-keys): Use current-active-maps.

	* ediff-init.el (ediff-defvar-local, ediff-with-current-buffer):
	Add indentation and debugging info.  Fix up comment convention.

	* cus-dep.el (custom-make-dependencies): Simplify.

	* composite.el (compose-region, decompose-region):
	Use inhibit-read-only and restore-buffer-modified-p.

	* xt-mouse.el (xterm-mouse-truncate-wrap): New function.
	(xterm-mouse-event): Use it.

2007-05-25  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs-cycle-previous): Don't modify the cycle list until
	`switch-to-buffer' has returned succesfully.
	(bs-cycle-next): Ditto.  Also, don't bury the buffer when the
	window is dedicated (it could iconify the frame).

2007-05-25  Miles Bader  <miles@fencepost.gnu.org>

	* vc-hooks.el (vc-find-root): Fix file attribute test.

2007-05-24  Richard Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-correct-word-before-point):
	Don't let opoint be nil.
	(flyspell-emacs-popup): Explicit error if no dialogs.

2007-05-24  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-forward-hscroll, image-backward-hscroll)
	(image-next-line, image-previous-line, image-scroll-up)
	(image-scroll-down, image-bol, image-eol, image-bob, image-eob):
	New functions.
	(image-mode-map): Remap motion commands.
	(image-mode-text-map): New keymap for viewing images as text.
	(image-mode): Use image-mode-map.
	(image-toggle-display): Toggle auto-hscroll-mode and mode keymaps.

2007-05-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/fill.el (canonically-space-region): Make the second arg
	a marker if it's not already the case.

2007-05-23  Eli Zaretskii  <eliz@gnu.org>

	* tar-mode.el (tar-header-block-summarize, tar-summarize-buffer)
	(tar-get-descriptor): Handle type 55, an extended pax header.

2007-05-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* autoinsert.el (auto-insert-alist): Quote elisp sample code so as not
	to confuse outline-minor-mode.

2007-05-23  Eli Zaretskii  <eliz@gnu.org>

	* tar-mode.el (tar-file-name-handler): New function.
	(tar-extract): Bind file-name-handler-alist to it to force
	find-buffer-file-type-coding-system behave as if the file being
	extracted existed.  Use last-coding-system-used to force
	buffer-file-coding-system to what decode-coding-region actually
	used to decode the file.

2007-05-23  Nikolaj Schumacher  <n_schumacher@web.de>  (tiny change)

	* progmodes/compile.el (compilation-handle-exit):
	`compilation-finish-function' may change the current buffer.

2007-05-22  Richard Stallman  <rms@gnu.org>

	* files.el (set-auto-mode): Doc fix.

2007-05-22  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* help-fns.el (find-source-lisp-file): New function.
	(describe-function-1): Use find-source-lisp-file to find source
	file in compile tree.

2007-05-22  Eli Zaretskii  <eliz@gnu.org>

	* dos-w32.el (find-buffer-file-type-coding-system): Doc fix.

2007-05-22  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/easy-mmode.el (define-minor-mode)
	(easy-mmode-define-navigation): Fix typos in docstrings.

2007-05-22  Glenn Morris  <rgm@gnu.org>

	* files.el (auto-mode-alist): Open `.asd' files in lisp-mode.

2007-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mail/mail-extr.el (mail-extract-address-components):
	Recognize non-ASCII characters except for NBSP as words.

2007-05-21  Trent Buck  <trentbuck@gmail.com>  (tiny change)

	* net/rcirc.el (rcirc-fill-column): Allow `window-width'.
	(rcirc-print): Handle `window-width'.
	(rcirc-buffer-maximum-lines): Doc fix.

2007-05-21  Chong Yidong  <cyd@stupidchicken.com>

	* image-mode.el (image-toggle-display): Don't clear image cache.
	Only use filename in image spec if the file is readable.
	Call image-refresh.

	* image.el (image-type-from-file-name, image-type): Simplify.
	(image-type-auto-detected-p): Don't scan auto-mode-alist.

	* files.el (magic-mode-alist): Remove image-type-auto-detected-p.
	(magic-fallback-mode-alist): Add image-type-auto-detected-p.

2007-05-20  Nick Roberts  <nickrob@snap.net.nz>

	* t-mouse.el (t-mouse-mode): Reset t-mouse-mode to nil if there
	is an error.

	* term/linux.el (terminal-init-linux): Don't signal an error
	if gpm isn't running.

2007-05-20  Nick Roberts  <nickrob@snap.net.nz>

	* t-mouse.el: Reduce to a minor-mode macro call.
	(t-mouse-mode): Remove the lighter.

	* term/linux.el (terminal-init-linux): Enable t-mouse by default.

2007-05-19  Dan Nicolaescu  <dann@ics.uci.edu>

	* files.el (auto-mode-alist): Change the regexp so that
	ChangeLog.unicode and ChangeLog.multi-tty use change-log-mode.

2007-06-02  Chong Yidong  <cyd@stupidchicken.com>

	* Version 22.1 released.

2007-05-19  Chong Yidong  <cyd@stupidchicken.com>

	* paren.el (show-paren-function): Undo 2007-04-19 and 2007-04-20
	changes.

2007-05-19  Kevin Ryde  <user42@zip.com.au>

	* info.el (Info-fontify-node): Fontify https as well as http and ftp.

2007-05-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* textmodes/sgml-mode.el: Revert last change.

2007-05-18  Richard Stallman  <rms@gnu.org>

	* simple.el (push-mark): Doc fix.

2007-05-18  Rob Riepel  <riepel@Stanford.EDU>

	* emulation/tpu-edt.el (CSI-map, SS3-map): Move from global-map to
	tpu-global-map.
	(tpu-original-global-map): Variable deleted.
	(tpu-control-keys-map): New keymap variable.
	(tpu-set-control-keys): Use tpu-reset-control-keys rather than
	setting keymapping directly.
	(tpu-reset-control-keys): Use tpu-control-keys-map instead of
	tpu-global-map.
	(tpu-edt-on): Activate the tpu-global-map.
	(tpu-edt-off): Deactivate the tpu-global-map.

2007-05-18  Ryan Yeske  <rcyeske@gmail.com>

	* textmodes/ispell.el (ispell-get-word): Return markers
	for start and end positions.
	(ispell-word): Assume END is a marker.

2007-05-17  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* printing.el: Group together all XEmacs/Emacs definitions.
	(pr-version): New version 6.9.
	(pr-global-menubar, pr-menu-char-height, pr-menu-char-width): New funs.
	(pr-menu-char-height, pr-menu-char-width): Fix initialization code.
	(pr-menu-bind): Fix code.
	(pr-e-frame-char-height, pr-e-frame-char-width)
	(pr-e-mouse-pixel-position, pr-x-add-submenu, pr-x-event-function)
	(pr-x-event-object, pr-x-find-menu-item, pr-x-font-height)
	(pr-x-font-width, pr-x-get-popup-menu-response, pr-x-make-event)
	(pr-x-misc-user-event-p, pr-x-relabel-menu-item, pr-x-event-x-pixel)
	(pr-x-event-y-pixel): Aliases eliminated.
	(pr-xemacs-global-menubar): Macro moved.
	(current-menubar, current-mouse-event, zmacs-region-stays)
	(deactivate-mark, pr-menu-position, pr-menu-state, pr-ps-name-old)
	(pr-txt-name-old, pr-ps-utility-old, pr-even-or-odd-old, pr-temp-menu):
	Vars moved.
	(pr-region-active-p, pr-menu-position, pr-menu-lookup, pr-menu-lock)
	(pr-update-mode-line, pr-do-update-menus, pr-menu-alist)
	(pr-relabel-menu-item, pr-menu-set-ps-title, pr-menu-set-txt-title)
	(pr-menu-set-utility-title, pr-even-or-odd-pages)
	(pr-f-set-keymap-parents, pr-f-set-keymap-name, pr-f-read-string)
	(pr-keep-region-active, pr-menu-get-item, pr-menu-set-item-name): Funs
	moved.

2007-05-17  Christian Plate  <cplate@web.de>  (tiny change)

	* textmodes/sgml-mode.el (sgml-tag):
	Fix bug: Call sgml-transformation-function.

2007-05-17  Martin Rudalics  <rudalics@gmx.at>

	* hilit-chg.el (highlight-changes-rotate-faces): Don't set
	modified flag of buffer.  Use `inhibit-modification-hooks'.

2007-05-16  Richard Stallman  <rms@gnu.org>

	* buff-menu.el (Buffer-menu-sort-column): Doc fix.

2007-05-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (magic-mode-alist, magic-fallback-mode-alist):
	Move the *ml, Postscript, and XmCD entries to the fallback part.

	* files.el (magic-fallback-mode-alist):
	Rename from file-start-mode-alist.

2007-05-16  Nikolaj Schumacher  <n_schumacher@web.de>  (tiny change)

	* progmodes/compile.el (compilation-handle-exit): Quote first
	argument of `run-hook-with-args'.

2007-05-16  Juanma Barranquero  <lekktu@gmail.com>

	* buff-menu.el (Buffer-menu-sort-column):
	* dabbrev.el (dabbrev-upcase-means-case-search):
	* dired.el (dired-recursive-deletes, dired-recursive-copies):
	* info.el (Info-current-subfile):
	* ls-lisp.el (ls-lisp-verbosity):
	* msb.el (msb-menu-cond):
	* pcvs.el (cvs-dired-use-hook):
	* simple.el (set-mark-command-repeat-pop):
	* time.el (display-time-24hr-format, display-time-mail-file):
	Doc fixes.

	* tutorial.el (get-lang-string, tutorial--find-changed-keys):
	* printing.el (pr-ps-fast-fire): Fix typos in docstrings.

	* view.el (view-inhibit-help-message): Fix typo in docstring.
	(view-scroll-auto-exit, view-try-extend-at-buffer-end): Doc fixes.

2007-05-16  Martin Rudalics  <rudalics@gmx.at>

	* textmodes/ispell.el (ispell-start-process): Defend against bad
	default-directory.

2007-05-14  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-convert-to-babyl-format): Check
	content-transfer-encoding _last_, because it's its position that
	we need as value of base64-header-field-end.

2007-05-14  Juanma Barranquero  <lekktu@gmail.com>

	* files.el (mode-require-final-newline, require-final-newline)
	(enable-local-variables, enable-local-eval): Doc fixes.

2007-05-13  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: Use default color when foreground or background color
	are unspecified.  Reported by Leo <sdl.web@gmail.com>.
	(ps-print-version): New version 6.7.4.
	(ps-rgb-color): New argument.  Use default color when color is
	unspecified.
	(ps-begin-job): Fix code.

2007-05-12  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Make longlines-auto-wrap
	buffer-local.  Add hooks unconditionally.
	(longlines-auto-wrap): Toggle wrapping.
	(longlines-after-change-function)
	(longlines-post-command-function): Check longlines-auto-wrap.

2007-05-12  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-debug-buffer): New variable.
	(xterm-mouse-translate): Use it.

2007-05-10  Richard Stallman  <rms@gnu.org>

	* international/iso-cvt.el (iso-cvt-read-only): Ignore arguments.
	(iso-cvt-write-only): Likewise.

	* emacs-lisp/easy-mmode.el (define-minor-mode):
	Fix generated doc string.

	* startup.el (fancy-splash-text): Add URL of guided tour.
	Adjust horizontal and vertical whitespace.

	* progmodes/compile.el (compilation-handle-exit):
	Use run-hook-with-args to run compilation-finish-functions.

	* files.el (file-start-mode-alist): New variable.
	(magic-mode-regexp-match-limit): Doc fix.
	(set-auto-mode): Handle file-start-mode-alist.
	A little cleanup of structure.

	* dabbrev.el (dabbrev-eliminate-newlines):
	Renamed from dabbrev--eliminate-newlines.  All uses changed.

2007-05-10  Micha,Ak(Bl Cadilhac  <michael@cadilhac.name>

	* man.el (Man-next-section): Don't consider the last line of the page
	as being part of any section.

2007-05-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/sgml-mode.el (sgml-value): Fix handling of attributes which
	can take any number of values.

2007-05-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2): Add citet and citep
	to the list of citation commands.

2007-05-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el (vc-find-root): Stop searching when the user changes.

2007-05-09  Edward O'Connor  <hober0@gmail.com>  (tiny change)

	* progmodes/python.el (python-font-lock-keywords)
	(python-open-block-statement-p, python-mode): Add support for the new
	"with" keyword.

2007-05-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff-mode.el (diff-apply-hunk, diff-test-hunk): Don't do by default
	the exact opposite of diff-goto-source.

	* emacs-lisp/advice.el (ad-special-forms): Remove.
	(ad-special-form-p): Use subr-arity.

	* newcomment.el (comment-search-forward): Make sure we search forward.
	(comment-enter-backward): Try and distinguish the non-matching case at
	EOB from the non-matching case with a missing comment-end-skip for
	a 2-char comment ender.
	(comment-choose-indent): New function extracted from comment-indent.
	Improve the alignment algorithm.
	(comment-indent): Use it.

	* textmodes/sgml-mode.el (sgml-lexical-context): Add handling of
	XML style Processing Instructions.
	(sgml-parse-tag-backward): Handle XML-style PIs.  Also ensure progress.
	(sgml-calculate-indent): Handle `pi' context.

	* vc.el: Ensure that update-changelog issues an error when used with
	a backend that does not implement it.
	(vc-update-changelog-rcs2log): Rename from vc-default-update-changelog.
	Remove `backend' argument.  Use expand-file-name.
	(vc-cvs-update-changelog, vc-rcs-update-changelog): New aliases.

	* progmodes/python.el (python-end-of-block): Revert last change.
	(python-end-of-statement): Make sure we move *forward*.

2007-05-08  Richard Stallman  <rms@gnu.org>

	* mail/mailabbrev.el (sendmail-pre-abbrev-expand-hook):
	Don't include non-self-insert commands in the exception for `-'.

2007-05-08  David Reitter  <david.reitter@gmail.com>

	* progmodes/python.el (python-guess-indent): Check non-nullness
	before comparing indent against the 2..8 interval.

2007-05-07  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-ts-unicode-for-key-event): Check if text is
	available.

2007-05-06  Richard Stallman  <rms@gnu.org>

	* emacs-lisp/eldoc.el (turn-on-eldoc-mode): Doc fix.

2007-05-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* diff.el (diff): Use buffer-local vars diff-old-file and diff-new-file
	rather than storing their value in the revert-buffer function.

2007-05-04  Nick Roberts  <nickrob@snap.net.nz>

	* t-mouse.el (t-mouse-mode): Do nothing on a graphical display
	when disabling t-mouse-mode.

2007-05-01  Davis Herring  <herring@lanl.gov>

	* calendar/timeclock.el: Update version number.
	(timeclock-modeline-display): Mention timeclock-use-display-time
	in explanatory message.
	(timeclock-in): Fix non-interactive workday specifications.
	(timeclock-log): Don't kill the log buffer if it already existed.
	Suppress warnings when finding the log.  Don't check for a nil
	project twice.  Run hooks after killing the buffer (if applicable).
	(timeclock-geometric-mean): Rename to `timeclock-mean' (it never
	was geometric).  All uses changed.
	(timeclock-generate-report): Support prefix argument.

2007-05-03  Ryan Yeske  <rcyeske@gmail.com>

	* net/rcirc.el (rcirc-timeout-seconds): Increase to prevent unwanted
	disconnections.

2007-05-01  Romain Francoise  <romain@orebokech.com>

	* dired-x.el: Revert 2007-04-06 change.

2007-04-29  Stephen Berman  <Stephen.Berman@gmx.net>

	* find-dired.el (find-dired-filter): Propertize all text down to eob.

2007-04-29  Richard Stallman  <rms@gnu.org>

	* international/mule.el (auto-coding-alist): Add pdf => no-conversion.

2007-04-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-mode.el (c-before-change): Use point-min rather
	than 1.

2007-04-28  Richard Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-mode): Recognize .profile as sh style.

2007-04-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Pdb can't handle SIGINT so
	don't put stop on toolbar.

2007-04-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-hooks.el (vc-ignore-dir-regexp): Add /.../ for the DFS filesystem.

2007-04-28  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in ($(lisp)/mh-e/mh-loaddefs.el): Use ./mh-e
	instead of $(lisp)/mh-e.

2007-04-28  Glenn Morris  <rgm@gnu.org>

	* image-dired.el (image-dired-cmd-create-thumbnail-options)
	(image-dired-cmd-create-temp-image-options): Replace option
	+profile "*" with -strip.

2007-04-27  Chong Yidong  <cyd@stupidchicken.com>

	* textmodes/flyspell.el (flyspell-auto-correct-previous-word):
	Use window-start and window-end.

2007-04-27  Andreas Schwab  <schwab@suse.de>

	* emacs-lisp/sregex.el (sregexq): Fix doc string quoting.

2007-04-27  Eli Zaretskii  <eliz@gnu.org>

	* textmodes/fill.el (fill-paragraph): Doc fix.

2007-04-26  Luc Teirlinck  <teirllm@dms.auburn.edu>

	* locate.el (locate-in-alternate-database): Doc fix.

2007-04-26  Glenn Morris  <rgm@gnu.org>

	* button.el (button): Use underline if supported, else fall back
	to color.

	* version.el (emacs-version): Increase to 22.1.50.

2007-04-25  Richard Stallman  <rms@gnu.org>

	* hi-lock.el (hi-lock-file-patterns-policy): Default to `ask'.

2007-04-25  J.D. Smith  <jdsmith@as.arizona.edu>

	* progmodes/idlwave.el (idlwave-beginning-of-subprogram)
	(idlwave-end-of-subprogram): Take optional NOMARK arg to prevent
	pushing mark.
	(idlwave-current-routine): Don't push mark.

2007-04-25  Mathias Dahl  <mathias.dahl@gmail.com>

	* image-dired.el (image-dired-display-image): Derive image-type from
	filename rather than assuming jpeg, in case no resizing was needed.

2007-04-25  Johan Bockg,Ae(Brd  <bojohan@dd.chalmers.se>

	* custom.el (defface): Doc fix.

See ChangeLog.12 for earlier changes.

;; Local Variables:
;; coding: iso-2022-7bit
;; add-log-time-zone-rule: t
;; End:

    Copyright (C) 2007 Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation; either version 3, or (at your option)
  any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs; see the file COPYING.  If not, write to the
  Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
  Boston, MA 02110-1301, USA.

;; arch-tag: 1e8aa93a-fc6c-4ac3-9b10-1f445e1840af
