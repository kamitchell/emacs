2005-10-06  Bill Wohler  <wohler@newt.com>

	* mh-e/mh-loaddefs.el: Removed. Now generated automatically.

	* Makefile.in (AUTOGENEL): Added mh-e/mh-loaddefs.el.
	(MH-E-SRC): Added. Used by mh-autoloads.
	(mh-autoloads): Added. Builds mh-e/mh-loaddefs.el. Rebuilds if any
	files in MH-E-SRC have been updated.
	(compile, recompile, bootstrap): Depend on mh-autoloads.

2005-10-07  Nick Roberts  <nickrob@snap.net.nz>
	
	* progmodes/gud.el (gud-menu-map): Only display un-intuitive
	gud-break and gud-remove icons when the fringe is not available.

	* progmodes/gdb-ui.el (gdb-fringe-width -> gdb-buffer-fringe-width):
	Typo.

2005-10-06  Thien-Thi Nguyen  <ttn@gnu.org>

	* play/zone.el (zone): Wrap body with save-window-excursion.
	Suggested by Michael Cadilhac.

2005-10-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/cal-menu.el (calendar-mouse-view-diary-entries):
	Use the new `list-only' arg to diary-list-entries.

	* calendar/diary-lib.el: Use overlays rather than selective-display.
	(diary-selective-display): New var.
	(diary-header-line-format): Use it.
	(diary-list-entries): Add argument `list-only'.
	Put the buffer in diary-mode.  Don't add \^M at beg and end.
	Replace \^M by invisible overlays.
	(diary-unhide-everything): Replace \^M by invisible overlays.
	(print-diary-entries): Look for overlays rather than \^M.
	Add a space to the temp buffer name.
	(diary-show-all-entries, mark-diary-entries, make-diary-entry):
	Put the buffer in diary-mode.
	(list-sexp-diary-entries): Replace \^M by invisible overlays.
	(diary-anniversary): Make the year arg optional.
	(diary-time-regexp): New const.
	(diary-font-lock-keywords): Use it to accept a few more time formats.

	* pcvs.el (cvs-sentinel): Make sure we do re-enable undo.

2005-10-06  Thien-Thi Nguyen  <ttn@gnu.org>

	* textmodes/artist.el (artist-ellipse-mirror-quadrant):
	Fix bug introduced 2005-07-03: Use (car (last ...))
	to faithfully reproduce replaced artist-last.
	(artist-set-arrow-points-for-poly): Likewise.
	Suggested by Johan Bockg,Ae(Brd.

2005-10-06  Juanma Barranquero  <lekktu@gmail.com>

	* dframe.el (x-pointer-hand2, x-pointer-top-left-arrow):
	* wid-edit.el (widget):
	* progmodes/gdb-ui.el (gdb-buffer-fringe-width):
	* progmodes/vhdl-mode.el (speedbar-attached-frame): Add defvars.

2005-10-06  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-environment):
	Fix setting up of case-table for unibyte mode.

	* simple.el (what-cursor-position): If the character is displayed
	by some `display' text property, show that.  Don't use
	single-key-description for eight-bit characters in multibyte mode.

2005-10-06  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-fringe-width): New variable.
	(gdb-ann3): Set it.
	(gdb-put-breakpoint-icon): Don't take fringe-width from speedbar frame.
	(gdb-info-frames-custom): Use inverse-video for first five
	characters of selected frame only.
	(gdb-get-frame-number): Select frame even when point is on frame
	number.

2005-10-06  Masatake YAMATO  <jet@gyve.org>

	* progmodes/gdb-ui.el (gdb-info-breakpoints-custom):
	Put `font-lock-function-name-face'.
	(gdb-info-frames-custom): Put `font-lock-function-name-face'
	and `font-lock-variable-name-face'
	(gdb-registers-font-lock-keywords): New font lock keywords definition.
	(gdb-registers-mode): Use `gdb-registers-font-lock-keywords`.
	(gdb-memory-font-lock-keywords): New font lock keywords definition.
	(gdb-memory-mode): Use `gdb-memory-font-lock-keywords'.
	(gdb-local-font-lock-keywords): New font lock keywords definition.
	(gdb-locals-mode): Use `gdb-local-font-lock-keywords'
	(gdb-threads-font-lock-keywords): New font lock keywords definition.
	(gdb-threads-mode): Use `gdb-threads-font-lock-keywords'.

2005-10-05  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-merge.el (ediff-merge-region-is-non-clash): New defsubst.
	(ediff-merge-region-is-non-clash-to-skip): Previously called
	ediff-merge-region-is-non-clash.

	* ediff-mult.el (ediff-append-custom-diff, ediff-meta-show-patch):
	Use insert-buffer-substring.

	* ediff-ptch.el (ediff-fixup-patch-map): Use better heuristics for
	selecting files to patch.  Also bug fixes.

	* ediff-util.el (ediff-setup): Bug fix.
	(ediff-next-difference): Never skip clashes that differ in white
	space only.

	* ediff-wind.el (ediff-setup-control-frame)
	(ediff-destroy-control-frame): Check the menubar feature.

	* viper-cmd.el (viper-normalize-minor-mode-map-alist)
	(viper-refresh-mode-line): Use make-local-variable to localize
	some vars instead of make-variable-buffer-local.  Suggested by
	Stefan Monnier.

	* viper-init.el (viper-make-variable-buffer-local): Delete alias.
	(viper-restore-cursor-type, viper-set-insert-cursor-type):
	Use make-local-variable instead of make-variable-buffer-local.
	Suggested by Stefan Monnier.

	* viper.el (viper-mode): Don't use viper-make-variable-buffer-local.
	(viper-comint-mode-hook): Use make-local-variable on
	require-final-newline.
	(viper-non-hook-settings): Don't use make-variable-buffer-local.

2005-10-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/scheme.el (scheme-mode-syntax-table): Mark ; as being
	also the second char of a comment-start sequence.
	(scheme-sexp-comment-syntax-table): New var.
	(lambda, define): Set their scheme-doc-string-elt property.
	(scheme-font-lock-syntactic-face-function): Handle sexp-comments.
	Use lisp-font-lock-syntactic-face-function now that it properly
	handles |...| symbols.
	(scheme-mode-variables): Set lisp-doc-string-elt-property,
	parse-sexp-lookup-properties and font-lock-extra-managed-props.

	* emacs-lisp/lisp-mode.el (lisp-mode-syntax-table): Move the nesting
	bit from # to |.
	(lisp-font-lock-syntactic-face-function): Distinguish |...| symbols.

	* emacs-lisp/lisp-mode.el (lambda): Add its doc-string-elt property.
	(lisp-doc-string-elt-property): New var.
	(lisp-font-lock-syntactic-face-function): Use it.
	Rewrite to recognize docstrings even for forms not at toplevel.

	* progmodes/scheme.el (scheme-mode-syntax-table): Put the nested
	annotation on the | part of #| rather than on the # part.
	(scheme-font-lock-syntactic-face-function): New function, to
	distinguish strings from |...| symbols.
	(scheme-mode-variables): Use it.  Also fix up the font-lock-time
	syntax-table so that #|...|# is properly highlighted.

	* emacs-lisp/lisp-mode.el (lisp-font-lock-syntactic-face-function):
	Don't mark as docstring the 3rd elem of an unknown toplevel form.

2005-10-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* bindings.el (global-map): Resync [home] and [end] bindings with C-a
	and C-e.

	* emacs-lisp/eldoc.el: Move comments into docstrings.
	(eldoc-message-commands): Initialize in its declaration.
	Add move-beginning-of-line and move-end-of-line.
	(eldoc-add-command, eldoc-add-command-completions)
	(eldoc-remove-command, eldoc-remove-command-completions): Simplify.

	* outline.el (outline-mark-subtree): Activate the mark.

	* calendar/appt.el (appt-time-regexp): New var.
	(appt-add, appt-make-list): Use it.
	(appt-convert-time): Clean up.

	* textmodes/tex-mode.el (tex-font-lock-syntactic-face-function):
	Don't set any syntax-table property here.
	(tex-font-lock-verb): New function.  Do it here.
	(tex-font-lock-syntactic-keywords): Use it.

2005-10-04  Richard M. Stallman  <rms@gnu.org>

	* wid-edit.el (widget-file-complete): Get the widget start point
	the right way.  Default directory to `/' if file has none.

	* x-dnd.el (x-dnd-drop-data): Check for dedicated windows.

	* textmodes/flyspell.el (flyspell-mode-on):
	Call ispell-maybe-find-aspell-dictionaries.

	* textmodes/ispell.el (ispell-word, ispell-region):
	Call ispell-maybe-find-aspell-dictionaries.
	(ispell-accept-buffer-local-defs):
	Don't call ispell-maybe-find-aspell-dictionaries

2005-10-04  Richard M. Stallman  <rms@gnu.org>

	* iswitchb.el (iswitchb-buffer-ignore): Label it risky.

2005-10-04  Emilio C. Lopes  <eclig@gmx.net>

	* iswitchb.el (iswitchb-ignore-buffername-p): Use `functionp'
	instead of `fboundp' in order to allow for anonymous functions.

2005-10-04  Chong Yidong  <cyd@stupidchicken.com>

	* info.el (Info-next, Info-prev, Info-up): Select info buffer, in
	case the user clicks on the link while another window is selected.
	(Info-speedbar-hierarchy-buttons): Use speedbar-current-frame.

	* dframe.el (dframe-update-keymap): Use mouse-1-click-follows-link
	functionality.
	(dframe-help-echo): Save point in case mouse tracking is off.

2005-10-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/ange-ftp.el (ange-ftp-ls): Fix typo introduced in last change.

2005-10-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cc-styles.el (c-setup-paragraph-variables): Make sure we do
	not change the global value of those vars.

	* progmodes/cc-mode.el (c-basic-common-init): Remove calls to
	make-local-variable which we do not need any more.

2005-10-03  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el (speedbar-ignored-path-regexp, speedbar-line-path)
	(speedbar-ignored-path-expressions, speedbar-buffers-line-path)
	(speedbar-add-ignored-path-regexp, speedbar-buffers-line-path)
	(speedbar-path-line): Define obsolete aliases.
	(speedbar-line-directory): Doc fix.

	* progmodes/vhdl-mode.el (vhdl-speedbar-initialize)
	(vhdl-speedbar-rescan-hierarchy): Call speedbar-line-directory
	instead of speedbar-line-path.

2005-10-03  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* x-dnd.el (x-dnd-drop-data): Don't set dnd-open-file-other-window
	to nil if dropping on a window.  Handle dropping on a minibuffer window
	like dropping on a non-window part of Emacs.

2005-10-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el: Use with-current-buffer.
	(ange-ftp-insert-directory): Do not follow symlinks any more.

	* textmodes/ispell.el (ispell-find-aspell-dictionaries):
	Remove interactive spec.

2005-10-03  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Use custom-initialize-set.

2005-10-02  Richard M. Stallman  <rms@gnu.org>

	* progmodes/ebnf2ps.el (ebnf-eps-production-list):
	Use insert-buffer-substring.

	* net/tramp.el: Pacify byte compiler warnings in pacification code.
	(tramp-handle-file-local-copy): Use insert-buffer-substring.

2005-10-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-insert-directory): Undo unintended part
	in last change.
	(ange-ftp-insert-directory): Fix up the search for the case where
	`file' is absolute.

2005-10-02  Romain Francoise  <romain@orebokech.com>

	* progmodes/compile.el (compile-goto-error): Delete extra paren.

2005-10-02  Andreas Schwab  <schwab@suse.de>

	* ediff-ptch.el (ediff-fixup-patch-map): Handle file names without
	directory component in the session info.

2005-10-01  Richard M. Stallman  <rms@gnu.org>

	* comint.el (comint-redirect-subvert-readonly): Doc fix.

	* simple.el (next-error-internal): New function.

	* progmodes/compile.el (compilation-buffer-name): New arg MODE-COMMAND.
	(compilation-start): Pass new arg to compilation-buffer-name.
	(compile-goto-error): Use next-error-internal.

2005-10-01  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el: Remove RCS tag.
	(speedbar-check-read-only): Handle non-existent files.

	* dframe.el, ezimage.el, sb-image.el: Remove RCS tags.

	* info.el (Info-speedbar-hierarchy-buttons)
	(Info-speedbar-goto-node): Call speedbar-select-attached-frame.

2005-10-01  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-valid-entry-whitespace-re):
	Do not match newline.
	(bibtex-realign): Do not use bibtex-valid-entry-whitespace-re.
	(bibtex-summary): Remove unnecessary save-excursion.
	(bibtex-fill-field-bounds): Use fill-region-as-paragraph.

2005-10-01  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Add charset info for "iso10646-1".
	Modify default fontset to use ATSUI-compatible fonts for some charsets
	if available.

2005-10-01  Chong Yidong  <cyd@stupidchicken.com>

	* speedbar.el: Re-apply arch tag.
	(speedbar-version): Rename to version 1.0.  Suggested by Eric
	M. Ludlam.
	Reapply two changes from Emacs CVS' version of speedbar lost
	during the merge:
	(speedbar-use-imenu-flag): Avoid unnecessary use of locate-library.
	(speedbar-frame-parameters): Improve customize type.

2005-09-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-gwp-start): Use with-current-buffer.
	(ange-ftp-file-directory-p): Fix the symlink case.
	(ange-ftp-insert-directory): When listing a single file, get a list of
	the parent buffer and extract the relevant line.  Inspired from a patch
	by Katsumi Yamaoka <yamaoka@jpl.org>.
	(ange-ftp-file-name-sans-versions): Simplify.

2005-09-30  Bill Wohler  <wohler@newt.com>

	Move MH-E image files from toolbar and mail directories into
	etc/images.

	* mail/reply2.*: Move to etc/images/mail/reply*.

	* toolbar/execute.*, toolbar/highlight.*, toolbar/mh-logo.xpm:
	* toolbar/page-down.*, toolbar/show.*, toolbar/widen.*: Move to
	etc/images.

	* toolbar/alias.*, toolbar/refile.*, toolbar/repack.*:
	* toolbar/reply*: Move to etc/images/mail.

	* toolbar/rescan.*: Move and rename to etc/images/refresh.*.

2005-09-30  Eric M. Ludlam <zappo@gnu.org>

	* speedbar.el: New version 1.0pre3.

	Frame management code (including timer, and mouse click specifics)
	moved to dframe.el:
	(speedbar-attached-frame): Removed.  Use dframe-attached-frame.
	(speedbar-timer): Removed.  Use dframe-timer.
	(speedbar-close-frame): Removed.  Use dframe-close-frame.
	(speedbar-activity-change-focus-flag): Removed.  Use
	dframe-activity-change-focus-flag.
	(speedbar-update-speed, speedbar-navigating-speed): Obsolete.  Use
	dframe-update-speed.

	(speedbar-current-frame): New macro.  Use this instead of the
	variable speedbar-frame.

	(speedbar-use-images, speedbar-expand-image-button-alist)
	(speedbar-insert-image-button-maybe): Moved to sb-image.el.

	(speedbar-find-image-on-load-path): Removed.  Replaced by
	defezimage in ezimage.el.
	(speedbar-expand-image-button-alist): Removed.  Replaced by
	ezimage-expand-image-button-alist in ezimage.el.

	(speedbar-ignored-directory-regexp)
	(speedbar-add-ignored-directory-regexp)
	(speedbar-ignored-directory-expressions)
	(speedbar-line-directory, speedbar-buffers-line-directory)
	(speedbar-directory-line, speedbar-buffers-line-directory):
	Renamed, replacing `path' with `directory'.

	(speedbar-create-directory, speedbar-expand-line-descendants)
	(speedbar-toggle-line-expansion)
	(speedbar-contract-line-descendants): New commands.

	(speedbar-query-confirmation-method, speedbar-select-frame-method)
	(speedbar-use-tool-tips-flag): New options.

	(speedbar-check-read-only, speedbar-require-version)
	(speedbar-insert-separator, speedbar-buffers-tail-notes)
	(speedbar-handle-delete-frame, speedbar-try-completion)
	(speedbar-update-localized-contents): New functions.

	(speedbar-incompatible-version, speedbar-ro-to-do-point)
	(speedbar-object-read-only-indicator): New variables.

	(speedbar-visiting-tag-hook, speedbar-before-visiting-file-hook):
	New hooks.

	(speedbar-separator-face): New face.

	(speedbar-supported-extension-expressions): Add `.g' and `.ma?k'.
	(speedbar-ignored-modes): Add fundamental-mode.
	(speedbar-directory-unshown-regexp): Add . directories.

	(speedbar-key-map): Remove old SPC and DEL page up/down keys.
	(speedbar-file-key-map): Add SPC to toggle node expansion, `[' and
	`]' for full expand/close.
	(speedbar-buffers-key-map): Add SPC to toggle node expansion.

	(speedbar-check-vc): Support hidden files.
	(speedbar-vc-check-dir-p): Use vc-state if available for CVS.
	(speedbar-this-file-in-vc): Use vc-state if available.  If VC
	state is nil, it is not checked out.

	(speedbar-line-text, speedbar-line-token): Support expand buttons
	with no text.
	(speedbar-refresh): Universal argument acts as power-click.
	(speedbar-fetch-dynamic-tags): If a buffer is in Emacs, switch to
	that buffer to get variable values.

	And many other bugfixes.

	* dframe.el, ezimage.el, sb-image.el: New files.

	* sb-*.xpm: Remove files.  New image files installed into
	etc/images/ezimage.

2005-09-30  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-show-warning): If a character is in
	ps-print-translation-table, don't treat it as non-printable.

2005-09-30  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-themes-load-path): New variable.
	(tree-widget-themes-directory): Doc fix.
	(tree-widget-image-formats) [Emacs]: Doc fix.
	(tree-widget--locate-sub-directory): New function.
	(tree-widget-themes-directory): Use it.

	* recentf.el (recentf-filename-handlers): Rename from
	`recentf-filename-handler'.  Allow a list of functions.
	(recentf-menu-items-for-commands): Fix :help strings.
	(recentf-apply-filename-handlers): New function.
	(recentf-expand-file-name): Use it.
	(recentf-cleanup): Remove duplicates too.

2005-09-29  Juri Linkov  <juri@jurta.org>

	* faces.el: Rearrange face definitions to be in the same order as
	their face descriptions in "(emacs)Standard Faces".

	* isearch.el (isearch, lazy-highlight): Add group `basic-faces'.

	* tooltip.el (tooltip): Add group `basic-faces'.

	* buff-menu.el (Buffer-menu-buffer): Remove group
	`font-lock-highlighting-faces'.

	* progmodes/compile.el (compilation-error, compilation-warning)
	(compilation-info, compilation-line-number, compilation-column-number):
	Change group from `font-lock-highlighting-faces' to `compilation'.

	* progmodes/vhdl-mode.el (vhdl-font-lock-prompt-face)
	(vhdl-font-lock-attribute-face, vhdl-font-lock-enumvalue-face)
	(vhdl-font-lock-function-face, vhdl-font-lock-directive-face)
	(vhdl-font-lock-reserved-words-face)
	(vhdl-font-lock-translate-off-face, syntax-alist): Remove group
	`font-lock-highlighting-faces'.

	* cus-edit.el (custom-buffer-sort-alphabetically): Default to nil.

2005-09-28  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Set CUA move property on additional commands:
	up-list, down-list, backward-up-list, end-of-defun beginning-of-defun,
	forward-sexp, backward-sexp, forward-list, backward-list.

2005-09-28  Romain Francoise  <romain@orebokech.com>

	* comint.el (comint-show-output): Really set point at the
	beginning of the output when not using `comint-use-prompt-regexp'.

2005-09-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el (math-oper-table): Raise the precedence of "/"
	in TeX mode.

2005-09-26  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/org.el (org-table-sum): Fix format string.

	* textmodes/tex-mode.el (tex-insert-quote, latex-indent):
	Quote face names.

2005-09-26  Romain Francoise  <romain@orebokech.com>

	* isearch.el (isearch-forward-regexp): Close doc string.

2005-09-25  Richard M. Stallman  <rms@gnu.org>

	* simple.el (blink-matching-open): Don't no-op when point is BEGV+1.

	* isearch.el (isearch-forward, isearch-forward-regexp): Doc fixes.

	* progmodes/compile.el (compilation-error-properties):
	When getting the file from the previous error message,
	correctly decode the new data format.

	* progmodes/cc-cmds.el (c-electric-paren):
	Call old-blink-paren only for close-paren.

2005-09-24  Andreas Schwab  <schwab@suse.de>

	* term/rxvt.el (rxvt-register-default-colors): Delete redundant
	condition.

2005-09-25  Romain Francoise  <romain@orebokech.com>

	* dired-aux.el (dired-copy-file-recursive):
	* dired.el (dired-delete-file):
	* ediff-mult.el (ediff-dir-diff-copy-file):
	* ediff-util.el (ediff-test-save-region):
	* forms.el (forms-mode):
	* ido.el (ido-file-internal, ido-delete-file-at-head):
	* log-edit.el (log-edit-done):
	* ses.el (ses-yank-resize):
	* play/gomoku.el (gomoku-human-plays, gomoku)
	(gomoku-human-resigns, gomoku-prompt-for-other-game)
	(gomoku-offer-a-draw):
	* play/landmark.el (lm-human-resigns, lm):
	* net/eudcb-ldap.el (eudc-ldap-check-base):
	* play/mpuz.el (mpuz-offer-abort, mpuz-try-letter, mpuz-close-game):
	* progmodes/ebrowse.el (ebrowse-find-pattern):
	* progmodes/idlw-shell.el (idlwave-shell-set-bp-check):
	* textmodes/reftex-index.el (reftex-index-initialize-phrases-buffer):
	End `yes-or-no-p' and `y-or-n-p' prompts with question mark and space.

	* vc.el (vc-delete-file):
	* play/gomoku.el (gomoku-terminate-game, gomoku)
	(gomoku-prompt-for-move, gomoku-human-takes-back):
	* play/landmark.el (lm-human-takes-back, lm-prompt-for-move)
	(lm-start-robot, lm-human-plays): Remove extraneous spaces in messages.

2005-09-24  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/rxvt.el (rxvt-register-default-colors): Add support for 255
	color rxvt terminals by using the code xterm.el used to use before
	2005-04-09 in order to match the colors used by rxvt.

2005-09-24  Emanuele Giaquinta <emanuele.giaquinta@gmail.com> (tiny change)

	* term/rxvt.el (rxvt-register-default-colors): Add support for 88
	colors rxvt-unicode terminals by using the same code as xterm.el.

2005-09-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-append-prop)
	(tex-font-lock-suscript, tex-insert-quote, latex-indent): Adjust to the
	new symbol used for the tex-verbatim face.

2005-09-24  Emilio C. Lopes  <eclig@gmx.net>

	* woman.el (woman-file-name):
	* wid-edit.el (widget-file-prompt-value)
	(widget-coding-system-prompt-value):
	* w32-fns.el (set-w32-system-coding-system):
	* vc.el (vc-version-diff, vc-annotate):
	* textmodes/reftex-auc.el (reftex-arg-cite)
	(reftex-arg-index-tag):
	* textmodes/refer.el (refer-get-bib-files):
	* textmodes/artist.el (artist-figlet-choose-font):
	* terminal.el (terminal-emulator):
	* replace.el (occur-read-primary-args):
	* rect.el (string-rectangle, string-insert-rectangle):
	* ps-print.el (ps-print-preprint):
	* progmodes/pascal.el (pascal-goto-defun):
	* progmodes/etags.el (visit-tags-table, visit-tags-table-buffer):
	* progmodes/compile.el (compilation-find-file):
	* printing.el (pr-interactive-n-up):
	* play/animate.el (animate-birthday-present):
	* net/rcompile.el (remote-compile):
	* man.el (man, Man-goto-section, Man-follow-manual-reference):
	* mail/rmailsum.el (rmail-summary-search-backward)
	(rmail-summary-search):
	* mail/rmailout.el (rmail-output-read-rmail-file-name)
	(rmail-output-read-file-name):
	* mail/rmail.el (rmail-search, rmail-search-backwards):
	* mail/mailabbrev.el (merge-mail-abbrevs, rebuild-mail-abbrevs):
	* locate.el (locate):
	* international/quail.el (quail-show-keyboard-layout):
	* international/mule.el (set-buffer-file-coding-system)
	(revert-buffer-with-coding-system, set-file-name-coding-system)
	(set-terminal-coding-system, set-keyboard-coding-system)
	(set-next-selection-coding-system):
	* international/mule-diag.el (describe-coding-system)
	(describe-font, describe-fontset):
	* international/mule-cmds.el (universal-coding-system-argument)
	(search-unencodable-char, describe-input-method)
	(set-language-environment, describe-language-environment):
	* international/codepage.el (codepage-setup):
	* international/code-pages.el (codepage-setup):
	* info.el (Info-search, Info-follow-reference)
	(Info-search-backward):
	* emacs-lisp/advice.el (ad-read-advised-function)
	(ad-read-advice-class, ad-clear-cache, ad-activate)
	(ad-deactivate, ad-update, ad-unadvise, ad-read-advice-name)
	(ad-enable-advice, ad-disable-advice, ad-remove-advice)
	(ad-read-regexp):
	* ediff-util.el (ediff-toggle-regexp-match):
	* ediff-ptch.el (ediff-prompt-for-patch-file):
	* dired-aux.el (dired-diff):
	* diff.el (diff):
	* cus-edit.el (custom-variable-prompt):
	* calendar/timeclock.el (timeclock-ask-for-project):
	* calc/calcalg3.el (calc-get-fit-variables):
	* calc/calc-store.el (calc-edit-variable)
	(calc-permanent-variable):
	* vc-mcvs.el (vc-mcvs-register):
	* shadowfile.el (shadow-define-literal-group):
	* woman.el (woman-file-name):
	* vc.el (vc-version-diff, vc-merge):
	* textmodes/reftex-index.el (reftex-index-complete-tag):
	* format.el (format-decode-buffer, format-decode-region):
	* emulation/viper-cmd.el (viper-read-string-with-history):
	* emacs-lisp/debug.el (cancel-debug-on-entry):
	* emacs-lisp/checkdoc.el (checkdoc-this-string-valid-engine):
	* ediff.el (ediff-merge-revisions)
	(ediff-merge-revisions-with-ancestor, ediff-revision):
	* completion.el (interactive-completion-string-reader):
	* calc/calc-prog.el (calc-user-define-formula):
	Follow convention for reading with the minibuffer.

2005-09-24  Steven Huwig  <steven_h@acm.org>  (tiny change)

	* progmodes/python.el (python-describe-symbol): Add globals() and
	locals() to the arguments of emacs.ehelp.

2005-09-24  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-maybe-find-aspell-dictionaries):
	New function, code extracted from ispell-valid-dictionary-list.
	(ispell-valid-dictionary-list, ispell-accept-buffer-local-defs):
	Call it.

2005-09-24  Eli Zaretskii  <eliz@gnu.org>

	* subr.el (version-regexp-alist): Extend valid syntax for version
	strings: allow any of the characters -,_,+ to separate the
	alpha/beta/rc part from the version part.  Doc fix.
	(version-to-list): Doc fix.  Bind case-fold-search to t, as advertised.

2005-09-23  David Reitter  <david.reitter@gmail.com>

	* mail/mailclient.el: New file.

2005-09-23  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-highlight-incorrect-region)
	(flyspell-incorrect-hook, flyspell-highlight-duplicate-region):
	Doc fixes.

	* progmodes/cc-mode.el (c-font-lock-init):
	Specify font-lock-lines-before.

2005-09-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-remove-props): Cause re-highlighting of the
	whole conflict.

2005-09-23  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode-map, orgtbl-mode-map):
	Move keybindings with `C-c C-h' prefix to `C-c C-x' prefix.  Make use
	of `remap' feature when available.  Additional key bindings for
	better tty support.
	(org-mode-restart, org-force-self-insert): New commands.
	(org-time-stamp-inactive): New command.
	(org-remap): New function.
	(org-table-auto-blank-field, org-level-color-stars-only): New options.
	(org-enable-fixed-width-editor): Move to `org-structure'
	customization group.
	(org-self-insert-command, orgtbl-self-insert-command): Modify to
	blank field after field motion commands.

2005-09-23  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (set-language-environment):
	Don't check utf-translate-cjk-lang-env is nil or not on deciding if we
	have to call utf-translate-cjk-load-tables.

2005-09-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-move-drag-overlay): Fix last change.

2005-09-22  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-value-create): Fix previous change.

2005-09-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Fix loading rxvt at run time.

2005-09-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-move-drag-overlay): New function.
	(mouse-drag-region-1): Use it.
	Try to simplify a bit the state handling.  Handle clicks on links
	inside intangible areas.
	(mouse-save-then-kill): Minor simplification.
	(mouse-secondary-overlay): Make it always non-nil instead of
	recreating it each time.
	(mouse-start-secondary, mouse-set-secondary, mouse-drag-secondary)
	(mouse-kill-secondary, mouse-secondary-save-then-kill):
	Simplify accordingly.

2005-09-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/rxvt.el (rxvt-standard-colors): Fix some colors.

2005-09-20  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-ptch.el (ediff-prompt-for-patch-file): More intuitive prompt.
	(ediff-file-name-sans-prefix): Treat nil as an empty string.
	(ediff-fixup-patch-map): Better heuristic for intuiting the file names
	to patch.

	* ediff-util.el: Use insert-buffer-substring.

	* ediff-vers.el (cvs-run-ediff-on-file-descriptor): Bug fix.

	* emulation/viper-cmd.el (viper-change-state): Don't move over the
	field boundaries in the minibuffer.
	(viper-set-minibuffer-style): Add viper-minibuffer-post-command-hook.
	(viper-minibuffer-post-command-hook): New hook.
	(viper-line): Don't move cursor at bolp.

	* emulation/viper-ex.el (ex-pwd, viper-info-on-file): Fix message.

	* emulation/viper-init.el: Add alias to make-variable-buffer-local to
	avoid compiler warnings.

	* emulation/viper-macs.el (ex-map): Better messages.

	* emulation/viper-utils.el (viper-beginning-of-field): New function.

	* emulation/viper.el: Replace make-variable-buffer-local with
	viper-make-variable-buffer-local everywhere, to avoid warnings.

2005-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-drag-mode-line-1, mouse-drag-vertical-line):
	Delete unused var `old-selected-window'.
	(mouse-drag-region-1): Delete unused vars `start-frame', `end-of-range'.
	(mouse-drag-secondary): Delete unused var `start-frame'.

2005-09-19  Emanuele Giaquinta  <emanuele.giaquinta@gmail.com>  (tiny change)

	* term/rxvt.el (terminal-init-rxvt): Add entry for [end].

2005-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/calendar.el (mark-visible-calendar-date): Save excursion.
	Re-indent within 80 columns.  Use inhibit-read-only.

2005-09-19  Romain Francoise  <romain@orebokech.com>

	* calendar/diary-lib.el (mark-diary-entries): Revert last change.

2005-09-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-default-fontify-region): Don't add a line
	unconditionally, since the after-change-function already did it.

2005-09-19  Miles Bader  <miles@gnu.org>

	* net/newsticker.el: Get rid of CVS keyword.

2005-09-19  Johan Bockg,Ae(Brd  <bojohan+sf@dd.chalmers.se>

	* dired-aux.el (dired-handle-overwrite): Don't use `format' here.
	The prompt is formatted later.

2005-09-19  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-value-create): Save the converted
	tree :node widget.

2005-09-19  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/sh-script.el (sh-blink): Fix spurious reference to
	variable `message'.

2005-09-18  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-login-prompt-regexp): Expand regexp in order
	to cover prompts like "login as:".  Reported by Slawomir Nowaczyk
	<slawomir.nowaczyk.847@student.lu.se>.

2005-09-18  Chong Yidong  <cyd@stupidchicken.com>

	* image.el (image-load-path): Use symbol `data-directory' instead
	of its value, for backward compatibility with packages that bind
	it during `find-image'.  Suggested by Katsumi Yamaoka.
	(image-search-load-path): Handle symbols whose values are strings.

2005-09-18  Romain Francoise  <romain@orebokech.com>

	* calendar/diary-lib.el (mark-diary-entries): Rearrange to wrap
	with-current-buffer form in save-excursion.

2005-09-18  D Goel  <deego@gnufans.org>

	* apropos.el (apropos-command): Fix `message' call: first arg
	should be a format spec.  In this and all other cases that appear
	below and elsewhere in the source code, I made a change only when
	two conditions were satisfied: [1] I can think of a possibility
	that the arguments would cause an error, for example, the code in
	question relies on external variables such as filenames.  [2] I
	was sure that the arg to `message' could not have been nil in the code.

	* textmodes/tildify.el (tildify-region): Ditto.

	* textmodes/reftex-index.el (reftex-index-change-entry)
	(reftex-index-phrase-selection-or-word, reftex-query-index-phrase):
	* textmodes/reftex-dcr.el (reftex-echo-ref, reftex-echo-cite):
	* textmodes/org.el (org-complete, org-deadline, org-schedule)
	(org-priority, org-table-sum):
	* textmodes/ispell.el (ispell-check-version, ispell-parse-output):
	* textmodes/flyspell.el (flyspell-mode-on, flyspell-notify-misspell)
	(flyspell-word, flyspell-display-next-corrections):
	* textmodes/bibtex.el (bibtex-print-help-message):
	* textmodes/artist.el (artist-key-set-point-poly):
	* term/mac-win.el (mac-services-insert-text):
	* progmodes/vhdl-mode.el (vhdl-warning, vhdl-print-warnings)
	(vhdl-hooked-abbrev, vhdl-template-insert-fun)
	(vhdl-port-paste-testbench, vhdl-compose-new-component)
	(vhdl-compose-configuration):
	* progmodes/sh-script.el (sh-blink, sh-show-indent)
	(sh-set-indent, sh-learn-line-indent):
	* progmodes/ps-mode.el (ps-mode-target-column):
	* progmodes/idlwave.el (idlwave-make-tags)
	(idlwave-scan-library-catalogs):
	* progmodes/idlw-shell.el (idlwave-shell-parse-stack-and-display):
	* progmodes/gud.el (gud-jdb-analyze-source):
	* progmodes/flymake.el (flymake-log):
	* progmodes/ebnf2ps.el (ebnf-generate-region):
	* progmodes/cmacexp.el (c-macro-expansion):
	* progmodes/ada-xref.el (ada-treat-cmd-string):
	* progmodes/ada-mode.el (ada-create-case-exception-substring)
	(ada-justified-indent-current, ada-batch-reformat):
	* play/zone.el (zone):
	* play/landmark.el (lm-move):
	* play/decipher.el (decipher-show-alphabet):
	* net/newsticker.el (newsticker--display-jump)
	(newsticker--display-scroll):
	* mail/rmail-spam-filter.el (rsf-add-subject-to-spam-list)
	(rsf-add-sender-to-spam-list, rsf-add-region-to-spam-list):
	* mail/feedmail.el (feedmail-dump-message-to-queue):
	* eshell/esh-proc.el (eshell-remove-process-entry):
	* emulation/ws-mode.el (ws-last-error):
	* emulation/viper-macs.el (ex-map-read-args, ex-unmap-read-args)
	(viper-record-kbd-macro):
	* emulation/viper-ex.el (ex-pwd, viper-info-on-file):
	* emacs-lisp/lisp-mnt.el (lm-report-bug):
	* emacs-lisp/find-func.el (find-function-noselect):
	* calendar/timeclock.el (timeclock-status-string)
	(timeclock-workday-remaining-string, timeclock-workday-elapsed-string)
	(timeclock-when-to-leave-string):
	* calendar/icalendar.el (icalendar--convert-ical-to-diary):
	* calc/calc-units.el (calc-enter-units-table):
	* calc/calc-mode.el (calc-mode-record-mode):
	* woman.el (woman-mini-help):
	* wdired.el (wdired-change-to-wdired-mode):
	* vc.el (vc-retrieve-snapshot):
	* strokes.el (strokes-read-stroke, strokes-read-complex-stroke):
	* startup.el (display-startup-echo-area-message):
	* simple.el (set-goal-column):
	* ses.el (ses-command-hook, ses-recalculate-cell):
	* server.el (server-process-filter):
	* printing.el (pr-interface-txt-print, pr-interface-printify)
	(pr-interface-ps):
	* pcvs.el (cvs-help):
	* log-edit.el (log-edit, log-edit-mode-help):
	* iswitchb.el (iswitchb-possible-new-buffer):
	* isearch.el (isearch-edit-string):
	* image-mode.el (image-mode, image-minor-mode):
	* ibuf-macs.el (define-ibuffer-filter):
	* hi-lock.el (hi-lock-find-patterns):
	* files.el (toggle-read-only):
	* ediff-util.el (ediff-copy-diff)
	(ediff-write-merge-buffer-and-maybe-kill):
	* echistory.el (Electric-history-undefined):
	* dnd.el (dnd-insert-text):
	* dired-aux.el (dired-query):
	* desktop.el (desktop-restore-file-buffer, desktop-lazy-create-buffer):
	* bookmark.el (bookmark-bmenu-locate):
	* obsolete/fast-lock.el (@top-level) <with-temp-message macro>:
	Fix `message' calls to ensure first arg is a format string.
	The change was made only when these two conditions were satisfied:
	[1] when there is a possibility that the arguments would cause an error
	for example, if the code in question relies on external variables
	such as filenames, and
	[2] if the arg to `message' could not have been nil in the code.

	* pcomplete.el (pcomplete--help): Fix `message' format spec.
	Not having a %s would be weird, though not technically wrong.

2005-09-18  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-add-charset-info): Doc fix.

2005-09-17  Romain Francoise  <romain@orebokech.com>

	* shell.el (shell-resync-dirs): Handle echoing processes more
	reliably.  Don't insert resync command if `comint-process-echoes'
	is non-nil.

2005-09-17  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-aspell-supports-utf8): New variable.
	(ispell-check-version): Set ispell-aspell-supports-utf8 to t for
	aspell versions >= 0.60.
	(ispell-valid-dictionary-list): Call ispell-find-aspell-dictionaries
	only if ispell-aspell-supports-utf8 is non-nil.

2005-09-17  Johan Bockg,Ae(Brd  <bojohan@dd.chalmers.se>

	* progmodes/scheme.el (scheme-mode-variables): Use setq to assign
	buffer-local value to lisp-indent-function.

2005-09-17  Milan Zamazal  <pdm@zamazal.org>

	* progmodes/glasses.el (glasses-make-readable): If
	glasses-separator differs from underscore, put appropriate
	overlays over underscore characters.
	(glasses-convert-to-unreadable): If glasses-separator differs from
	underscore, try to convert glasses-separator characters to
	underscores.

2005-09-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/diary-lib.el (mark-diary-entries): Don't move point.
	Use with-syntax-table and dolist.

2005-09-16  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-auc.el:
	* textmodes/reftex-cite.el:
	* textmodes/reftex-dcr.el:
	* textmodes/reftex-global.el:
	* textmodes/reftex-parse.el:
	* textmodes/reftex-ref.el:
	* textmodes/reftex-sel.el:
	* textmodes/reftex-toc.el:
	* textmodes/reftex-vars.el:
	* textmodes/reftex.el: Small changes to remove compiler warnings.

	* textmodes/reftex-index.el: Likewise.
	(reftex-query-index-phrase): More efficient use of markers.

2005-09-15  Chong Yidong  <cyd@stupidchicken.com>

	* image.el (image-load-path): New variable.
	(image-search-load-path): New function.
	(find-image): Search for images in `image-load-path'.

2005-09-15  Richard M. Stallman  <rms@gnu.org>

	* follow.el: Change Maintainer field.

2005-09-15  David Ponce  <david@dponce.com>

	* recentf.el (recentf-save-file-modes): New option.
	(recentf-save-list): Use it.

2005-09-15  Nick Roberts  <nickrob@snap.net.nz>

	* bindings.el (mode-line-eol-desc, mode-line-coding-system-map)
	(mode-line-mule-info, mode-line-modified): Move bindings from
	mouse-3 to mouse-1.

2005-09-15  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (sendmail-user-agent-compose): Revert last change.

2005-09-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-process-filter): Revert to ^#+$.
	Use with-current-buffer.
	(ange-ftp-gwp-start): Remove unused var `gw-user'.
	(ange-ftp-guess-hash-mark-size): Remove unused var `result'.
	(ange-ftp-insert-directory): Remove unused var `short'.
	(ange-ftp-file-name-sans-versions): Remove unused var `host-type'.

	* pcvs-defs.el (cvs-version): Recognize CVSNT version string.
	(cvs-execute-single-dir): Change default: cvs-1.9 is ancient.

	* calendar/cal-menu.el: Don't require easymenu, since we don't use it.
	(check-calendar-holidays, diary-list-entries): Autoload.
	Otherwise `emacs -q' followed by "mouse-2 -> diary entries" burps.
	(calendar-mouse-holidays, calendar-mouse-view-diary-entries): Simplify.

	* calendar/diary-lib.el (diary-show-all-entries): Fix last change,
	which mistakenly removed a call to display-buffer.

2005-09-14  Juanma Barranquero  <lekktu@gmail.com>

	* obsolete/iso-insert.el: Move to obsolete/ from international/.

2005-09-14  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el
	(hs-hide-comments-when-hiding-all): Remove autoload cookie.
	(hs-allow-nesting): New user var.
	(hs-discard-overlays): Skip "internal" overlays if nesting allowed.
	(hs-hide-block-at-point): When nesting allowed,
	if there is already an overlay in place, delete it.
	(hs-safety-is-job-n): Delete func; remove call sites.
	(hs-hide-level-recursive): Don't pre-clean if nesting allowed.
	(hs-overlay-at): New func.
	(hs-already-hidden-p, hs-show-block): Use it.
	(hs-hide-all): Don't pre-clean if nesting allowed.
	(hs-show-all): Temporarily disallow
	nesting around call to `hs-discard-overlays'.

2005-09-14  Chong Yidong  <cyd@stupidchicken.com>

	* mouse.el (mouse-major-mode-menu): Make `prefix' optional.
	Delete unused local var.

2005-09-13  Juanma Barranquero  <lekktu@gmail.com>

	* help-fns.el (describe-categories): "?\ " -> "?\s".
	(help-do-arg-highlight): Recognize also ARG-n, as in
	`move-to-left-margin' (ARG+n is already recognized).  Simplify.

	* international/codepage.el (dos-unsupported-char-glyph):
	* net/newsticker.el (tool-bar-map, w3-mode-map)
	(w3m-minor-mode-map):
	* progmodes/vhdl-mode.el (conf-alist, conf-entry, conf-key)
	(ent-alist):
	* textmodes/reftex-vars.el (reftex-tables-dirty): Add defvars.

2005-09-13  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (custom-push-theme): Handle the case where a symbol is
	bound but face properties have not yet been assigned.

	* mail/sendmail.el (mail): Use new buffer if `noerase' is `new'.
	Fix behavior if noerase is `t' and there is no mail buffer.

	* simple.el (sendmail-user-agent-compose): Use a new mail buffer
	if `continue' is nil, rather than signal an error.

2005-09-12  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (font-lock-keywords): Add autoload.

	* help-fns.el (describe-variable): Rearrange to put source link
	in a predictable place.

	* net/newsticker.el: New file.

2005-09-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* calendar/calendar.el (calendar-for-loop): Add edebug info.
	(calendar-basic-setup): Use the new nil arg.
	(number-of-diary-entries): Move to diary-lib.el.

	* calendar/diary-lib.el: Use with-current-buffer, match-string.
	(diary-list-entries): Use with-syntax-table and dolist.
	Rename from list-diary-entries.
	Use number-of-diary-entries if `number' is nil.
	(diary, diary-view-entries): Use this new name and new nil arg value.
	(number-of-diary-entries): Move from calendar.el.
	(diary-unhide-everything): New function.
	(include-other-diary-files, fancy-diary-display)
	(diary-show-all-entries, make-diary-entry): Use it.
	(diary-mail-entries): Use buffer-string.
	(mark-diary-entries): Fix long standing paren typo.
	(diary-sexp-entry): Use count-lines.
	(make-diary-entry): Avoid `previous-line'.
	(diary-mode-map): New var.
	(diary-mode): Redraw cal after saving.  Setup header-line.
	(fancy-diary-display-mode): Use local-set-key.

	* startup.el (command-line): Try calling various terminal-init-foo-bar
	functions by stripping hyphenated suffixes from $TERM.

	* files.el (normal-mode): Check boundness of font-lock-keywords.

2005-09-12  Richard M. Stallman  <rms@gnu.org>

	* progmodes/compile.el: Don't decide a file's directory
	until the user actually tries to go there.
	(compilation-next-error-function):
	Pass compilation-find-file the directory from the file-struct.
	(compilation-internal-error-properties): Separate local FILE-STRUCT
	from FILE.  Doc the args better.  Rename arg FMT to FMTS.
	(compilation-find-file): Arg DIR renamed to DIRECTORY.
	Expand it, and if nil, use default-directory.
	(compilation-get-file-structure): Don't mix specified directory
	with default directory.  Put specified directory into
	file-struct.  Don't make the file name absolute.

	* progmodes/compile.el (compilation-error-regexp-alist): Doc fix.
	(compile-command): Add autoload.
	(compilation-disable-input): Add autoload.

2005-09-11  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* time-stamp.el: Mention variable `time-stamp-pattern' in doc
	strings of the variables it can override.
	(time-stamp): New (as yet undocumented) time-stamp-format escapes
	%Q and %q, for fully-qualified domain name and unqualified host name.

2005-09-11  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Update list.
	(authors-fixed-entries): Update mldrag.el entry.

2005-09-10  Alan Mackenzie  <acm@muc.de>

	* page.el (narrow-to-page): Exclude _entire_ multi-line delimiter
	from the region narrowed to.

2005-09-10  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-check-version): Signal an error if
	aspell version is less than 0.60.

2005-09-10  Pascal Dupuis  <Pascal.Dupuis@esat.kuleuven.be>  (tiny change)

	* progmodes/octave-inf.el (inferior-octave-startup):
	Resync current dir at the end.

2005-09-10  Emilio C. Lopes  <eclig@gmx.net>

	* woman.el (woman-topic-at-point-default):
	Rename to woman-use-topic-at-point-default.
	(woman-topic-at-point): Rename to woman-use-topic-at-point.
	(woman-file-name): Reflect renames above.  Automatically use the
	word at point as topic if woman-use-topic-at-point is non-nil.
	Otherwise offer it as default but don't insert it in the
	minibuffer.  Also use `test-completion' instead of `assoc' as
	suggested by Stefan Monnier.

2005-09-10  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-directory, vc-update-change-log): Throw an error on
	the attempt to do it over Tramp.  This is not yet supported.

2005-09-10  Eli Zaretskii  <eliz@gnu.org>

	* menu-bar.el (menu-bar-menu-frame-live-and-visible-p)
	(menu-bar-non-minibuffer-window-p): New functions.
	("Split Window", "Save As..."): Use them.
	("Postscript Print Buffer (B+W)", "Postscript Print Buffer")
	("Print Buffer", "Truncate Long Lines in this Buffer"):
	Use menu-bar-menu-frame-live-and-visible-p.
	("Save Buffer", "Insert File", "Open Directory...")
	("Open File...", "Visit New File..."):
	Use menu-bar-non-minibuffer-window-p.
	(kill-this-buffer-enabled-p, dired <menu-enable>):
	Use menu-bar-non-minibuffer-window-p.

2005-09-09  Eli Zaretskii  <eliz@gnu.org>

	* cus-start.el (all): Don't complain about fringe-related
	built-ins if fringes are not supported.  Ditto about
	selection-related built-ins.  Fix the test for GTK-related built-ins.

	* menu-bar.el ("Split Window", "Postscript Print Buffer (B+W)")
	("Postscript Print Buffer", "Print Region", "Save As...")
	("Save", "Insert File...", "Open Directory...")
	("Open File...", "Visit New File..."")
	("Truncate Long Lines in this Buffer"): Don't look at
	menu-updating-frame if this display does not support multiple frames.

2005-09-09  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/sendmail.el (default-sendmail-coding-system): Doc fix.

2005-09-09  Emilio Lopes  <eclig@gmx.net>

	* woman.el: Format- and whitespace-related changes.

2005-09-09  Eli Zaretskii  <eliz@gnu.org>

	* woman.el: Fix my email address.

2005-09-08  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-skeleton-pair-default-alist): New var.
	(sh-mode): Locally set skeleton-pair-default-alist.

	* progmodes/make-mode.el (makefile-add-log-defun): Trim the result.

	* progmodes/flymake.el: Require `compile' unconditionally.

	* mail/sendmail.el (send-mail-function): Add Mailclient alternative.

	* woman.el (woman-file-name): Provide a default, not initial input.

	* smerge-mode.el (smerge-resolve): Pass args to smerge-remove-props.

	* font-lock.el (font-lock-support-mode): Doc fix.

	* descr-text.el (describe-property-list): Handle non-symbol prop names.

2005-09-08  Richard M. Stallman  <rms@gnu.org>

	* simple.el (blink-matching-open): Get rid of text props from
	the string shown in echo area.  Don't permanently set point.
	Some rearrangements.

2005-09-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* recentf.el (recentf-filename-handler): Add custom choice
	`abbreviate-file-name'.

	* msb.el (msb--very-many-menus): Fix typo.

	* disp-table.el (standard-display-european): Don't set
	enable-multibyte-characters to nil.

2005-09-08  David Ponce  <david@dponce.com>

	* recentf.el (recentf-show-file-shortcuts-flag): New option.
	(recentf-expand-file-name): Doc fix.
	(recentf-dialog-mode-map): Define digit shortcuts.
	(recentf--files-with-key): New variable.
	(recentf-show-digit-shortcut-filter): New function.
	(recentf-open-files-items): New function.
	(recentf-open-files): Use it.
	(recentf-open-file-with-key): New command.

2005-09-08  Chong Yidong  <cyd@stupidchicken.com>

	* buff-menu.el (Buffer-menu-sort-by-column): New function.
	Suggested by Kim F. Storm.
	(Buffer-menu-sort-button-map): Global keymap for sort buttons.
	(Buffer-menu-make-sort-button): Use global keymap.

2005-09-07  Michael Albinus  <michael.albinus@gmx.de>

	* woman.el (top): Remap `man' command by `woman' in `woman-mode-map'.
	(Man-getpage-in-background-advice): Remove defadvice; it isn't
	necessary any longer with the remapped command.
	(Man-bgproc-sentinel-advice): Remove defadvice which counts
	formatting time only.

	* net/tramp.el (tramp-action-password)
	(tramp-multi-action-password): Compile the password prompt from
	`method', `user' and `host'.  Sometimes it isn't obvious which
	password to enter, for example with remote files offered by
	recentf.el, or with multiple steps.  Suggested by Robert Marshall
	<robert@chezmarshall.freeserve.co.uk>.

2005-09-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/perl-mode.el (perl-font-lock-syntactic-keywords):
	Fix regexp for when "s///" is at the beginning of line.

2005-09-07  Jay Belanger  <belanger@truman.edu>

	* calc/calc-poly.el (math-expand-term): Multiply out any powers
	when in matrix mode.

2005-09-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* buff-menu.el (Buffer-menu-make-sort-button): Add docstrings, use
	non-anonymous functions.

2005-09-06  Chong Yidong  <cyd@stupidchicken.com>

	* buff-menu.el (Buffer-menu-make-sort-button): Allow mouse-1 clicks
	when using a header line.  Otherwise, use mouse-1-click-follows-link.

	* mouse.el (mouse-drag-header-line): Do nothing if the header-line
	can't be moved; don't signal an error.

2005-09-05  Chong Yidong  <cyd@stupidchicken.com>

	* cus-theme.el (custom-theme-write-faces): Save the current face
	spec, not the defface spec.

	* custom.el (custom-known-themes): Clarify meaning of "standard".
	(custom-push-theme): Save old values in the standard theme.
	(disable-theme): Correct typo.
	(custom-face-theme-value) Deleted unused function.
	(custom-theme-recalc-face): Rewritten to treat enable/disable properly.

2005-09-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/compile.el (compilation-goto-locus): Take into account
	iconified frames when determining whether the buffer is
	already visible.
	Don't reset window height if the window already existed.

2005-09-04  Chong Yidong  <cyd@stupidchicken.com>

	* custom.el (load-theme): Rename from require-theme.
	Add interactive spec.
	(enable-theme): Rename from custom-enable-theme.
	Add interactive spec.
	(disable-theme): Rename from custom-disable-theme.
	Add interactive spec.
	(custom-make-theme-feature): Doc fix.
	(custom-theme-directory): Doc fix.
	(provide-theme): Call enable-theme.

2005-09-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* obsolete/lazy-lock.el (lazy-lock-mode):
	* obsolete/fast-lock.el (fast-lock-mode): Don't try to turn on
	font-lock-mode if it's off.  Print a warning instead.

	* progmodes/compile.el (compilation-start): Ignore errors if the
	process died before we get to send-eof.

	* textmodes/tex-mode.el (tex-send-tex-command, tex-bibtex-file):
	Undo last change.  Enclosing the result in quotes broke things on Unix
	since tex-send-command passes it through shell-quote-argument.
	(tex-send-command): Pass `file' through convert-standard-filename
	when possible.
	(tex-uptodate-p): Handle the case where TeX hasn't put additional
	info in a transcript.

2005-09-02  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (terminal-init-xterm): Add eval-when-compile to
	fix compilation warning. Reorder the key definitions to group
	together keys emitted by the current version of xterm.

	* progmodes/vhdl-mode.el (vhdl-highlight-faces)
	(vhdl-speedbar-entity-face, vhdl-speedbar-entity-selected-face):
	Reorder predicates to correct min-color usage.

2005-09-01  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-mode): Inhibit read-only when encoding.
	Kill local variables when longlines-mode is turned off.

2005-09-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-cmds.el (set-locale-environment): Soothe compiler.

	* obsolete/lazy-lock.el (lazy-lock) <defgroup>: Move from font-lock.el.

	* obsolete/fast-lock.el (fast-lock) <defgroup>: Move from font-lock.el.

	* font-lock.el (fast-lock, lazy-lock) <defgroup>: Remove.
	(font-lock-lines-before): Change default to being inactive.
	(font-lock-default-fontify-region): Obey font-lock-lines-before.
	(font-lock-after-change-function): Don't handle f-l-lines-before here.

2005-08-31  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp.el (tramp-handle-make-auto-save-file-name):
	Deactivate temporarily advice if active (not needed for Emacs 22,
	but for backwards compatibility).
	(tramp-exists-file-name-handler): Rewrite.  First implementation
	was too simple.
	(tramp-advice-make-auto-save-file-name):
	Call `tramp-handle-make-auto-save-file-name' (again, just for
	backwards compatibility).

2005-08-31  Reto Zimmermann  <reto@gnu.org>

	* progmodes/vhdl-mode.el
	(vhdl-update-sensitivity-list): Handle multi-dimensional array access.
	(vhdl-end-p): Fix indentation bug "else" after "-- when".
	(vhdl-set-default-project): New function (easier setting of default).
	(vhdl-port-copy): Handle extended identifiers for generics.
	(vhdl-compiler-alist): Better description for error message regexp.
	(vhdl-make): Query for target, use previous as default.
	(vhdl-port-copy): Fix port copy for port names starting with "signal".
	(vhdl-font-lock-keywords-2): Fix fontification for record
	el. assign.
	(vhdl-speedbar-make-subpack-line): Add package body link.
	(vhdl-generate-makefile-1): Not include itself as dependency.
	(vhdl-font-lock-init): Highlight c-preprocessor directives.
	(vhdl-*ward-syntactic-ws): Skip c-preprocessor directives.
	(vhdl-get-syntactic-context): Handle c-preprocessor directives.
	(vhdl-update-sensitivity-list): Start scan at opening parenthesis.
	(vhdl-fixup-whitespace-region): Fix jumping point (infinite loop).
	(vhdl-update-sensitivity-list-buffer): Add string argument for `error'.
	(vhdl-import-project): Add string argument for `error'.
	(vhdl-compose-configuration)
	(vhdl-compose-configuration-architecture): Add configuration
	declaration generation.
	(vhdl-scan-directory-contents): Scan for block/generate hierarchy.
	(vhdl-trailer-re): Add "record" keyword (better indentation).
	(vhdl-fixup-whitespace-region): "[^ \t\"-]+" instead of
	"[^ \t-\"]+".
	(vhdl-font-lock-keywords-2): Not highlight formal parameter after '|'.
	(vhdl-testbench-entity-file-name)
	(vhdl-testbench-architecture-file-name): Allow separate
	customization of testbench file names.
	(vhdl-beginning-of-block): Handle optional subprogram parameter list.
	(vhdl-get-visible-signals): Allow newline within alias declaration.
	(vhdl-update-sensitivity-list): Signal read only on certain attributes.
	(vhdl-fixup-whitespace-region): Fix bug with strings (double quotes).
	(member-ignore-case): Alias for missing function in XEmacs.
	(vhdl-compiler-alist): Add unit-to-file name mapping for Cadence NC.
	(vhdl-update-sensitivity-list): Ignore case on read signals.
	(vhdl-replace-string): Adjust case only for file names.
	(vhdl-update-sensitivity-list): Fix search for read signals.
	(vhdl-update-sensitivity-list): Exclude formal parameters.
	(vhdl-get-visible-signals): Include aliases of signals.
	(vhdl-get-visible-signals): Fix signal name searching.
	(vhdl-port-flatten, vhdl-port-reverse-direction): Better message.
	(vhdl-fixup-whitespace-region): Fix for character
	literals (e.g. ':').

2005-08-31  Juanma Barranquero  <lekktu@gmail.com>

	* ansi-color.el (comint-last-output-start):
	* bs.el (font-lock-verbose):
	* diff-mode.el (add-log-buffer-file-name-function):
	* dired-x.el (vm-folder-directory):
	* faces.el (help-xref-stack-item):
	* files.el (font-lock-keywords):
	* find-lisp.el (dired-buffers, dired-subdir-alist):
	* ido.el (cua-inhibit-cua-keys):
	* log-view.el (cvs-minor-wrap-function):
	* outline.el (font-lock-warning-face):
	* simple.el (compilation-current-error):
	* speedbar.el (ange-ftp-path-format, efs-path-regexp)
	(font-lock-keywords, x-pointer-hand2, x-pointer-top-left-arrow):
	* tooltip.el (comint-prompt-regexp):
	* w32-fns.el (explicit-shell-file-name):
	* term/mac-win.el (mac-charset-info-alist)
	(mac-services-selection, mac-system-script-code):
	* term/tty-colors.el (msdos-color-values):
	* term/w32-win.el (xlfd-regexp-registry-subnum):
	* term/x-win.el (x-keysym-table, x-selection-timeout)
	(x-session-id, x-session-previous-id):
	* textmodes/ispell.el (mail-yank-prefix):
	* textmodes/makeinfo.el (tex-end-of-header, tex-start-of-header):
	* textmodes/org.el (calc-embedded-close-formula)
	(calc-embedded-open-formula)
	(font-lock-unfontify-region-function):
	* textmodes/reftex-global.el (isearch-next-buffer-function)
	(TeX-master):
	* textmodes/reftex.el (font-lock-keywords):
	* textmodes/tex-mode.el (font-lock-comment-face)
	(font-lock-doc-face):
	* textmodes/texinfo.el (outline-heading-alist):
	Add defvars.

	* textmodes/artist.el (x-pointer-crosshair): Add defvar.
	(artist-spray-chars, artist-mode-init, artist-replace-string)
	(artist-select-erase-char, artist-vap-find-endpoints-horiz)
	(artist-vap-find-endpoints-vert, artist-vap-find-endpoints-swne)
	(artist-vap-find-endpoints-nwse): "?\ " -> "?\s".

	* textmodes/conf-mode.el (outline-heading-end-regexp): Add defvar.
	(conf-align-assignments): "?\ " -> "?\s".

	* textmodes/reftex-index.el (TeX-master): Add defvar.
	(reftex-index-phrases-marker): Move up defvar.

	* textmodes/reftex-toc.el (zmacs-regions): Add defvar.
	(reftex-toc-include-labels-indicator)
	(reftex-toc-include-index-indicator)
	(reftex-toc-max-level-indicator): Move up declarations.

	* net/tramp.el (tramp-handle-make-auto-save-file-name): Pass list
	of args to `tramp-run-real-handler', even if it's empty in this case.

2005-08-31  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* dired.el (dired-move-to-filename-regexp): Add date format for
	Mac OS X 10.3 in East Asian locales.

2005-08-31  Michael Albinus  <michael.albinus@gmx.de>

	* files.el (make-auto-save-file-name): Add file name handler call
	if applicable.

	* net/tramp.el (tramp-file-name-handler-alist)
	(tramp-file-name-for-operation): Add `make-auto-save-file-name'.
	(tramp-handle-make-auto-save-file-name): Rename from
	`tramp-make-auto-save-file-name'.
	(tramp-exists-file-name-handler): New defun.
	(tramp-advice-make-auto-save-file-name): Make defadvice only when
	`make-auto-save-file-name' is not a magic file name operation.

2005-08-30  Richard M. Stallman  <rms@gnu.org>

	* files.el (risky-local-variable-p):
	Match `-predicates' and `-commands.

	* cus-edit.el (custom-buffer-sort-alphabetically): Default to t.
	(custom-save-all): Visit the file if necessary;
	kill the buffer if we created it.
	(custom-save-delete): Don't visit file or kill buffer here.

2005-08-30  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-special-keyword): New face.
	(org-table-copy-down, org-table-eval-formula)
	(org-table-recalculate, org-init-section-numbers):
	Use `string-to-number' instead of `string-to-int'.
	(org-get-location): Use `insert-buffer-substring' instead of
	`insert-buffer'.
	(org-modify-diary-entry-string): New function.
	(org-get-entries-from-diary): Set the hook for `add-to-diary-list'.
	(org-disable-agenda-to-diary): Rename from `org-disable-diary'.
	(org-toggle-fixed-width-section): Use QUOTE keyword if there is no
	active region.
	(org-export-as-html): Handle QUOTE keyword.
	(org-quote-string): New option.
	(org-bookmark-jump-unhide): New function, used for
	`bookmark-after-jump-hook'.
	(org-diary-default-entry): Apply only when not called through
	`org-agenda'.

2005-08-30  Juanma Barranquero  <lekktu@gmail.com>

	* net/eudc.el (mode-popup-menu):
	* play/handwrite.el (ps-printer-name, ps-lpr-command):
	* progmodes/ada-mode.el (compile-auto-highlight)
	(skeleton-further-elements):
	* progmodes/autoconf.el (font-lock-syntactic-keywords):
	* progmodes/cmacexp.el (msdos-shells):
	* progmodes/compile.el (font-lock-extra-managed-props)
	(font-lock-keywords, font-lock-maximum-size)
	(font-lock-support-mode):
	* progmodes/grep.el (font-lock-lines-before):
	* progmodes/idlw-complete-structtag.el (idlwave-completion-help-info):
	* progmodes/mixal-mode.el (compile-command):
	* progmodes/perl-mode.el (font-lock-comment-face)
	(font-lock-doc-face, font-lock-string-face):
	* progmodes/prolog.el (comint-prompt-regexp):
	* progmodes/sh-script.el (font-lock-comment-face)
	(font-lock-set-defaults, font-lock-string-face):
	* progmodes/sql.el (font-lock-keyword-face)
	(font-lock-set-defaults, font-lock-string-face):
	* progmodes/vhdl-mode.el (compilation-file-regexp-alist)
	(itimer-version, lazy-lock-defer-contextually)
	(lazy-lock-defer-on-scrolling, lazy-lock-defer-on-the-fly):
	Add defvars.

	* progmodes/cperl-mode.el (cperl-electric-lbrace)
	(cperl-electric-keyword, cperl-electric-pod)
	(cperl-electric-backspace, cperl-forward-re)
	(cperl-fix-line-spacing, cperl-fill-paragraph): "?\ " -> "?\s".
	(vc-rcs-header, vc-sccs-header): Add defvars.

	* progmodes/fortran.el (fortran-indent-to-column): "?\ " -> "?\s".
	(font-lock-syntactic-keywords, gud-find-expr-function):
	Add defvars.

	* progmodes/gdb-ui.el (tool-bar-map): Add defvar.
	(gdb-frame-parameters): Declare before use.

	* progmodes/gud.el (gdb-active-process, gdb-define-alist)
	(gdb-macro-info, gdb-server-prefix, gdb-show-changed-values)
	(gdb-var-changed, gdb-var-list, tool-bar-map): Add defvars.
	(gud-expr-compound-sep, gud-expr-compound): "?\ " -> "?\s".

	* progmodes/idlw-help.el (browse-url-generic-args): Add defvar.
	(idlwave-help-with-source): Use `insert-buffer-substring', not
	`insert-buffer'.

2005-08-29  Juri Linkov  <juri@jurta.org>

	* outline.el (hide-entry, hide-leaves, outline-toggle-children):
	Put outline-back-to-heading function call inside save-excursion.

2005-08-29  Juanma Barranquero  <lekktu@gmail.com>

	* man.el (Man-init-defvars, Man-translate-references)
	(Man-support-local-filenames, Man-highlight-references):
	* progmodes/sql.el (sql-interactive-mode):
	* shell.el (shell-mode, shell-resync-dirs): Fix typos in docstrings.

	* emacs-lisp/checkdoc.el (compilation-error-regexp-alist)
	(compilation-mode-font-lock-keywords): Add defvars.
	(checkdoc-interactive-loop): "?\ " -> "?\s".

	* emacs-lisp/lisp-mode.el (font-lock-comment-face)
	(font-lock-doc-face, font-lock-string-face)
	(font-lock-keywords-case-fold-search): Add defvars.
	(emacs-lisp-mode-syntax-table): "?\ " -> "?\s".

	* obsolete/sun-fns.el (mouse-select-or-drag-move-point):
	Don't pass X and Y (they are ignored anyway).
	(mouse-set-mark, mouse-select-window, mouse-delete-other-windows)
	(mouse-delete-window): Make arguments optional.

	* obsolete/rnews.el (news-add-news-group): Don't use `end-of-line'.
	(caesar-translate-table, minor-modes, news-buffer-save)
	(news-group-name, news-minor-modes): Add defvars.

	* emacs-lisp/lselect.el (mouse-highlight-priority)
	(x-lost-selection-functions, zmacs-regions):
	* emacs-lisp/pp.el (font-lock-verbose):
	* emacs-lisp/syntax.el (font-lock-beginning-of-syntax-function):
	* emacs-lisp/tcover-ses.el (ses-initial-global-parameters)
	(ses-mode-map):
	* emacs-lisp/tcover-unsafep.el (safe-functions):
	* international/mule-cmds.el (mac-system-coding-system)
	(mac-system-locale):
	* language/ethio-util.el (rmail-current-message)
	(rmail-message-vector):
	* language/thai-util.el (thai-auto-composition-mode):
	* mail/metamail.el (rmail-current-message, rmail-message-vector):
	* mail/mspools.el (rmail-inbox-list, vm-crash-box)
	(vm-folder-directory, vm-init-file, vm-init-file-loaded)
	(vm-primary-inbox, vm-spool-files):
	* mail/rmail.el (deleted-head, font-lock-fontified)
	(mail-abbrev-syntax-table, mail-abbrevs, messages-head)
	(rmail-use-spam-filter, rsf-beep, rsf-sleep-after-message)
	(total-messages):
	* mail/rmail-spam-filter.el (bbdb/mail_auto_create_p)
	(rmail-summary-mode-map):
	* mail/rmailkwd.el (rmail-buffer, rmail-current-message)
	(rmail-last-label, rmail-last-multi-labels)
	(rmail-summary-vector, rmail-total-messages):
	* mail/rmailmsc.el (rmail-current-message, rmail-inbox-list):
	* mail/rmailsum.el (msgnum):
	* mail/uce.el (gnus-original-article-buffer, mail-reply-buffer)
	(rmail-current-message):
	* obsolete/fast-lock.el (font-lock-face-list):
	* obsolete/rnewspost.el (mail-reply-buffer):
	* obsolete/scribe.el (compile-command):
	* obsolete/x-menu.el (x-process-mouse-hook): Add defvars.

2005-08-28  John Paul Wallington  <jpw@gnu.org>

	* ibuf-ext.el (ibuffer-auto-update-changed):
	Use `frame-or-buffer-changed-p' to check whether we need to update.
	(ibuffer-auto-mode): Don't advise `get-buffer-create' and
	`kill-buffer'.  Initialise `ibuffer-auto-buffers-changed'
	as a `frame-or-buffer-changed-p' state vector instead.

2005-08-27  Romain Francoise  <romain@orebokech.com>

	* textmodes/makeinfo.el (makeinfo-compile):
	Use `compilation-start'.  Set `next-error-function' according to
	`disable-errors'.
	(makeinfo-next-error): New function.
	(makeinfo-region): Adjust to new `makeinfo-compile' prototype.
	(makeinfo-buffer): Likewise.

	* progmodes/compile.el (compilation-start): Add autoload cookie.

	* progmodes/antlr-mode.el: Don't autoload `compilation-start'.
	* textmodes/sgml-mode.el: Likewise.
	* progmodes/python.el: Likewise.

2005-08-27  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (blink-matching-paren-distance): Document the meaning
	of nil value, and allow to customize to nil.

	* eshell/esh-ext.el (eshell-windows-shell-file): Look for
	command.com, not command.exe.

2005-08-26  John Wiegley  <johnw@newartisans.com>

	* eshell/esh-cmd.el (eshell-rewrite-named-command): Change the
	code around a bit so that an extraneous nil argument is not added
	to a command when no args are given.

	* eshell/esh-arg.el (eshell-parse-double-quote): If a
	double-quoted argument resolves to nil, return it as an empty
	string rather than as nil.  This made it impossible to pass "" to
	a shell script as a null string argument.

2005-08-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* outline.el (outline-invent-heading): New fun.
	(outline-promote, outline-demote): Use it.
	(outline-move-subtree-down): Remove unused vars `re' and `txt'.
	(outline-end-of-subtree): Remove unused var `opoint'.

2005-08-26  David Reitter  <david.reitter@gmail.com>

	* menu-bar.el (truncate-lines, write-file, print-buffer)
	(ps-print-buffer-faces, ps-print-buffer, split-window):
	Disable menu items when the frame they refer to is invisible, or when
	they refer to a buffer and the minibuffer is selected.

2005-08-26  Pavel Kobiakov  <pk_at_work@yahoo.com>

	* progmodes/flymake.el (flymake-highlight-err-lines):
	Use save-excursion around flymake-highlight-line to preserve point.

2005-08-26  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/octave-mod.el: Change Author and Maintainer address.
	(octave-maintainer-address): Change Kurt's email address.
	* progmodes/octave-inf.el: Change Author and Maintainer address.
	* progmodes/octave-hlp.el: Change Author and Maintainer address.

2005-08-26  Kim F. Storm  <storm@cua.dk>

	* subr.el (version-list-<, version-list-<=, version-list-=):
	Renamed from integer-list-*.
	(version-list-not-zero): Likewise.  Fix while loop.
	(version=): Use version-list-= instead of string-equal.

2005-08-26  Richard M. Stallman  <rms@gnu.org>

	* outline.el (outline-promote): Try shortening the heading.
	As last resort, read the heading to use.
	(outline-demote): As last resort, read the heading to use.

2005-08-26  Romain Francoise  <romain@orebokech.com>

	* progmodes/compile.el (compilation-start): Doc fix.

	* progmodes/antlr-mode.el (antlr-default): Fix defface form.
	(antlr-font-lock-additional-keywords): Fix reference to
	`antlr-font-lock-literal-regexp' erroneously changed during the
	mass face rename.
	(antlr-run-tool): Use `compilation-start'.

	* textmodes/sgml-mode.el (sgml-validate): Use `compilation-start'
	instead of the obsolete `compile-internal'.

2005-08-26  Juanma Barranquero  <lekktu@gmail.com>

	* calendar/cal-bahai.el (date, displayed-month, displayed-year)
	(number, original-date):
	* calendar/cal-china.el (date):
	* calendar/cal-coptic.el (date):
	* calendar/cal-french.el (date):
	* calendar/cal-hebrew.el (date, entry, number, original-date):
	* calendar/cal-islam.el (date, number, original-date):
	* calendar/cal-iso.el (date):
	* calendar/cal-julian.el (date):
	* calendar/cal-mayan.el (date):
	* calendar/cal-menu.el (date, event):
	* calendar/cal-persia.el (date):
	* calendar/lunar.el (date):
	* calendar/solar.el (date): Add defvars.

	* emerge.el:
	* ibuffer.el:
	* info-xref.el:
	* obsolete/bg-mouse.el:
	* obsolete/sun-curs.el:
	* obsolete/swedish.el: Move the `defvar's to the top level.

	* smerge-mode.el (smerge-refined-change): Add :group.

2005-08-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-remove-props): Make the args non-optional.
	(smerge-keep-n): Remove props.
	(smerge-keep-base, smerge-keep-other, smerge-keep-mine)
	(smerge-keep-current, smerge-kill-current): Don't remove props anymore
	now that it's done in smerge-keep-n.
	(smerge-refined-change): New face.
	(smerge-refine-chopup-region, smerge-refine-highlight-change)
	(smerge-refine): New funs.
	(smerge-basic-map): Bind smerge-refine.

2005-08-25  Juri Linkov  <juri@jurta.org>

	* progmodes/grep.el (grep, grep-mode): Make buffer-local variables
	compilation-process-setup-function and compilation-disable-input
	in grep-mode instead of let-bindings in grep.

	* menu-bar.el (menu-bar-options-menu, menu-bar-options-save):
	Delete "Automatic File De/compression" (auto-compression-mode).

2005-08-25  Juanma Barranquero  <lekktu@gmail.com>

	* obsolete/bg-mouse.el: Move to obsolete/ from term/.
	Silence warning about non-existent variable.

2005-08-25  Richard M. Stallman  <rms@gnu.org>

	* menu-bar.el (menu-bar-describe-menu): Delete "What's New".
	Rename "Describe Key" to "Describe Key or Mouse Operation".

	* mail/mailalias.el (build-mail-aliases): Delete comments
	from the contents before processing them.

	* isearch.el (isearch-edit-string): Erase the Search prompt
	if user enters an empty string and there is no default.

	* comint.el (comint-file-name-prefix): Add autoload.

2005-08-25  Joe Corneli  <jcorneli@math.utexas.edu>

	* subr.el (play-sound): Rearrange to avoid warning.

2005-08-25  Carsten Dominik  <dominik@science.uva.nl>

	* calendar/diary-lib.el (diary-modify-entry-list-string-function):
	New hook.
	(add-to-diary-list): Call `diary-modify-entry-list-string-function'

2005-08-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Simplify.

	* custom.el (custom-theme-set-variables): Sort minor modes last.

2005-08-24  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* subr.el (version-separator, version-regexp-alist): New vars used by
	version comparison funs.
	(integer-list-<, integer-list-=, integer-list-<=)
	(integer-list-not-zero): New funs for integer list comparison.
	(version-to-list, version=, version<, version<=): New funs for version
	comparison.

2005-08-24  Juanma Barranquero  <lekktu@gmail.com>

	* emerge.el (merge-begin, merge-end, template, A-begin, A-end)
	(B-begin, B-end, diff, diff-vector, valid-diff): Defvar at compile
	time to silence the byte-compiler.

	* ibuffer.el (ibuffer-compile-make-eliding-form)
	(ibuffer-check-formats): Use `with-no-warnings' to hide references
	to `ibuffer-elide-long-columns' (which is defined on ibuffer.el,
	so it's silly to get warnings for it).
	(ibuffer-auto-mode, ibuffer-cached-filter-formats)
	(ibuffer-compiled-filter-formats, ibuffer-filter-format-alist)
	(ibuffer-filter-group-kill-ring, ibuffer-filter-groups)
	(ibuffer-filtering-qualifiers, ibuffer-hidden-filter-groups)
	(ibuffer-inline-columns, ibuffer-show-empty-filter-groups)
	(ibuffer-tmp-hide-regexps, ibuffer-tmp-show-regexps):
	Defvar at compile time.
	(ibuffer-compiled-formats, ibuffer-cached-eliding-string)
	(ibuffer-cached-formats, ibuffer-cached-elide-long-columns):
	Declare them before use.

	* info-xref.el (info-xref-xfile-alist, info-xref-filename-heading)
	(info-xref-good, info-xref-bad): Defvar at compile time.

	* obsolete/mlsupport.el (filter-region, execute-monitor-command):
	Use `let*' instead of `let'.

	* obsolete/sun-curs.el (icon-edit, *mouse-window*, *mouse-x*)
	(*mouse-y*, menu, char): Defvar at compile time.
	(sc::menu): Declare it before use.
	(sc::pack-one-line): Use `let', not `let*'.

	* obsolete/swedish.el (news-inews-hook, news-group-hook-alist)
	(mail-send-hook): Defvar at compile time.

	* term/bg-mouse.el (bg-mouse-x, bg-mouse-y, bg-cursor-window):
	Defvar at compile time.

	* term/sun-mouse.el (current-global-mousemap)
	(current-local-mousemap): Declare them before use.

2005-08-24  Carsten Dominik  <dominik@science.uva.nl>

	* bookmark.el (bookmark-after-jump-hook): New hook.
	(bookmark-jump): Run `bookmark-after-jump-hook'.

2005-08-23  Juri Linkov  <juri@jurta.org>

	* faces.el (minibuffer-prompt): Doc fix.

2005-08-23  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/xscheme.el: Trivial changes to silence warnings.
	(xscheme-previous-mode, xscheme-previous-process-state):
	Add defvars.
	(xscheme-last-input-end, xscheme-process-command-line)
	(xscheme-process-name, xscheme-buffer-name)
	(xscheme-expressions-ring-max, xscheme-expressions-ring)
	(xscheme-expressions-ring-yank-pointer, xscheme-running-p)
	(xscheme-control-g-synchronization-p)
	(xscheme-control-g-disabled-p, xscheme-string-receiver)
	(default-xscheme-runlight, xscheme-runlight)
	(xscheme-runlight-string, xscheme-process-filter-state)
	(xscheme-allow-output-p, xscheme-prompt, xscheme-mode-string):
	Move to beginning of file.
	(scheme-interaction-mode-commands-alist)
	(scheme-interaction-mode-map, scheme-debugger-mode-map):
	Declare them before use.  Note: the initialization code for the variables
	has not been moved because it uses functions that reference the variables.
	(xscheme-control-g-message-string, xscheme-process-filter-alist)
	(xscheme-prompt-for-expression-map): Declare them before use.
	(scheme-debugger-mode-commands): "?\ " -> "?\s".

2005-08-23  Ed Swarthout  <ed.swarthout@gmail.com>  (tiny change)

	* hexl.el (hexl-print-current-point-info): Fix simple spelling error.

2005-08-22  Juri Linkov  <juri@jurta.org>

	* faces.el (set-face-underline): Delete this duplicate function
	and make an obsolete alias to set-face-underline-p.
	(set-face-underline-p): Use docstring of set-face-underline.
	(describe-face): Create hyperlink to parent face.

	* info.el (Info-insert-dir): Use save-excursion around
	insert-buffer-substring.
	(Info-isearch-search): Use LITERAL arg of replace-regexp-in-string.
	(Info-escape-percent): Delete function.
	(Info-fontify-node): Replace Info-escape-percent by
	replace-regexp-in-string with REP arg set to lambda that
	duplicates `%' and preserves text properties.

	* progmodes/compile.el (compilation-disable-input): Doc fix.
	(define-compilation-mode): Doc fix and refill.
	(kill-compilation): Use `mode-name' in the error message.
	(compilation-find-file): Use `compilation-error' in the
	read-file-name's prompt.

2005-08-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-basic-map): Bind smerge-combine-with-next.
	(smerge-auto-leave): Make undo re-enable the mode.
	(debug-ignored-errors): Add the user-error of impossible resolution.
	(smerge-resolve): Move things around a bit, in preparation for later.
	(smerge-diff): Don't fail if the buffer has no associated file.
	(ediff-ancestor-buffer, ediff-quit-hook): Quieten byte-compiler.
	(smerge-conflict-overlay): New function.
	(smerge-match-conflict): Don't add text properties here.
	(smerge-find-conflict): Instead, add an overlay here.
	Also check for the case where we're inside a conflict already, so as to
	obviate the need for font-lock-multiline, which is unbearably slow with
	large conflicts and ciomplex font-lock patterns.
	(smerge-remove-props): Remove overlay rather than text-properties.
	(smerge-mode): Don't set font-lock-multiline.
	Remove overlays when turned off.

2005-08-21  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-ignore-item-p): Use save-match-data.
	Bind case-fold-search to ido-case-fold locally.

2005-08-20  Richard M. Stallman  <rms@gnu.org>

	* files.el (normal-mode): If font lock is on, turn it off and on.

	* subr.el (replace-regexp-in-string): Doc fix.

	* startup.el (command-line-1): Don't suppress startup screen
	due to existing processes.

	* progmodes/grep.el (grep): Bind compilation-disable-input to t.

	* progmodes/compile.el (compilation-disable-input): Default to nil.

2005-08-20  Kevin Rodgers  <ihs_4664@yahoo.com>  (tiny change)

	* progmodes/compile.el (compilation-disable-input): New defcustom.
	(compilation-start): If compilation-disable-input is non-nil, send
	EOF to the compilation process.

2005-08-20  Eli Zaretskii  <eliz@gnu.org>

	* textmodes/tex-mode.el (tex-bibtex-file, tex-send-tex-command):
	Run the argument of tex-shell-cd-command through
	convert-standard-filename, to get the correct style of slashes on
	Windows, and enclose the result in quotes, in case the file name
	includes whitespace or other special characters.

2005-08-19  Andreas Schwab  <schwab@suse.de>

	* progmodes/gud.el (gud-kill-buffer-hook): Don't kill unrelated
	process.

2005-08-18  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (minibuffer-prompt-properties): Correct typo.

2005-08-18  Kim F. Storm  <storm@cua.dk>

	* scroll-lock.el: Fix errors due to incorrect line wrapping.

2005-08-18  Richard M. Stallman  <rms@gnu.org>

	* scroll-lock.el: New file.

2005-08-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* dired.el (dired-move-to-end-of-filename):
	Handle fifo as rendered by "ls -lF": Don't include trailing "|".

2005-08-18  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-everywhere): Fix defcustom :set function to disable
	rather than toggle mode when custom value is nil.
	(ido-everywhere): Fix defun doc string.

2005-08-17  Richard M. Stallman  <rms@gnu.org>

	* cus-start.el (minibuffer-prompt-properties): Use "Don't Enter"
	as tag instead of "Inviolable".

2005-08-17  Kim F. Storm  <storm@cua.dk>

	* windmove.el (windmove-coordinates-of-position): Remove.
	(windmove-coordinates-of-window-position): Remove.
	(windmove-reference-loc): Use posn-at-point instead.

	* subr.el (insert-for-yank-1): Doc fix.

	* ido.el (ido-enter-matching-directory): Rename from
	ido-enter-single-matching-directory.  Change 'slash choice to
	'only. 	Add 'first choice.
	(ido-exhibit): Adapt to above changes.

2005-08-16  Luc Teirlinck  <teirllm@auburn.edu>

	* Makefile.in: Expand comment about building loaddefs.el.

2005-08-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (toggle-gdb-use-inferior-io-buffer):
	Comment use of defadvice.

	* progmodes/gud.el (gud-jump): Rework for gdb-ui.

2005-08-15  Dan Nicolaescu  <dann@ics.uci.edu>

	* buff-menu.el, compare-w.el, emacs-lisp/testcover.el,
	* play/gomoku.el, play/mpuz.el, progmodes/flymake.el,
	* progmodes/gdb-ui.el, progmodes/idlw-help.el,
	* progmodes/idlw-shell.el, progmodes/ld-script.el,
	* progmodes/which-func.el, ruler-mode.el, strokes.el,
	* textmodes/sgml-mode.el, textmodes/table.el: Do not use face-alias
	for backward compatibility for faces that did not appear in the
	previous Emacs release.

	* simple.el (next-error-follow-minor-mode): Fix init value and lighter.

2005-08-15  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-delete-region): Return t if
	deleted region was non-empty.
	(cua-replace-region): Inhibit overwrite-mode for
	self-insert-command if replaced region was non-empty.
	(cua--explicit-region-start, cua--status-string): Make them
	buffer-local at top-level...
	(cua-mode): ...rather than when mode is enabled.

2005-08-15  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/vhdl-mode.el (vhdl-emacs-21):
	Set t for Emacs 21, 22, and so on.

2005-08-15  David Ponce  <david@dponce.com>

	* tree-widget.el: Update Commentary header.
	(tree-widget-theme): Doc fix.
	(tree-widget-space-width): New option.
	(tree-widget-image-properties): Look up in the default theme too.
	(tree-widget--cursors): Only for images with arrow pointer shape.
	(tree-widget-lookup-image): Pointer shape is hand by default.
	(tree-widget-icon): Rename generic icon widget from
	`tree-widget-control'.
	(tree-widget-*-icon): Rename from `tree-widget-*-control' and
	derive from `tree-widget-icon'.
	(tree-widget-handle): Improve default look and feel of the text
	representation.
	(tree-widget): Rename :*-control properties to :*-icon properties.
	Add :action and :help-echo properties.
	(tree-widget-after-toggle-functions): Move.
	(tree-widget-close-node, tree-widget-open-node): Remove.
	(tree-widget-before-create-icon-functions): New hook.
	(tree-widget-value-create): Update to allow customization of icons
	and nodes at run-time via that new hook.
	(tree-widget-icon-create, tree-widget-leaf-node-icon-p)
	(tree-widget-icon-action, tree-widget-icon-help-echo)
	(tree-widget-action, tree-widget-help-echo): New functions.

2005-08-15  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-buffer-internal): Use with-no-warnings.
	(ido-make-merged-file-list): Use while-no-input.

2005-08-15  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-mark-duplications-flag): Doc fix.
	(flyspell-large-region): Fix doc and custom type.

2005-08-14  Richard M. Stallman  <rms@gnu.org>

	* files.el (interpreter-mode-alist): Doc fix.

	* mail/rmail.el (rmail-nonignored-headers): New variable.
	(rmail-clear-headers): Use it.
	(rmail-reply): Better handling of mail-followup-to header.

	* progmodes/sh-script.el (sh-font-lock-keywords-var):
	Rename variable from sh-font-lock-keywords.  In the `shell' entry,
	don't try to refer to executable-font-lock-keywords.
	(sh-font-lock-keywords-var-1): Rename from sh-font-lock-keywords-1.
	(sh-font-lock-keywords-var-2): Rename from sh-font-lock-keywords-2.
	(sh-font-lock-keywords): Append executable-font-lock-keywords here.
	(sh-mode): Set comment-start-skip, local-abbrev-table,
	imenu-case-fold-search.
	(sh-set-shell): Don't set them here.
	(sh-feature): Simplify.  Get rid of the eval-a-variable feature.
	Don't cache the results in the original alist; don't ever modify
	that alist.

	* textmodes/flyspell.el (flyspell-mode): Autoload a defvar.

	* textmodes/ispell.el (lookup-words): Cope with case where ARGS is
	empty.

2005-08-15  Andreas Schwab  <schwab@suse.de>

	* desktop.el: Put autoload cookie at risky-local-variable declarations.

	* dired.el, info.el, mail/rmail.el: Revert last change.

2005-08-14  Thien-Thi Nguyen  <ttn@gnu.org>

	* dired.el: Fix dependency bug: Wrap `desktop-buffer-mode-handlers'
	modification in `eval-after-load' form.
	* info.el: Likewise.
	* mail/rmail.el: Likewise.

2005-08-14  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Remove highlighting of "Compilation started".  Highlight only
	the word "finished" in "Compilation finished".  Add highlighting
	of "interrupt", "killed", "terminated" and the exit code.
	(compilation-start): Add newline after header.  Use exactly the
	same time stamp format as the finishing message.
	(compilation-mode-map): Add ellipsis to "Search Files (grep)".

	* progmodes/grep.el (grep-mode-map): Add ellipsis to "Another grep".
	(grep-mode-font-lock-keywords): Don't highlight "Grep started".
	Add highlighting of "interrupt", "killed", "terminated".

	* delsel.el (delete-selection-pre-hook): If overwrite-mode is
	enabled and the current command is self-insert-command, call it
	explicitly with overwrite-mode bound to nil, to not allow it
	to delete the character after the selected region.

2005-08-12  Matt Hodges  <MPHodges@member.fsf.org>

	* emacs-lisp/eldoc.el: Add move-beginning-of-line,
	move-end-of-line, end-of-line, and beginning-of-line to the list
	of commands after which the echo area is updated.

2005-08-12  Eli Zaretskii  <eliz@gnu.org>

	* cus-edit.el (custom-save-all, custom-save-delete):
	Bind recentf-exclude to exclude custom-file.

2005-08-12  Ehud Karni  <ehud@unix.mvs.co.il>

	* mail/rmailsum.el (rmail-summary-end-of-message): New command
	to go to the bottom of the mail message.  Added to
	`rmail-summary-mode-map' with key "/".
	(rmail-summary-show-message): New (internal) function for use by
	both `rmail-summary-beginning/end-of-message'.
	(rmail-summary-beginning-of-message): Change to use
	rmail-summary-show-message.

	* mail/rmail.el (rmail-end-of-message): New command to go to the
	end of the current message.  Added to `rmail-mode-map' with key "/".
	(rmail-beginning-of-message): Fix to work as documented.
	(rmail-mode): Change documentation.

	* progmodes/compile.el (compilation-start): Add the line
	"Compilation started" with compilation start time.
	(compilation-mode-font-lock-keywords): Add `started' to keywords.

2005-08-11  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-options-menu): Standardize capitalization
	of menu items.

2005-08-11  Richard M. Stallman  <rms@gnu.org>

	* simple.el (pop-global-mark): Reverse test of widen-automatically.

	* battery.el (battery-status-function): Don't use ignore-errors.

2005-08-11  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/generic.el (generic-font-lock-defaults): Declare with
	define-obsolete-variable-alias.

2005-08-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el: Use \\` and \\' instead of ^ and $ in regexps.
	(ange-ftp-send-cmd): Revert last change, and expand
	the comment explaining the problem.

2005-08-10  Luc Teirlinck  <teirllm@auburn.edu>

	* ldefs-boot.el: Update.

	* menu-bar.el (menu-bar-showhide-menu): Rename "Date, Time and Mail"
	item to "Time, Load and Mail".  Change help echo text.

	* time.el (display-time-use-mail-icon, display-time-format)
	(display-time-string-forms): Shorten first line of docstrings.

2005-08-10  Lars Hansen  <larsh@soem.dk>

	* desktop.el (desktop-buffer-mode-handlers):
	Make non-customizable. Add autoload cookie.  Change initial value to
	nil; add elements in respective modules instead.  Fix doc string.
	(desktop-load-file): New function.
	(desktop-minor-mode-handlers): New autoloaded variable.
	(desktop-create-buffer): Call minor mode handlers.
	Use desktop-load-file to load major and minor mode modules prior to
	checking for a handler.
	(desktop-save): Don't add nil to desktop-minor-modes for minor
	modes with nil function in desktop-minor-mode-table.  Don't delete
	desktop file before rewriting it.
	(desktop-locals-to-save): Add autoload cookie.  Don't make
	automatically buffer-local.  Add variables column-number-mode,
	size-indication-mode, indent-tabs-mode,
	indicate-buffer-boundaries, indicate-empty-lines and
	show-trailing-whitespace.
	(desktop-clear): Allow desktop-clear-preserve-buffers to contain
	regexps. Don't use desktop-clear-preserve-buffers-regexp.
	(desktop-clear-preserve-buffers-regexp): Delete.
	(desktop-clear-preserve-buffers): Update initial value and docstring.
	(desktop-save-buffer): Fix doc string.

	* hilit-chg.el: Add handler to desktop-minor-mode-handlers.
	(hilit-chg-desktop-restore): New function.
	(highlight-changes-mode): Add highlight-changes-mode to
	desktop-locals-to-save.

	* dired.el: Add handler to desktop-buffer-mode-handlers.
	(dired-restore-desktop-buffer): Remove autoload cookie.
	(dired-mode): Add autoload cookie.

	* info.el: Add handler to desktop-buffer-mode-handlers.
	(Info-restore-desktop-buffer): Remove autoload cookie.
	(Info-mode): Add autoload cookie.

	* mh-e/mh-e.el: Add handler to desktop-buffer-mode-handlers.
	(mh-restore-desktop-buffer): Remove autoload cookie.
	(mh-folder-mode): Add autoload cookie.

	* mail/rmail.el: Add handler to desktop-buffer-mode-handlers.
	(rmail-restore-desktop-buffer): Remove autoload cookie.

2005-08-11  Masatake YAMATO  <jet@gyve.org>

	* hexl.el (hexl-address-region):
	(hexl-ascii-region, hexl-font-lock-keywords):
	(hexl-highlight-line-range): Use the term "region"
	instead of "area" for consistency with the other symbols
	defined in hexl.el.

2005-08-09  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-options-save): Move `display-time-mode' to
	correct group: it is set with `menu-bar-make-mm-toggle' (pointed
	out by Juri Linkov).  Add `display-battery-mode'.

2005-08-09  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Remove `-text' from face variable names.
	(compilation-error-file-name, compilation-warning-file-name)
	(compilation-info-file-name): Delete faces.
	(compilation-line-number, compilation-column-number):
	Remove face underlining.
	(compilation-message-face): Set to `underline' value by default.
	(compilation-error-face, compilation-warning-face)
	(compilation-info-face): Remove `-file-name' from face names.
	(compilation-error-text-face, compilation-warning-text-face)
	(compilation-info-text-face): Delete face variables.
	(compilation-text-face): Delete function.

	* progmodes/grep.el (grep-regexp-alist): Use `.+?' instead of `[^:\n]+'.
	(grep-mode-font-lock-keywords): Use `.+?' instead of `[^\n-]+'.
	(grep-error-face): Set to `compilation-error' instead of
	`compilation-error-face' (which is redefined to `grep-hit-face' in
	grep buffers).
	(grep-mode-font-lock-keywords): Remove `-text' from face variable
	names.  Use `grep-error-face' instead of `compilation-error-text-face'.

	* dired-aux.el (dired-do-query-replace-regexp):
	Use `query-replace-read-args'.

	* replace.el (query-replace-read-from, query-replace-read-to)
	(query-replace-read-args): Rename arg `string' to `prompt'.

	* menu-bar.el (menu-bar-showhide-menu): Add `showhide-battery'.

2005-08-09  Katsumi Yamaoka  <yamaoka@jpl.org>  (tiny change)

	* net/ange-ftp.el (ange-ftp-send-cmd): Make it work properly with
	uploading files.
	(ange-ftp-canonize-filename): Handle file names beginning with ~
	correctly.

2005-08-09  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/fill.el (canonically-space-region)
	(fill-context-prefix, fill-french-nobreak-p)
	(fill-delete-newlines, fill-comment-paragraph)
	(justify-current-line): "?\ " -> "?\s".

2005-08-09  Ben North  <ben@redfrontdoor.org>  (tiny change)

	* textmodes/fill.el (fill-nonuniform-paragraphs):
	Improve argument/docstring consistency.

2005-08-09  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-word): More fboundp checks.

	* files.el (find-file-noselect): Don't call set-buffer-major-mode.
	(find-file-noselect-1): Call it here, only if RAWFILE.
	(normal-mode): Always set some major mode.
	(save-some-buffers-action-alist): Change some explanation strings.
	(file-name-non-special): In the `quote' method, use unwind-protect.

2005-08-09  Magnus Henoch  <mange@freemail.hu>

	* textmodes/ispell.el (ispell-find-aspell-dictionaries): New command.
	(ispell-have-aspell-dictionaries): New variable.
	(ispell-aspell-data-dir, ispell-aspell-dict-dir): New variables.
	(ispell-get-aspell-config-value): New function.
	(ispell-aspell-find-dictionary): New function.
	(ispell-aspell-add-aliases): New function.
	(ispell-valid-dictionary-list): Call ispell-find-aspell-dictionaries if
	appropriate.  Don't look for ispell dictionaries if we use aspell.
	(ispell-menu-map): Don't build a submenu of dictionaries.

2005-08-09  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sql.el (sql-interactive-mode-map): Use fboundp.
	(sql-read-passwd): Use read-passwd.

	* progmodes/idlw-toolbar.el (idlwave-toolbar)
	(idlwave-toolbar-is-possible): Add defvars.

	* progmodes/idlw-shell.el (idlwave-xemacs-hack-mouse-track):
	Avoid warnings.

	* progmodes/idlw-rinfo.el (idlwave-system-variables-alist)
	(idlwave-system-class-info, idlwave-executive-commands-alist):
	Use defvar.

	* progmodes/cc-engine.el (c-guess-basic-syntax): Add autoload.

	* mail/supercite.el (sc-ask, sc-no-blank-line-or-header):
	Avoid warnings.

	* mail/rmail.el (rmail-ignored-headers): Don't hide mime-version:
	and content-type: headers.

	* eshell/eshell.el (eshell): Avoid warnings about eshell-mode.

	* emacs-lisp/map-ynp.el (map-y-or-n-p): Reorder the options
	and rename some of them to be more self-explanatory.

	* calendar/calendar.el (calendar-mode-map): Bind < and > usefully.

	* startup.el (command-line-1): Implement -scriptload.

	* replace.el (occur-engine): Initial *Occur* output not undoable.

	* menu-bar.el (menu-bar-file-menu): Rename some menu items
	and improve help strings.

	* isearch.el (isearch-repeat): When changing direction,
	mark search successful.

	* ediff-init.el: Use (featurep 'xemacs).

	* comint.el (send-invisible): Identify buffer, if not selected.

	* align.el: Delete autoload for c-guess-basic-syntax.

2005-08-09  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/refbib.el (r2b-convert-record, r2b-convert-buffer):
	Improve argument/docstring consistency.  Doc fixes.
	(r2b-variables, r2bv-address, r2bv-annote, r2bv-author)
	(r2bv-booktitle, r2bv-date, r2bv-decade, r2bv-editor)
	(r2bv-entry-kind, r2bv-institution, r2bv-journal, r2bv-keywords)
	(r2bv-kn, r2bv-month, r2bv-note, r2bv-number, r2bv-ordering)
	(r2bv-organization, r2bv-pages, r2bv-primary-author)
	(r2bv-publisher, r2bv-school, r2bv-title, r2bv-title-first-word)
	(r2bv-tr, r2bv-type, r2bv-volume, r2bv-where, r2bv-year):
	Defvar at compile time.

2005-08-09  Juri Linkov  <juri@jurta.org>

	* info.el: Replace `info' with upper-case `Info' where appropriate.
	(info-title-1, info-title-2, info-title-3, info-title-4)
	(info-menu-header): Move up face definitions.
	(info-menu-star): Rename from `info-menu-5'.
	(Info-fontify-node): Replace `info-menu-5' with `info-menu-star'.
	(Info-fontify-visited-nodes): Fix docstring.
	(Info-hide-note-references): Fix docstring.
	(Info-up, Info-next-reference, Info-prev-reference): Put cursor on
	menu items in the same way as on cross-references.
	(info-apropos): Fix sorting order and formatting to be like in the
	stand-alone Info browser.  Display error messages for 1 sec.
	(Info-mode-map): Move down `c' key binding.  Bind `^' to `Info-up'.
	(Info-mode-menu): Remove item for `Info-search-case-sensitively'
	from the menu bar.
	(Info-insert-dir): Restore point after calling
	`insert-buffer-substring'.

2005-08-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lmenu.el (lucid-menubar-map, lucid-failing-menubar)
	(recompute-lucid-menubar): Add defvars.

	* mail/sendmail.el (mail-yank-original): Use with-no-warnings.

	* mail/reporter.el (reporter-dump-state): Use insert-buffer-substring.

	* net/net-utils.el (run-dig): Rename from `dig'.

	* play/gametree.el (gametree-mode): Use make-local-variable,
	not make-variable-buffer-local.

	* progmodes/ada-prj.el (ada-prj-display-page): Use with-no-warnings.

	* ansi-color.el (ansi-color-make-extent)
	(ansi-color-set-extent-face): Use fboundp, not functionp.

	* autorevert.el (auto-revert-tail-mode): Use make-local-variable,
	not make-variable-buffer-local.

	* bookmark.el (Info-current-file): Add defvar.
	(bookmark-jump-noselect): Use with-no-warnings.

	* completion.el (c-mode-map, fortran-mode-map): Add defvars.

	* ebuff-menu.el (Helper-return-blurb): Add defvar.

	* ffap.el (gnus-summary-buffer, gnus-article-buffer): Add defvars.

	* find-file.el (ada-procedure-start-regexp)
	(ada-package-start-regexp): Add defvars.

	* info.el (Info-insert-dir): Use insert-buffer-substring.

	* xml.el (xml-att-def-re): Add defvar.

	* icomplete.el (icomplete-exhibit): Adapt to new while-no-input
	calling convention.

	* subr.el (while-no-input): Return t if there is input.

2005-08-08  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Add `overflow-newline-into-fringe'.

2005-08-08  Juanma Barranquero  <lekktu@gmail.com>

	* cmuscheme.el (inferior-scheme-mode-hook, inferior-scheme-mode)
	(scheme-prev-l/c-dir/file): Fix typos in docstrings.

2005-08-08  Emilio C. Lopes  <eclig@gmx.net>

	* cmuscheme.el (scheme-start-file): Replace reference to
	`user-emacs-directory' by "~/.emacs.d/".

2005-08-08  Thien-Thi Nguyen  <ttn@gnu.org>

	* info.el (Info-dir-remove-duplicates): Avoid case folding
	in loop; instead, keep downcased strings for comparison.
	Suggested by Helmut Eller.

2005-08-07  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.50.

	* tramp.el: Remove defvar of `last-coding-system-used' in the
	XEmacs case; not necessary anymore.
	(tramp-user-regexp): Allow "@" as part of user name.
	(tramp-handle-set-visited-file-modtime)
	(tramp-handle-insert-file-contents)
	(tramp-handle-write-region): No special handling for
	`last-coding-system-used, because this is done in
	`tramp-accept-process-output' now.
	(tramp-accept-process-output): New defun.
	(tramp-process-one-action, tramp-process-one-multi-action)
	(tramp-wait-for-regexp, tramp-wait-for-output)
	(tramp-discard-garbage-erase-buffer): Call it.  Reported by David
	Howells <dhowells@redhat.com>.
	(clear-visited-file-modtime): Defadvice removed.  The check for
	unset buffer's modtime does not need to be based on
	`tramp-buffer-file-attributes'.  Suggested by RMS.
	(tramp-message): Insert "\n" if not being at beginning of line.
	(tramp-find-shell): Use `tramp-barf-if-no-shell-prompt' for code
	sequence with same logic.
	(tramp-completion-handle-expand-file-name): Discard call of
	`tramp-drop-volume-letter'.  It is not necessary, and there have
	been problems with (expand-file-name "~/.netrc" "/") in ange-ftp.
	Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
	(tramp-do-copy-or-rename-file-out-of-band): Transfer message
	should always be visible.
	(tramp-handle-insert-directory, tramp-setup-complete)
	(tramp-set-process-query-on-exit-flag)
	(tramp-append-tramp-buffers): Pacify byte-compiler.
	(tramp-bug): Delete non-existing variables from list.
	Apply `tramp-load-report-modules' as pre-hook.
	Mask `tramp-password-prompt-regexp', `tramp-shell-prompt-pattern' and
	`shell-prompt-pattern' because of non-7bit characters.
	Reported by Sebastian Luque <sluque@mun.ca>.
	(tramp-reporter-dump-variable, tramp-load-report-modules): New defuns.
	(tramp-match-string-list): Remove function.
	(tramp-wait-for-regexp): Remove call of that function.
	Suggested by Kim F. Storm <storm@cua.dk>.
	(tramp-set-auto-save-file-modes): Use octal integer code #o600
	instead of octal character code ?\600.  The latter resulted in a
	syntax error with XEmacs.

	* tramp-smb.el: Remove defvar of `last-coding-system-used' in the
	XEmacs case; not necessary anymore.
	(tramp-smb-handle-write-region): No special handling for
	`last-coding-system-used, because this is done in
	`tramp-accept-process-output' now.
	(tramp-smb-wait-for-output): Call `tramp-accept-process-output'.

2005-08-06  Luc Teirlinck  <teirllm@auburn.edu>

	* wid-edit.el (widget-choice-value-create):
	Unconditionally respect user choice.  Set :explicit-choice back to nil
	when no longer needed.
	(widget-choice-action): Unconditionally respect user choice.
	Eliminate :explicit-choice-value.

	* fringe.el (set-fringe-indicators-1, fringe-indicators): Delete.

	* menu-bar.el (menu-bar-options-save): Replace `fringe-indicators'
	with `indicate-empty-lines' and `indicate-buffer-boundaries'.
	(menu-bar-showhide-fringe-menu): Add new item "Empty line indicators"
	running new function `toggle-indicate-empty-lines'.
	Rename "Customize" item to "Customize fringe".
	Rename "Indicators" item to "Buffer boundaries" and change help echo.
	(menu-bar-showhide-fringe-ind-menu): Change several help echos.
	Add `menu-bar-showhide-fringe-ind-customize' as "Other (customize)".
	Delete "Empty lines only" item.
	(menu-bar-showhide-fringe-ind-customize): New function.
	(menu-bar-showhide-fringe-ind-mixed)
	(menu-bar-showhide-fringe-ind-box)
	(menu-bar-showhide-fringe-ind-right)
	(menu-bar-showhide-fringe-ind-left)
	(menu-bar-showhide-fringe-ind-none): Use `indicate-buffer-boundaries'
	instead of `fringe-indicators'.

2005-08-06  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper.el (viper-emacs-state-mode-list): Add recentf-dialog-mode.
	Change the date of last update.

2005-08-06  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-cmd.el (viper-harness-minor-mode, viper-exec-delete)
	(viper-exec-yank, viper-put-back): Don't display modification msg
	if in the minibuffer.

	* viper-init.el (viper-replace-overlay-cursor-color)
	(viper-insert-state-cursor-color, viper-vi-state-cursor-color):
	Make variables frame local.

	* viper-util.el (viper-append-filter-alist): Use append instead of
	nconc.

	* viper.el (viper-vi-state-mode-list)
	(viper-emacs-state-mode-list): Move help-mode and
	completion-list-mode from the first list to the second.
	(viper-mode): Docstring.
	(viper-go-away, viper-non-hook-settings): Don't localize
	minor-mode-alist in newer Emacsen.  Add advice to
	set-cursor-color.  Don't bind "\C-c\\".

2005-08-06  Emilio C. Lopes  <eclig@gmx.net>

	* cmuscheme.el (scheme-trace-command, scheme-untrace-command)
	(scheme-macro-expand-command): New user options.
	(scheme-trace-procedure, scheme-expand-current-form): New commands.
	(scheme-form-at-point, scheme-start-file)
	(scheme-interactively-start-process): New functions.
	(scheme-get-process): New function, extracted from `scheme-proc'.
	(run-scheme): Call `scheme-start-file' to get start file, and pass
	it to `make-comint'.
	(switch-to-scheme, scheme-proc):
	Call `scheme-interactively-start-process' if no Scheme buffer/process
	is available.

2005-08-06  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Use `compilation-text-face', `compilation-info-text-face' and
	`compilation-error-text-face' instead of `font-lock-keyword-face'.
	(compilation-error): New face.
	(compilation-error-file-name): Inherit from
	`compilation-error' instead of `font-lock-warning-face'.
	(compilation-warning-file-name): Inherit from
	`compilation-warning' instead of `font-lock-warning-face'.
	(compilation-info, compilation-error-file-name)
	(compilation-warning-file-name, compilation-info-file-name)
	(compilation-line-number, compilation-column-number): Doc fix.
	(compilation-error-text-face, compilation-warning-text-face)
	(compilation-info-text-face): New face variables.
	(compilation-line-face, compilation-column-face)
	(compilation-enter-directory-face)
	(compilation-leave-directory-face): Doc fix.
	(compilation-text-face): New function.

	* progmodes/grep.el (grep-regexp-alist): Set 5th arg `TYPE' to 0
	instead of 1 to display binary file names as info file links.
	(grep-error-face): Use `compilation-error-face' instead of
	`font-lock-keyword-face'.
	(grep-mode-font-lock-keywords): Use `compilation-info-text-face'
	and `compilation-warning-text-face' instead of
	`font-lock-keyword-face'.  Use `compilation-error-text-face'
	instead of `grep-error-face'.

2005-08-05  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el: Add autoload cookies for all coding
	systems.

2005-08-04  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Put undo.c where it alphabetically belongs.

2005-08-04  Juri Linkov  <juri@jurta.org>

	* progmodes/compile.el (compilation-mode-map):
	* progmodes/grep.el (grep-mode-map):
	Bind TAB to `compilation-next-error' and [backtab] to
	`compilation-previous-error'.

	* progmodes/grep.el (grep-regexp-alist): Replace complex regexp
	matching line numbers, column numbers and their ranges with regexp
	matching only line numbers.
	(grep-context-face): New face variable.
	(grep-mode-font-lock-keywords): Use it.

	* faces.el (read-face-name): Delete duplicate faces.

2005-08-02  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-find-image): Don't make variables
	automatically buffer local.
	(thumbs-current-tmp-filename, thumbs-current-image-filename)
	(thumbs-image-num): Make automatically buffer local.
	(thumbs-show-thumbs-list): Use `make-local-variable', not
	`make-variable-buffer-local'.
	(thumbs-insert-image): Make `thumbs-current-image-size' buffer-local.

	* play/doctor.el (doctor-type-symbol): "?\ " -> "?\s".
	(**mad**, *debug*, *print-space*, *print-upcase*, abuselst)
	(abusewords, account, afraidof, arerelated, areyou, bak, beclst)
	(bother, bye, canyou, chatlst, continue, deathlst, describe)
	(drnk, drugs, eliza-flag, elizalst, famlst, feared, fears)
	(feelings-about, foullst, found, hello, history, howareyoulst)
	(howdyflag, huhlst, ibelieve, improve, inter, isee, isrelated)
	(lincount, longhuhlst, lover, machlst, mathlst, maybe, moods)
	(neglst, obj, object, owner, please, problems, qlist)
	(random-adjective, relation, remlst, repetitive-shortness)
	(replist, rms-flag, schoollst, sent, sexlst, shortbeclst)
	(shortlst, something, sportslst, stallmanlst, states, subj)
	(suicide-flag, sure, things, thlst, toklst, typos, verb, want)
	(whatwhen, whereoutp, whysay, whywant, zippy-flag, zippylst):
	Defvar at compile time.

	* progmodes/ada-mode.el (ada-mode): Use `make-local-variable',
	not `make-variable-buffer-local'.

2005-08-02  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-rect.el (cua--highlight-rectangle): Only show
	rectangle overlay in selected window.

2005-08-01  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Put `indicate-empty-lines' in fringe group
	instead of display group.  Make `indicate-buffer-boundaries'
	customizable through Custom.

2005-08-01  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/gdb-ui.el (gdb-frame-address, gdb-var-changed)
	(gdb-output-sink, gdba, gdb-cpp-define-alist-program)
	(gdb-set-gud-minor-mode, gdb-exited, gdb-setup-windows)
	(gdb-put-string): Fix typos in docstrings.

2005-08-01  Nick Roberts  <nickrob@snap.net.nz>

	Update copyright notices of files in progmodes directory for
	release of Emacs 22.1.

	* progmodes/gdb-ui.el (gdb-enable-debug-log): Add autoload cookie.

	* progmodes/gud.el (gud-tooltip-mode): Add autoload cookie.
	Don't barf if the GUD buffer has been killed.

2005-08-01  Kim F. Storm  <storm@cua.dk>

	* textmodes/table.el (table-yank-handler): Change defcustom to defvar.

2005-07-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (next-error-follow-minor-mode):
	make-variable-buffer-local -> make-local-variable.

	* emacs-lisp/cl-extra.el: Require CL also when compiling.

	* emacs-lisp/bytecomp.el (byte-compile-make-variable-buffer-local)
	(byte-compile-form-make-variable-buffer-local): New functions to warn
	about misuses of make-variable-buffer-local where make-local-variable
	was meant.

2005-07-29  Juanma Barranquero  <lekktu@gmail.com>

	* bs.el (bs-attributes-list): Doc fix.
	(bs): Update url-link.

	* desktop.el (desktop-save-buffer): Fix typos in docstring.
	(desktop-load-default): Simplify.

	* ibuffer.el (ibuffer-columnize-and-insert-list)
	(ibuffer-mouse-toggle-mark, ibuffer-count-marked-lines)
	(ibuffer-unmark-all, ibuffer-toggle-marks)
	(ibuffer-unmark-forward, ibuffer-unmark-backward)
	(ibuffer-compile-make-format-form, ibuffer-format-column)
	(ibuffer-current-buffers-with-marks)
	(ibuffer-update-title-and-summary): "?\ " -> "?\s".
	(ibuffer): Doc fix.
	(ibuffer-mode): Fix typo in docstring.
	(ibuffer-hooks, ibuffer-mode-hooks): Make obsolete and declare
	with `define-obsolete-variable-alias'.
	(ibuffer-elide-long-columns): Mark as obsolete.  Doc fix.

2005-07-29  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-message-coding-system):
	Be sure to use LF for end-of-line.  If no coding system is decided,
	return iso-8859-1-unix.

2005-07-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/ange-ftp.el (ange-ftp-gateway-fatal-msgs)
	(ange-ftp-pending-error-line): New vars.
	(ange-ftp-process-handle-line, ange-ftp-process-filter): Use them
	to handle the non-fatal no-route-to-host messages.
	(internal-ange-ftp-mode): Make the no-match regexp more efficient.

2005-07-28  Juanma Barranquero  <lekktu@gmail.com>

	* isearch.el (isearch-mode-map, isearch-other-meta-char)
	(isearch-quote-char, isearch-printing-char)
	(isearch-text-char-description): "?\ " -> "?\s".
	(isearch-lazy-highlight-cleanup)
	(isearch-lazy-highlight-initial-delay)
	(isearch-lazy-highlight-interval)
	(isearch-lazy-highlight-max-at-a-time)
	(isearch-lazy-highlight-face, isearch-lazy-highlight-cleanup):
	Declare with define-obsolete-*-alias macros.
	(isearch-forward): Fix typo in docstring.
	(search-invisible, search-ring-yank-pointer)
	(regexp-search-ring-yank-pointer): Doc fixes.

	* recentf.el (recentf-menu-append-commands-p): Declare with
	`define-obsolete-variable-alias'.
	(recentf-max-saved-items, recentf-menu-filter)
	(recentf-arrange-by-rule-subfilter): Doc fixes.
	(recentf-menu-append-commands-flag)
	(recentf-initialize-file-name-history, recentf-expand-file-name)
	(recentf-clear-data): Fix typos in docstrings.

2005-07-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el: Smarten comments.
	(gdb-info-breakpoints-custom): Use nowarn when finding file.

2005-07-27  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/apollo.el (terminal-init-apollo): New function containing
	all former top level forms in the file.
	* term/bobcat.el (terminal-init-bobcat):
	* term/cygwin.el (terminal-init-cygwin):
	* term/iris-ansi.el (terminal-init-iris-ansi):
	* term/linux.el (terminal-init-linux):
	* term/news.el (terminal-init-news):
	* term/rxvt.el (terminal-init-rxvt):
	* term/sun.el (terminal-init-sun):
	* term/tvi970.el (terminal-init-tvi970):
	* term/vt100.el (terminal-init-vt100):
	* term/vt102.el (terminal-init-vt102):
	* term/vt125.el (terminal-init-vt125):
	* term/vt200.el (terminal-init-vt200):
	* term/vt201.el (terminal-init-vt201):
	* term/vt220.el (terminal-init-vt220):
	* term/vt240.el (terminal-init-vt240):
	* term/vt300.el (terminal-init-vt300):
	* term/vt320.el (terminal-init-vt320):
	* term/vt400.el (terminal-init-vt400):
	* term/vt420.el (terminal-init-vt420):
	* term/wyse50.el (terminal-init-wyse50):
	* term/xterm.el (terminal-init-xterm): Likewise.

	* term/README: Describe the terminal-init-* functionality.

	* startup.el (command-line): After loading the terminal initialization
	file call the corresponding terminal initialization function.

2005-07-27  Kenichi Handa  <handa@m17n.org>

	* ps-bdf.el (bdf-read-font-info): Ignore glyphs whose ENCODING is
	negative.

	* ps-mule.el (ps-mule-bitmap-prologue): Fix arguments to setcharwidth.
	(ps-mule-composition-prologue): Fix for the case that
	RelativeCompose is false.

2005-07-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* smerge-mode.el (smerge-ediff): Use insert-buffer-substring.

	* descr-text.el (describe-char): Handle the case where the list of
	chars is displayed in a separate frame.
	Be a bit more discriminating when looking for the char.

2005-07-26  Juanma Barranquero  <lekktu@gmail.com>

	* bookmark.el (bookmark-automatically-show-annotations)
	(bookmark-read-annotation-text-func): Doc fixes.
	(bookmark-save): Improve argument/docstring consistency.
	(bookmark-get-bookmark, bookmark-get-bookmark-record)
	(bookmark-alist-from-buffer)
	(bookmark-upgrade-file-format-from-0)
	(bookmark-grok-file-format-version)
	(bookmark-maybe-upgrade-file-format, bookmark-kill-line)
	(bookmark-read-annotation-mode)
	(bookmark-insert-current-bookmark, bookmark-jump)
	(bookmark-exit-hook): Fix typos in docstrings.
	(bookmark-exit-hooks): Define as obsolete alias.
	(bookmark-exit-hook-internal): Run `bookmark-exit-hook',
	not `bookmark-exit-hooks'.  Fix docstring.
	(bookmark-bmenu-select): "?\ " -> "?\s".

2005-07-25  Ari Roponen <arjuropo@cc.jyu.fi>  (tiny change)

	* startup.el (command-line): Fix typo.

2005-07-24  Richard M. Stallman  <rms@gnu.org>

	* tooltip.el (tooltip-mode): Test emacs-basic-display,
	not emacs-quick-startup.

2005-07-24  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/re-builder.el (reb-with-current-window): Delete.
	(reb-next-match, reb-show-subexp): Use `with-selected-window'
	instead of `reb-with-current-window'.
	(reb-prev-match): Likewise.  Also, don't move left if the search
	was unsuccessful.
	(reb-initialize-buffer): New function.
	(re-builder, reb-change-syntax): Use it.

	* man.el (Man-goto-page): Make second argument NOERROR optional.

2005-07-23  Richard M. Stallman  <rms@gnu.org>

	* man.el (Man-bgproc-sentinel): Check here for failure to find
	any man page in the output, and report the error here.
	(Man-arguments): Make it permanent local.
	(Man-goto-page): New arg NOERROR.  Never kill the current buffer.
	(Man-mode): Pass t for NOERROR.

	* progmodes/grep.el (grep-error-face): Use font-lock-keyword-face.
	(grep-mode-font-lock-keywords):
	Don't use compilation-...-face for messages that are not file names.

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Don't use compilation-...-face for messages that are not file names.

2005-07-22  Juri Linkov  <juri@jurta.org>

	* startup.el (normal-splash-screen): Update menu name.

	* tempo.el (tempo-insert-template): Fix 2005-07-16 change.

2005-07-22  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el: Load term/rxvt if the terminal is actually an
	rxvt terminal.
	(xterm-rxvt-set-background-mode): Remove, not used anymore.

	* term/rxvt.el (function-key-map): Use substitute-key-definition
	to bind {C,S,C-S}-{f1-f10}. Add a few missing key bindings.

	* term/cygwin.el: New file.

2005-07-22  Kim F. Storm  <storm@cua.dk>

	* image-file.el (insert-image-file, image-file-yank-handler):
	Fix last change to maintain a (unique) yank-handler on yanked images.

2005-07-22  Eduardo Mu,Aq(Boz  <emufer@terra.es>  (tiny change)

	* dired.el (dired-move-to-filename-regexp): Recognize the B suffix
	of the file size (as in "177B" for 177 bytes).  This happens with
	"ls -lh" on FreeBSD.

2005-07-22  Juanma Barranquero  <lekktu@gmail.com>

	* hilit-chg.el (highlight-changes-global-initial-state)
	(highlight-compare-buffers, hilit-chg-turn-on-maybe)
	(hilit-chg-fixup, highlight-changes-mode):
	Fix typos in docstrings.
	(highlight-changes-global-modes, highlight-changes-rotate-faces):
	Doc fixes.

2005-07-21  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Never call the
	mode function using `eval-after-load'.

2005-07-21  Kim F. Storm  <storm@cua.dk>

	* mail/emacsbug.el (report-emacs-bug): Request that backtraces are
	included when reporting an emacs crash, and tell about the DEBUG file.

	* image-file.el (insert-image-file): Add yank-handler.
	(image-file-yank-handler): Yank handler to make unique copies of
	images when they are yanked into a buffer next to each other.

2005-07-21  Juanma Barranquero  <lekktu@gmail.com>

	* comint.el (comint-use-prompt-regexp, comint-send-input)
	(comint-source-default, comint-extract-string)
	(comint-get-source, comint-word, comint-completion)
	(comint-source, comint-prompt-read-only, comint-update-fence):
	Fix typos in docstrings.
	(comint-use-prompt-regexp-instead-of-fields, comint-kill-output):
	Declare with define-obsolete-*-alias macros.
	(comint-previous-matching-input-from-input)
	(comint-next-matching-input-from-input)
	(comint-previous-matching-input, comint-next-matching-input)
	(comint-forward-matching-input):
	Improve argument/docstring consistency.

	* desktop.el (desktop-clear-preserve-buffers-regexp):
	Also preserve the *server* buffer.

	* simple.el (clone-indirect-buffer): Doc fix.
	(fixup-whitespace, just-one-space)
	(backward-delete-char-untabify, lambda): "?\ " -> "?\s".
	(next-error, next-error-highlight)
	(next-error-highlight-no-select, next-error-last-buffer)
	(next-error-buffer-p, next-error-find-buffer, next-error)
	(previous-error, next-error-no-select, previous-error-no-select)
	(open-line, split-line, minibuffer-prompt-width, kill-new)
	(binary-overwrite-mode): Fix typos in docstrings.
	(set-fill-column): Fix typo in message.

	* skeleton.el (skeleton-proxy-new): Doc fix.

	* strokes.el (strokes-load-hook): Doc fix.
	(strokes-grid-resolution, strokes-get-grid-position)
	(strokes-renormalize-to-grid, strokes-read-stroke)
	(strokes-read-complex-stroke, strokes-file, strokes-last-stroke)
	(strokes-global-map): Fix typos in docstrings.
	(strokes-help): Doc fix.  Fix help message and pass it through
	`substitute-command-keys'.

	* tempo.el (tempo-insert-prompt, tempo-interactive)
	(tempo-show-completion-buffer, tempo-tags, tempo-match-finder)
	(tempo-insert-string-functions, tempo-local-tags)
	(tempo-define-template, tempo-insert-template)
	(tempo-insert-prompt-compat, tempo-is-user-element)
	(tempo-insert-mark, tempo-find-match-string, tempo-complete-tag):
	Fix typos in docstrings.

	* vcursor.el (vcursor-other-window, vcursor-bind-keys)
	(vcursor-key-bindings, vcursor-use-vcursor-map)
	(vcursor-find-window, vcursor-scroll-down)
	(vcursor-disable, vcursor-beginning-of-buffer)
	(vcursor-end-of-buffer): Fix typos in docstrings.
	(vcursor-relative-move, vcursor-get-char-count):
	Improve argument/docstring consistency.

	* version.el: "?\ " -> "?\s".

	* wid-edit.el (widget-default-create, widget-after-change)
	(widget-default-format-handler, widget-checklist-add-item)
	(widget-radio-add-item, widget-choose, widget-specify-secret)
	(widget-field-value-create, widget-field-value-get)
	(widget-editable-list-format-handler)
	(widget-editable-list-entry-create, widget-group-value-create)
	(widget-documentation-link-add)
	(widget-documentation-string-value-create): "?\ " -> "?\s".
	(widget-convert-text): Doc fix.
	(widget-narrow-to-field, widget-field-find)
	(widget-url-link-action, widget-emacs-library-link-action)
	(widget-color-notify): Fix typos in docstrings.

	* w32-fns.el (w32-shell-name): Use `bound-and-true-p'.
	(x-select-text, set-w32-system-coding-system)
	(w32-add-charset-info): Fix typos in docstrings.

	* emulation/cua-base.el (cua-mode, cua-enable-register-prefix)
	(cua-enable-cua-keys, cua-use-hyper-key)
	(cua-virtual-rectangle-edges): Fix typos in docstrings.
	(cua--M/H-key, cua--init-keymaps): "?\ " -> "?\s".

	* net/tramp.el (tramp-handle-load): Fix typo in error message.

	* emacs-lisp/re-builder.el (regexp-builder): Declare with
	`defalias' instead of faking it.

	* eshell/em-ls.el (eshell-ls-decorated-name): Doc fix.
	(eshell-ls-missing, eshell-ls-dired-initial-args)
	(eshell-ls-use-in-dired): Fix typos in docstrings.

2005-07-20  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-mode): Improve doc string.

2005-07-20  Juanma Barranquero  <lekktu@gmail.com>

	* abbrev.el (expand-region-abbrevs): Doc fix.
	(inverse-add-mode-abbrev, inverse-add-global-abbrev):
	Improve argument/docstring consistency.

	* arc-mode.el (archive-get-descr, archive-alternate-display):
	Doc fixes.
	(archive-l-e): Improve argument/docstring consistency.
	(archive-tmpdir, archive-unixdate, archive-unixtime)
	(archive-chmod-entry): Fix typos in docstrings.
	(archive-unflag, archive-unflag-backwards)
	(archive-unmark-all-files): "?\ " -> "?\s".

	* buff-menu.el (Buffer-menu-unmark): Doc fix.
	(Buffer-menu-not-modified, Buffer-menu-execute)
	(Buffer-menu-toggle-read-only, Buffer-menu-buffer+size)
	(list-buffers-noselect, Buffer-menu-select): "?\ " -> "?\s".

	* composite.el (compose-string, encode-composition-rule)
	(compose-last-chars): Fix typos in docstrings.

	* desktop.el (desktop-enable, desktop-basefilename):
	Declare with `define-obsolete-variable-alias'.
	(desktop-internal-v2s): Don't quote keywords.
	(desktop-clear): "?\ " -> "?\s".

	* dired.el (dired-align-file, dired-flag-backup-files)
	(dired-change-marks, dired-unmark-all-files): "?\ " -> "?\s".
	(dired-listing-switches, dired-ls-F-marks-symlinks)
	(dired-dwim-target, dired-load-hook, dired-mode-hook)
	(dired-directory, dired-faces, dired, dired-revert)
	(dired-mode, dired-summary, dired-view-file)
	(dired-copy-filename-as-kill, dired-delete-file)
	(dired-no-confirm, dired-unmark-all-marks)
	(dired-sort-by-date-regexp, dired-sort-by-name-regexp)
	(dired-sort-inhibit, dired-sort-other): Fix typos in docstrings.
	(dired-undo, dired-get-file-for-visit, dired-sort-toggle-or-edit):
	Fix typos in message strings.

	* dired-x.el (virtual-dired): Declare with `defalias'.
	(dired-mark-unmarked-files, dired-local-variables-file)
	(dired-omit-here-always): Doc fix.
	(dired-omit-mode, dired-find-subdir)
	(dired-enable-local-variables, dired-clean-up-buffers-too)
	(dired-extra-startup, dired-mark-extension, dired-jump)
	(dired-jump-other-window, dired-omit-localp, dired-virtual-mode)
	(dired-smart-shell-command, dired-guess-shell-alist-user)
	(dired-man, dired-initial-position, dired-x-hands-off-my-keys)
	(dired-x-bind-find-file, dired-x-submit-report):
	Fix typos in docstrings.
	(dired-mark-unmarked-files): "?\ " -> "?\s".

	* dirtrack.el (dirtrack-list): Fix typos in docstring.

	* faces.el (describe-face): "?\ " -> "?\s".
	(read-all-face-attributes, read-face-font, modify-face)
	(face-attr-construct, italic): Fix typos in docstrings.
	(frame-update-face-colors): Declare with
	`define-obsolete-function-alias'.

	* files.el (find-file-noselect, recode-file-name): Doc fixes.
	(insert-directory, kill-some-buffers): "?\ " -> "?\s".
	(magic-mode-alist, buffer-file-numbers-unique)
	(write-file-functions, get-free-disk-space):
	Fix typos in docstrings.
	(find-file-not-found-hooks, find-file-hooks, write-file-hooks)
	(write-contents-hooks, write-file-hooks):
	Declare with `define-obsolete-variable-alias'.

	* forms-d2.el (arch-rj): Fix typo in docstrings.
	(arch-tocol): Likewise.  "?\ " -> "?\s".

	* frame.el (set-frame-font, cursor-in-non-selected-windows):
	Fix typo in docstring.
	(set-screen-width, set-screen-height): Delete redundant info in
	doctrings.
	(new-frame, screen-height, screen-width): Declare with
	`define-obsolete-function-alias'.
	(delete-frame-hook, blink-cursor): Declare with
	`define-obsolete-variable-alias'.

	* paths.el (prune-directory-list): Fix typos in docstring.

	* pcvs-util.el (cvs-flags-query, cvs-strings->string)
	(cvs-prefix-get): Fix typos in docstrings.

	* ps-print.el (ps-extend-face-list, ps-extend-face)
	(ps-print-background-image): Fix typos in docstrings.
	(ps-default-fg, ps-default-bg): Doc fixes.

	* s-region.el (s-region-bind): Doc fix.
	(s-region-move-p1, s-region-move-p2): Fix typos in docstrings.

	* textmodes/org.el (org-table-formula-substitute-names)
	(org-table-get-vertical-vector): Doc fixes.
	(org-table-recalculate): Remove unused argument to `message'.

2005-07-19  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-table-column-names)
	(org-table-column-name-regexp)
	(org-table-named-field-locations): New variables.
	(org-archive-subtree): Protect `this-command' when calling
	`org-copy-subtree' and `org-cut-subtree', to avoid appending to
	the kill buffer.
	(org-complete): Remove fixed-formula completion.
	(org-edit-formulas-map): New variable.
	(org-table-edit-formulas): New command.
	(org-finish-edit-formulas, org-abort-edit-formulas)
	(org-show-variable, org-table-get-vertical-vector): New functions.
	(org-table-maybe-eval-formula): Handle `:=' fields.
	(org-table-get-stored-formulas, org-table-store-formulas)
	(org-table-get-formula, org-table-modify-formulas)
	(org-table-replace-in-formulas): Handle named field formulas.
	(org-table-get-specials): Store locations of named fields.

2005-07-19  Juri Linkov  <juri@jurta.org>

	* progmodes/grep.el (grep-regexp-alist)
	(grep-mode-font-lock-keywords, grep-process-setup):
	Use default GNU grep match color "01;31m" instead of "01;41m".
	(grep-regexp-alist, grep-mode-font-lock-keywords):
	Use `\\[[0-9]*m' instead of `\\[00m'.
	(grep-regexp-alist): Move `\\(?:\033\\[K\\)?' from sgr_end to
	sgr_start where its handling is more important.  Use the real
	length of sgr_start instead of constant 8.
	(grep-mode-font-lock-keywords): Don't delete `\\(?:\033\\[K\\)?'
	specially.  Delete all remaining escape sequences.
	(grep-process-setup): Set "GREP_COLORS" for GNU grep 2.5.1-cvs.
	(grep-regexp-alist): Make hyperlink only for binary file name
	instead of the whole line.
	(grep-mode-map): Bind `backtab' to `compilation-previous-file'.
	(grep-mode): Add autoload.

	* emacs-lisp/find-func.el (find-function-regexp):
	Add `define-compilation-mode'.

2005-07-19  Juri Linkov  <juri@jurta.org>

	* compare-w.el (compare-ignore-whitespace, compare-windows-sync)
	(compare-windows-sync-string-size, compare-windows-recenter)
	(compare-windows-highlight, compare-windows): Add version 22.1.
	(compare-windows) <defface>: Inherit from lazy-highlight instead
	of duplicating its default value.

	* cus-edit.el (custom-mode-map): Bind `C-c C-c' to `Custom-set'.
	(Custom-mode-menu): Use `info' instead of `Info-goto-node'.

	* descr-text.el (describe-char): Create link buttons for `charset'
	and `code point'.  Add the current input method name with a link
	button to `to input' field.  Print face names of display table
	characters in `The display table entry is displayed by' section
	instead of printing face-id in the `display' field.
	Guess hardcoded faces and create a link button for them.
	Skip empty fields when calculating max-width.
	Treat `widget-create' specially while inserting strings from the
	collected field list.
	(describe-char-after): Made obsolete in version 22.1, not 21.5.

	* diff-mode.el (diff-file-header): Change foreground color from
	yellow to green on light backgrounds.
	(diff-context): Inherit from `shadow' only for color/grayscale
	with more than 88 colors.
	(diff-indicator-removed, diff-indicator-added)
	(diff-indicator-changed): New faces.
	(diff-font-lock-keywords): Use new faces.  Regroup rules.
	Add "^---$" for `normal' diff format.  Fontify `#' lines with
	font-lock-comment-delimiter-face and font-lock-comment-face.
	Add `#' to ^[^...] in the rule for `diff-context-face'.

	* faces.el (mode-line-highlight): Replace RoyalBlue4 with
	a button-like box.  Inherit from `highlight' on low colors.
	(shadow): Use shades of gray only for color/grayscale with
	more than 88 colors.  Use green for light backgrounds with
	8 colors, and yellow for dark backgrounds with 8 colors.

	* font-lock.el (font-lock-regexp-grouping-backslash):
	Don't inherit from escape-glyph (use bold for all cases).

	* info.el (info-xref-visited): Use light foreground color `violet'
	for dark backgrounds instead of dark color `magenta3'.
	(info-title-1): Use `yellow' color for dark backgrounds.

	* isearch.el (isearch): Use not-too-dark magenta3 instead of
	too-light magenta2.

	* replace.el (match): Use slightly more light RoyalBlue3 instead
	of dark RoyalBlue4.

	* wid-edit.el (widget-inactive): Inherit from `shadow'.

2005-07-19  Juanma Barranquero  <lekktu@gmail.com>

	* novice.el (disabled-command-hook): Declare it with
	`define-obsolete-variable-alias'.

	* desktop.el (desktop-enable, desktop-buffer-modes-to-save)
	(desktop-buffer-misc-functions, desktop-buffer-handlers)
	(desktop-load-default): Add release to obsolescence info.
	(desktop-globals-to-clear, desktop-buffer-mode-handlers)
	(desktop-append-buffer-args, desktop-read):
	Fix typos in docstrings.
	(desktop-kill): Fix typo in message.
	(desktop-save): Doc fix.

2005-07-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-cmd.el (viper-escape-to-state): Bug fix.
	(viper-envelop-ESC-key): Change the definition of fast
	keysequence so it'll work with keyboard macros.

	* ediff.el (ediff-patch-buffer): Change the docstring.

2005-07-19  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system): Try to
	use an auto-coding (if any) before anything else.  If the found
	auto-coding is invalid, show a warning message.

	* international/mule.el (find-auto-coding): New function created
	by modifying the body of set-auto-coding.
	(set-auto-coding): Use find-auto-coding to find a coding.

2005-07-18  Richard M. Stallman  <rms@gnu.org>

	* allout.el (allout-isearch-expose): Use isearch-mode-end-hook-quit,
	not isearch-mode-end-hook-error.
	(allout-before-change-protect): Fix error message.

2005-07-18  Juri Linkov  <juri@jurta.org>

	* allout.el (allout-mode):
	* calculator.el (calculator-copy):
	* custom.el (custom-known-themes):
	* dired.el (dired-desktop-buffer-misc-data)
	(dired-restore-desktop-buffer):
	* dired-x.el (dired-omit-marker-char):
	* files.el (basic-save-buffer):
	* font-core.el (font-lock-mode):
	* calendar/calendar.el (calendar-goto-hebrew-date)
	(calendar-goto-coptic-date, calendar-goto-ethiopic-date)
	(calendar-goto-persian-date):
	* language/ethio-util.el (ethio-sera-to-fidel-region):
	* textmodes/picture.el (picture-mode):
	Delete duplicate duplicate words.

2005-07-18  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-mode-map): Remove key bindings for regexp
	chars * ? } |.
	(isearch-fallback): Don't call `isearch-process-search-char'.
	(isearch-*-char, isearch-}-char, isearch-|-char): Remove functions.
	(isearch-process-search-char): Call `isearch-fallback' for regexp
	chars * ? } |.
	(isearch-return-char): Make obsolete with `make-obsolete' instead
	of simply documenting it as obsolete in the docstring.
	(isearch-fallback): Refill docstring.

	* international/isearch-x.el
	(isearch-process-search-multibyte-characters): Remove unneeded
	`concat'.  Add intermediate values to `junk-hist' instead of
	`minibuffer-history'.  Test the length of `str'.

2005-07-18  Juanma Barranquero  <lekktu@gmail.com>

	* allout.el (allout-resolve-xref): Fix typos in error strings.
	(allout-before-change-protect): Remove unneeded `concat'.

	* array.el (array-mode, array-reconfigure-rows)
	(untabify-backward): Fix typos in docstrings.
	(array-reconfigure-rows): Use `insert-buffer-substring', not
	`insert-buffer'.

	* calendar/icalendar.el (icalendar--get-unfolded-buffer):
	* progmodes/ada-mode.el (ada-make-body):
	Use `insert-buffer-substring' and `goto-char', not `insert-buffer'.

	* dired.el (dired-log):
	* tar-mode.el (tar-subfile-save-buffer):
	* play/zone.el (zone-pgm-stress-destress):
	Use `insert-buffer-substring', not `insert-buffer'.

2005-07-17  Simon Josefsson  <jas@extundo.com>

	* mail/smtpmail.el (smtpmail-auth-supported): Prefer PLAIN over LOGIN.

2005-07-16  Jose E. Marchesi  <jemarch@gnu.org>

	* lisp/mail/smtpmail.el (smtpmail-auth-supported):
	Add plain auth method.
	(smtpmail-try-auth-methods): Add AUTH PLAIN dialog.

2005-07-17  Kim F. Storm  <storm@cua.dk>

	* ido.el (dired-other-window): Add ido property.

2005-07-16  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/bytecomp.el (byte-compile-maybe-guarded):
	Fix typo in docstring.
	(byte-compile-interactive-only-functions): Add `insert-buffer' and
	`insert-file-literally'.

	* emacs-lisp/edebug.el (def-edebug-form-spec): Add obsolescence
	info and delete redundant message.  Doc fix.
	(edebug-install-custom-print-funcs, edebug-reset-print-funcs)
	(edebug-uninstall-custom-print-funcs): Define as obsolete aliases.

2005-07-16  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-and-recursion): New function.
	(byte-compile-and): Use byte-compile-and-recursion.
	(byte-compile-or-recursion): New function.
	(byte-compile-or): Use that.
	(byte-compile-if): Guard the else-clause too.
	(byte-compile-maybe-guarded): Handle (not (featurep 'emacs)).

	* isearch.el (isearch-mode-end-hook-quit): New variable.
	(isearch-done): Bind it.
	(isearch-mode-end-hook): Doc fix.

	* allout.el (allout-isearch-did-quit): Variable deleted.
	(allout-real-isearch-abort): Function name no longer used.
	(allout-mode): Do allout-enwrap-isearch whenever feature is wanted.
	(allout-isearch-rectification): isearch-mode always exists.
	Don't set allout-isearch-did-quit.
	(allout-isearch-expose): Check isearch-mode-end-hook-error, not
	allout-isearch-did-quit.
	(allout-enwrap-isearch): Just add the hook.
	(allout-isearch-abort): Function deleted.
	(allout-pre-command-business): Avoid warning.

	* progmodes/pascal.el (pascal-outline-map): Use fboundp, not boundp.
	Correctly avoid warnings.
	(pascal-outline): Likewise.

	* progmodes/f90.el (f90-abbrev-start): Avoid warning.

	* progmodes/asm-mode.el (asm-comment): Use with-no-warnings.

	* play/tetris.el (tetris-mode): Avoid warning.

	* play/snake.el (snake-mode): Avoid warning.

	* play/gamegrid.el (gamegrid-shared-game-dir): Add defvar.
	(gamegrid-set-display-table): Avoid warning.
	(gamegrid-set-timer): Likewise.
	(gamegrid-make-mono-tty-face): Use set-face-inverse-video-p.
	(gamegrid-add-score-with-update-game-score-1): Take FILE
	as argument.
	(gamegrid-add-score-with-update-game-score): Pass that argument.
	Rename have-shared-game-dir to gamegrid-shared-game-dir.

	* net/eudc-hotlist.el (eudc-hotlist-mode): Avoid warnings.

	* net/eudc-bob.el (eudc-jump-to-event): Avoid warning.
	(eudc-bob-display-jpeg, eudc-bob-can-display-inline-images): Likewise.

	* mail/uce.el (uce-reply-to-uce): Replace beginning-of-buffer
	and insert-file.

	* mail/supercite.el (sc-no-blank-line-or-header): Avoid warning.
	(sc-ask): Avoid warnings.

	* eshell/em-hist.el (eshell-rebind-keys-alist): Add defvar.
	(eshell-hist-initialize): Use that var the natural way.

	* emulation/viper-init.el (viper-activate-input-method): Avoid warning.

	* emacs-lisp/re-builder.el (reb-cook-regexp):
	Avoid warning calling lre-compile-string.
	(reb-color-display-p): Avoid warning.

	* calculator.el (calculator-last-input): Guard uses
	of event-key and key-press-event-p.
	(event-key, key-press-event-p): Delete definitions.

	* emacs-lisp/find-gc.el (find-gc-unsafe-list)
	(find-gc-source-directory, find-gc-subrs-callers)
	(find-gc-noreturn-list, find-gc-source-files)
	(find-gc-subrs-called): Vars renamed and defvar'd.

	* emacs-lisp/checkdoc.el (checkdoc-make-overlay)
	(checkdoc-overlay-put, checkdoc-delete-overlay)
	(checkdoc-overlay-start, checkdoc-overlay-end)
	(checkdoc-mode-line-update, checkdoc-char=):
	Define such that compiler knows they are defined.
	(checkdoc-call-eval-buffer): Delete.  Use eval-buffer directly.
	(checkdoc-read-event): Delete.  Use read-event directly.

	* whitespace.el (whitespace-make-overlay)
	(whitespace-overlay-put, whitespace-delete-overlay)
	(whitespace-overlay-start, whitespace-overlay-end):
	Define such that compiler knows they are defined.
	(whitespace): Move conditional inside.

	* tempo.el (tempo-insert-template): Suppress warning.

	* ediff-diff.el (longlines-mode): Add defvar.

2005-07-16  Gary Howell  <g1howell-list@yahoo.com>  (tiny change)

	* server.el: Bind "C-x #" in a way that works even if C-x is
	redefined to a command key, not a prefix key.

2005-07-16  Johan Bockgard  <bojohan@users.sourceforge.net>  (tiny change)

	* emacs-lisp/cl-macs.el (cl-make-type-test): Defer evaluation of
	cl-make-type-test till execution time.

2005-07-16  Markus Rost  <rost@math.uni-bielefeld.de>

	* dired-x.el (dired-do-relsymlink-regexp): Add missing optional
	arg ARG and use it.

2005-07-16  Johan Bockgard  <bojohan@users.sourceforge.net>  (tiny change)

	* emacs-lisp/cl-macs.el (cl-make-type-test): Add `atom' type.

2005-07-15  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Avoid constructing
	a defcustom with two :set or :type keywords.

2005-07-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table):
	Don't give ^M comment-end syntax.

2005-07-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-update, gdb-var-update-handler):
	Don't consider gdbmi (gdb-mi.el has its own update functions).
	(gdb-var-delete): Make it work for gdbmi as well.
	(gdb-speedbar-expand-node): Move var-update here for gdbmi.

	* progmodes/gud.el (etags, sdb): Only require etags when needed.
	(gud-speedbar-menu-items): Correct logic for enabling items.

2005-07-15  Kim F. Storm  <storm@cua.dk>

	* ido.el: Fix commentary.
	(ido-define-mode-map): Move ido-next-work-file to C-M-o.
	Use with-no-warnings around ffap-guesser.
	(ido-file-internal, ido-read-file-name, ido-read-directory-name):
	Let bind minibuffer-completing-file-name to t.

2005-07-15  Juanma Barranquero  <lekktu@gmail.com>

	* startup.el (site-run-file, keyboard-type): Doc fixes.
	(command-line): Check for "--basic-display" argument; also for
	"--quick", not "--bare-bones" (which was renamed).
	(fancy-splash-text): Add missing item "Getting New Versions".
	(normal-splash-screen): Fix typos and improve consistency with
	`fancy-splash-text'.  Update copyright year.

	* hexl.el (hexl-mode-map): Recognize also `ehelp-command' as a
	valid binding for `help-char'.

	* emacs-lisp/derived.el (derived-mode-hook-name): Doc fix.

2005-07-14  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-mode): Disable cua-mode for term buffers.

2005-07-14  Juanma Barranquero  <lekktu@gmail.com>

	* add-log.el (add-log-mailing-address, change-log-merge):
	Doc fixes.
	(change-log-get-method-definition): Fix typo in docstring.

2005-07-14  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el:
	(cua--pre-command-handler-1, cua--pre-command-handler)
	(cua--post-command-handler-1, cua--post-command-handler):
	Split in two.  Check (buffer local) value of cua-mode.
	(cua-selection-mode): New command.

2005-07-13  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-initialize-safe-set)
	(custom-initialize-safe-default): Doc fixes.

	* frame.el (blink-cursor-mode): Use `custom-initialize-safe-default'
	and simplify :init-value again.

	* tooltip.el (tooltip-mode): Use `custom-initialize-safe-default'
	and simplify :init-value again.  Delete autoload.

	* startup.el (command-line): Use `custom-reevaluate-setting' again
	for tooltip-mode.

	* emacs-lisp/easy-mmode.el (define-minor-mode): Avoid constructing
	a defcustom with two :initialize keywords.

2005-07-13  Juanma Barranquero  <lekktu@gmail.com>

	* allout.el (my-mark-marker, allout-isearch-prior-pos)
	(allout-unprotected, allout-undo-aggregation, allout-snug-back)
	(allout-post-command-business, allout-flag-region)
	(isearch-reenable-font-lock, allout-yank)
	(allout-insert-latex-header, allout-insert-latex-trailer)
	(allout-latex-verbatim-quote-curr-line, allout-latexify-exposed)
	(allout-latex-verb-quote): Fix typos in docstrings.
	(allout-enwrap-isearch, regexp-sans-escapes): Doc fixes.
	(allout-unprotected, allout-prefix-data):
	Improve argument/docstring consistency.
	(allout-chart-subtree): Fix argument spec.
	(allout-open-topic): Rename `use_sib_bullet' argument to
	`use-sib-bullet'.  Doc fix.

	* whitespace.el (whitespace-check-buffer-leading)
	(whitespace-check-buffer-trailing)
	(whitespace-check-buffer-indent)
	(whitespace-check-buffer-spacetab)
	(whitespace-check-buffer-ateol, whitespace-highlighted-space)
	(whitespace-check-leading-whitespace)
	(whitespace-check-trailing-whitespace)
	(whitespace-check-spacetab-whitespace)
	(whitespace-check-indent-whitespace)
	(whitespace-check-ateol-whitespace, whitespace-abort-on-error)
	(whitespace-modes): Fix typos in docstrings.
	(defgroup, defcustom): Doc fixes.

	* winner.el (winner-mode, winner-boring-buffers)
	(winner-pending-undo-ring): Doc fixes.
	(winner-ring): Remove unneeded `progn'.
	(winner-equal): `defsubst' it.
	(winner-redo): Fix message.

2005-07-13  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Always use vertical-motion to
	do the last (or only) line move to ensure some movement.
	Undo 2005-06-23 change--don't check for overlays.

2005-07-13  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (ccl-encode-mac-roman-font)
	(ccl-encode-mac-centraleurroman-font)
	(ccl-encode-mac-cyrillic-font, ccl-encode-mac-symbol-font):
	(ccl-encode-mac-dingbats-font): Remove check for ASCII.
	Change charset-id boundary of dimension to ?\xef.
	(mac-char-fontspec-list): New constant.
	(fontset-add-mac-fonts): Use it.  Accept non-string `base-family'
	argument.  Nil uses itself as family in font-spec.  Previous
	behavior for nil is now provided by non-nil non-string argument.
	All callers changed.  Add font-specs for Mac fonts to
	"fontset-default" unless iso8859-1 fonts are installed.

2005-07-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/sh-script.el (sh-get-indent-info): Only indent
	a continuation line if the \ is preceded by SPC or TAB.
	(sh-get-indent-info): Simplify.
	(sh-mark-init, sh-learn-buffer-indent, sh-add-completer):
	Use with-current-buffer.

	* font-lock.el (font-lock-fontify-keywords-region): Avoid inf-loops
	when the matched text is empty.

2005-07-12  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Revert to previous handling of
	tooltip-mode.  Explain in comment why the complexity is needed.

	* tooltip.el (tooltip-mode): Revert to previous implementation of
	its defcustom.

	* frame.el (blink-cursor-mode): Revert to previous implementation
	of its defcustom.  Update comment.

2005-07-12  Lars Hansen  <larsh@soem.dk>

	* desktop.el: Update e-mail address.

2005-07-12  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-services-mail-selection)
	(mac-services-mail-to): New functions.
	(mac-application-menu-map): Bind them.

2005-07-12  wulei <milton@wulei.net>  (tiny change)

	* progmodes/gdb-ui.el: Add note about buffering with Windows.

2005-07-11  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-reevaluate-setting): Doc fix.

2005-07-11  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-embedded-announce-formula-alist)
	(calc-embedded-open-close-plain-alist)
	(calc-embedded-open-close-mode-alist): Add checks for additional
	major modes (due to Robert J. Chassell <bob@rattlesnake.com>).

2005-07-11  Juanma Barranquero  <lekktu@gmail.com>

	* custom.el (custom-enable-theme): Don't add theme to
	`custom-enabled-themes' with `push' because there is no
	setf-method for `delq'.

2005-07-11  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-declare-variable): Doc fix.

	* dired-aux.el (dired-compare-directories): Remove "." and ".."
	from the alists.

	* emacs-lisp/edebug.el (edebug-slow-after, edebug-slow-before):
	Do nothing if edebug-active.

	* emacs-lisp/edebug.el (edebug-enter): Don't with-timeout-suspend here.
	(edebug-display): Do it here instead.

2005-07-10  Richard M. Stallman  <rms@gnu.org>

	* cus-face.el (custom-theme-set-faces): Make it work.
	(custom-reset-faces): Doc fix.
	(custom-theme-reset-internal-face, custom-theme-face-value):
	Functions deleted.

	* custom.el (custom-push-theme): Maintain list of the settings
	of a given theme in its theme-settings property.
	Maintain position of old settings in the theme-value
	or theme-face property.
	(custom-enabled-themes): New variable.
	(custom-theme-enabled-p): New function.
	(provide-theme): Update custom-enabled-themes.
	Disable and reenable the `user' theme.
	(require-theme): Doc fix.
	(custom-do-theme-reset, custom-remove-theme): Functions deleted.
	(custom-theme-value, custom-theme-variable-value): Likewise.
	(custom-theme-reset-internal): Likewise.
	(custom-theme-load-themes): Fix bugs and use custom-disable-theme.
	(custom-enable-theme, custom-disable-theme): New functions.
	(custom-variable-theme-value, custom-face-theme-value): Likewise.
	(custom-theme-recalc-variable, custom-theme-recalc-face): Likewise.
	(custom-theme-reset-variables): Simplify.
	(deftheme, custom-declare-theme, custom-make-theme-feature):
	Definitions moved.

2005-07-10  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el (longlines-show-region)
	(longlines-unshow-hard-newlines): Recognize hard newlines by
	non-nil hard property, instead of t.

2005-07-10  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-cmd.el (viper--key-maps): New variable.
	(viper-normalize-minor-mode-map-alist): Use viper--key-maps and
	emulation-mode-map-alists.
	(viper-envelop-ESC-key): Use viper-subseq.
	(viper-search-forward/backward/next): Disable debug-on-error.

	* viper-keym.el (viper-toggle-key, viper-quoted-insert-key)
	(viper-ESC-key): New defcustoms.

	* viper-macs.el (ex-map-read-args): Use viper-subseq.

	* viper-util.el (viper-key-to-emacs-key): Use viper-subseq.
	(viper-subseq): Copy of subseq from cl.el.

	* viper.el (viper-go-away, viper-set-hooks): Use
	emulation-mode-map-alists, advise self-insert-command, add-minor-mode.

	* viper-mous.el (viper-current-frame-saved): Use defvar.

	* viper-init.el: Get rid of -face in face names.

	* ediff-diff.el (ediff-extract-diffs, ediff-extract-diffs3):
	Make it work with longlines mode

	* ediff-mult.el (ediff-meta-mode-hook): New variable.

	* ediff-ptch.el (ediff-file-name-sans-prefix): Quote regexp.

	* ediff-init.el: Get rid of -face in face names.

2005-07-10  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/edebug.el (edebug-enter): Call with-timeout-suspend
	and with-timeout-unsuspend.

	* emacs-lisp/debug.el (debug): Call with-timeout-suspend
	and with-timeout-unsuspend.

	* emacs-lisp/timer.el (with-timeout-timers): New variable.
	(with-timeout): Bind that variable to record timers.
	(with-timeout-suspend, with-timeout-unsuspend): New functions.

	* emacs-lisp/debug.el (debug-help-follow): New function.
	(debugger-mode-map): Use that instead of help-follow.
	(debugger-setup-buffer): Use eval-buffer-list
	to handle eval-buffer frames.

2005-07-10  N. Raghavendra  <raghu@mri.ernet.in>  (tiny change)

	* timezone.el (timezone-parse-date): Change first regexp
	so it will not mistakenly match dates with no time zone.

2005-07-10  Jeff Dwork  <jeff.dwork@amd.com>  (tiny change)

	* facemenu.el (facemenu-read-color): Do case-insensitive matching.

2005-07-10  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-initialize-safe-set)
	(custom-initialize-safe-default): New functions.

	* frame.el (blink-cursor-mode): Use `custom-initialize-safe-default'
	and simplify :init-value.

	* tooltip.el (tooltip-mode): Use `custom-initialize-safe-default'
	and simplify :init-value.  Delete obsolete comment.

	* startup.el (command-line): Use `custom-reevaluate-setting' to
	handle `tooltip-mode'.  Delete obsolete comment.

	* files.el (set-visited-file-name): Avoid calling
	`file-name-nondirectory' with a nil argument.

2005-07-09  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/debug.el (debugger-setup-buffer): When eval-buffer
	was called with nil for the buffer, handle the read position right.
	Handle read position for eval-region, too.

2005-07-09  Juri Linkov  <juri@jurta.org>

	* fringe.el (fringe-mode): Add period in docstring.
	(fringe-query-style): Build prompt depending on `all-frames' arg.

	* dired.el (dired-marker-char): Avoid quotations for `do' and `mark'
	to not create links to unrelated functions in the Help buffer.

	* progmodes/compile.el (compilation-mode-hook, compilation-mode):
	Doc fix.

	* simple.el (next-error-hook): New variable.
	(next-error): Use it.  Doc fix.

	* textmodes/ispell.el (ispell-command-loop): Add current
	dictionary name and program name to mode-line-format.
	(ispell-region, ispell-process-line): Add current dictionary name
	and program name to messages.

2005-07-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-embedded-announce-formula-alist)
	(calc-embedded-open-close-formula-alist)
	(calc-embedded-open-close-word-alist)
	(calc-embedded-open-close-plain-alist)
	(calc-embedded-open-close-new-formula-alist)
	(calc-embedded-open-close-mode-alist)
	(calc-embedded-new-buffer-hook, calc-embedded-new-formula-hook)
	(calc-embedded-mode-hook): New variables.

	* calc/calc-embed.el (calc-embedded-firsttime)
	(calc-embedded-firsttime-buf, calc-embedded-firsttime-formula):
	New variables.
	(calc-do-embedded): Use calc-embedded-firsttime,
	calc-embedded-firsttime-buf and calc-embedded-firsttime-formula to
	determine whether or not to run hooks.
	(calc-embedded-make-info) Set calc-embedded-firsttime-buf and
	calc-embedded-firsttime-formula appropriately.
	Set calc-embedded delimiter variables according to mode.

2005-07-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/checkdoc.el (checkdoc-proper-noun-list):
	Check for "emacs", etc., as entire symbol, not just as word.
	(checkdoc-file-comments-engine): Use regexp-quote on FN.

	* files.el (set-visited-file-name): Report the error
	for "empty filename" earlier.
	(kill-some-buffers): Ignore buffers already dead.

	* fringe.el (fringe-mode): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-maybe-guarded):
	Check for (featurep 'xemacs) and turn off warnings in what it guards.
	Use unwind-protect to ensure byte-compile-unresolved-functions
	is updated.

	* whitespace.el (whitespace-buffer-leading-cleanup):
	Simplify w/ skip-chars-forward.
	(whitespace-buffer-trailing-cleanup): Simplify w/ skip-chars-backward.

	* mail/rmail.el (rmail-only-expunge): Fix paren error.
	Unconditionally try to leave point at the same old place.

2005-07-08  Ralf Angeli  <angeli@iwi.uni-sb.de>  (tiny change)

	* comint.el (comint-postoutput-scroll-to-bottom)
	(comint-show-maximum-output): Take scroll-margin into consideration.

2005-07-08  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-use-filename-at-point): New choice `guess'.
	(ido-file-internal): Try ffap-guesser if selected.

	* ido.el (ido-before-fallback-functions): New hook.
	(ido-buffer-internal, ido-file-internal, ido-read-buffer)
	(ido-read-file-name): Run it.

2005-07-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/hideif.el (hide-ifdef-use-define-alist): Pass a list of
	strings rather than a list of symbols to the completion function.

2005-07-07  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (math-apply-units): Change the places in
	which units are simplified.

2005-07-07  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (customize-option, customize-option-other-window):
	Make them handle aliases.

	* custom.el (custom-variable-p): Make it recursively follow
	aliases.  Mention that in the docstring.

2005-07-07  Richard M. Stallman  <rms@gnu.org>

	* cus-start.el (exec-path): Use `directory' instead of `file'.
	Fix tag for nil.

2005-07-07  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-rename-buffer): Use `generate-new-buffer' also
	when called non-interactively.  Doc fix.

2005-07-07  Lute Kamstra  <lute@gnu.org>

	* elide-head.el (elide-head-headers-to-hide): Recognize the FSF's
	new address as well.

2005-07-07  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (make-coding-system):
	Describe `ascii-incompatible' property in the docstring.
	(set-file-name-coding-system): Signal an error if coding-system is
	ascii-incompatible.
	(set-keyboard-coding-system): Likewise.

	* international/mule-cmds.el (set-default-coding-systems):
	Don't set default-file-name-coding-system and
	default-keyboard-coding-system if coding-system is ASCII-incompatible.

	* international/utf-16.el: Declare that all UTF-16-based coding
	systems are ASCII-incompatible.

2005-07-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el: Require font-lock for displaying errors.
	Used by gdb-ui.el.

2005-07-07  Juanma Barranquero  <lekktu@gmail.com>

	* hi-lock.el (hi-lock-find-patterns): Protect also against invalid
	values for the pattern lists which are `read'able but not
	`append'able (like symbols).

2005-07-06  Richard M. Stallman  <rms@gnu.org>

	* progmodes/flymake.el (flymake-float-time): Instead of
	with-no-warnings, test for xemacs.
	(flymake-replace-regexp-in-string): Test fboundp of replace-in-string
	to avoid warning.

2005-07-06  Juanma Barranquero  <lekktu@gmail.com>

	* w32-vars.el (w32-fixed-font-alist): Fix typo in `defcustom' tag.

2005-07-05  Lute Kamstra  <lute@gnu.org>

	* battery.el: Add support for Darwin (with much debugging help
	from Samuel Lauber <sam124@operamail.com>).
	(battery-status-function, battery-echo-area-format)
	(battery-mode-line-format): Add support for pmset on Darwin.
	(battery-load-low, battery-load-critical): New user options.
	(battery-pmset): New function.

2005-07-05  Lute Kamstra  <lute@gnu.org>

	Update FSF's address in GPL notices.

	* textmodes/page-ext.el: Update FSF's address.

2005-07-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Prevent adaptive
	filling from using prefix when filling a single-line docstring.

	* progmodes/flymake.el: Remove useless eval-when-compile.

	* arc-mode.el (archive-lzh-ogm): Reorder save excursion/restriction.

2005-07-04  Richard M. Stallman  <rms@gnu.org>

	* textmodes/org.el (org-file-apps-defaults-gnu):
	Rename from org-file-apps-defaults-linux.
	(org-default-apps): Don't test system-type for `linux'.
	(org-file-apps): Doc fix.

2005-07-04  David Ponce  <david@dponce.com>

	* tree-widget.el: Improve header Commentary section.
	(tree-widget) [defgroup]
	(tree-widget-image-enable, tree-widget-themes-directory)
	(tree-widget-theme, tree-widget-image-properties-emacs)
	(tree-widget-image-properties-xemacs, tree-widget-create-image)
	(tree-widget-image-formats, tree-widget-control)
	(tree-widget-empty-control, tree-widget-leaf-control
	(tree-widget-guide, tree-widget-end-guide, tree-widget-no-guide)
	(tree-widget-handle, tree-widget-no-handle, tree-widget-p)
	(tree-widget-keep, tree-widget-after-toggle-functions)
	(tree-widget-open-node, tree-widget-close-node): Doc fix.
	(tree-widget-open-control, tree-widget-close-control): Fix doc and
	:help-echo message.
	(tree-widget-set-theme): Doc fix.  Use `string-equal'.
	(tree-widget-image-properties): Doc fix.  Clearer implementation.
	(tree-widget--cursors): New constant.
	(tree-widget-lookup-image): New function split from
	`tree-widget-find-image'.  Clearer implementation.
	(tree-widget-find-image): Use it.
	(tree-widget-button-keymap): Use `set-keymap-parent'.
	(tree-widget) [define-widget]: Use `widget-children-value-delete'.
	Define the sub-widgets here.
	(tree-widget-node): Check that :node is not a tree-widget.
	(tree-widget-get-super, tree-widget-open-control)
	(tree-widget-close-control, tree-widget-empty-control)
	(tree-widget-leaf-control, tree-widget-guide)
	(tree-widget-end-guide, tree-widget-no-guide, tree-widget-handle)
	(tree-widget-no-handle, tree-widget-value-delete)
	(tree-widget-map): Remove.
	(tree-widget-children-value-save): Doc fix.  Simplified.
	(tree-widget-value-create): Update according to previous changes.

2005-07-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el: Leading space replaced by TABS.
	(org-recalc-marks, org-table-rotate-recalc-marks)
	(org-table-get-specials): Treat "^" and "_" marks.
	(org-table-justify-field-maybe): Optional argument NEW.
	(org-table-eval-formula): Parsing of the format simplified.
	New modes C,I.  Honor the %= parameter in the current table.
	Avoid unnecessary re-align by using the NEW argument to
	`org-table-justify-field-maybe'.
	(org-calc-default-modes): Default for date-format mimicks org-mode.
	(org-agenda, org-timeline): Quote argument in org-agenda-redo-command.

2005-07-03  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-face.el (custom-theme-set-faces): Make it handle face
	aliases whose alias declarations are pre- or autoloaded.

2005-07-04  Juri Linkov  <juri@jurta.org>

	* faces.el (read-face-name): Put the code for getting a face name
	from the buffer before adding the faces from the `face' property.
	Use `completing-read-multiple' instead of `completing-read'.
	Require `crm'.  Add default value and post-process the returned
	list of faces.

	* emacs-lisp/crm.el (crm-find-current-element)
	(crm-minibuffer-complete-and-exit): Handle minibuffer prompt.

	* emacs-lisp/lisp-mode.el (eval-defun-1):
	* emacs-lisp/edebug.el (edebug-eval-defun):
	Remove unnecessary quotes.

2005-07-04  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/prolog.el (prolog-eof-string): Doc fixes.
	(prolog-indent-level): Fix typo in docstring.

	* info.el (Info-history, Info-history-forward)
	(Info-history-list, Info-speedbar-fetch-file-nodes): Doc fixes.

	* add-log.el (add-change-log-entry):
	* comint.el (comint-dynamic-list-input-ring)
	(comint-dynamic-list-completions):
	* dabbrev.el (dabbrev-expand):
	* delim-col.el (delimit-columns-rectangle-line):
	* diff-mode.el (diff-context->unified, diff-reverse-direction)
	(diff-unified->context):
	* ediff-init.el (ediff-abbrev-jobname):
	* ediff-mult.el (ediff-replace-session-status-in-meta-buffer)
	(ediff-replace-session-activity-marker-in-meta-buffer):
	* info.el (Info-summary):
	* lpr.el (printify-region):
	* printing.el (pr-create-interface):
	* ps-print.el (ps-print-quote):
	* ses.el (ses-column-widths, ses-print-cell)
	(ses-adjust-print-width, ses-center):
	* shell.el (shell-file-name-quote-list):
	* strokes.el (strokes-read-stroke, strokes-read-complex-stroke)
	(strokes-fill-current-buffer-with-whitespace)
	(strokes-xpm-for-stroke, strokes-list-strokes)
	(strokes-xpm-char-bit-p, strokes-xpm-for-compressed-string):
	* term.el (term-dynamic-list-input-ring)
	(term-dynamic-list-completions):
	* calc/calc.el (math-format-stack-value):
	* emacs-lisp/edebug.el (edebug-display-freq-count):
	* progmodes/delphi.el (delphi-indent-line, delphi-fill-comment)
	(delphi-new-comment-line):
	* progmodes/ebnf2ps.el (ebnf-eps-filename, ebnf-trim-right):
	* progmodes/executable.el (executable-set-magic):
	* progmodes/python.el (inferior-python-mode):
	* progmodes/scheme.el (scheme-mode-syntax-table):
	* progmodes/sh-script.el (sh-maybe-here-document):
	* progmodes/sql.el (sql-copy-column):
	* progmodes/tcl.el (tcl-comment-indent, tcl-quote):
	* textmodes/bibtex.el (bibtex-mode):
	* textmodes/sgml-mode.el (html-imenu-index, sgml-attributes)
	(sgml-auto-attributes):
	* textmodes/table.el (table-insert, table-shorten-cell)
	(table--generate-source-scan-lines, table-delete-row)
	(*table--cell-delete-char, table--spacify-frame)
	(table--horizontally-shift-above-and-below)
	(table--cell-insert-char, table--cell-blank-str)
	(table--fill-region-strictly):
	* textmodes/tex-mode.el (tex-insert-quote, latex-find-indent):
	* textmodes/texinfo.el (texinfo-insert-quote): "?\ " -> "?\s".

	* add-log.el (change-log):
	* apropos.el (apropos):
	* comint.el (comint-completion, comint-source):
	* dabbrev.el (dabbrev):
	* delim-col.el (columns):
	* diff-mode.el (diff-mode):
	* ediff.el (ediff):
	* ediff-diff.el (ediff-diff):
	* ediff-init.el (ediff-highlighting, ediff-merge, ediff-hook):
	* ediff-mult.el (ediff-mult):
	* ediff-ptch.el (ediff-ptch):
	* ediff-wind.el (ediff-window):
	* facemenu.el (facemenu):
	* indent.el (indent):
	* info.el (info):
	* jka-cmpr-hook.el (compression, jka-compr):
	* lpr.el (lpr):
	* outline.el (outlines):
	* pcmpl-cvs.el (pcmpl-cvs):
	* pcmpl-rpm.el (pcmpl-rpm):
	* printing.el (printing):
	* ps-print.el (postscript, ps-print, ps-print-horizontal)
	(ps-print-vertical, ps-print-headers, ps-print-font)
	(ps-print-color, ps-print-face, ps-print-n-up, ps-print-zebra)
	(ps-print-background, ps-print-printer, ps-print-page)
	(ps-print-miscellany):
	* ses.el (ses):
	* shell.el (shell, shell-directories, shell-faces):
	* startup.el (initialization):
	* strokes.el (strokes):
	* term.el (term):
	* uniquify.el (uniquify):
	* w32-vars.el (w32):
	* calc/calc.el (calc):
	* emacs-lisp/bytecomp.el (bytecomp):
	* emacs-lisp/cl-indent.el (lisp-indent):
	* emacs-lisp/edebug.el (edebug):
	* emacs-lisp/elp.el (elp):
	* emacs-lisp/testcover.el (testcover):
	* emacs-lisp/trace.el (trace):
	* emulation/viper-ex.el (viper-ex):
	* emulation/viper-mous.el (viper-mouse):
	* mail/mailalias.el (mailalias):
	* mail/supercite.el (supercite, supercite-frames)
	(supercite-attr, supercite-cite, supercite-hooks):
	* net/rcompile.el (remote-compile):
	* net/rlogin.el (rlogin):
	* obsolete/ooutline.el (outlines):
	* progmodes/delphi.el (delphi):
	* progmodes/ebnf2ps.el (postscript, ebnf2ps, ebnf-special)
	(ebnf-except, ebnf-repeat, ebnf-terminal, ebnf-non-terminal)
	(ebnf-production, ebnf-shape, ebnf-displacement, ebnf-syntactic)
	(ebnf-optimization):
	* progmodes/etags.el (etags):
	* progmodes/executable.el (executable):
	* progmodes/idlwave.el (idlwave):
	* progmodes/pascal.el (pascal):
	* progmodes/prolog.el (prolog):
	* progmodes/python.el (python):
	* progmodes/scheme.el (scheme):
	* progmodes/sh-script.el (sh, sh-script):
	* progmodes/sql.el (SQL):
	* progmodes/tcl.el (tcl):
	* textmodes/bibtex.el (bibtex, bibtex-autokey):
	* textmodes/enriched.el (enriched):
	* textmodes/makeinfo.el (makeinfo):
	* textmodes/sgml-mode.el (sgml):
	* textmodes/table.el (table-hooks):
	* textmodes/tex-mode.el (tex-file, tex-run, tex-view):
	* textmodes/texinfo.el (texinfo):
	* textmodes/two-column.el (two-column):
	Finish `defgroup' description with period.

	* emacs-lisp/cl-indent.el (lisp-indent-maximum-backtracking):
	* eshell/esh-var.el (eshell-var):
	* progmodes/vhdl-mode.el (vhdl-testbench):
	* textmodes/org.el (org): Fix typos in docstrings.

	* emacs-lisp/timer.el (with-timeout): Improve argument/docstring
	consistency.

	* progmodes/flymake.el (flymake-find-file): Remove.
	(flymake-float-time): Use `with-no-warnings'.
	(flymake-check-start-time, flymake-check-was-interrupted)
	(flymake-err-info, flymake-is-running, flymake-last-change-time)
	(flymake-new-err-info): `defvar' at compile time.

2005-07-03  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-hook): Doc fix.
	(occur-1): Don't call `occur-hook' if there are no matches.

2005-07-03  Richard M. Stallman  <rms@gnu.org>

	* emulation/tpu-edt.el (tpu-original-global-map): Don't copy
	global-map, save the same map.
	(global-map): Don't alter it at top level.
	(tpu-edt-on): Save global map in tpu-original-global-map, then copy.
	Then alter it here instead.
	(tpu-edt-off): Set global-map to the saved one.

	* emulation/tpu-edt.el (tpu-emacs19-p): Var deleted.
	All references simplified.
	(tpu-lucid-emacs-p): Rename from tpu-lucid-emacs19-p.  Uses changed.
	(zmacs-regions): Add defvar.
	(repeat-complex-command-map): Everything about that deleted.

	* textmodes/artist.el (artist-key-is-drawing)
	(artist-key-endpoint1, artist-key-poly-point-list)
	(artist-key-shape, artist-key-draw-how, artist-popup-menu-table)
	(artist-key-compl-table, artist-rb-save-data)
	(artist-arrow-point-1, artist-arrow-point-2): Move defvars up.
	Don't put them in eval-when-compile.
	(artist-set-arrow-points-for-poly): Use `last', not `artist-last'.

	* progmodes/ebrowse.el (ebrowse-revert-tree-buffer-from-file):
	Use with-no-warnings.

	* net/browse-url.el (dos-windows-version): Add defvar.

	* mail/supercite.el (filladapt-prefix-table): Add defvar.

	* mail/rmailsum.el (rmail-summary-redo): Add defvar.
	(rmail-summary-mode-map, rmail-summary-overlay): Defvars moved up.
	(rmail-new-summary-line-count): Rename from new-summary-line-count.
	Add defvar.
	(rmail-summary-beginning-of-message): Use with-no-warnings.
	(rmail-summary-first-message, rmail-summary-last-message): Likewise.

	* emulation/vip.el (vip-replace-string, ex-map, ex-read):
	Use with-no-warnings.

	* emulation/vi.el (vi-mark-region): Use c-mark-function.
	(c-mark-function): Add point-moving-unit property.
	(vi-goto-line): Use with-no-warnings.

	* emulation/edt.el (edt-last-copied-word): Add defvar.
	(zmacs-region-stays): Likewise.
	(edt-mark-section-wisely): Use c-mark-function for C.
	Use makr-defun for Fortran.
	(time-string): defvar deleted.
	(edt-display-the-time): Don't set time-string.

	* emacs-lisp/macroexp.el (macroexp-accumulate): Rename arg to var+list.

	* emacs-lisp/bytecomp.el (byte-compile-nogroup-warn):
	Don't warn when name is not constant
	or for defining the group `emacs'.

	* tooltip.el (gud-tooltip-mode): Add defvar.

	* startup.el (default-frame-background-mode): Add defvar.

	* smerge-mode.el (smerge-mode): Add duplicate defvar near top.

	* info.el (tool-bar-map): Add defvar.

	* dired.el (dnd-protocol-alist): Add defvar.

	* dired-aux.el (dired-query): Display question with answer, when
	the user answers.

	* custom.el (custom-add-option): Doc fix.

	* bookmark.el (Info-current-node, Info-suffix-list): Add defvars.

2005-07-03  Eli Zaretskii  <eliz@gnu.org>

	* font-lock.el (font-lock-regexp-grouping-construct): Fix the
	bogus name from the last change.

2005-07-02  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-declare-variable): Fix typos in comment.
	(custom-known-themes): Doc fix.
	(custom-theme-directory): New defcustom.
	(require-theme): Make it check `custom-theme-directory'.

	* cus-theme.el (custom-new-theme-mode): New function.
	(custom-theme-name, custom-theme-variables, custom-theme-faces)
	(custom-theme-description): Add compiler defvars.
	(customize-create-theme): Add doc to the "*New Custom Theme*"
	buffer.  Use `custom-new-theme-mode'.
	(custom-theme-write): Put the created buffer in emacs-lisp-mode
	and save it to the `custom-theme-directory'.  Make this the
	default directory of the buffer.

2005-07-02  David Hunter  <hunterd_42@comcast.net>  (tiny change)

	* progmodes/flymake.el (flymake-mode, flymake-mode-off):
	Fix unbalanced parentheses.

2005-07-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-mode-on, flymake-mode-off): Move body
	into flymake-mode and delegate to flymake-mode.

	* find-file.el (ff-which-function-are-we-in): Clean up.

2005-07-02  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-rename-buffer): Fix docstring.

	* emulation/edt.el (*EDT-keys*, edt-default-global-map)
	(edt-last-copied-word, edt-learn-macro-count)
	(edt-orig-page-delimiter, edt-orig-transient-mark-mode)
	(edt-rect-start-point, edt-user-global-map, rect-start-point)
	(time-string, zmacs-region-stays):
	* emulation/edt-mapper.el (edt-save-function-key-map)
	(EDT-key-name): `defvar' to silence the byte-compiler.

2005-07-02  Martin Rudalics  <rudalics@gmx.at>  (tiny change)

	* font-lock.el (font-lock-regexp-grouping-backslash): Rename from
	font-lock-regexp-backslash.  Doc fix.
	(font-lock-regexp-backslash-grouping-construct): Rename from
	font-lock-regexp-backslash-construct.  Doc fix.
	(lisp-font-lock-keywords-2): Fix highlighting of Elisp regexp
	grouping constructs.

2005-07-02  Eli Zaretskii  <eliz@gnu.org>

	* makefile.w32-in (bootstrap): Remove the $(EMACS) binary after
	updating all the prerequisites.

2005-07-01  Juanma Barranquero  <lekktu@gmail.com>

	* textmodes/org.el (org-agenda-start-on-weekday)
	(org-calendar-to-agenda-key, org-agenda-sorting-strategy)
	(org-agenda-use-time-grid, org-archive-location)
	(org-allow-space-in-links, org-usenet-links-prefer-google)
	(org-enable-table-editor, org-export-default-language)
	(org-export-html-show-new-buffer, org-fill-paragraph)
	(org-cycle, org-goto-ret, org-goto-left, org-goto-right)
	(org-goto-quit, org-occur, org-eval-in-calendar)
	(org-agenda-cleanup-fancy-diary, org-agenda-no-heading-message)
	(org-agenda-diary-entry, org-remember-help)
	(org-table-convert-region, org-at-table-p)
	(org-table-move-row-down, org-table-move-row-up)
	(org-table-copy-region, org-table-toggle-vline-visibility)
	(org-table-get-stored-formulas, org-table-get-specials)
	(org-recalc-commands, org-table-eval-formula)
	(org-table-formula-substitute-names, orgtbl-make-binding)
	(org-format-org-table-html, org-format-table-table-html)
	(org-format-table-table-html-using-table-generate-source)
	(org-customize): Fix typos in docstrings.
	(org-level-2, org-at-timestamp-p, org-agenda-day-view)
	(org-agenda-toggle-diary, org-agenda-toggle-time-grid)
	(org-back-to-heading): Doc fixes.
	(org-agenda-toggle-time-grid, org-cmp-category, org-cmp-time)
	(org-agenda-change-all-lines, org-get-header):
	Improve argument/docstring consistency.
	(orgtbl-error): Fix error message.

	* progmodes/flymake.el (flymake-find-possible-master-files)
	(flymake-master-file-compare, flymake-get-line-err-count)
	(flymake-highlight-line, flymake-gui-warnings-enabled):
	Fix typos in docstrings.
	(flymake-parse-line, flymake-get-project-include-dirs-function)
	(flymake-get-prev-err-line-no, flymake-goto-prev-error):
	Doc fixes.
	(flymake-get-project-include-dirs-function)
	(flymake-make-err-menu-data):
	Improve argument/docstring consistency.

2005-07-01  Lute Kamstra  <lute@gnu.org>

	* battery.el (battery-linux-proc-apm): Fix typo in docstring.
	Catch errors with ignore-errors.  Use temporary buffer.
	(battery-linux-proc-acpi): Fix typo in docstring.  Document `%r'.

	* facemenu.el (facemenu-unlisted-faces): Delete foreground and
	background color faces.
	(facemenu-set-foreground, facemenu-set-background):
	Use facemenu-set-face-from-menu.
	(facemenu-set-face-from-menu): Treat face names that start with
	"fg:" or "bg:" as special.
	(facemenu-add-new-color): Don't create faces.  Simplify.

2005-06-30  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/crm.el (crm-do-completion): Handle minibuffer prompt.
	(crm-find-current-element): Likewise.

2005-06-30  Johan Bockg,Ae(Brd  <bojohan@users.sourceforge.net>

	* help-fns.el (help-do-arg-highlight): Regexp-quote argument names.

2005-06-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* arc-mode.el (archive-extract): Make it work as a mouse binding.
	(archive-mouse-extract): Make it an obsolete alias.
	(archive-mode-map): Don't use archive-mouse-extract any more.
	(archive-mode, archive-extract): write-contents-hooks ->
	write-contents-functions.
	(archive-arc-rename-entry, archive-lzh-rename-entry): Remove unused
	first arg.
	(archive-rename-entry): Update the call.
	(archive-zip-summarize): Remove unused var `method'.
	(archive-lzh-summarize): Remove unused var `creator'.

	* emacs-lisp/debug.el (debug): Quieten Drew Adams by killing the
	dedicated frame upon exit.

	* arc-mode.el: Bind inhibit-read-only rather than buffer-read-only.
	(archive-zip-extract, archive-zip-expunge)
	(archive-zip-update, archive-zip-update-case): Use executable-find.
	(archive-resummarize, archive-flag-deleted, archive-unmark-all-files):
	Use restore-buffer-modified-p.
	(archive-extract, archive-add-new-member, archive-write-file-member):
	Use with-current-buffer.
	(archive-lzh-ogm, archive-zip-chmod-entry): Use dolist.

2005-06-30  Andreas Schwab  <schwab@suse.de>

	* progmodes/gud.el (gud-filter): Remove unneeded progn.

2005-06-30  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/sh-script.el (sh-get-kw): `&' also separates words.

2005-06-30  Juri Linkov  <juri@jurta.org>

	* faces.el (vertical-border): Inherit from mode-line-inactive
	only on tty.

2005-06-30  Juanma Barranquero  <lekktu@gmail.com>

	* help-fns.el (help-do-arg-highlight): Highlight also -ARG (for
	example, -NLINES in the `occur' docstring).

	* replace.el (occur-1): When no matches are found, do not set the
	`buffer-read-only' and modified flags for the occur buffer,
	because it is deleted.

	* emulation/cua-base.el (cua-check-pending-input)
	(cua-repeat-replace-region, cua-mode, cua-debug)
	(cua-auto-tabify-rectangles, cua-inhibit-cua-keys):
	Fix typos in docstrings.

	* emulation/cua-gmrk.el (cua-toggle-global-mark)
	(cua-cut-region-to-global-mark)
	(cua--cut-rectangle-to-global-mark):
	Remove period from end of messages.

	* emulation/cua-rect.el (cua-do-rectangle-padding):
	Remove period from end of messages.
	(cua--rectangle-seq-format): Fix typo in docstring.
	(cua-sequence-rectangle, cua-fill-char-rectangle):
	Improve argument/docstring consistency.

2005-06-29  Juri Linkov  <juri@jurta.org>

	* faces.el (default-frame-background-mode): New internal variable.
	(frame-set-background-mode): Use it.

	* startup.el (normal-top-level): Set default-frame-background-mode
	instead of frame-background-mode.  Before setting it, test for its
	nil value.  Remove tests for frame-background-mode and frame
	parameter `reverse'.  Add test for "unspecified-fg".

	* term/xterm.el (xterm-rxvt-set-background-mode):
	* term/rxvt.el (rxvt-set-background-mode):
	Set default-frame-background-mode instead of frame-background-mode.

2005-06-29  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (set-variable): Warn about obsolete user variables.

	* imenu.el (imenu--completion-buffer):
	* mouse.el (mouse-buffer-menu-alist):
	* msb.el (msb-invisible-buffer-p):
	* calendar/diary-lib.el (diary-header-line-format):
	* emacs-lisp/pp.el (pp-buffer):
	* progmodes/cperl-mode.el (cperl-do-auto-fill):
	* textmodes/picture.el (picture-replace-match):
	Change space constants followed by a sexp to "?\s ".

	* play/decipher.el (decipher-loop-with-breaks):
	* textmodes/texinfo.el (texinfo-insert-@item): Change space
	constants "protected" from end of line by a comment to "?\s".

2005-06-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (save-buffer-state): Use `declare'.

	* progmodes/cperl-mode.el (cperl-find-pods-heres): Don't gratuitously
	reset the syntax-table to cperl-mode-syntax-table.
	(cperl-mode): Make _ into word-syntax during font-locking so "print" in
	"foo_print_bar" is not matched as a reserved keyword.

2005-06-29  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (orgtbl-setup): New function, for delayed
	setup for the orgtbl commands.
	(org-calc-default-modes): New option.
	(orgtbl-make-binding): Use `defun' to get better help display.
	(org-diary): Call `org-compile-prefix-format'.
	(org-table-formula-substitute-names): New function.
	(org-agenda-day-view, org-agenda-week-view): New commands.
	(org-agenda-toggle-week-view): Command removed.
	(org-tbl-menu): Split off from org-org-menu.
	(org-mode): Move removal of outline-mode menus to here.
	(org-table-formula-debug): New option.
	(org-table-insert-row): Keep first field if just "#" or "*".
	(org-mode): Paragraph regexps fixed.
	(org-table-recalculate-regexp): New constant.
	(org-table-justify-field-maybe): Avoid replace if not necessary.
	(org-copy-special, org-cut-special): Use `call-interactively'.
	(org-table-copy-region): Take region from `interactive' call.
	(org-trim): Return string even if no match.
	(org-formula): New face.
	(org-set-font-lock-defaults): No longer highlight "FIXME".
	But highlight formula-related fields in table.
	(org-table-p): Use regexp, not fontification.
	(org-table-align): Handle white space at end of line.
	(org-table-formula-evaluate-inline): New option.
	(org-mode): Auto-wrapping in comment lines turned off.
	(org-table-copy-down): Evaluate only in copied field, not in
	destination.
	(org-table-current-formula): Variable removed.
	(org-table-store-formulas, org-table-get-stored-formulas)
	(org-table-modify-formulas, org-table-replace-in-formulas)
	(org-table-maybe-eval-formula): New functions.
	(org-table-get-formula): Modify to use stored formulas.
	(org-table-insert-column, org-table-delete-column)
	(org-table-move-column): Call `org-table-modify-formulas'.
	(org-complete): Add completion for keyword formulas.
	(orgtbl-mode): Pull orgtbl-mode-map to start of
	minor-mode-map-alist.

2005-06-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/python.el (python-check): Require `compile' before
	modifying its variables.

	* newcomment.el (comment-indent-default): Don't get fooled by an early
	end of buffer.

2005-06-28  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-print-version): Fix version number.

2005-06-28  Luc Teirlinck  <teirllm@auburn.edu>

	* textmodes/ispell.el (ispell-word): Remove stray parenthesis.

2005-06-28  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-use-local-map): Variable deleted.
	(flyspell-local-mouse-map): Declaration deleted.
	(flyspell-mouse-map): Bind only mouse-2.
	(flyspell-mode-map): Don't test flyspell-use-local-map.
	(flyspell-overlay-keymap-property-name): Var deleted.
	(flyspell-mode-on): Don't make local bindings for
	flyspell-mouse-map and flyspell-mode-map.
	(make-flyspell-overlay): Unconditionally put on `keymap' text prop.

	* textmodes/ispell.el (ispell-word): Do not ignore short words.

	* progmodes/compile.el (compilation-next-error-function):
	Don't switch buffers; operate on the current buffer.

	* progmodes/compile.el (compilation-error-file-name)
	(compilation-warning-file-name, compilation-info-file-name)
	(compilation-line-number, compilation-column-number): New faces.
	(compilation-error-face, compilation-warning-face)
	(compilation-info-face, compilation-line-face)
	(compilation-column-face): Use them.

	* facemenu.el (facemenu-add-face): Warn when font-lock is active.

	* comint.el (comint-password-prompt-regexp): Accept ", try again".

	* bindings.el (global-map): Bind insertchar and its variants.

2005-06-27  Richard M. Stallman  <rms@gnu.org>

	* textmodes/artist.el (artist-text-overwrite)
	(artist-figlet-get-extra-args, artist-text-see-thru): Use read-string.

2005-06-27  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el: It was not working the page selection for printing.
	Reported by Sebastian Tennant <sebyte@smolny.plus.com>.
	(ps-print-version): New version 6.6.7.
	(ps-end-sheet): New fun.
	(ps-header-sheet, ps-end-job): Call it.

2005-06-27  Luc Teirlinck  <teirllm@auburn.edu>

	* subr.el (add-to-list, add-to-ordered-list): Doc fixes.

2005-06-27  Lute Kamstra  <lute@gnu.org>

	* facemenu.el (facemenu-unlisted-faces): Add foreground and
	background color faces.
	(facemenu-get-face): Delete function.
	(facemenu-set-face-from-menu): Don't call facemenu-get-face.
	(facemenu-add-new-color): Make second argument mandatory.
	Create the appropriate face and return it.  Simplify.
	(facemenu-set-foreground, facemenu-set-background): Don't check if
	color is defined.  Use return value of facemenu-add-new-color.

2005-06-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-filter): Add missing argument to
	with-selected-window.

2005-06-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Don't automatically add
	a :require to the defcustom.

	* emacs-lisp/autoload.el (make-autoload): Add the :setter for
	defcustoms corresponding to minor modes.

2005-06-26  David Ponce  <david@dponce.com>

	* recentf.el: Require tree-widget instead of wid-edit.
	(recentf-filename-handler): Fix widget :type.
	(recentf-cancel-dialog, recentf-open-more-files)
	(recentf-open-files-action): Doc fix.
	(recentf-dialog-goto-first): New function.
	(recentf-dialog-mode-map): Set parent keymap first.
	(recentf-dialog-mode): Define with define-derived-mode.
	Don't display continuation lines in dialogs.
	(recentf-edit-list): Rename from recentf-edit-selected-items.
	(recentf-edit-list-select): Rename from recentf-edit-list-action.
	Simplify.
	(recentf-edit-list-validate): New function.
	(recentf-edit-list): Update accordingly.
	(recentf-open-files-item-shift): Remove.
	(recentf-open-files-item): Convert menu elements into tree and
	link widgets.  Don't create the widgets.
	(recentf-open-files): Update accordingly.
	(recentf-save-list): Untabify.

2005-06-25  Luc Teirlinck  <teirllm@auburn.edu>

	* replace.el (keep-lines-read-args): Add INTERACTIVE arg.
	(keep-lines): Add INTERACTIVE arg.  Never delete lines only
	partially contained in the active region.  Do not take active
	region into account when called from Lisp, unless INTERACTIVE arg
	is non-nil.  Use `forward-line' instead of `beginning-of-line' to
	avoid trouble with fields.  Make marker point nowhere when no
	longer used.  Always return nil.  Doc fix.
	(flush-lines): Add INTERACTIVE arg.  Do not take active region
	into account when called from Lisp, unless INTERACTIVE arg is
	non-nil.  Use `forward-line' instead of `beginning-of-line' to
	avoid trouble with fields.  Make marker point nowhere when no
	longer used.  Always return nil.  Doc fix.
	(how-many): Add INTERACTIVE arg.  Make RSTART and REND args
	interchangeable.  Do not take active region into account when
	called from Lisp, unless INTERACTIVE arg is non-nil.  Do not print
	message in echo area when called from Lisp, unless INTERACTIVE arg
	is non-nil.  Avoid saying "1 occurrences".  Do not use markers.
	Return the number of matches.  Doc fix.
	(occur): Doc fix.
	(perform-replace): Make comment follow double space convention for
	the sake of `outline-minor-mode'.

	* faces.el (facep): Doc fix.

2005-06-25  Richard M. Stallman  <rms@gnu.org>

	* facemenu.el (facemenu-enable-faces-p): New function.
	(facemenu-background-menu, facemenu-foreground-menu)
	(facemenu-face-menu): Add menu-enable property.

	* jka-compr.el (jka-compr-insert-file-contents):
	Special handling if cannot find the uncompression program.

	* cus-face.el (custom-face-attributes): Add autoload.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Bind comment-indent-function locally.

	* window.el (save-selected-window): Use save-current-buffer.

	* subr.el (with-selected-window): Use save-current-buffer.

	* progmodes/gud.el (gud-filter): Simplify using with-selected-window
	and with-current-buffer.

2005-06-24  Richard M. Stallman  <rms@gnu.org>

	* simple.el (line-move-1): Fix previous change.

2005-06-24  Juanma Barranquero  <lekktu@gmail.com>

	* replace.el (occur-1): Set `buffer-read-only' and the
	buffer-modified flag before running `occur-hook' to protect
	against unintentional buffer switches that can lead to data loss.

2005-06-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-print-command): Indent properly.
	(gud-gdb-marker-filter): Use font-lock-warning-face for any
	initial error.

	* progmodes/gdb-ui.el (gdb-send): Remove warning face from errors
	after fresh input.
	(gdb-var-create-handler): Put name of expression in quotes.

2005-06-23  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/ring.el (ring-elements): Make it return a list of the
	elements of RING in order, and without bogus nil elements.

2005-06-23  Richard M. Stallman  <rms@gnu.org>

	* simple.el (set-variable): Args renamed; doc fix.
	(line-move-1): When there are overlays around, use vertical-motion.

	* faces.el (escape-glyph): Use brown against light background.
	(nobreak-space): Rename from no-break-space.
	Fix previous change.

	* dired-aux.el (dired-do-copy): Fix arg prompt.

	* mail/sendmail.el (mail-setup-with-from): Fix custom type.

2005-06-23  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* mail/emacsbug.el (report-emacs-bug): Use "X server distributor"
	rather than "Distributor".

2005-06-23  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-special-form-p): New defun.
	(debug-on-entry): Use it.  New interactive declaration that uses
	function-called-at-point.

2005-06-23  Kim F. Storm  <storm@cua.dk>

	* subr.el (save-match-data): Add comment about using evaporate arg
	to set-match-data.

2005-06-22  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* cus-edit.el (customize-face)
	(customize-face-other-window): Handle face aliases.

	* faces.el (face-documentation, set-face-attribute)
	(face-spec-set): Handle face aliases.

2005-06-22  Juanma Barranquero  <lekktu@gmail.com>

	* help-mode.el (help-make-xrefs): If a symbol representing a face
	name is not followed by the word "face", it could still be a
	function or variable name, so don't bypass other checks.

2005-06-22  Juri Linkov  <juri@jurta.org>

	* ps-print.el (ps-face-foreground-name, ps-face-background-name):
	Replace aliased functions with calls where second arg `inherit' is t.

2005-06-22  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-error): New variable.
	(gdb-error): New function.
	(gdb-annotation-rules): Act on error-begin and error annotations.
	(gdb-concat-output): Use font-lock-warning-face for errors.

2005-06-22  Miles Bader  <miles@gnu.org>

	* bindings.el (propertized-buffer-identification): Use renamed
	`Buffer-menu-buffer' face.

	* faces.el (vertical-border): Rename from `vertical-divider'.
	(escape-glyph): Change dark-background color back to `cyan'.

2005-06-21  Juri Linkov  <juri@jurta.org>

	* faces.el (face-user-default-spec): Try getting `customized-face'
	prior to `saved-face'.
	(frame-background-mode): Refill docstring.

	* emacs-lisp/lisp-mode.el (eval-defun-1):
	* emacs-lisp/edebug.el (edebug-eval-defun):
	Set `saved-face' temporarily to nil before calling form.
	Set `customized-face' to the new spec after that.

2005-06-21  Juanma Barranquero  <lekktu@gmail.com>

	* subr.el (1value, lambda, key-substitution-in-progress):
	Doc fixes.

	* autoinsert.el (auto-insert-alist):
	* ses.el (ses-call-printer):
	* subr.el (noreturn):
	* emacs-lisp/lisp.el (check-parens):
	* emacs-lisp/byte-opt.el (byte-optimize-pure-func):
	* net/browse-url.el (browse-url-mosaic):
	* progmodes/cc-defs.el (c-safe-scan-lists):
	* progmodes/ebnf-abn.el (ebnf-abn-lex):
	* progmodes/ebnf-bnf.el (ebnf-bnf-lex):
	* progmodes/ebnf-dtd.el (ebnf-dtd-lex):
	* progmodes/ebnf-ebx.el (ebnf-ebx-lex):
	* progmodes/ebnf-iso.el (ebnf-iso-lex):
	* progmodes/ebnf-yac.el (ebnf-yac-lex): Fix spellings.

2005-06-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* pcvs-defs.el (cvs-menu): Add cvs-mode-mark and cvs-mode-unmark.

2005-06-21  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/appt.el (appt-make-list): Activate the package, if
	not already active (for backwards compatibility).

2005-06-20  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-ordered-list): Test membership with eq.  Simplify.

2005-06-20  Miles Bader  <miles@gnu.org>

	* faces.el (vertical-divider): New face.

2005-06-20  Juanma Barranquero  <lekktu@gmail.com>

	* simple.el (kill-whole-line): Doc fix.
	(next-error-buffer-p, next-error-find-buffer)
	(clone-indirect-buffer): Fix typos in docstrings.
	(comment-line-break-function): Doc fix: don't say variable
	is automatically buffer-local (it isn't).

2005-06-19  Michael Albinus  <michael.albinus@gmx.de>

	* net/tramp-ftp.el (top):
	* net/tramp-smb.el (top):
	* net/tramp-util.el (top):
	* net/tramp-uu.el (top):
	* net/tramp-vc.el (top):
	* net/tramp.el (top): Revert copyright years back to original
	ones.  Tramp has a life outside GNU Emacs.

2005-06-19  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-use-echo-area): Don't make it obsolete.

2005-06-18  Juri Linkov  <juri@jurta.org>

	* progmodes/grep.el (grep-regexp-alist): Use backreference at the
	end of first regexp to limit the match to the position between
	line number and source line with same separator character as used
	between file name and line number.  In the second regexp limit
	mouse-face area to file name and line number by adding new group
	for them and referring it in HYPERLINK arg.
	(grep-regexp-alist, grep-mode-font-lock-keywords): Use shy group.
	(grep-mode): Set font-lock-lines-before to 0 to not refontify the
	previous line where grep markers may be already removed.

2005-06-18  Peter Kleiweg  <p.c.j.kleiweg@rug.nl>

	* progmodes/ps-mode.el: Update version and maintainer's email address.

2005-06-18  Steve Youngs  <steve@xemacs.org>

	* net/browse-url.el (browse-url-browser-function)
	(browse-url-default-browser): Add firefox.
	(browse-url-firefox-program, browse-url-firefox-arguments)
	(browse-url-firefox-startup-arguments)
	(browse-url-firefox-new-window-is-tab): New defcustoms.
	(browse-url-firefox, browse-url-firefox-sentinel): New functions.

2005-06-17  Richard M. Stallman  <rms@gnu.org>

	* startup.el (command-line): Warn if specified user name has
	no home directory.

	* term.el (term-get-old-input, term-input-filter, term-input-sender)
	(term-mode-hook, term-exec-hook, term-escape-char): Doc fixes.

	* longlines.el (longlines-mode, longlines-show-hard-newlines):
	Doc fixes.

	* faces.el (underline): Try bold if terminal doesn't support underline.

	* mail/sendmail.el (mail-setup-with-from): New variable.
	(mail-insert-from-field): New function.
	(sendmail-send-it): Call it.
	(mail-setup): Optionally call it here.

	* term/linux.el: Call tty-no-underline.

2005-06-17  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/edebug.el (edebug-goto-here): Doc fix.

2005-06-17  Miles Bader  <miles@gnu.org>

	* ediff-init.el (ediff-current-diff-A, ediff-current-diff-B)
	(ediff-current-diff-C, ediff-current-diff-Ancestor)
	(ediff-fine-diff-A, ediff-fine-diff-B, ediff-fine-diff-C)
	(ediff-fine-diff-Ancestor, ediff-even-diff-A, ediff-even-diff-B)
	(ediff-even-diff-C, ediff-even-diff-Ancestor, ediff-odd-diff-A)
	(ediff-odd-diff-B, ediff-odd-diff-C, ediff-odd-diff-Ancestor):
	Remove "-face" suffix from face names.
	(ediff-current-diff-face-A, ediff-current-diff-face-B)
	(ediff-current-diff-face-C, ediff-current-diff-face-Ancestor)
	(ediff-fine-diff-face-A, ediff-fine-diff-face-B)
	(ediff-fine-diff-face-C, ediff-fine-diff-face-Ancestor)
	(ediff-even-diff-face-A, ediff-even-diff-face-B)
	(ediff-even-diff-face-C, ediff-even-diff-face-Ancestor)
	(ediff-odd-diff-face-A, ediff-odd-diff-face-B)
	(ediff-odd-diff-face-C, ediff-odd-diff-face-Ancestor):
	New backward-compatibility aliases for renamed faces.
	(ediff-current-diff-face-A, ediff-current-diff-face-B)
	(ediff-current-diff-face-C, ediff-current-diff-face-Ancestor)
	(ediff-fine-diff-face-A, ediff-fine-diff-face-B)
	(ediff-fine-diff-face-C, ediff-fine-diff-face-Ancestor)
	(ediff-even-diff-face-A, ediff-even-diff-face-B)
	(ediff-even-diff-face-C, ediff-even-diff-face-Ancestor)
	(ediff-odd-diff-face-A, ediff-odd-diff-face-B)
	(ediff-odd-diff-face-C, ediff-odd-diff-face-Ancestor):
	Use renamed ediff faces.

	* eshell/esh-test.el (eshell-test-ok, eshell-test-failed):
	Remove "-face" suffix from face names.
	(eshell-test-ok-face, eshell-test-failed-face):
	New backward-compatibility aliases for renamed faces.
	(eshell-run-test): Use renamed eshell-test faces.

	* eshell/em-prompt.el (eshell-prompt): Remove "-face" suffix from
	face name.
	(eshell-prompt-face): New backward-compatibility alias for renamed
	face.
	(eshell-emit-prompt): Use renamed eshell-prompt face.

	* eshell/em-ls.el (eshell-ls-directory, eshell-ls-symlink)
	(eshell-ls-executable, eshell-ls-readonly, eshell-ls-unreadable)
	(eshell-ls-special, eshell-ls-missing, eshell-ls-archive)
	(eshell-ls-backup, eshell-ls-product, eshell-ls-clutter):
	Remove "-face" suffix from face names.
	(eshell-ls-directory-face, eshell-ls-symlink-face)
	(eshell-ls-executable-face, eshell-ls-readonly-face)
	(eshell-ls-unreadable-face, eshell-ls-special-face)
	(eshell-ls-missing-face, eshell-ls-archive-face)
	(eshell-ls-backup-face, eshell-ls-product-face)
	(eshell-ls-clutter-face):
	New backward-compatibility aliases for renamed faces.
	(eshell-ls-decorated-name): Use renamed eshell-ls faces.

	* progmodes/cc-fonts.el (c-nonbreakable-space-face):
	Remove "-face" suffix from face name.
	(c-cpp-matchers): Use the variable `c-nonbreakable-space-face'
	instead of literal face.

2005-06-17  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/warnings.el (display-warning, lwarn)
	(warning-minimum-log-level): Doc fixes.
	(warning-minimum-level, warning-minimum-log-level):
	Add :debug to :type choices.

	* progmodes/ada-mode.el (ada-format-paramlist)
	(ada-get-indent-case, ada-check-matching-start)
	(ada-check-defun-name, ada-goto-matching-decl-start)
	(ada-goto-matching-start, ada-goto-matching-end, ada-tab)
	(ada-untab, ada-move-to-start, ada-fill-comment-paragraph)
	(ada-make-subprogram-body): Follow error conventions.
	(ada-case-exception-file, ada-indent-comment-as-code)
	(ada-indent-handle-comment-special, ada-indent-renames)
	(ada-indent-return, ada-search-directories-internal)
	(ada-tab-policy, ada-case-exception-substring)
	(ada-other-file-alist, ada-matching-start-re)
	(ada-matching-decl-start-re, ada-contextual-menu-last-point)
	(ada-imenu-generic-expression, ada-compile-goto-error)
	(ada-in-comment-p, ada-in-string-p, ada-in-string-or-comment-p)
	(ada-popup-menu, ada-add-extensions, ada-mode)
	(ada-region-selected, ada-create-case-exception)
	(ada-create-case-exception-substring, ada-after-keyword-p)
	(ada-activate-keys-for-case, ada-adjust-case-region)
	(ada-adjust-case-buffer, ada-format-paramlist)
	(ada-scan-paramlist, ada-insert-paramlist)
	(ada-indent-newline-indent)
	(ada-indent-newline-indent-conditional)
	(ada-justified-indent-current, ada-goto-previous-word)
	(ada-indent-current, ada-get-indent-open-paren)
	(ada-get-indent-paramlist, ada-get-indent-end)
	(ada-get-indent-case, ada-get-indent-when, ada-get-indent-if)
	(ada-get-indent-block-start, ada-get-indent-subprog)
	(ada-get-indent-noindent, ada-get-indent-label)
	(ada-get-indent-loop, ada-get-indent-type, ada-goto-stmt-start)
	(ada-search-prev-end-stmt, ada-goto-next-non-ws)
	(ada-goto-stmt-end, ada-goto-next-word)
	(ada-check-matching-start, ada-check-defun-name)
	(ada-goto-matching-decl-start, ada-goto-matching-start)
	(ada-goto-matching-end, ada-search-ignore-string-comment)
	(ada-in-decl-p, ada-looking-at-semi-or)
	(ada-looking-at-semi-private, ada-in-paramlist-p)
	(ada-in-open-paren-p, ada-tab, ada-indent-current-function)
	(ada-untab-hard, ada-move-to-start, ada-move-to-end)
	(ada-next-procedure, ada-previous-procedure, ada-next-package)
	(ada-previous-package, ada-create-menu)
	(ada-fill-comment-paragraph-justify)
	(ada-fill-comment-paragraph-postfix, ada-fill-comment-paragraph)
	(ada-other-file-name, ada-last-which-function-line)
	(ada-last-which-function-subprog, ada-which-function)
	(ada-get-body-name, ada-outline-level, ada-narrow-to-defun)
	(ada-gen-treat-proc, ada-check-emacs-version)
	(ada-continuation-indent, ada-align-region-separate):
	Fix typos in docstrings.
	(ada-adjust-case, ada-adjust-case-interactive): Doc fixes.

2005-06-16  Lute Kamstra  <lute@gnu.org>

	* simple.el (fundamental-mode): Run after-change-major-mode-hook
	conditionally.

2005-06-16  Juanma Barranquero  <lekktu@gmail.com>

	* comint.el (comint-replace-by-expanded-filename)
	(comint-prompt-regexp, comint-delimiter-argument-list)
	(comint-preinput-scroll-to-bottom):
	* info.el (Info-hide-cookies-node):
	* ls-lisp.el (ls-lisp-classify):
	* find-file.el (ff-search-directories, ff-special-constructs)
	(ff-find-other-file):
	* font-lock.el (font-lock-keywords):
	* shell.el (shell-prompt-pattern)
	(shell-dynamic-complete-functions, shell-mode)
	(shell-delimiter-argument-list):
	* term.el (term-replace-by-expanded-filename)
	(term-prompt-regexp, term-delimiter-argument-list):
	* woman.el (woman-ignore, woman0-if):
	* emacs-lisp/derived.el (derived-mode-init-mode-variables):
	* emacs-lisp/elint.el (elint-init-env):
	* emacs-lisp/regexp-opt.el (regexp-opt-depth):
	* eshell/esh-mode.el (eshell-preinput-scroll-to-bottom):
	* language/ethio-util.el (ethio-tilde-escape)
	(ethio-use-three-dot-question):
	* net/zone-mode.el (zone-mode-load-time-setup):
	* progmodes/cc-align.el (c-lineup-argcont):
	* progmodes/cc-awk.el (c-awk-beginning-of-defun):
	* progmodes/cperl-mode.el (cperl-set-style-back):
	* progmodes/inf-lisp.el (inferior-lisp-prompt):
	* progmodes/vhdl-mode.el (vhdl-beginning-of-libunit):
	Fix spellings in docstrings.

	* textmodes/sgml-mode.el (sgml-calculate-indent, html-tag-help):
	* progmodes/modula2.el (m2-for): Fix spellings.

	* menu-bar.el (menu-bar-games-menu): Fix typo in menu help string.

	* simple.el (undo-more): Don't use `format' on `error' arguments.
	Improve argument/docstring consistency.
	(pending-undo-list): Doc fix.

	* smerge-mode.el (smerge-ensure-match):
	* emulation/vip.el (vip-ex):
	* net/zone-mode.el (zone-mode-update-serial):
	* progmodes/idlwave.el (idlwave-complete):
	* progmodes/vhdl-mode.el (vhdl-visit-file)
	(vhdl-compose-wire-components):
	Don't use `format' on `error' arguments.

	* tooltip.el (tooltip-start-delayed-tip, tooltip-timeout)
	(tooltip-use-echo-area, tooltip-process-prompt-regexp)
	(tooltip-help-tips): Fix typos in docstrings.

2005-06-16  David Ponce  <david@dponce.com>

	* tree-widget.el (tree-widget-value-create): Simplify last change.

2005-06-15  Matt Hodges  <MPHodges@member.fsf.org>

	* ido.el (ido-incomplete-regexp): New variable.
	(ido-set-matches-1): Handle invalid-regexp error and set
	ido-incomplete-regexp.
	(ido-incomplete-regexp): New face.
	(ido-completions): Use it.
	(ido-complete, ido-exit-minibuffer, ido-completions):
	Handle incomplete regexps.
	(ido-completions): Add check for complete match when entering a regexp.

2005-06-15  Stefan Monnier  <monnier@iro.umontreal.ca>

	* subr.el (add-to-ordered-list): Use a weak hash-table to avoid leaks.

2005-06-15  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-Preamble): Enclose BibTeX preamble
	by field delimiters.

2005-06-15  David Ponce  <david@dponce.com>

	* tree-widget.el: eval-and-compile inlined functions so they will
	be available at run-time too.
	(tree-widget-super-format-handler)
	(tree-widget-format-handler): Remove.
	(tree-widget-value-create): Handle the :indent property.

2005-06-15  Miles Bader  <miles@gnu.org>

	* progmodes/which-func.el (which-func): Only inherit
	`font-lock-function-name-face' when that makes sense against the
	default mode-line face, otherwise set the face color explicitly.

	* progmodes/cperl-mode.el (cperl-init-faces): Use literal cperl
	faces instead of (non-existent) variables.

2005-06-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* iswitchb.el (iswitchb-to-end): Replace mapcar with dolist.
	(iswitchb-get-matched-buffers): Likewise.  Simplify.

2005-06-14  Miles Bader  <miles@gnu.org>

	* progmodes/ld-script.el (ld-script-location-counter):
	Remove "-face" suffix from face name.
	(ld-script-location-counter-face):
	New backward-compatibility alias for renamed face.
	(ld-script-location-counter-face): Use renamed face.

	* progmodes/cperl-mode.el (cperl-nonoverridable, cperl-array)
	(cperl-hash): Remove "-face" suffix from face names.
	(cperl-nonoverridable-face, cperl-array-face, cperl-hash-face):
	New backward-compatibility aliases for renamed faces.
	(cperl-find-pods-heres, cperl-init-faces, cperl-ps-print-init)
	(cperl-ps-print-face-properties): Use renamed cperl-mode faces.

	* progmodes/which-func.el (which-func): Remove "-face" suffix from face
	name.
	(which-func-face): New backward-compatibility alias for renamed face.
	(which-func-format): Use renamed which-func face.

	* progmodes/vhdl-mode.el (vhdl-prompt, vhdl-attribute, vhdl-enumvalue)
	(vhdl-function, vhdl-directive, vhdl-reserved-word)
	(vhdl-translate-off): Remove "-face" suffix and "font-lock-" from face
	names.
	(vhdl-speedbar-entity, vhdl-speedbar-architecture)
	(vhdl-speedbar-configuration, vhdl-speedbar-package)
	(vhdl-speedbar-library, vhdl-speedbar-instantiation)
	(vhdl-speedbar-subprogram, vhdl-speedbar-entity-selected)
	(vhdl-speedbar-architecture-selected)
	(vhdl-speedbar-configuration-selected)
	(vhdl-speedbar-package-selected)
	(vhdl-speedbar-instantiation-selected): Remove "-face" suffix from face
	names.
	(vhdl-font-lock-keywords-2, vhdl-font-lock-keywords-5):
	Use renamed faces.
	(vhdl-prompt-face, vhdl-attribute-face, vhdl-enumvalue-face)
	(vhdl-function-face, vhdl-directive-face, vhdl-reserved-words-face)
	(vhdl-translate-off-face): Variables renamed to remove "font-lock-".
	Use renamed faces.
	(syntax-alist): Don't use "font-lock-" or "-face" in generated face
	names.
	(vhdl-font-lock-init, vhdl-ps-print-settings): Use renamed faces.
	(vhdl-speedbar-insert-hierarchy, vhdl-speedbar-expand-entity)
	(vhdl-speedbar-expand-package, vhdl-speedbar-update-current-unit)
	(vhdl-speedbar-make-inst-line, vhdl-speedbar-make-pack-line)
	(vhdl-speedbar-make-subpack-line, vhdl-speedbar-make-subprogram-line)
	(vhdl-speedbar-item-info, vhdl-speedbar-check-unit): Use renamed faces.

	* progmodes/sh-script.el (sh-heredoc): Remove "-face" suffix from
	face name.
	(sh-heredoc-face): New backward-compatibility alias for renamed face.
	(sh-heredoc-face): Use renamed sh-heredoc face.

	* progmodes/idlw-help.el (idlwave-help-link):
	Remove "-face" suffix from face name.
	(idlwave-help-link-face):
	New backward-compatibility alias for renamed face.
	(idlwave-highlight-linked-completions): Use renamed idlwave-help faces.

	* progmodes/idlw-shell.el (idlwave-shell-bp-face)
	(idlwave-shell-disabled-bp): Remove "-face" suffix from face names.
	(idlwave-shell-bp-face, idlwave-shell-disabled-bp):
	New backward-compatibility aliases for renamed faces.
	(idlwave-shell-disabled-breakpoint-face)
	(idlwave-shell-breakpoint-face): Use renamed idlwave-shell faces.

	* progmodes/flymake.el (flymake-errline, flymake-warnline):
	Remove "-face" suffix from face names.
	(flymake-errline-face, flymake-warnline-face):
	New backward-compatibility aliases for renamed faces.
	(flymake-highlight-line): Use renamed flymake faces.

	* progmodes/ebrowse.el (ebrowse-tree-mark, ebrowse-root-class)
	(ebrowse-file-name, ebrowse-default, ebrowse-member-attribute)
	(ebrowse-member-class, ebrowse-progress):
	Remove "-face" suffix from face names.
	(ebrowse-tree-mark-face, ebrowse-root-class-face)
	(ebrowse-file-name-face, ebrowse-default-face)
	(ebrowse-member-attribute-face, ebrowse-member-class-face)
	(ebrowse-progress-face):
	New backward-compatibility aliases for renamed faces.
	(ebrowse-show-progress, ebrowse-show-file-name-at-point)
	(ebrowse-set-mark-props, ebrowse-draw-tree-fn)
	(ebrowse-draw-member-buffer-class-line, ebrowse-draw-member-long-fn)
	(ebrowse-draw-member-short-fn): Use renamed ebrowse faces.

	* progmodes/antlr-mode.el (antlr-default, antlr-keyword,
	antlr-syntax)
	(antlr-ruledef, antlr-tokendef, antlr-ruleref, antlr-tokenref)
	(antlr-literal): Remove "-face" suffix and "font-lock-" from face
	names.
	(antlr-font-lock-default-face, antlr-font-lock-keyword-face)
	(antlr-font-lock-syntax-face, antlr-font-lock-ruledef-face)
	(antlr-font-lock-tokendef-face, antlr-font-lock-ruleref-face)
	(antlr-font-lock-tokenref-face, antlr-font-lock-literal-face): New
	backward-compatibility aliases for renamed faces.
	(antlr-default-face, antlr-keyword-face, antlr-syntax-face)
	(antlr-ruledef-face, antlr-tokendef-face, antlr-ruleref-face)
	(antlr-tokenref-face, antlr-literal-face): Variables renamed to
	remove "font-lock-".  Use renamed antlr-mode faces.
	(antlr-font-lock-additional-keywords): Use renamed faces.  Replace
	literal face-names with face variable references.

	* buff-menu.el (Buffer-menu-buffer): Remove "-face" suffix from
	face name.
	(Buffer-menu-buffer-face): New backward-compatibility alias for
	renamed face.
	(list-buffers-noselect): Use renamed Buffer-menu-buffer face.

2005-06-15  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-space, makefile-makepp-perl):
	Eliminate "-face" suffix.
	(makefile-targets): Inherit from font-lock-function-name-face and
	eliminate "-face" suffix.
	(makefile-shell): Remove attributes and eliminate "-face" suffix.
	(makefile-*-font-lock-keywords): Append makefile-targets in rule
	actions, instead of prepending, to make it less visible.
	(makefile-previous-dependency, makefile-match-dependency):
	Don't match a target on a continuation line.

	* files.el (auto-mode-alist): Put Makefile in gmake mode.

2005-06-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (menu): Re-order menu items.
	(gdb-tooltip-print): Respect tooltip-use-echo-area.

	* progmodes/gud.el (tooltip-use-echo-area): Remove alias.
	Define in tooltip.el.
	(gud-tooltip-process-output): Respect tooltip-use-echo-area.
	(gud-tooltip-tips): Respect tooltip-use-echo-area and
	gud-tooltip-echo-area.

	* tooltip.el (tooltip-use-echo-area): Restore from gud.el for
	backward compatibility and make obsolete.
	(tooltip-help-tips): Use tooltip-use-echo-area.
	(tooltip-show-help-function): Rename to...
	(tooltip-show-help): ...this, because it is a function.
	(tooltip-mode, tooltip-help-message): Call tooltip-show-help.

2005-06-14  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/edebug.el (edebug-all-defs, edebug-initial-mode)
	(edebug-print-length, edebug-print-level, edebug-print-circle)
	(edebug-modify-breakpoint, edebug-eval-last-sexp)
	(edebug-eval-print-last-sexp): Doc fixes.

2005-06-14  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-mode): Make a new keymap every time we enable ido,
	as the coverage buffer/file/both may change.

2005-06-14  Lute Kamstra  <lute@gnu.org>

	* net/ange-ftp.el (internal-ange-ftp-mode): Use delay-mode-hooks
	and run-mode-hooks.  Simplify.

	* mail/rmailedit.el (rmail-edit-mode):
	* progmodes/octave-inf.el (inferior-octave-mode):
	* progmodes/sql.el (sql-interactive-mode): Use delay-mode-hooks.

	* recentf.el (recentf-dialog-mode): Use kill-all-local-variables
	and run-mode-hooks.
	(recentf-edit-list, recentf-open-files): Don't call
	kill-all-local-variables directly.

	* emacs-lisp/debug.el (debug-on-entry): Fix docstring.

2005-06-14  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/byte-run.el (make-obsolete)
	(define-obsolete-function-alias): Rename arguments FUNCTION and
	NEW to OBSOLETE-NAME and CURRENT-NAME respectively.
	(make-obsolete-variable, define-obsolete-variable-alias):
	Rename arguments VARIABLE and NEW to OBSOLETE-NAME and CURRENT-NAME
	respectively.

	* isearchb.el (isearchb-activate):
	* pcvs.el (cvs-mode):
	* ses.el (ses-load):
	* vc-arch.el (vc-arch-checkin, vc-arch-diff):
	* net/tramp.el (tramp-find-file-exists-command)
	(tramp-find-shell):
	* progmodes/ada-mode.el (ada-create-case-exception)
	(ada-create-case-exception-substring, ada-make-subprogram-body):
	* progmodes/idlw-shell.el (idlwave-shell-move-to-bp):
	* progmodes/idlwave.el (idlwave-complete-class-structure-tag-help):
	* progmodes/vhdl-mode.el (vhdl-speedbar-place-component):
	* textmodes/org.el (org-promote, org-evaluate-time-range)
	(org-agenda-next-date-line, org-agenda-previous-date-line)
	(org-agenda-error, org-open-at-point, org-table-move-row)
	(org-format-table-table-html-using-table-generate-source)
	(org-shiftcursor-error, org-ctrl-c-ctrl-c):
	* textmodes/reftex.el (reftex-access-scan-info):
	* textmodes/reftex-toc.el (reftex-toc-dframe-p)
	(reftex-toc-promote-prepare): Follow error conventions.

	* diff-mode.el (diff-mode): Fix typo in docstring.

	* forms.el (forms--intuit-from-file): Fix reference to
	`forms-number-of-fields' in error message.
	(forms-print): Fix quoting in error message.

	* forms.el (forms-mode):
	* emulation/vi.el (vi-goto-insert-state):
	* progmodes/flymake.el (flymake-new-err-info)
	(flymake-start-syntax-check-for-current-buffer)
	(flymake-simple-cleanup):
	* eshell/esh-var.el (eshell/export):
	* progmodes/gud.el (xdb):
	* textmodes/flyspell.el (flyspell-incorrect-hook)
	(flyspell-maybe-correct-transposition)
	(flyspell-maybe-correct-doubling): Fix quoting in docstring.

2005-06-13  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/debug.el (cancel-debug-on-entry): Mention default in
	minibuffer prompt.

2005-06-13  Kim F. Storm  <storm@cua.dk>

	* subr.el (add-to-ordered-list): New defun.

	* emulation/cua-base.el (cua-mode): Use add-to-ordered-list to
	add cua--keymap-alist to emulation-mode-map-alists.

2005-06-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* subr.el (complete-in-turn): New macro.
	(dynamic-completion-table, lazy-completion-table): Add debug info.

	* faces.el (read-face-name): Use complete-in-turn complete non-aliases
	in preference to face aliases.

	* textmodes/fill.el (fill-match-adaptive-prefix): New function.
	(fill-context-prefix): Use it to avoid guessing absurdly long prefixes.
	Remove unused vars `start' and `firstline'.
	(fill-nobreak-p): Fix line-move-invisible -> line-move-invisible-p.
	(justify-current-line, fill-individual-paragraphs): Remove unused vars.

2005-06-13  Eli Zaretskii  <eliz@gnu.org>

	* cus-start.el (all): Don't complain about missing GTK-related
	variables, unless either `gtk' is boundp or this isn't a
	`windows-nt' build.

2005-06-13  Lute Kamstra  <lute@gnu.org>

	* abbrev.el (edit-abbrevs-mode): Use kill-all-local-variables and
	run-mode-hooks.

	* ediff-mult.el (ediff-meta-mode):
	* ediff-util.el (ediff-mode): Use run-mode-hooks.

	* ledit.el (ledit-mode): Use delay-mode-hooks.

	* woman.el (woman-mode-line-format): Delete constant.
	(woman-mode-map): Initialize it properly.
	(woman-mode): Set mode-class property to special.
	Use delay-mode-hooks and run-mode-hooks.  Use the right keymap.
	Set major-mode and mode-name.  Don't set mode-line-format directly.
	(Man-getpage-in-background): Don't reference woman-mode-line-format.

	* emacs-lisp/debug.el (cancel-debug-on-entry): Make the empty
	string argument obsolete.

2005-06-13  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-CUA-compatible): New option.
	(org-disputed-keys): New variable.
	(org-key): New function.
	(orgtbl-make-binding): Add docstring to the created function.
	(org-mode): Set paragraph start/separate regexps.
	(orgtbl-mode): Don't start `orgtbl-mode' in `org-mode' buffers.
	(org-archive-location, org-archive-mark-done)
	(org-archive-stamp-time): New options.
	(org-archive-subtree): New command.
	(org-fill-paragraph): New function.
	(org-mode): Set `fill-paragraph-function' to `org-fill-paragraph'.
	(org-fake-empty-table-line): Function removed.
	(org-format-org-table-html): Do not create empty table lines at
	separator lines.  Improved table header treatment.
	(org-link-format): New option.
	(org-make-link): New function.
	(org-insert-link, org-store-link): Use org-make-link.
	(org-open-file): Quote file name for shell command, to allow
	spaces in file names.
	(org-link-regexp): Fix bug with mailto link.
	(org-link-maybe-angles-regexp, org-protected-link-regexp):
	New constants.
	(org-export-as-html): Deal with the optional angles around a link.
	Better treatment of file: links.
	(org-open-at-point): Replace @{ and @} with < and >.
	(org-run-mode-hooks): Function removed.
	(org-agenda-mode): No longer use `org-run-mode-hooks'.

2005-06-13  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-registers-mode): Let gdbmi use
	MI command -data-list-register-values.
	(gdb-post-prompt): Indent properly.

2005-06-13  Juanma Barranquero  <lekktu@gmail.com>

	* hilit-chg.el (highlight-changes-colors): Rename from
	`highlight-changes-colours'.
	(highlight-changes-colours): Keep as obsolete alias.
	(highlight-changes-face-list): Doc fix.
	(hilit-chg-make-list): Use `highlight-changes-colors'.

2005-06-12  Mark A. Hershberger  <mah@everybody.org>

	* progmodes/cperl-mode.el (cperl-mode): Remove stray paren in
	defun-prompt-regexp.

2005-06-12  Eli Zaretskii  <eliz@gnu.org>

	* loadup.el: Don't say we are dumping under 2 names on windows-nt
	and cygwin.

	* makefile.w32-in (bootstrap-clean-CMD, bootstrap-clean-SH):
	Don't use an old loaddefs.el, as in Makefile.in.

2005-06-12  Lute Kamstra  <lute@gnu.org>

	* Makefile.in (bootstrap-prepare): Don't use an old loaddefs.el.

	* man.el (Man-mode-map): Initialize it properly.
	(Man-mode): Set mode-class property to special.

	* calendar/calendar.el (calendar-mode): Use run-mode-hooks.

2005-06-11  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-make-toggle): Remove stray backslash.
	A newline is needed in the docstring there.

	* emacs-lisp/debug.el (debug-on-entry, cancel-debug-on-entry):
	Doc fixes.

2005-06-11  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* printing.el: Doc fix.  The menubar is no more changed when printing
	is loaded, it only changes when pr-menu-bind or pr-update-menus is
	called.  Now, the menubar changing will work in Emacs 20, 21 and 22.
	(pr-version): New version number (6.8.4).
	(pr-menu-bind): New command.
	(pr-update-menus): Docstring and code fix.
	(pr-menu-print-item): Now is a global var in Emacs and XEmacs.
	Docstring fix.
	(pr-txt-printer-alist, pr-ps-printer-alist, pr-gv-command)
	(pr-gs-command, pr-gs-switches, pr-ps-utility-alist): Docstring fix.

2005-06-11  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/ewoc.el: Doc fixes for public funcs:
	"Returns" to "return", document useful return values, etc.

2005-06-11  Alan Mackenzie  <acm@muc.de>

	* fill.el (fill-context-prefix): Try `adaptive-fill-function'
	BEFORE `adaptive-fill-regexp' when determining a fill prefix.
	(adaptive-file-function): Minor amendment to doc-string.

2005-06-11  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* thumbs.el (thumbs-per-line, thumbs-thumbsdir-max-size)
	(thumbs-relief, thumbs-margin, thumbs-image-resizing-step):
	Fix :type--it is `integer', not `string'.

	* faces.el (modeline-highlight): Rename from (the erroneous)
	`modeline-higilight'.

2005-06-11  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/edebug.el (edebug-eval-mode-map): Don't copy
	lisp-interaction-mode-map but make it the parent.
	(edebug-eval-mode): Use define-derived-mode.

2005-06-11  Andreas Schwab  <schwab@suse.de>

	* bindings.el: Add binding of `ESC functionkey' for every
	`M-functionkey'.
	* hexl.el (hexl-mode-map): Likewise.

2005-06-10  Michael Hotchin  <michael@hotchin.net>  (tiny change)

	* progmodes/compile.el (compilation-error-regexp-alist-alist)
	[msft]: update regexp for newer msft compilers.

2005-06-10  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (start-chars, xml-parse-dtd): Add the ability to skip
	ATTLIST portions of included DTDs.
	(xml-parse-dtd): Eliminate use of inefficient match-data.

2005-06-10  Miles Bader  <miles@gnu.org>

	* play/mpuz.el (mpuz-unsolved, mpuz-solved, mpuz-trivial)
	(mpuz-text): Remove "-face" suffix from face names.
	(mpuz-unsolved-face, mpuz-solved-face, mpuz-trivial-face)
	(mpuz-text-face): New backward-compatibility aliases for renamed faces.
	(mpuz-create-buffer, mpuz-paint-digit): Use renamed mpuz faces.

	* play/gomoku.el (gomoku-O, gomoku-X):
	Remove "-face" suffix from face names.
	(gomoku-font-lock-O-face, gomoku-font-lock-X-face):
	New backward-compatibility aliases for renamed faces.
	(gomoku-font-lock-keywords): Use renamed gomoku faces.

2005-06-10  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el: Fixes for changes of 2005-06-09.
	(thumbs-thumbsdir): Force `thumbs-thumbsdir' to be interpretable
	as a directory.
	(thumbs-thumbname): Remove directory separator from format string;
	`thumbs-thumbsdir' now returns a valid directory name.
	(thumbs-temp-dir): New defsubst.
	(thumbs-temp-file, thumbs-resize-image, thumbs-modify-image):
	Use it.

	* cus-edit.el (minibuffer):
	* files.el (make-backup-file-name-function):
	* filesets.el (filesets-external-viewers):
	* hilit-chg.el (highlight-changes-colours)
	(highlight-changes-face-list, highlight-changes-rotate-faces):
	* ielm.el (ielm-dynamic-return, inferior-emacs-lisp-mode):
	* kmacro.el (kmacro-call-macro):
	* log-edit.el (log-edit-changelog-full-paragraphs):
	* mouse.el (mouse-1-click-follows-link):
	* skeleton.el (skeleton-autowrap):
	* subr.el (insert-for-yank-1):
	* tempo.el (tempo-insert-region):
	* terminal.el (terminal-emulator):
	* time.el (display-time-mail-face):
	* vc.el (vc-annotate):
	* vcursor.el (vcursor-copy-line):
	* woman.el (woman-bold-headings, woman-ignore)
	(woman-default-faces, woman-monochrome-faces):
	* calendar/todo-mode.el (todo-insert-threshold):
	* emulation/pc-select.el (pc-select-selection-keys-only)
	(pc-selection-mode):
	* emulation/vip.el (vip-find-char-forward):
	* emulation/viper-cmd.el (viper-find-char-forward):
	* international/mule-cmds.el
	(select-safe-coding-system-accept-default-p)
	(input-method-exit-on-invalid-key):
	* international/mule-diag.el (describe-coding-system):
	* international/ucs-tables.el (unify-8859-on-encoding-mode):
	* net/browse-url.el (browse-url-xterm-program):
	* obsolete/lazy-lock.el (lazy-lock-mode):
	* progmodes/cperl-mode.el (cperl-info-on-command-no-prompt)
	(cperl-mode):
	* progmodes/cpp.el (cpp-face-light-name-list)
	(cpp-face-dark-name-list):
	* progmodes/delphi.el (delphi-newline-always-indents):
	Fix spellings in docstrings.

	* ido.el (ido-mode, ido-file-extensions-order)
	(ido-default-file-method, ido-default-buffer-method)
	(ido-max-prospects, ido-slow-ftp-hosts, ido-setup-hook)
	(ido-decorations, ido-read-file-name-as-directory-commands)
	(ido-read-file-name-non-ido, ido-work-directory-list)
	(ido-ignore-item-temp-list, ido-current-directory)
	(ido-magic-forward-char, ido-enter-find-file)
	(ido-enter-switch-buffer, ido-visit-buffer, ido-switch-buffer)
	(ido-find-file, ido-read-buffer): Fix typos in docstrings.

2005-06-10  Lute Kamstra  <lute@gnu.org>

	* play/dunnet.el (dun-mode): Use define-derived-mode.
	(dungeon-mode-map): Rename to dun-mode-map.  Keep old name as an
	obsolete alias.

	* play/doctor.el (doctor-mode-map): Remove defvar.
	(doctor-mode): Use define-derived-mode.

	* mail/mspools.el (mspools-mode):
	* net/eudc-hotlist.el (eudc-hotlist-mode):
	* play/blackbox.el (blackbox-mode): Use run-mode-hooks.

2005-06-10  Miles Bader  <miles@gnu.org>

	* textmodes/flyspell.el (flyspell-incorrect, flyspell-duplicate):
	Remove "-face" suffix from face names.
	(flyspell-incorrect-face, flyspell-duplicate-face):
	New backward-compatibility aliases for renamed faces.
	(flyspell-mode-on, make-flyspell-overlay)
	(flyspell-highlight-incorrect-region)
	(flyspell-highlight-duplicate-region)
	(flyspell-display-next-corrections)
	(flyspell-auto-correct-previous-word): Use renamed flyspell faces.

	* textmodes/texinfo.el (texinfo-heading): Remove "-face" suffix
	from face name.
	(texinfo-heading-face): New backward-compatibility alias for
	renamed face.
	(texinfo-heading-face): Use renamed texinfo-heading face.

	* textmodes/tex-mode.el (tex-math, tex-verbatim): Remove "-face"
	suffix from face names.
	(tex-math-face, tex-verbatim-face):
	New backward-compatibility aliases for renamed faces.
	(tex-math-face, tex-verbatim-face): Use renamed tex-mode faces.
	(tex-insert-quote): Use `tex-verbatim-face' variable instead of
	literal face name.

	* textmodes/table.el (table-cell): Remove "-face" suffix from face
	name.
	(table-cell-face): New backward-compatibility alias for renamed face.
	(table--put-cell-face-property, table--update-cell-face):
	Use renamed table-cell face.

	* textmodes/sgml-mode.el (sgml-namespace): Remove "-face" suffix
	from face name.
	(sgml-namespace-face): New backward-compatibility alias for
	renamed face.
	(sgml-namespace-face): Use renamed sgml-namespace face.

	* textmodes/org.el (org-level-1, org-level-2, org-level-3)
	(org-level-4, org-level-5, org-level-6, org-level-7)
	(org-level-8, org-warning, org-headline-done)
	(org-deadline-announce, org-scheduled-today)
	(org-scheduled-previously, org-link, org-done, org-table)
	(org-time-grid): Remove "-face" suffix from face names.
	(org-level-1-face, org-level-2-face, org-level-3-face)
	(org-level-4-face, org-level-5-face, org-level-6-face)
	(org-level-7-face, org-level-8-face, org-warning-face)
	(org-headline-done-face, org-deadline-announce-face)
	(org-scheduled-today-face, org-scheduled-previously-face)
	(org-link-face, org-done-face, org-table-face)
	(org-time-grid-face):
	New backward-compatibility aliases for renamed faces.
	(org-level-faces, org-set-font-lock-defaults, org-timeline)
	(org-agenda, org-agenda-get-todos, org-agenda-get-deadlines)
	(org-agenda-get-timestamps, org-agenda-get-scheduled)
	(org-agenda-add-time-grid-maybe, org-table-p): Use renamed org faces.

	* emulation/viper-init.el (viper-search, viper-replace-overlay)
	(viper-minibuffer-emacs, viper-minibuffer-insert)
	(viper-minibuffer-vi): Remove "-face" suffix from face names.
	(viper-search-face, viper-replace-overlay-face)
	(viper-minibuffer-emacs-face, viper-minibuffer-insert-face)
	(viper-minibuffer-vi-face):
	New backward-compatibility aliases for renamed faces.
	(viper-search-face, viper-replace-overlay-face)
	(viper-minibuffer-emacs-face, viper-minibuffer-insert-face)
	(viper-minibuffer-vi-face): Use renamed viper faces.

	* emacs-lisp/testcover.el (testcover-nohits, testcover-1value):
	Remove "-face" suffix from face names.
	(testcover-nohits-face, testcover-1value-face):
	New backward-compatibility aliases for renamed faces.
	(testcover-mark): Use renamed testcover faces.

	* calendar/diary-lib.el (diary-button): Remove "-face" suffix from
	face name.
	(diary-button-face): New backward-compatibility alias for renamed face.
	(diary-entry): Use renamed diary-button face.

	* calendar/calendar.el (diary, calendar-today, holiday)
	(mark-visible-calendar-date): Remove "-face" suffix from face names.
	(diary-face, calendar-today-face, holiday-face):
	New backward-compatibility aliases for renamed faces.
	(eval-after-load "facemenu", diary-entry-marker)
	(calendar-today-marker, calendar-holiday-marker, diary-face):
	Use renamed calendar faces.

	* compare-w.el (compare-windows): Remove "-face" suffix from face name.
	(compare-windows-face): New backward-compatibility alias for
	renamed face.
	(compare-windows-highlight): Use renamed compare-windows face.

	* strokes.el (strokes-char): Remove "-face" suffix from face name.
	(strokes-char-face): New backward-compatibility alias for renamed face.
	(strokes-encode-buffer): Use renamed strokes-char face.

	* pcvs-info.el (cvs-header, cvs-filename, cvs-unknown)
	(cvs-handled, cvs-need-action, cvs-marked, cvs-msg):
	Remove "-face" suffix from face names.
	(cvs-header-face, cvs-filename-face, cvs-unknown-face)
	(cvs-handled-face, cvs-need-action-face, cvs-marked-face)
	(cvs-msg-face): New backward-compatibility aliases for renamed faces.
	(cvs-fi-up-to-date-face, cvs-fi-unknown-face, cvs-fileinfo-pp):
	Use renamed pcvs faces.
	* pcvs.el (cvs-mode-find-file): Use renamed pcvs faces.
	* pcvs-defs.el (cvs-mode-map): Likewise.
	* cvs-status.el (cvs-status-font-lock-keywords): Likewise.

	* info.el (info-title-1, info-title-2, info-title-3)
	(info-title-4): Remove "-face" suffix from and downcase face names.
	(Info-title-1-face, Info-title-2-face, Info-title-3-face)
	(Info-title-4-face):
	New backward-compatibility aliases for renamed faces.
	(Info-fontify-node): Use renamed info faces.

	* hilit-chg.el (highlight-changes, highlight-changes-delete):
	Remove "-face" suffix from face names.
	(highlight-changes-face, highlight-changes-delete-face):
	New backward-compatibility aliases for renamed faces.
	(hilit-chg-cust-fix-changes-face-list, hilit-chg-make-ov)
	(hilit-chg-make-list): Use renamed highlight-changes faces.

	* generic-x.el (show-tabs-tab, show-tabs-space):
	Remove "-face" suffix from face names.
	(show-tabs-tab-face, show-tabs-space-face):
	New backward-compatibility aliases for renamed faces.
	(show-tabs-generic-mode-font-lock-defaults-1)
	(show-tabs-generic-mode-font-lock-defaults-2):
	Use renamed show-tabs faces.

	* smerge-mode.el (smerge-mine, smerge-other, smerge-base)
	(smerge-markers): Remove "-face" suffix from face names.
	(smerge-mine-face, smerge-other-face, smerge-base-face)
	(smerge-markers-face):
	New backward-compatibility aliases for renamed faces.
	(smerge-mine-face, smerge-other-face, smerge-base-face)
	(smerge-markers-face): Use renamed smerge faces.

	* log-view.el (log-view-file, log-view-message): Remove "-face"
	suffix from face names.
	(log-view-file-face, log-view-message-face): New
	backward-compatibility aliases for renamed faces.
	(log-view-file-face, log-view-message-face): Use renamed log-view
	faces.

	* paren.el (show-paren-match, show-paren-mismatch):
	Remove "-face" suffix from face names.
	(show-paren-match-face, show-paren-mismatch-face):
	New backward-compatibility aliases for renamed faces.
	(show-paren-function): Use renamed show-paren faces.

	* ruler-mode.el (ruler-mode-default, ruler-mode-pad)
	(ruler-mode-margins, ruler-mode-fringes)
	(ruler-mode-column-number, ruler-mode-fill-column)
	(ruler-mode-comment-column, ruler-mode-goal-column)
	(ruler-mode-tab-stop, ruler-mode-current-column): Remove "-face"
	suffix from face names.
	(ruler-mode-default-face, ruler-mode-pad-face)
	(ruler-mode-margins-face, ruler-mode-fringes-face)
	(ruler-mode-column-number-face, ruler-mode-fill-column-face)
	(ruler-mode-comment-column-face, ruler-mode-goal-column-face)
	(ruler-mode-tab-stop-face, ruler-mode-current-column-face): New
	backward-compatibility aliases for renamed faces.
	(ruler-mode-pad, ruler-mode-margins, ruler-mode-fringes)
	(ruler-mode-column-number, ruler-mode-fill-column)
	(ruler-mode-comment-column, ruler-mode-goal-column)
	(ruler-mode-tab-stop, ruler-mode-current-column)
	(ruler-mode-mouse-grab-any-column, ruler-mode-ruler): Use renamed
	faces.

	* whitespace.el (whitespace-highlight): Remove "-face" suffix from
	face name.
	(whitespace-highlight-the-space): Use renamed face.
	(whitespace-highlight-face): New backward-compatibility alias for
	renamed face.

	* woman.el (woman-italic, woman-bold, woman-unknown)
	(woman-addition, woman-symbol-face):
	Remove "-face" suffix from face names.
	(woman-italic-face, woman-bold-face, woman-unknown-face)
	(woman-addition-face):
	New backward-compatibility aliases for renamed faces.
	(woman-default-faces, woman-monochrome-faces, woman-man-buffer)
	(woman-decode-region, woman-replace-match)
	(woman-display-extended-fonts, woman-special-characters)
	(woman-font-alist, woman-change-fonts, woman2-TH, woman2-SH):
	Use renamed woman faces.

	* longlines.el (longlines-visible-face): Face removed.

	* diff-mode.el (diff-header, diff-file-header, diff-index)
	(diff-hunk-header, diff-removed, diff-added, diff-changed)
	(diff-function, diff-context, diff-nonexistent): Remove "-face"
	suffix from face names.
	(diff-header-face, diff-file-header-face, diff-index-face)
	(diff-hunk-header-face, diff-removed-face, diff-added-face)
	(diff-changed-face, diff-function-face, diff-context-face)
	(diff-nonexistent-face): New backward-compatibility aliases for
	renamed faces.
	(diff-header-face, diff-file-header-face)
	(diff-index, diff-index-face, diff-hunk-header)
	(diff-hunk-header-face, diff-removed, diff-removed-face)
	(diff-added, diff-added-face, diff-changed-face, diff-function)
	(diff-function-face, diff-context-face, diff-nonexistent)
	(diff-nonexistent-face): Use renamed diff-mode faces.

	* progmodes/compile.el (compilation-warning-face)
	(compilation-info-face): Remove "-face" suffix from face names.
	(compilation-warning-face, compilation-info-face):
	New backward-compatibility aliases for renamed faces.
	(compilation-warning-face, compilation-info-face):
	Use renamed compilation faces.

	* add-log.el (change-log-date, change-log-name)
	(change-log-email, change-log-file, change-log-list)
	(change-log-conditionals, change-log-function)
	(change-log-acknowledgement): Remove "-face" suffix from face names.
	(change-log-date-face, change-log-name-face)
	(change-log-email-face, change-log-file-face)
	(change-log-list-face, change-log-conditionals-face)
	(change-log-function-face, change-log-acknowledgement-face):
	New backward-compatibility aliases for renamed faces.
	(change-log-font-lock-keywords): Use renamed change-log faces.

	* cus-edit.el (custom-invalid, custom-rogue, custom-modified)
	(custom-set, custom-changed, custom-saved, custom-button)
	(custom-button-pressed, custom-documentation, custom-state)
	(custom-comment, custom-comment-tag, custom-variable-tag)
	(custom-variable-button, custom-face-tag, custom-group-tag-1)
	(custom-group-tag): Remove "-face" suffix from face names.
	(custom-magic-alist, custom-magic-value-create)
	(custom-group-sample-face-get, custom-mode): Use renamed custom faces.
	(custom-invalid-face, custom-rogue-face, custom-modified-face)
	(custom-set-face, custom-changed-face, custom-saved-face)
	(custom-button-face, custom-button-pressed-face)
	(custom-documentation-face, custom-state-face)
	(custom-comment-face, custom-comment-tag-face)
	(custom-variable-tag-face, custom-variable-button-face)
	(custom-face-tag-face, custom-group-tag-face-1)
	(custom-group-tag-face):
	New backward-compatibility aliases for renamed faces.

	* wid-edit.el (widget-documentation, widget-button)
	(widget-field, widget-single-line-field, widget-inactive)
	(widget-button-pressed): "-face" suffix removed from face names.
	(widget-documentation-face, widget-button-face)
	(widget-field-face, widget-single-line-field-face)
	(widget-inactive-face, widget-button-pressed-face):
	New backward-compatibility aliases for renamed faces.
	(widget-documentation-face, widget-button-face)
	(widget-button-pressed-face, widget-specify-field)
	(widget-specify-inactive): Use renamed widget faces.

2005-06-10  Kenichi Handa  <handa@m17n.org>

	* term/x-win.el (x-clipboard-yank): Remove condition-case
	wrapping.

2005-06-11  Kenichi Handa  <handa@m17n.org>

	* add-log.el (change-log-font-lock-keywords): Make the regexp for
	date lines stricter.

2005-06-10  Zhang Wei  <id.brep@gmail.com>  (tiny change)

	* term/x-win.el (x-clipboard-yank): Use x-selection-value instead
	of x-get-selection.

2005-06-10  Juanma Barranquero  <lekktu@gmail.com>

	* comint.el (comint-mode, comint-snapshot-last-prompt):
	* frame.el (frame-current-scroll-bars):
	* term.el (term-mode, term-check-proc, term-input-sender)
	(term-simple-send, term-extract-string, term-word)
	(term-match-partial-filename):
	* window.el (window-current-scroll-bars):
	* emulation/cua-base.el (cua-normal-cursor-color)
	(cua-read-only-cursor-color, cua-overwrite-cursor-color)
	(cua-global-mark-cursor-color):
	* mail/undigest.el (rmail-forward-separator-regex):
	Fix typos in docstrings.

	* comint.el (comint-check-proc, make-comint-in-buffer)
	(comint-source-default): Doc fixes.

	* term.el (term-send-string): Improve argument/docstring
	consistency.

2005-06-09  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-send-input): Bind `inhibit-read-only' around
	call to `delete-region'.
	(comint-mode-hook): Do not enable Font Lock by default.

2005-06-09  Lute Kamstra  <lute@gnu.org>

	* textmodes/ispell.el (ispell-menu-map-needed): flyspell-mode
	could be void.

2005-06-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debugger-will-be-back): New var.
	(debug): Use it.
	(debugger-step-through, debugger-continue, debugger-jump)
	(debugger-return-value): Set it when needed.
	(debugger-make-xrefs, debugger-frame, debugger-frame-clear):
	Use inhibit-read-only.

2005-06-09  Juanma Barranquero  <lekktu@gmail.com>

	* window.el (shrink-window-if-larger-than-buffer)
	(window-size-fixed): Fix typo in docstring.

	* thumbs.el: Don't set `auto-image-file-mode'.  Do not create the
	thumbnails directory on loading.
	(thumbs-conversion-program): Use `eq' to check the system type,
	not `equal'.
	(thumbs-temp-dir): Initialize to `temporary-file-directory',
	not "/tmp".  Fix docstring.
	(thumbs-thumbsdir): New function to return the thumbnails
	directory, creating it if needed.
	(thumbs-cleanup-thumbsdir, thumbs-thumbname): Use it.
	(thumbs-temp-file): Delete variable and make it into a function.
	(thumbs-resize-image, thumbs-modify-image): Use it.
	(thumbs-kill-buffer): Simplify.
	(thumbs-gensym): Defalias or duplicate CL `gensym'.
	(thumbs-resize-image, thumbs-resize-interactive): Fix typos in
	docstrings.

2005-06-09  Kim F. Storm  <storm@cua.dk>

	* subr.el (save-match-data): Add RESEAT arg `evaporate' to
	set-match-data to free markers in match-data.

	* replace.el (replace-match-data): Pass RESEAT arg `t' to
	match-data to unchain markers in match-data.

2005-06-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debug): Don't iconify if we know we'll re-enter
	the debugger immediately anyway.  Undo the 2005-06-06 change, rendered
	unnecessary now.

2005-06-08  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): If BODY is empty,
	give the variable a doc string that doesn't say don't set it directly.

	* textmodes/ispell.el (ispell-check-version):
	Use match-string-no-properties.
	(ispell-region,	ispell-buffer-local-parsing, ispell-buffer-local-dict)
	(ispell-buffer-local-words): Likewise.

	* progmodes/make-mode.el (makefile-shell-face): Make this a no-op
	except on terminals with enough colors to really display it.
	(makefile-dependency-regex): Delete spurious `bb'.

	* faces.el (escape-glyph): Use blue once again in last case.
	(no-break-space): Redefine so that it isn't invisible on a tty.

2005-06-08  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-file-name): Fallback to read-file-name on C-f
	also when reading directory name.

2005-06-08  Lute Kamstra  <lute@gnu.org>

	* textmodes/flyspell.el (flyspell-mode): Use define-minor-mode.
	(flyspell-mode-line-string): Remove autoload cookie.
	(flyspell-mode): Remove defvar.

2005-06-07  Lute Kamstra  <lute@gnu.org>

	* textmodes/org.el (org-run-mode-hooks): New function.
	(org-agenda-mode): Use it.

2005-06-07  David McCabe  <davemccabe@gmail.com>  (tiny change)

	* emacs-lisp/lisp-mode.el (defstruct): Set `doc-string-elt' property.

2005-06-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/iso-cvt.el (iso-sgml2iso-trans-tab): Add NBSP.

2005-06-06  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el (font-lock-add-keywords): Doc fix.

2005-06-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-guess-mode): Add RequirePackage.
	(tex-compile-default): In the absence of any history, use the order in
	tex-compile-alist to choose the preferred command.
	(tex-compile-commands): Reorder a bit.

	* textmodes/flyspell.el (flyspell-auto-correct-binding)
	(flyspell-incorrect-face, flyspell-duplicate-face):
	Use (X)Emacs-agnostic code.
	(flyspell-mode-map): Don't overwrite at each load.  Remove code
	redundant with the subsequent add-minor-mode.  Merge Emacs and
	XEmacs code.
	(flyspell-word): Minor simplification.
	(flyspell-math-tex-command-p): Quieten the byte-compiler.
	(flyspell-external-point-words): Remove unused vars `size' and
	`start'.
	(flyspell-do-correct): Rename from flyspell-xemacs-correct.  Merge
	the corresponding Emacs code.
	(flyspell-correct-word, flyspell-xemacs-popup): Use
	flyspell-do-correct.

	* emacs-lisp/debug.el (debug): Don't bury the buffer unless it's in
	a dedicated window.

	* international/latexenc.el (latexenc-find-file-coding-system):
	Undo part of last patch, to turn off a compiler warning.

2005-06-06  Juri Linkov  <juri@jurta.org>

	* tmm.el (tmm-inactive, tmm-remove-inactive-mouse-face):
	Rename `tmm-inactive-face' to `tmm-inactive'.

2005-06-06  Matt Hodges  <MPHodges@member.fsf.org>

	* iswitchb.el: Rename faces.

2005-06-06  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-rectangle, cua-rectangle-noselect)
	(cua-global-mark): Remove -face suffix from face names.

	* emulation/cua-gmrk.el (cua--init-global-mark):
	Remove cua-global-mark face setup.

2005-06-06  Richard M. Stallman  <rms@gnu.org>

	* progmodes/make-mode.el (makefile-dependency-regex): Handle whitespace
	just like other allowed characters.
	(makefile-match-dependency): Exclude leading and training whitespace
	from the range of regexp subexp 1.
	(makefile-macroassign-regex): Don't try to match the body,
	just the name of the macro being defined.

	* info.el (Info-read-node-name-2): New function.
	(Info-read-node-name-1): Use that.
	Add a completion-base-size-function property.

	* simple.el (completion-setup-function): Look for
	completion-base-size-function property of
	minibuffer-completion-table.

	* files.el (locate-file-completion): Doc fix.

	* printing.el: Don't call pr-update-menus; user must do that.

	* emacs-lisp/debug.el (debugger-window): New variable.
	(debug): Use debugger-window if it is set and still alive.
	Record debugger-window for next entry.

	* mail/supercite.el (sc-mail-glom-frame): Mark as risky.

2005-06-06  Matthias F,Av(Brste  <slashdevslashnull@gmx.net>

	* files.el (hack-local-variables-confirm): New arg FLAG-TO-CHECK.
	(hack-one-local-variable, hack-local-variables)
	(hack-local-variables-prop-line): Pass that arg.

2005-06-06  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-first-match, ido-only-match, ido-subdir)
	(ido-indicator): Remove -face suffix from face names.

2005-06-06  Juri Linkov  <juri@jurta.org>

	* font-lock.el (font-lock-regexp-backslash)
	(font-lock-regexp-backslash-construct): New faces.
	(lisp-font-lock-keywords-2): Use new faces.  Match `?:' only
	after `('.  Add `while-no-input' to control structures.

	* faces.el (no-break-space, shadow): New faces.
	(escape-glyph): Use less loud colors pink2 and red4.

	* diff-mode.el (diff-context-face)
	* dired.el (dired-ignored)
	* rfn-eshadow.el (file-name-shadow)
	* tmm.el (tmm-inactive-face): Inherit from `shadow' face.

	* info.el (Info-title-1-face): Use green instead of yellow because
	bold yellow is not readable on light backgrounds.

	* progmodes/compile.el (compilation-start): Move `erase-buffer' up
	before selecting the desired mode to not spend time fontifying
	old contents.

2005-06-06  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-thumbsdir-max-size, thumbs-image-resizing-step)
	(thumbs-thumbsdir-auto-clean): Fix typos in docstrings.

	* ps-print.el (ps-default-fg, ps-default-bg):
	Fix typos in docstrings.

	* isearchb.el (isearchb): Don't pass a spurious second argument to
	`iswitchb-completions'.

2005-06-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-locals-handler): Use window point
	to preserve point.
	(gdb-find-file-hook): Add doc string.

	* progmodes/gud.el (gdb, gud-menu-map): Add command to evaluate
	C dereferenced pointer expression.
	(gud-tool-bar-map): Put it on the tool bar.  Re-order icons.

	* toolbar/gud-pstar.xpm, toolbar/gud-pstar.pbm: New files.

	* toolbar/gud-break.xpm, toolbar/gud-cont.xpm, toolbar/gud-down.xpm
	* toolbar/gud-finish.xpm, toolbar/gud-ni.xpm, toolbar/gud-n.xpm
	* toolbar/gud-print.xpm, toolbar/gud-remove.xpm, toolbar/gud-run.xpm
	* toolbar/gud-si.xpm, toolbar/gud-s.xpm, toolbar/gud-until.xpm
	* toolbar/gud-up.xpm, toolbar/gud-watch.xpm:
	Make background transparent.

2005-06-04  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el (font-lock-add-keywords): Doc fix.  Comment change.
	(font-lock-remove-keywords): Doc fix.
	(font-lock-mode-major-mode): Compiler defvar.
	(font-lock-set-defaults): Use `font-lock-mode-major-mode'.

	* font-core.el (font-lock-mode-major-mode): Compiler defvar.
	(font-lock-mode): Update `font-lock-mode-major-mode'.
	(font-lock-set-defaults): Compiler defvar.
	(font-lock-default-function): Take `font-lock-mode-major-mode'
	into account.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode): Make it
	keep track of which major mode it enabled the minor mode for.
	Use find-file-hook again.  Update docstring.

	* simple.el (eval-expression-print-level)
	(eval-expression-print-length, eval-expression-debug-on-error):
	Doc fixes.

2005-06-04  Matt Hodges  <MPHodges@member.fsf.org>

	* iswitchb.el (iswitchb-single-match-face)
	(iswitchb-current-match-face, iswitchb-virtual-matches-face)
	(iswitchb-invalid-regexp-face): New faces.
	(iswitchb-completions): Use them.
	(iswitchb-use-faces): Rename from iswitchb-use-fonts, which is
	now marked as an obsolete alias.
	(iswitchb-read-buffer): Remove check for bound font variables.
	(iswitchb-invalid-regexp): New free variable.
	(iswitchb-get-matched-buffers): Catch invalid-regexp errors and
	set iswitchb-invalid-regexp.
	(iswitchb, iswitchb-complete, iswitchb-completions): Deal with
	invalid regexps.
	(iswitchb-completions): Add check for complete match when entering
	a regexp.
	(iswitchb-completions): Remove require-match argument.
	(iswitchb-exhibit): Fix caller.
	(iswitchb-common-match-inserted): New variable.
	(iswitchb-complete, iswitchb-completion-help): Use it.

2005-06-04  David Reitter  <david.reitter@gmail.com>  (tiny change)

	* url-http.el (url-http-chunked-encoding-after-change-function):
	Use `url-http-debug' instead of `message'.

2005-06-04  Thierry Emery  <thierry.emery@free.fr>  (tiny change)

	* url-http.el (url-http-parse-headers): Pass redirected URL as a
	callback argument.

2005-06-04  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move): Only call sit-for when moving backwards.

	* ido.el (ido-make-merged-file-list-1): New defun split from
	ido-make-merged-file-list.
	(ido-make-merged-file-list): Bind throw-on-input around call to
	ido-make-merged-file-list-1.  Return input-pending-p if
	interrupted by more input available.
	(ido-read-internal): Handle input-pending-p return value from
	ido-make-merged-file-list.

2005-06-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/flyspell.el (flyspell-check-word-p): Simplify silly
	compatibility code.

	* international/latexenc.el (latexenc-find-file-coding-system):
	Don't inherit the EOL part of the coding-system from the
	tex-main buffer.  Fit within 80 columns.

2005-06-03  Matt Hodges  <MPHodges@member.fsf.org>

	* tmm.el (tmm-inactive-face): New face.
	(tmm-remove-inactive-mouse-face): New function.
	(tmm-prompt, tmm-add-one-shortcut)
	(tmm-add-prompt, tmm-get-keymap): Make active menu items visible
	but not selectable.

2005-06-03  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (face-equal): Improve argument/docstring consistency.

2005-06-03  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-targets-face)
	(makefile-shell-face, makefile-makepp-perl-face): Add :version.
	(makefile-bsdmake-dependency-regex)
	(makefile-makepp-rule-action-regex)
	(makefile-bsdmake-rule-action-regex): New constants.
	(makefile-makepp-mode, makefile-bsdmake-mode): Use them.

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Allow (...) within `...' for makepp messages.

2005-06-03  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff-diff.el (ediff-same-contents): Eliminate CL-type functions.

	* ediff-mult.el (ediff-intersect-directories): Make sure that ".." and
	"." files are deleted from all file lists before comparison.

	* viper-keym.el (viper-toggle-key, viper-quoted-insert-key)
	(viper-ESC-key): Made them customizable.

	* viper.el (viper-non-hook-settings): Fix the names of defadvices.

2005-06-01  Luc Teirlinck  <teirllm@auburn.edu>

	* autorevert.el (auto-revert-buffers): Use save-match-data.

2005-06-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/easymenu.el (easy-menu-return-item): Quick fix to find
	menu items with a nil command binding.

2005-06-01  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl-macs.el (defsetf):
	Improve argument/docstring consistency.

	* faces.el (list-faces-display): Improve the formatting by
	computing the maximum length required for any face-name (reworked
	patch of 1999-01-11, accidentally deleted on 1999-07-21).
	(internal-find-face): Remove redundant info in docstring.

2005-06-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-1)
	(gdb-info-breakpoints-custom, gdb-delete-breakpoint)
	(gdb-goto-breakpoint, gdb-source-info, gdb-get-location)
	(gdb-assembler-custom): Improve regexps.
	(def-gdb-auto-update-handler): Use window point to preserve point.

2005-05-31  Stefan Monnier  <monnier@iro.umontreal.ca>

	* thumbs.el (thumbs-mode): Fix misuse of make-variable-buffer-local.

2005-05-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-word): Change argument passed
	to calc-embedded.
	(calc-embedded-make-info): Have plain prefix argument select
	entire line.

2005-05-31  Juanma Barranquero  <lekktu@gmail.com>

	* faces.el (list-faces-display): Signal error if passed a regexp
	that matches no face name.

	* simple.el (filter-buffer-substring): Fix typo in docstring.

2005-05-31  Richard M. Stallman  <rms@gnu.org>

	* progmodes/vhdl-mode.el (vhdl-fill-region): Test ARG, not INTERACTIVE.
	(vhdl-emacs-21): Doc fix.
	(vhdl-mode): Unconditionally set comment-padding.
	(vhdl-fixup-whitespace-region): Insert spaces only where
	there are none.
	(vhdl-statistics-buffer): Make the Emacs 21 behavior universal.

2005-05-30  John Wiegley  <johnw@newartisans.com>

	* eshell/em-cmpl.el, eshell/em-dirs.el, eshell/em-glob.el
	* eshell/em-unix.el, eshell/esh-ext.el, eshell/esh-io.el
	* eshell/esh-util.el, eshell/esh-var.el: Change all uses of
	`directory-sep-char' to ?/, and all uses of `string-to-int' to
	`string-to-number'.

2005-05-30  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-bug-address): Fix docstring.
	(calc-window-hook, calc-trail-window-hook): New variables.
	(calc-trail-display): Restore use of calc-trail-window-hook.
	(calc): Restore use of calc-window-hook.

2005-05-31  Masatake YAMATO  <jet@gyve.org>

	* emacs-lisp/find-func.el (find-function-noselect): Handle subroutines.

	* help-fns.el (help-C-file-name): Add autoload mark for
	`find-function-noselect'.

2005-05-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-compile-commands, tex-compile)
	(tex-start-tex): Undo all but the last part of the 2005-05-28 change.

2005-05-30  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (mark-included-diary-files): Only kill
	included diary buffer if it was not already being visited.
	Reported by Stephen Berman <Stephen.Berman@gmx.net>.

	* calendar/icalendar.el (top-level): Do not require 'appt.

	* mail/supercite.el (sc-select-attribution): Only use a list
	element from sc-attrib-selection-list if it returns a string.
	Reported by Davide G. M. Salvetti <salve@debian.org>.

2005-05-30  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-thumbname): The resulting thumbname now
	includes a hash value to improve its uniqueness, and has a ".jpg"
	extension.  Also, it is now a valid filename on all systems.
	(thumbs-make-thumb): Use `let', not `let*'.
	(thumbs-show-thumbs-list): Check for JPEG availability.

2005-05-30  Richard M. Stallman  <rms@gnu.org>

	* filesets.el (filesets-menu-ensure-use-cached):
	Prevent warning when emacs-version>= is undefined.

	* printing.el (pr-interactive-n-up): Use string-to-number.

	* emulation/tpu-mapper.el: Use eval-buffer, not eval-current-buffer.

	* emacs-lisp/bytecomp.el (byte-compile-nogroup-warn):
	Warn only when name to be defined is quoted.

2005-05-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-toggle-breakpoint):
	Make regexp more robust.
	(gdb-display-assembler-buffer, gdb-frame-assembler-buffer):
	Force regeneration of disassembly.

2005-05-29  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-user-invocation): Check if
	calc-invocation-macro is non-nil.

2005-05-29  Juri Linkov  <juri@jurta.org>

	* add-log.el (change-log-font-lock-keywords):
	Add `+' to e-mail regexp to accept mail address with keywords.

	* man.el (Man-name-regexp): Add `:' to accept qualified names.

2005-05-29  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp-mode): Use delay-mode-hooks.

	* ielm.el (inferior-emacs-lisp-mode): Ditto.

2005-05-29  Richard M. Stallman  <rms@gnu.org>

	* textmodes/flyspell.el (flyspell-auto-correct-previous-word):
	Undo the change that moves to end of the current word.

2005-05-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-memory-set-repeat-count):
	Throw error when count <= 0 to ensure input is a number.
	(gdb-read-memory-custom): Pick up address from buffer.
	(gdb-memory-mode): Allow user to increment and decrement
	memory address from header line.

2005-05-29  Richard M. Stallman  <rms@gnu.org>

	* flyspell.el (flyspell-version): Function deleted.
	(flyspell-auto-correct-previous-hook): Doc fix.

	* jit-lock.el (jit-lock-function, jit-lock-after-change):
	Do nothing if memory is full.

	* font-lock.el (font-lock-fontify-syntactically-region):
	Pass t for GREEDY to looking-back.

	* saveplace.el (save-place-alist-to-file): Write the file
	using write-region.

	* subr.el (looking-back): New argument GREEDY.

	* progmodes/compile.el (compilation-start): Set the mode
	before inserting the initial text.

	* progmodes/which-func.el (which-func-update-1): Turn the mode
	off in case of error by setting which-func-mode.

2005-05-29  Peter Heslin  <p.j.heslin@durham.ac.uk>  (tiny change)

	* flyspell.el (flyspell-auto-correct-previous-word):
	Narrow down to what's on the screen, and recenter overlays
	at the end of the next word.

2005-05-29  Manuel Serrano  <Manuel.Serrano@sophia.inria.fr>

	* flyspell.el (flyspell-emacs, flyspell-use-local-map): Vars moved up.
	(flyspell-default-delayed-commands): Add backward-delete-char-untabify.
	(flyspell-abbrev-p): Default to nil.
	(flyspell-use-global-abbrev-table-p): Doc fix.
	(flyspell-large-region): Allow nil as value.
	(flyspell-use-meta-tab, flyspell-auto-correct-binding): New variables.

	(mail-mode-flyspell-verify): More robust handling
	of `mail-header-separator'.  More efficient signature detection.
	Allow for regexp metacharacters in message-header-separator.
	Adding `To' not to be checked in mail-mode-flyspell-verify.

	(flyspell-prog-mode): Run flyspell-prog-mode-hook.
	(flyspell-mouse-map): Bind M-TAB only if flyspell-use-meta-tab.
	Bind flyspell-auto-correct-binding.
	Bind C-. and C-, .
	(flyspell-mode-map): Likewise.
	(flyspell-mode): Doc fix.
	(flyspell-accept-buffer-local-defs): Preserve current buffer.
	(flyspell-mode-on): Bind flyspell-mouse-map and flyspell-mode-map.
	(flyspell-word-cache-result): New var, always local.
	(flyspell-check-pre-word-p): Doc fix.
	(flyspell-check-changed-word-p): Handle spc like newline.
	(flyspell-post-command-hook): Set flyspell-word-cache-result.
	(flyspell-word-search-backward, flyspell-word-search-forward):
	New functions.
	(flyspell-word): Return t if nothing to check.
	When parsing TeX code, check for after } or \.
	Use flyspell-word-search-backward to find previous word.
	Return nil if duplicated word.
	For word already checked, return same value as last time.
	Set flyspell-word-cache-result after checking.
	Don't clobber the return value.
	(flyspell-get-word): Major rewrite.
	(flyspell-external-point-words): New locals pword, pcount.
	Fix size used in progress message.
	Find the proper corresponding word in flyspell-large-region-buffer.
	(flyspell-region): Check for flyspell-large-region = nil.
	(flyspell-highlight-incorrect-region): Clean up overlays in region.
	(flyspell-auto-correct-word): Check that WORD is a cons.
	(flyspell-correct-word): Likewise.

2005-05-29  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-rule-action-regex)
	(makefile-macroassign-regex, makefile-makepp-mode)
	(makefile-bsdmake-mode): Continuation lines may be empty.
	Reported by Joshua Varner.
	(makefile-makepp-font-lock-keywords): Add $(stem).

2005-05-28  Karl Berry  <karl@gnu.org>

	* textmodes/tex-mode.el: Now that tex-send-command calls
	shell-quote-argument (2005-03-31 change), remove all calls to
	shell-quote-argument; they all end up invoking tex-send-command.
	The double quoting loses on filenames with non-safe characters,
	such as "@".  Reported by Frederik Fouvry.

2005-05-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-assembler-custom): Be more careful
	about preserving point.

2005-05-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-misc.el (calc-info-goto-node): Use info instead of
	Info-goto-node.

	* calc/calc-embed.el (calc-embed-arg): New variable.
	(calc-do-embedded-activate, calc-embedded-activate-formula)
	(calc-embedded-edit, calc-do-embedded-activate): Replace undeclared
	variable by new variable.
	(calc-embedded-make-info): Replace undeclared variable by new
	variable.  When selecting region with positive prefix
	argument, use end of previous line instead of beginning of line.

	* calc/calc-aent.el (calc-arg-values): Declare it.

	* calc/calc-ext.el (calc-help-map, calc-alg-map, calc-alg-esc-map):
	Declare them.

	* calc/calc-stuff.el (math-decls-cache-tag): Declare it.

	* calc/calc.el (calc-alg-map): Declare it.

	* calc/calcalg2.el (math-decls-cache, math-decls-all): Declare them.

2005-05-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-all-registers): New variable.
	(gdb-registers-buffer, toggle-gdb-all-registers):
	Toggle display of floating point registers.
	(gdb-registers-mode-map): Bind SPC to toggle-gdb-all-registers.

	* progmodes/gud.el (gud-goto-info): Use info.  Don't use require.
	(toggle-gud-tooltip-dereference):
	Rename from gud-toggle-tooltip-dereference.

2005-05-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* info.el (Info-goto-node): Revert autoload addition (2004-06-12).

2005-05-27  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-kbd-report): Remove.
	(calc-kbd-query): Rewrite.

2005-05-27  Juanma Barranquero  <lekktu@gmail.com>

	* image.el (image-library-alist): Move to image.c.
	(image-type-available-p): Doc fix.

2005-05-27  Lute Kamstra  <lute@gnu.org>

	* calc/calc.el (calc):
	* outline.el (outline-1, outline-2, outline-3, outline-4)
	(outline-5, outline-6, outline-7, outline-8):
	* textmodes/dns-mode.el (dns-mode):
	* textmodes/sgml-mode.el (sgml-namespace-face):
	* textmodes/tex-mode.el (superscript, subscript, tex-math-face)
	(tex-verbatim-face, tex-use-reftex):
	* textmodes/texinfo.el (texinfo-heading-face):
	Specify customization group.

	* longlines.el: Don't require easy-mmode.
	(longlines-visible-face): Specify customization group.

2005-05-27  Kenichi Handa  <handa@m17n.org>

	* language/cyrillic.el: Add cyrillic-iso8859-5 characters in the
	encoding table of windows-1251.

	* international/ucs-tables.el (ucs-set-table-for-input):
	If translation-table-for-input of a coding system is a symbol, get
	its translation-table property.

	* international/code-pages.el: Don't register a coding system into
	non-iso-charset-alist more than once.
	(cp-make-coding-system): Likewise.

2005-05-26  John Wiegley  <johnw@newartisans.com>

	* eshell/esh-cmd.el (eshell-eval-command): If the return value of
	`eshell-resume-eval' is wrapped in a list, it indicates that the
	command was run asynchronously.  In that case, unwrap the value
	before checking the delimiter value.

	* eshell/em-cmpl.el (eshell-complete-parse-arguments): If the
	character before a space at the end of a line is \, assume the space
	is part of the last argument rather than a final argument separator.

	* eshell/esh-io.el (eshell-get-target): If `eshell-buffer-shorthand'
	is in use, and the target is `t' or `nil' (which are the most common
	values), don't assume that the symbol target is a buffer.

2005-05-26  Luc Teirlinck  <teirllm@auburn.edu>

	* calendar/calendar.el (calendar-mode-line-format):
	Use mode-line-highlight as mouse-face.

	* time.el (display-time-string-forms, display-time-update):
	Use mode-line-highlight as mouse-face.

2005-05-26  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-language-alist): Remove extra defvar.

2005-05-26  Lute Kamstra  <lute@gnu.org>

	* arc-mode.el (archive-mode):
	* bookmark.el (bookmark-read-annotation-mode)
	(bookmark-edit-annotation-mode, bookmark-bmenu-mode):
	* bs.el (bs-mode):
	* calc/calc-yank.el (calc-edit-mode):
	* calc/calc.el (calc-mode, calc-trail-mode):
	* calculator.el (calculator-mode):
	* chistory.el (command-history-mode):
	* comint.el:
	* cus-edit.el (custom-mode):
	* descr-text.el (describe-text-mode):
	* ebuff-menu.el (Electric-buffer-menu-mode):
	* ediff-util.el (ediff-mode):
	* emacs-lisp/re-builder.el (reb-mode):
	* emulation/vi.el (vi-mode-setup):
	* emulation/ws-mode.el (wordstar-mode):
	* eshell/esh-mode.el (eshell-mode):
	* forms.el (forms-mode):
	* help-mode.el (help-mode):
	* hexl.el (hexl-mode):
	* ibuffer.el (ibuffer-mode):
	* ielm.el (inferior-emacs-lisp-mode):
	* info.el (Info-mode, Info-edit-mode):
	* international/swedish.el:
	* ledit.el (ledit-from-lisp-mode):
	* locate.el (locate-mode):
	* mail/rmail.el (rmail-mode):
	* mail/rmailedit.el (rmail-edit-mode):
	* mail/rmailsum.el (rmail-summary-mode):
	* mail/supercite.el (sc-electric-mode):
	* net/eudc.el (eudc-mode):
	* net/quickurl.el (quickurl-list-mode):
	* net/snmp-mode.el (snmp-mode, snmpv2-mode):
	* obsolete/ooutline.el (outline-mode):
	* obsolete/options.el (Edit-options-mode):
	* obsolete/rnews.el (news-mode):
	* obsolete/rnewspost.el (news-reply-mode):
	* play/5x5.el (5x5-mode):
	* play/decipher.el (decipher-mode, decipher-stats-mode):
	* play/gomoku.el (gomoku-mode):
	* play/snake.el (snake-mode):
	* play/solitaire.el (solitaire-mode):
	* play/tetris.el (tetris-mode):
	* progmodes/ada-mode.el (ada-mode):
	* progmodes/antlr-mode.el (antlr-mode):
	* progmodes/autoconf.el (autoconf-mode):
	* progmodes/dcl-mode.el (dcl-mode):
	* progmodes/delphi.el (delphi-mode):
	* progmodes/ebrowse.el (ebrowse-tree-mode)
	(ebrowse-electric-list-mode, ebrowse-member-mode)
	(ebrowse-electric-position-mode):
	* progmodes/f90.el (f90-mode):
	* progmodes/fortran.el (fortran-mode):
	* progmodes/icon.el (icon-mode):
	* progmodes/idlw-help.el (idlwave-help-mode):
	* progmodes/idlw-shell.el (idlwave-shell-mode):
	* progmodes/idlwave.el (idlwave-mode):
	* progmodes/inf-lisp.el (inferior-lisp-mode):
	* progmodes/m4-mode.el (m4-mode):
	* progmodes/meta-mode.el (metafont-mode, metapost-mode):
	* progmodes/modula2.el (modula-2-mode):
	* progmodes/octave-inf.el (inferior-octave-mode):
	* progmodes/octave-mod.el (octave-mode):
	* progmodes/pascal.el (pascal-mode):
	* progmodes/sh-script.el (sh-mode):
	* progmodes/sql.el (sql-mode, sql-interactive-mode):
	* progmodes/vhdl-mode.el (vhdl-mode):
	* progmodes/xscheme.el (scheme-interaction-mode):
	* replace.el (occur-mode):
	* ses.el (ses-mode):
	* simple.el (completion-list-mode):
	* skeleton.el:
	* speedbar.el (speedbar-mode):
	* term.el (term-mode):
	* terminal.el (terminal-edit-mode):
	* textmodes/reftex-index.el (reftex-index-mode)
	(reftex-index-phrases-mode):
	* textmodes/reftex-sel.el (reftex-select-label-mode)
	(reftex-select-bib-mode):
	* textmodes/reftex-toc.el (reftex-toc-mode):
	* wdired.el (wdired-change-to-wdired-mode):
	* wid-browse.el (widget-browse-mode):
	Use run-mode-hooks.

	* array.el (array-mode):
	* calendar/todo-mode.el (todo-mode):
	* man.el (Man-mode):
	* play/landmark.el (lm-mode):
	* play/mpuz.el (mpuz-mode):
	Use kill-all-local-variables and run-mode-hooks.

	* subr.el (delay-mode-hooks): Specify indentation.

2005-05-26  Mark A. Hershberger  <mah@everybody.org>

	* xml.el (xml-substitute-special): Don't die for undefined xml
	entities.

2005-05-26  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-user-define-edit): Don't find substring
	of nil.

2005-05-27  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-frame-address):
	Rename from gdb-current-address.
	(gdb-previous-frame-address): Rename from gdb-previous-address.
	(gdb-selected-frame): Rename from gdb-current-frame.
	(gdb-get-selected-frame): Rename from gdb-get-current-frame.
	(gdb-frame-number): Rename from gdb-current-stack-level.
	(gdb-ann3): Match new mode-name for disassembly buffer.
	Extend initialization of variables.
	(gdb-post-prompt): Update disassembly from gdb-frame-handler.
	(gdb-memory-mode): Use mouse-face in header line.
	(gdb-assembler-buffer-name): Call it disassembly and give frame
	in mode line.
	(gdb-source-spec-regexp, gdb-assembler-custom)
	(gdb-invalidate-assembler, gdb-frame-handler):
	Make robust to leading zeroes in address format.

2005-05-26  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-mode): Use `define-derived-mode' to
	define `org-mode'.
	(org-agenda-mode): Use `run-mode-hooks' instead of `run-hooks'.

2005-05-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-edit.el (log-edit-changelog-entries): Distinguish between
	filenames like xfns.c and fns.c.

2005-05-25  Luc Teirlinck  <teirllm@auburn.edu>

	* buff-menu.el (Buffer-menu-revert-function): Improve handling of
	point after reverting.
	(Buffer-menu-make-sort-button): Handle the case where
	`Buffer-menu-use-header-line' is nil.

2005-05-25  Thien-Thi Nguyen  <ttn@gnu.org>

	* vms-patch.el (vms-magic-right-square-brace, vms-magic-colon):
	New funcs.  In minibuffer-local-completion-map bind `]', `/'
	and `:' to them.

2005-05-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* startup.el (normal-top-level): Allow modification of load-path while
	we're iterating over it.

2005-05-25  Juanma Barranquero  <lekktu@gmail.com>

	* thumbs.el (thumbs-thumbsdir-max-size, thumbs-temp-file)
	(thumbs-cleanup-thumbsdir, thumbs-call-convert)
	(thumbs-resize-interactive, thumbs-insert-image)
	(thumbs-insert-thumb, thumbs-dired-show-marked)
	(thumbs-find-image-at-point, thumbs-delete-images)
	(thumbs-rename-images, thumbs-next-image, thumbs-dired-setroot)
	(thumbs-increment-image-size, thumbs-decrement-image-size):
	Fix typos in docstrings.

2005-05-24  Andre Spiegel  <spiegel@gnu.org>

	* progmodes/cperl-mode.el (cperl-vc-header-alist): Obsolete.
	(cperl-vc-rcs-header, cperl-vc-sccs-header): New user options.
	(cperl-mode): Use them.

2005-05-24  Juanma Barranquero  <lekktu@gmail.com>

	* window.el (quit-window, shrink-window-if-larger-than-buffer):
	Doc fixes.

2005-05-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-inferior-io-mode-map):
	Bind C-d to gdb-inferior-io-eof.

	* dired.el (dired-dnd-popup-notice): Use message-box.

2005-05-23  Masatake YAMATO  <jet@gyve.org>

	* bindings.el (mode-line-major-mode-keymap):
	Bind [mode-line down-mouse-1] to `mouse-major-mode-menu'.

	* faces.el (mode-line-highlight): New face.

	* ruler-mode.el (ruler-mode-ruler): Use mode-line-highlight
	as mouse-face.

	* bindings.el (top-level, help-echo, mode-line-modified)
	(mode-line-mule-info, mode-line-eol-desc): Use mode-line-highlight
	as mouse-face.

2005-05-23  Juanma Barranquero  <lekktu@gmail.com>

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	Remove spurious call to `zerop'.

	* emacs-lisp/cl.el (acons, pairlis): Add docstring.

2005-05-23  Martin Stjernholm  <bug-cc-mode@gnu.org>

	CC Mode update to 5.30.10:

	* cc-fonts.el (c-font-lock-declarators): Fix bug where the point
	could go past the limit in decoration level 2, thereby causing
	errors during interactive fontification.

	* cc-mode.el (c-make-inherited-keymap): Fix cc-bytecomp bug when
	the file is evaluated interactively.

	* cc-engine.el (c-guess-basic-syntax): Handle operator
	declarations somewhat better in C++.

	* cc-styles.el, cc-mode.el (c-run-mode-hooks): New helper macro to
	make use of `run-mode-hooks' which has been added in Emacs 21.1.
	(c-mode, c++-mode, objc-mode, java-mode, idl-mode, pike-mode)
	(awk-mode): Use it.
	(make-local-hook): Suppress warning about obsoleteness.

	* cc-engine.el, cc-align.el, cc-cmds.el
	(c-append-backslashes-forward, c-delete-backslashes-forward)
	(c-find-decl-spots, c-semi&comma-no-newlines-before-nonblanks):
	Compensate for return value from `forward-line' when it has moved
	but not to a different line due to eob.

	* cc-engine.el (c-guess-basic-syntax): Fix anchoring in
	`objc-method-intro' and `objc-method-args-cont'.

2005-05-23  Alan Mackenzie  <bug-cc-mode@gnu.org>

	CC Mode update to 5.30.10:

	* cc-mode.el, cc-engine.el, cc-align.el: Change the FSF's address
	in the copyright statement.  Incidentally, change "along with GNU
	Emacs" to "along with this program" where it occurs.

	* cc-mode.el: Add a fourth parameter `t' to the awk-mode autoload,
	so that it is interactive, hence can be found by M-x awk-mode
	whilst cc-mode is yet to be loaded.  Reported by Glenn Morris
	<gmorris+emacs@ast.cam.ac.uk>.

	* cc-awk.el: Add character classes (e.g. "[:alpha:]") into AWK
	Mode's regexps.

2005-05-23  Kevin Ryde  <user42@zip.com.au>

	* cc-align.el (c-lineup-argcont): Ignore conses for {} pairs from
	c-parse-state, to avoid a lisp error (on bad code).

2005-05-23  Lute Kamstra  <lute@gnu.org>

	* subr.el (font-lock-defaults): Remove defvar as it's already
	defined in font-core.el.

	* font-lock.el (font-lock-beginning-of-syntax-function): Fix docstring.

2005-05-23  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-locals-handler): Make regexps
	more general and work when GDB variable "print pretty" is on,
	as with Emacs, for example.

2005-05-22  Luc Teirlinck  <teirllm@auburn.edu>

	* font-core.el: Update comment.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode):
	Use `after-change-major-mode-hook' instead of `find-file-hook'.

	* buff-menu.el (Buffer-menu-mode): Use `run-mode-hooks'.

2005-05-22  Eli Zaretskii  <eliz@gnu.org>

	* simple.el (yank, yank-pop): Mention `yank-excluded-properties'
	and `yank-handler' in the doc strings.

2005-05-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/cl.el (eql): Remove.  It's a builtin already.

2005-05-22  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key): Move print-help-return-message call
	out of conditional.

	* progmodes/etags.el (list-tags): Use with-no-warnings.

	* mail/smtpmail.el (smtpmail-open-stream): Use with-no-warnings.
	(smtpmail-send-queued-mail): Avoid beginning-of-buffer.
	(starttls-extra-args, starttls-extra-arguments): Add defvars.

	* mail/mailalias.el (mail-get-names): Avoid beginning-of-buffer.

	* language/viet-util.el (viet-viscii-nonascii-translation-table):
	Add defvar.

	* emulation/viper-ex.el (viper-ex-work-buf, viper-ex-print-buf):
	Use defvar, not defconst.

	* hexl.el (hexl-follow-line): Use with-no-warnings.

	* emulation/tpu-extras.el: Use write-file-functions instead of
	write-file-hooks.

	* dired.el (dired-font-lock-keywords): Fontify files with junk
	extensions even if marked by -F.

2005-05-22  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl.el (pushnew, cl-macroexpand, floatp-safe, plusp)
	(minusp, oddp, evenp, mapcar*, list*, copy-list, adjoin, subst):
	* emacs-lisp/cl-extra.el (coerce, map, maplist, cl-mapc, mapl)
	(mapcan, mapcon, some, every, notany, notevery, signum, isqrt)
	(concatenate, list-length, get*, getf, cl-remprop):
	* emacs-lisp/cl-macs.el (function*, case, ecase, typecase)
	(etypecase, progv, lexical-let, lexical-let*)
	(multiple-value-bind, multiple-value-setq, shiftf):
	Improve argument/docstring consistency.

	* subr.el (focus-frame, unfocus-frame):
	Revert deletion on 2005-05-01.

2005-05-22  Andre Spiegel  <spiegel@gnu.org>

	* vc-cvs.el (vc-cvs-checkout-model): Handle the case where FILE
	doesn't exist.

	* vc.el (vc-trunk-p): Add autoload cookie.  The function is used in
	vc-rcs.el when vc-mistrust-permissions is t, which is not the default.

2005-05-22  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/bytecomp.el: Remove make-obsolete-variable for
	already deleted variables: auto-fill-hook, blink-paren-hook,
	lisp-indent-hook, inhibit-local-variables, unread-command-event,
	suspend-hooks, comment-indent-hook, meta-flag,
	before-change-function, after-change-function,
	font-lock-doc-string-face.

2005-05-21  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/derived.el (define-derived-mode): Doc fix.

2005-05-21  Eli Zaretskii  <eliz@gnu.org>

	* mail/rmail.el (rmail-reply): Filter the list in reply-to through
	rmail-dont-reply-to.

2005-05-21  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/sendmail.el (mail-send): Use [[:space:]] instead of a
	literal blank when splitting new-header-values.

2005-05-21  Matt Hodges  <MPHodges@member.fsf.org>

	* calendar/cal-menu.el (cal-menu-update): Add separator as a
	string so that tmm doesn't create a completion entry for it.

	* textmodes/table.el (table-disable-menu): Ditto.

2005-05-21  Richard M. Stallman  <rms@gnu.org>

	* progmodes/idlwave.el (idlwave-doc-header): Use insert-file-contents.

	* progmodes/flymake.el (flymake-makehash): Use with-no-warnings.

	* net/rcompile.el (remote-compile): Use compilation-start.

	* tmm.el (tmm-shortcut): Avoid using beginning-of-buffer.

2005-05-21  Daniel Pfeiffer  <occitan@esperanto.org>

	* files.el (auto-mode-alist): Check GNUmakefile before makefile.
	Default to makefile-bsdmake-mode on BSD systems.

	* imenu.el (imenu-generic-expression, imenu--generic-function'):
	REGEXP may also be a search function now.  The part of doc-string
	for describing the structure was 95% identical to that of
	`imenu--generic-function'.  Unify it there.

	* progmodes/make-mode.el (makefile-imenu-generic-expression):
	Use function to find dependencies, because regexp alone is so complex,
	it easily goes into an endless loop.
	(makefile-makepp-mode): Also add submenu for Perl functions
	defined in the makefile.
	(makefile-bsdmake-mode): Special imenu-generic-expression no
	longer needed, due to function call.
	(makefile-match-dependency): Take BOUND into account when checking
	if we're through.

2005-05-20  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (calc-invalidate-units-table):
	Use inhibit-read-only.
	(math-build-units-table-buffer): Use view-mode.

2005-05-20  David Kastrup  <dak@gnu.org>

	* emacs-lisp/easymenu.el (easy-menu-add): Correct docstring since
	easy-menu-add is not a nop on Emacs; and clarify when to call it.

2005-05-20  Lute Kamstra  <lute@gnu.org>

	* diff-mode.el (diff-header-face, diff-file-header-face)
	(diff-index-face, diff-hunk-header-face, diff-removed-face)
	(diff-added-face, diff-changed-face, diff-function-face)
	(diff-context-face, diff-nonexistent-face): Put them in the
	diff-mode customization group.

2005-05-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/vhdl-mode.el (vhdl-font-lock-match-item): Simplify regexp.

	* progmodes/sh-script.el (sh-mode, sh-get-word): Minor regexp fixes.

	* font-lock.el (lisp-font-lock-keywords-2): Don't error.
	Minor regexp-optimization.

2005-05-20  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-toggle-time-grid): New command.
	(org-agenda-use-time-grid, org-agenda-time-grid): New options.
	(org-agenda-add-time-grid-maybe): New function.
	(org-agenda): Call `org-agenda-add-time-grid-maybe'.
	(org-table-create): `dotimes' instead of `mapcar'.
	(org-xor): Simplify implementation.
	(org-agenda): `inhibit-redisplay' turned on.
	(org-agenda-change-all-lines): Use `org-format-agenda-item' to get
	a consistent line after a state change.
	(org-agenda-remove-times-when-in-prefix): New option.
	(org-prefix-has-time): New variable.
	(org-parse-time-string): Optional argument NODEFAULT.
	(org-format-agenda-item): Parse items for time-of-day
	specifications and move these into the prefix if possible.
	(org-agenda-priority): Get current heading, not previous heading
	during agenda remote editing.

2005-05-20  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl-seq.el (reduce, fill, replace, remove*)
	(remove-if, remove-if-not, delete*, delete-if, delete-if-not)
	(remove-duplicates, delete-duplicates, substitute)
	(substitute-if, substitute-if-not, nsubstitute, nsubstitute-if)
	(nsubstitute-if-not, find, find-if, find-if-not, position)
	(position-if, position-if-not, count, count-if, count-if-not)
	(mismatch, search, sort*, stable-sort, merge, member*)
	(member-if, member-if-not, assoc*, assoc-if, assoc-if-not)
	(rassoc*, rassoc-if, rassoc-if-not, union, nunion)
	(intersection, nintersection, set-difference, nset-difference)
	(set-exclusive-or, nset-exclusive-or, subsetp, subst-if)
	(subst-if-not, nsubst, nsubst-if, nsubst-if-not, sublis)
	(nsublis, tree-equal): Improve argument/docstring consistency.

	* subr.el (send-string, send-region):
	Remove obsolescence declaration.
	(window-dot, set-window-dot, read-input, show-buffer)
	(eval-current-buffer, string-to-int):
	Add release number to obsolescence declarations.

2005-05-19  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-magic-forward-char): Enter ido-find-file at end of input.
	(ido-magic-backward-char): Enter ido-switch-buffer at start of input.

2005-05-20  Matt Hodges  <MPHodges@member.fsf.org>

	* faces.el (list-faces-display): Make back button respect optional
	regexp arg.

2005-05-19  Juanma Barranquero  <lekktu@gmail.com>

	* calculator.el (calculator-radix-grouping-mode)
	(calculator-radix-grouping-digits, calculator-displayer)
	(calculator-radix-grouping-separator, calculator-copy-displayer):
	* dabbrev.el (dabbrev-search-these-buffers-only):
	* diff-mode.el (diff-jump-to-old-file, diff-update-on-the-fly)
	(diff-advance-after-apply-hunk, diff-mode-hook)
	(diff-minor-mode-prefix):
	* imenu.el (imenu-use-popup-menu):
	* jit-lock.el (jit-lock-context-time):
	* newcomment.el (comment-fill-column, comment-column)
	(comment-style, comment-padding, comment-multi-line)
	(comment-empty-lines, comment-auto-fill-only-comments):
	* reveal.el (reveal-around-mark):
	* uniquify.el (uniquify-buffer-name-style)
	(uniquify-after-kill-buffer-p)
	(uniquify-ask-about-buffer-names-p, uniquify-ignore-buffers-re)
	(uniquify-min-dir-content, uniquify-separator)
	(uniquify-trailing-separator-p, uniquify-strip-common-suffix):
	* w32-vars.el (w32-fixed-font-alist):
	* emacs-lisp/testcover.el (testcover-potentially-1value-functions):
	* obsolete/rsz-mini.el (resize-minibuffer-frame-max-height):
	* progmodes/antlr-mode.el (antlr-font-lock-maximum-decoration):
	* progmodes/perl-mode.el (perl-indent-level)
	(perl-continued-statement-offset, perl-continued-brace-offset)
	(perl-brace-offset, perl-brace-imaginary-offset)
	(perl-label-offset, perl-indent-continued-arguments)
	(perl-tab-always-indent, perl-tab-to-comment, perl-nochange):
	* progmodes/tcl.el (tcl-indent-level)
	(tcl-continued-indent-level, tcl-auto-newline)
	(tcl-tab-always-indent, tcl-electric-hash-style)
	(tcl-help-directory-list, tcl-use-smart-word-finder)
	(tcl-application, tcl-command-switches, tcl-prompt-regexp)
	(inferior-tcl-source-command):
	* textmodes/fill.el (enable-kinsoku):
	* textmodes/reftex-vars.el (reftex-index-phrases-wrap-long-lines):
	* textmodes/table.el (table-yank-handler):
	Specify missing group (and type, if simple) in defcustom.

2005-05-19  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/compile.el (compilation-finish-function): Fix defvar.

2005-05-19  Richard M. Stallman  <rms@gnu.org>

	* progmodes/make-mode.el (makefile-mode): Use run-mode-hooks.

	* subr.el (event-basic-type): Don't get an error.
	(left-fringe-p): Function deleted.

	* buff-menu.el (Buffer-menu-buffer-face): In group Buffer-menu.
	(list-buffers-noselect): Set `font-lock-face' property, not `face'.

	* dired-aux.el (dired-copy-file-recursive): Handle symlinks
	in recursive copy.

	* frame.el (show-trailing-whitespace): In group `whitespace-faces'.

	* emacs-lisp/byte-run.el (eval-when-compile): Doc fix.

	* emacs-lisp/bytecomp.el
	(byte-compile-file-form-custom-declare-variable): Call
	byte-compile-nogroup-warn if appropriate.

	* progmodes/compile.el (compilation-finish-function): Mark obsolete.
	(compilation-set-window): Don't call left-fringe-p; do it directly.

2005-05-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-graph.el (calc-graph-format-data): Make sure
	var-PlotRejects is bound before trying to check its value.

2005-05-19  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex.el (reftex-isearch-minor-mode): Move the
	definition of this variable from reftex-global.el to reftex.el,
	because it is needed in the menu.

2005-05-19  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/copyright.el (copyright-fix-years): Make sure all
	years are fixed.  Don't insert a space after a dash.

2005-05-19  Kim F. Storm  <storm@cua.dk>

	* emulation/crisp.el (crisp-home, crisp-end): Put CUA property.

2005-05-19  Daniel Pfeiffer  <occitan@esperanto.org>

	* font-lock.el (lisp-font-lock-keywords-2): Do \\) only in
	strings, because (eq ... ?\\) is fairly frequent.

	* progmodes/make-mode.el (makefile-add-this-line-targets):
	Simplify and integrate into `makefile-pickup-targets'.
	(makefile-add-this-line-macro): Simplify and integrate into
	`makefile-pickup-macros.
	(makefile-pickup-filenames-as-targets): Simplify.
	(makefile-previous-dependency, makefile-match-dependency):
	Don't stumble over `::'.

2005-05-19  Nick Roberts  <nickrob@snap.net.nz>

	* subr.el (post-command-idle-hook, post-command-idle-delay):
	Remove obsoletion of post-command-idle-hook and
	post-command-idle-delay.

	* faces.el (list-faces-display): Provide button when describe-face
	is called to take user back to the list of faces.

	* help-fns.el (describe-variable): Remove hyperlinks in a
	variable's value as these are quite frequently inappropriate.

	* follow.el (follow-submit-feedback, follow-mode):
	Remove references to post-command-idle-hook.

2005-05-18  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-previous-dependency)
	(makefile-match-dependency): Check for := (and in bsd mode also
	!=) to give a better result, even when font-lock is not on.

2005-05-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-s-prefix-help):
	Add `calc-copy-special-constant' to help string.

2005-05-18  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/eldoc.el (eldoc-mode): Doc fix.

2005-05-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc-poly.el (math-factor-poly-coefs): Make sure the terms
	in linear factors are in proper order.

2005-05-18  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-vars.el (reftex-cite-format-builtin):
	Support for jurabib.

	* textmodes/reftex.el (featurep): Define aliases for overlay
	commands, for XEmacs compatibility, and use these aliases in
	overlay initializations.
	(reftex-highlight): Use `reftex-move-overlay'.
	(reftex-unhighlight): Use `reftex-delete-overlay'.
	(reftex-uniq): Function removed.  Use `reftex-uniquify' instead.
	(reftex-access-search-path): Use `reftex-uniquify' instead of
	`reftex-uniq'

	* textmodes/reftex-sel.el (reftex-select-unmark): Overlay
	`before-string' property modification enables for Emacs as well.
	(reftex-select-item): Use `reftex-delete-overlay'.
	(reftex-select-mark): Use `reftex-make-overlay' and
	`reftex-overlay-put'.
	(reftex-select-unmark): Use `reftex-delete-overlay' and
	`reftex-overlay-put'.

2005-05-18  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/lisp.el (check-parens): Fix docstring.

2005-05-18  Juanma Barranquero  <lekktu@gmail.com>

	* add-log.el (add-change-log-entry):
	* array.el (array-make-template, array-reconfigure-rows)
	(array-init-max-row, array-init-max-column)
	(array-init-columns-per-line, array-init-field-width):
	* replace.el (replace-match-maybe-edit, perform-replace):
	* textmodes/spell.el (spell-region):
	Replace `read-input' by `read-string'.

	* forms.el (forms-mode):
	* finder.el (finder-compile-keywords):
	* shadowfile.el (shadow-read-files):
	Replace `eval-current-buffer' by `eval-buffer'.

	* terminal.el (te-pass-through):
	* net/ange-ftp.el (ange-ftp-process-filter, ange-ftp-gwp-filter)
	(ange-ftp-raw-send-cmd):
	* net/telnet.el (telnet-interrupt-subjob, telnet-c-z)
	(send-process-next-char, telnet-initial-filter, telnet):
	Replace `send-string' by `process-send-string'.

	* progmodes/prolog.el (inferior-prolog-mode): Doc fix.
	(prolog-consult-region): Replace `send-string' by
	`process-send-string'; replace `send-region' by `process-send-region'.

	* progmodes/delphi.el (delphi-log-msg):
	Replace `set-window-dot' by `set-window-point'.

	* subr.el (window-dot, set-window-dot, read-input, send-string)
	(send-region, show-buffer, eval-current-buffer):
	Make really obsolete, as the comment says.

2005-05-17  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-use-hyper-key): Doc fix.
	(cua--init-keymaps): Bind C-return instead of S-return to set
	rectangle mark.

	* emulation/cua-rect.el (cua--init-rectangles): Bind C-return
	instead of S-return to toggle/clear rectangle mark.

2005-05-17  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-dependency-skip): New variable.
	(makefile-macroassign-regex, makefile-make-font-lock-keywords):
	Also fontify plain strings assigned to variables, mostly so that a
	colon has a face and is thus not taken as a dependency separator.
	(makefile-previous-dependency): Inline the new matcher, because it
	is too complex to work in both directions.
	(makefile-match-dependency): Eliminate `backward' arg (see above).
	Completely reimplemented so as to not sometimes go into an endless
	loop.  It should also be more efficient, because first it only
	searches for `:', instead of applying the very complex regexp.
	(makefile-mode): Cancel `font-lock-support-mode', because blocks
	to be fontified in one piece can be too long for JIT.
	Makefiles are never *that* big.

2005-05-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* dired.el (dired-mode): Simplify.

2005-05-17  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Don't generate a
	defcustom for the mode hook variable.

	* emacs-lisp/authors.el (authors): Do parse the ChangeLogs of the
	Emacs Lisp Reference Manual.

2005-05-17  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl.el (eql, floatp-safe, plusp, minusp, oddp)
	(evenp, list*):
	* emacs-lisp/cl-macs.el (macrolet, symbol-macrolet):
	* emacs-lisp/cl-seq.el (subsetp, tree-equal): Doc fixes.

	* net/tramp-smb.el (tramp-smb-open-connection):
	Pass `tramp-chunksize' as fifth (required) argument.

2005-05-16  Daniel Pfeiffer  <occitan@esperanto.org>

	* font-lock.el (lisp-font-lock-keywords-1):
	Set `font-lock-negation-char-face' for [^...] char group.
	(lisp-font-lock-keywords-2): Highlight regexp's \\( \\| \\).

	* progmodes/make-mode.el (makefile-dependency-regex): Turn it into
	a var, and refine it to mask one more level of nested vars.
	(makefile-rule-action-regex): Turn it into a var, and refine it so
	it recognizes backslashed continuation lines as belonging to the
	same command.
	(makefile-macroassign-regex): Refine it so it recognizes
	backslashed continuation lines as belonging to the same command.
	(makefile-var-use-regex): Don't look at the next char, because it
	might be the same one to be skipped by the initial [^$], leading
	to an overlooked variable use.
	(makefile-make-font-lock-keywords): Remove two parameters, which
	are now variables that some of the modes set locally.
	Handle dependency and rule action matching through functions, because
	regexps alone match too often.  Dependency matching now comes
	last, so it can check, whether a colon already matched something else.
	(makefile-mode): Inform that font-lock improves makefile parsing
	capabilities.
	(makefile-match-dependency, makefile-match-action): New functions.

2005-05-16  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/cl-extra.el (equalp): Doc fix.

	* align.el (align-regexp):
	* ansi-color.el (ansi-color-get-face):
	* array.el (array-reconfigure-rows, array-init-max-row)
	(array-init-max-column, array-init-columns-per-line)
	(array-init-field-width):
	* dired-aux.el (dired-trample-file-versions):
	* dired-x.el (dired-mark-sexp):
	* ediff-diff.el (ediff-extract-diffs, ediff-get-diff3-group):
	* edmacro.el (edmacro-finish-edit, edmacro-parse-keys):
	* emerge.el (emerge-extract-diffs, emerge-get-diff3-group):
	* faces.el (face-read-integer):
	* files.el (backup-extract-version, insert-directory):
	* hexl.el (hexl-insert-decimal-char):
	* server.el (server-process-filter):
	* shell.el (shell-extract-num):
	* startup.el (command-line-1):
	* term.el (term-command-hook):
	* time-stamp.el (time-stamp, time-stamp-string-preprocess)
	(time-stamp-do-number):
	* time.el (display-time-update):
	* timezone.el (timezone-parse-date, timezone-zone-to-minute)
	(timezone-fix-time):
	* vms-patch.el (vms-suspend-resume-hook):
	* calendar/appt.el (appt-convert-time):
	* calendar/cal-bahai.el (mark-bahai-diary-entries):
	* calendar/cal-hebrew.el (mark-hebrew-diary-entries):
	* calendar/cal-islam.el (mark-islamic-diary-entries):
	* calendar/calendar.el (calendar-cursor-to-date)
	(calendar-star-date):
	* calendar/diary-lib.el (diary-attrtype-convert)
	(mark-diary-entries, diary-entry-time):
	* calendar/solar.el (solar-get-number):
	* emacs-lisp/lisp-mnt.el (lm-last-modified-date):
	* emacs-lisp/re-builder.el (reb-display-subexp):
	* emulation/edt.el (edt-set-scroll-margins):
	* emulation/tpu-extras.el (tpu-set-scroll-margins):
	* emulation/vip.el (vip-get-ex-token, vip-get-ex-buffer)
	(vip-get-ex-count):
	* emulation/viper-ex.el (viper-get-ex-token)
	(viper-get-ex-buffer, viper-get-ex-count, ex-next):
	* international/fontset.el (fontset-plain-name):
	* mail/feedmail.el (feedmail-look-at-queue-directory):
	* mail/mailalias.el (mail-get-names):
	* mail/rmail.el (rmail-convert-to-babyl-format):
	* mail/rmailsum.el (rmail-make-basic-summary-line)
	(rmail-summary-next-same-subject, rmail-summary-rmail-update)
	(rmail-summary-goto-msg):
	* mail/smtpmail.el (smtpmail-read-response):
	* net/ange-ftp.el (ange-ftp-guess-hash-mark-size)
	(ange-ftp-vms-add-file-entry):
	* play/gametree.el (gametree-looking-at-ply)
	(gametree-current-branch-score):
	* progmodes/ada-xref.el (ada-prj-find-prj-file)
	(ada-xref-find-in-modified-ali, ada-find-in-src-path):
	* progmodes/cperl-mode.el (condition-case):
	* progmodes/ebrowse.el (ebrowse-set-tree-indentation)
	(ebrowse-set-member-buffer-column-width)
	(ebrowse-select-1st-to-9nth):
	* progmodes/etags.el (etags-snarf-tag):
	* progmodes/flymake.el (flymake-parse-line):
	* progmodes/idlw-shell.el (idlwave-shell-parse-line)
	(idlwave-shell-filter-bp, idlwave-shell-goto-next-error)
	(idlwave-shell-menu-def):
	* progmodes/ps-mode.el (ps-run-goto-error):
	* progmodes/vhdl-mode.el (vhdl-read-offset, vhdl-load-cache)
	(vhdl-speedbar-contract-level):
	* term/mac-win.el (x-handle-numeric-switch):
	* term/sun-mouse.el (sun-get-frame-data):
	* term/w32-win.el (x-handle-numeric-switch):
	* term/x-win.el (x-handle-numeric-switch):
	* textmodes/ispell.el (ispell-parse-output):
	* textmodes/nroff-mode.el (nroff-outline-level):
	* textmodes/reftex-cite.el (reftex-bib-sort-year)
	(reftex-bib-sort-year-reverse, reftex-format-citation):
	* textmodes/reftex-parse.el (reftex-init-section-numbers)
	(reftex-section-number):
	* textmodes/texinfmt.el (texinfo-paragraphindent):
	Replace `string-to-int' by `string-to-number'.

	* international/latexenc.el: Add page marker to force the "Local
	Variables:" string out of the last page.

2005-05-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-tooltip-mode): Add gud prefix to
	tooltip-change-major-mode.
	(gud-tooltip-print-command): Remove case where gud-minor-mode
	is gdb ("--fullname").
	(gud-tooltip-tips): Turn GUD tooltips off for this case and
	explain to user.

2005-05-16  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-copy-special-constant): New function.

	* calc/calc-ext.el (calc-init-extensions): Add binding for
	`calc-copy-special-constant'.

	* calc/calc-prog.el (calc-edit-format-macro-buffer): Add a case
	for the `calc-copy-special-constant' command.

2005-05-16  Nick Roberts  <nickrob@snap.net.nz>

	* subr.el (left-fringe-p): New function.

	* progmodes/compile.el (compilation-setup): Set local value of
	overlay-arrow-string to "" always.
	(compilation-set-window): Left fringe then don't scroll.
	No left fringe then no arrow and scroll message to top.
	(compilation-context-lines): Adjust doc string accordingly.

2005-05-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-magic-forward-char, ido-magic-backward-char)
	(ido-magic-delete-char): New commands for C-f, C-b, C-d.
	(ido-wide-find-dir-or-delete-dir): New command for M-d.
	(ido-define-mode-map): Bind them.  Add C-x prefix to fallback commands.
	(ido-read-file-name): Handle commands with ido property value
	equal to find-file as reading a file name, to allow C-d to enter dired.
	(ibuffer-find-file): Add ido property with value find-file.

2005-05-15  Kim F. Storm  <storm@cua.dk>

	* subr.el (open-network-stream-nowait): Remove.
	(open-network-stream-server): Remove.

2005-05-15  Richard M. Stallman  <rms@gnu.org>

	* faces.el (describe-face): Output a definition link button.

	* help-mode.el (help-face-def): New button type.

	* emacs-lisp/copyright.el (copyright-fix-years):
	Match properly if the first year is 2-digit.
	Don't mess up the whitespace after the years by filling.

	* dired-aux.el (dired-mark-confirm):
	Pass t to dired-get-marked-files for DISTINGUISH-ONE-MARKED.

	* dired.el (dired-map-over-marks): New arg DISTINGUISH-ONE-MARKED.
	(dired-get-marked-files): New arg DISTINGUISH-ONE-MARKED.
	(dired-mark-pop-up): Handle FILES = (t FILE) specially.

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Set font-lock-comment-start-skip.

	* font-lock.el (font-lock-comment-start-skip): New variable.
	(font-lock-comment-end-skip): New variable.
	(font-lock-fontify-syntactically-region): Use them if non-nil.

2005-05-15  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-store-value): Return a string rather
	than display it as a message.
	Use calc-var-name for variable name.
	(calc-store-into): Add the result of calc-store-value to message.
	(calc-copy-variable): Add a message.
	(calc-store-exchange): Improve error messages.
	(calc-store-binary, calc-store-map): Don't reset the values of
	special constants.

2005-05-14  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/derived.el (define-derived-mode): Add link to Elisp
	manual to docstring.

	* files.el (hack-local-variables-confirm): Add STRING argument.
	Make the function handle non file visiting buffers correctly.
	(hack-local-variables-prop-line, hack-local-variables)
	(hack-one-local-variable): Use STRING arg of
	`hack-local-variables-confirm'.

2005-05-14  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.49.

	* tramp.el (tramp-handle-dired-call-process)
	(tramp-handle-insert-directory):`insert-buffer' cannot be used
	because the contents of the Tramp buffer is changed before
	insertion (`expand-file' and alike).
	(tramp-handle-insert-directory): If `localname' has an empty
	nondirectory name, it must not be quoted.
	(tramp-pre-connection): Add parameter CHUNKSIZE.  Make local
	variable `tramp-chunksize'.  Change callees.
	(tramp-open-connection-setup-interactive-shell): Check remote host
	for buggy `send-process-string' implementation.
	Set `tramp-chunksize' if found.  Reported by Michael Kifer
	<kifer@cs.sunysb.edu> (and a lot of other people all the years).
	(tramp-handle-shell-command): `insert-buffer' cannot be used
	because the contents of the Tramp buffer is changed before
	insertion (`expand-file' and alike).  Reported by Fr,Ai(Bd,Ai(Bric Bothamy
	<frederic.bothamy@free.fr>.
	(tramp-set-auto-save): Actions should be done for Tramp file name
	handler only.  Ange-FTP has its own auto-save mechanism.
	Reported by Richard G. Bielawski <Richard.G.Bielawski@wellsfargo.com>.
	(tramp-set-auto-save-file-modes): Set file modes of
	`buffer-auto-save-file-name' to ?\600 as fallback solution.
	Reported by Ferenc Wagner <wferi@tba.elte.hu>.
	(tramp-bug): Remove obsolete variable.
	(tramp-append-tramp-buffers): Rewrite partly.  More suitable check
	for presence of `mml-mode'.  Make it running for older Emacsen as well.

2005-05-14  John Paul Wallington  <jpw@pobox.com>

	* ibuf-ext.el (define-ibuffer-filter filename):
	If `dired-directory' is a list, use its car.

2005-05-14  Daniel Brockman  <daniel@brockman.se>  (tiny change)

	* ibuffer.el (define-ibuffer-column filename):
	If `dired-directory' is a list, use its car.

2005-05-14  Richard M. Stallman  <rms@gnu.org>

	* subr.el (symbol-file): Doc fix.

	* emacs-lisp/bytecomp.el (byte-compile-nogroup-warn): New function.
	(byte-compile-form): Call byte-compile-nogroup-warn.
	(byte-compile-warning-types): Doc fix.

	* eshell/esh-mode.el (eshell-find-tag): Use with-no-warnings.

	* progmodes/cc-engine.el (c-literal-faces):
	Add font-lock-comment-delimiter-face.

	* net/net-utils.el (dig): Use with-no-warnings.

	* mail/supercite.el (sc-cite-frame-alist, sc-uncite-frame-alist)
	(sc-recite-frame-alist, sc-default-cite-frame)
	(sc-default-uncite-frame, sc-default-recite-frame)
	(sc-attrib-selection-list, sc-rewrite-header-list):
	Mark as risky-local-variable.

	* international/ogonek.el (ogonek-jak, ogonek-how):
	Don't use beginning-of-buffer.

	* emacs-lisp/eldoc.el (eldoc-documentation-function): Add autoload.

	* calendar/solar.el (solar-data-list): Move definition up.

	* dnd.el (dnd-protocol-alist): Add autoload.

	* progmodes/sh-script.el: Many doc usage fixes.
	(sh-indent-after-do): Change default to match common styles.

2005-05-13  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (interpreter-mode-alist)
	(auto-mode-interpreter-regexp): Doc fixes.

2005-05-13  Matt Hodges  <MPHodges@member.fsf.org>

	* tmm.el (tmm-get-keymap): Include only active menus and menu items.

	* emacs-lisp/easymenu.el (easy-menu-define): Doc fixes.

2005-05-13  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* dired.el (dired-mode): make-variable-buffer-local =>
	make-local-variable.

2005-05-13  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-select-convert-to-string): Try coding
	systems in mac-script-code-coding-systems if specified one cannot
	encode string for `com.apple.traditional-mac-plain-text'.

2005-05-13  Daniel Pfeiffer  <occitan@esperanto.org>

	* progmodes/make-mode.el (makefile-targets-face)
	(makefile-shell-face, makefile-makepp-perl-face): New faces.
	(makefile-dependency-regex): Fix it to not make the colon in
	$(var:a=b) special.
	(makefile-rule-action-regex): New regexp for highlighting embedded
	Shell strings.
	(makefile-macroassign-regex): Handle != for highlighting as
	embedded Shell strings.
	(makefile-var-use-regex): New const.
	(makefile-statements, makefile-automake-statements)
	(makefile-gmake-statements, makefile-makepp-statements)
	(makefile-bsdmake-statements): New consts.
	(makefile-make-font-lock-keywords): New function.
	(makefile-automake-font-lock-keywords)
	(makefile-gmake-font-lock-keywords)
	(makefile-makepp-font-lock-keywords)
	(makefile-bsdmake-font-lock-keywords): New consts.
	(makefile-mode-map): Add switchers between the various submodes.
	(makefile-mode): Document the availability of the variants.
	(makefile-automake-mode, makefile-gmake-mode)
	(makefile-makepp-mode, makefile-bsdmake-mode): New derived modes.

	* files.el (auto-mode-alist, interpreter-mode-alist): Set up the
	new variants of makefile-mode.

2005-05-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-comment-delimiter-face): Fix up
	the inheritance.

2005-05-12  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp-mode-hook)
	(inferior-lisp-load-hook): Convert defcustoms back to defvars.

	* files.el (normal-mode): Extend the scope of the
	`enable-local-variables' binding to include the `set-auto-mode' call.
	(magic-mode-alist): Doc fix.

2005-05-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-comment-delimiter-face): Inherit from
	font-lock-comment-face rather than copying its setting.

2005-05-12  Andreas Schwab  <schwab@suse.de>

	* eshell/esh-mode.el (eshell-send-input): Doc fix.

2005-05-12  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/generic.el (define-generic-mode): Don't generate a
	defcustom for the mode hook variable.  Delete the last argument.
	* generic-x.el: Fix callers of define-generic-mode.
	(generic-x-modes): Delete group.
	(show-tabs-tab-face, show-tabs-space-face): Put them in the
	generic-x customization group.

2005-05-12  Kim F. Storm  <storm@cua.dk>

	* font-lock.el (font-lock-negation-char-face): Default to "off".

	* progmodes/cc-fonts.el (c-basic-matchers-before): Don't apply
	font-lock-negation-char-face to ! in !=.

2005-05-12  Masatake YAMATO  <jet@gyve.org>

	* add-log.el (find-change-log): Fix typos in the docstring
	of function.

2005-05-11  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Avoid `re-search-forward' when looking for input encoding because
	of speed and safety.  Better regular expressions for recognizing
	input encoding.  Limit a search for TeX-master/tex-main-file to
	the local variable section.

2005-05-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/sh-script.el (sh-mode-default-syntax-table): Set the
	syntax of $ to "'" (quote).

2005-05-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* dnd.el (dnd-protocol-alist): Improve custom type.

	* dired.el (dired-dnd-protocol-alist): New variable.
	(dired-mode): Use `dired-dnd-protocol-alist'.  Move call of
	`dired-mode-hook' to the end.

2005-05-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-lock.el (font-lock-fontify-syntactically-region): Don't use
	comment-end if comment-start-skip is not set.
	Obey the font-lock-comment-delimiter-face variables.

2005-05-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (executable-find): Move from executable.el.  Use
	locate-file.
	* progmodes/executable.el (executable-find): Move to files.el.

	* font-lock.el (font-lock-fontify-keywords-region): Use a marker
	when trying to ensure forward progress.

2005-05-11  Chong Yidong  <cyd@stupidchicken.com>

	* mouse-sel.el (mouse-sel-follow-link-p): New function.
	(mouse-select, mouse-select-internal, mouse-extend-internal):
	Use it to implement mouse-1-click-follows-link functionality.

2005-05-11  Richard M. Stallman  <rms@gnu.org>

	* font-lock.el (font-lock-fontify-syntactically-region):
	Use font-lock-comment-delimiter-face for comment delimiters.

2005-05-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-m-prefix-help): Add mention of
	preserving embedded modes.

2005-05-10  Richard M. Stallman  <rms@gnu.org>

	* progmodes/sh-script.el (sh-indent-for-do): Default to 0.

	* progmodes/ada-mode.el (ada-adjust-case-skeleton):
	Move from ada-stmt.el.
	(ada-mode): Add ada-adjust-case-skeleton to skeleton-end-hook.

	* progmodes/ada-stmt.el (ada-adjust-case-skeleton):
	Move to ada-mode.el.
	(ada-stmt-mode-hook): Delete; do the work in ada-mode.

	* cus-edit.el (custom-file): Call file-chase-links.

	* files.el (read-directory-name): Fix previous change.
	(hack-local-variables-confirm): New function.
	(hack-local-variables-prop-line, hack-local-variables)
	(hack-one-local-variable): Use it.

2005-05-10  Lute Kamstra  <lute@gnu.org>

	* font-lock.el (font-lock-keywords-alist)
	(font-lock-removed-keywords-alist): Clarify docstrings.

2005-05-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-macro-info): New variable.
	(gdb-source-info): Check for preprocessor info.
	(gdb-tooltip-print-1): New function.  Don't print tooltip if it is
	a macro for a function.
	(gdb-info-breakpoints-custom): Try to find file again if not already
	found (user might have used GDB dir command).
	(gdb-get-location): Update gdb-location-alist correctly for change
	to gdb-info-breakpoints-custom.

	* progmodes/gud.el (gud-tooltip-mode): Require tooltip to be safe.
	(gud-tooltip-print-command): Add gdbmi case.
	(gud-tooltip-tips): Call gdb-tooltip-print-1 first if there is
	preprocessor info.

2005-05-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* startup.el (fancy-splash-insert): Fix typo in doc string.

2005-05-09  Juanma Barranquero  <lekktu@gmail.com>

	* obsolete/float.el (string-to-float):
	* obsolete/hilit19.el (hilit-add-pattern):
	* obsolete/rnews.el (news-parse-range, news-select-message)
	(news-get-pruned-list-of-files): Replace `string-to-int' by
	`string-to-number'.

	* obsolete/uncompress.el: Set `find-file-not-found-functions', not
	`find-file-not-found-hooks'; use `add-hook'.
	(uncompress-while-visiting): Set `write-file-functions', not
	`write-file-hooks'; use `add-hook'.

2005-05-09  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-copy-region, cua-cut-region)
	(cua-paste): Handle clipboard action.
	(cua--init-keymaps): Remap clipboard-kill-region and
	clipboard-kill-ring-save.

2005-05-08  Eli Zaretskii  <eliz@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-pretty-mode-name):
	Improve commentary.

	* simple.el (next-error-overlay-arrow-position): Revert the change
	made on 2005-04-30.

2005-05-07  Jay Belanger  <belanger@truman.edu>

	* calc/calcsel2.el (calc-commute-left, calc-commute-right)
	(calc-sel-unpack, calc-sel-isolate): Rename variable `reselect' to
	`calc-sel-reselect'.

	* calc/calc-mode.el (calc-save-modes): Reset the modes list if
	Calc is in embedded mode.

2005-05-07  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/compile.el (compilation-setup):
	Set overlay-arrow-string to an empty string on text terminals.

	* textmodes/ispell.el (ispell-program-name): Try looking for
	"aspell" along exec-path, and if found, use it as the default
	speller program.

2005-05-07  Jirka Kosek  <jirka@kosek.cz>  (tiny change)

	* international/mule.el (sgml-xml-auto-coding-function):
	Recognize encoding='FOO' in single quotes as well as in double quotes.

2005-05-07  Johan Bockg,Ae(Brd  <bojohan@dd.chalmers.se>

	* emacs-lisp/cl-macs.el (cl-transform-lambda): Recognize `declare'
	as well as `interactive', so that defmacro* would recognize
	`declare' forms.

2005-05-07  Eli Zaretskii  <eliz@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-pretty-mode-name):
	Explain more about the LIGHTER arg's usage in the doc string.
	Add commentary to clarify what the code does.  Fix the regexp that
	strips whitespace from LIGHTER.  Quote LIGHTER before using it,
	since it could have characters special to regular expressions.

2005-05-07  Matt Hodges  <MPHodges@member.fsf.org>  (tiny change)

	* replace.el (occur-1): Bind inhibit-read-only so that
	erase-buffer doesn't barf on read-only text properties (likewise
	for add-text-properties in occur-engine).  Mark buffer as unmodified.
	(occur-engine): Don't set buffer-read-only here.

2005-05-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-mode-commit, cvs-mode-edit-log): Don't fiddle with
	list-buffers-directory.  This caused the *cvs-commit* buffer to be
	sometimes mistakenly reused as a *cvs* buffer.

2005-05-07  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el: Move code for GUD tooltips into gud.el.
	(require): CL no longer needed to compile case.
	(tooltip-mode): Do not toggle functions for GUD tooltips.
	(tooltip-gud-tips-p): Remove.  Replace with minor mode
	gud-tooltip-mode in gud.el.
	(tooltip-gud-modes, tooltip-gud-display, tooltip-gud-echo-area)
	(tooltip-gud-toggle-dereference): Rename in gud.el by replacing
	tooltip-gud prefix with gud-tooltip and obsolete.
	(tooltip-change-major-mode, tooltip-activate-mouse-motions-if-enabled)
	(tooltip-mouse-motions-active, tooltip-activate-mouse-motions)
	(tooltip-mouse-motion): Mouse movement functions/variable.
	Rename in gud.el by adding gud prefix.
	(tooltip-gud-original-filter, tooltip-gud-dereference)
	(tooltip-gud-event, tooltip-toggle-gud-tips)
	(tooltip-gud-process-output, tooltip-gud-print-command)
	(tooltip-gud-tips): GUD tooltip functions/variables.  Rename in
	gud.el by replacing tooltip-gud prefix with gud-tooltip.
	(gdb-tooltip-print): Move to gdb-ui.el.

	* progmodes/gud.el: Move code for GUD tooltips from tooltip.el.
	(require): CL needed to compile case.
	(gud-tooltip-mode): Use to toggle GUD tooltips instead of
	tooltip-gud-tips-p.  Make it a minor-mode.
	(gud-find-file): Only prepare GUD tooltips if gud-tooltip-mode is t.
	(gud-menu-map): GUD tooltips use gud-tooltip-mode now.
	(gud-tooltip-modes, gud-tooltip-display, gud-tooltip-echo-area)
	(gud-tooltip-change-major-mode)
	(gud-tooltip-activate-mouse-motions-if-enabled)
	(gud-tooltip-mouse-motions-active, gud-tooltip-activate-mouse-motions)
	(gud-tooltip-mouse-motion, gud-tooltip-toggle-dereference)
	(gud-tooltip-original-filter, gud-tooltip-dereference)
	(gud-tooltip-event, tooltip-toggle-gud-tips)
	(gud-tooltip-process-output, gud-tooltip-print-command)
	(gud-tooltip-tips): Move from tooltip.el.

	* progmodes/gdb-ui.el (gdb-tooltip-print): Move from tooltip.el.
	(gdb-cpp-define-alist-flags): Doc fix.
	(gdb-set-gud-minor-mode-1): Only prepare GUD tooltips if
	gud-tooltip-mode is t.

2005-05-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* net/goto-addr.el (goto-address-fontify): Make sure the overlays
	evaporate if their text is deleted.
	(goto-address-at-point): Make it work as a mouse binding as well.
	(goto-address-at-mouse): Obsolete it.  Update users.

2005-05-06  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/appt.el (top-level): No longer activate on load.

2005-05-06  Juanma Barranquero  <lekktu@gmail.com>

	* calendar/cal-bahai.el (mark-bahai-diary-entries):
	* net/webjump.el (webjump):
	* progmodes/idlw-help.el (idlwave-do-context-help1)
	(idlwave-highlight-linked-completions):
	* textmodes/po.el (po-find-file-coding-system-guts):
	Replace `assoc-ignore-case' by `assoc-string'.

2005-05-06  Eli Zaretskii  <eliz@gnu.org>

	* files.el (locate-file): Doc fix.

	* progmodes/gdb-ui.el (gdb-cpp-define-alist-program): Doc fix.
	Remove the redundant test for ms-dos.

	* progmodes/cmacexp.el (c-macro-preprocessor): Use locate-file to
	look for the preprocessor with exec-suffixes.  If not found in
	standard places, look in exec-path.  Remove most of the tests that
	used system-type.

	* loadup.el: Load jka-cmpr-hook instead of jka-comp-hook.

	* jka-compr.el (jka-compr-uninstall): Add autoload cookie.

	* jka-cmpr-hook.el: Renamed from jka-comp-hook.el, to avoid
	file-name clash with jka-compr.el on 8+3 filesystems.

2005-05-06  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Don't define or bind scroll bar functions if
	x-toolkit-scroll-bars is t.
	(x-select-text, x-get-selection-value): Clear
	x-last-selected-text-clipboard if x-select-enable-clipboard is
	nil.
	(PRIMARY): Put mac-scrap-name property.
	(mac-select-convert-to-file-url): New function.
	(public.file-url): New selection target type.  Add to
	selection-converter-alist.
	(x-get-selection, x-selection-value): Handle it.
	(x-cut-buffer-or-selection-value): New alias.

2005-05-05  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-summary): Use current BibTeX
	entry to avoid calling bibtex-find-entry with arg global
	being t.  Remove arg key.
	(bibtex-summary-function, bibtex-complete-crossref-cleanup)
	(bibtex-copy-summary-as-kill): Change accordingly.

2005-05-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/org.el (org-get-entries-from-diary): Remove unused vars.
	(org-agenda-date-later): Use with-current-buffer.

2005-05-05  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/byte-run.el (define-obsolete-function-alias)
	(define-obsolete-variable-alias): Doc Fixes.

2005-05-06  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Fix 2005-04-26 change.  Must still use
	vertical-motion when selective-display is active.

	* ido.el (ido-setup-hook): New hook.
	(ido-define-mode-map-hook): Remove hook; use ido-setup-hook instead.
	(ido-input-stack): New var.
	(ido-define-mode-map): Bind M-b to ido-push-dir.  Move old
	ido-next-work-file binding to M-O.
	Bind M-f to ido-wide-find-file-or-pop-dir.
	(ido-define-mode-map): Don't run ido-define-mode-map-hook.
	(ido-read-internal): Run ido-setup-hook.
	Catch quit in read-file-name and read-string to cancel edit.
	Handle new push, pop, and pop-all exit codes (for M-b/M-f).
	Automatically pop-all when completing a directory name (RET).
	(ido-file-internal): Add with-no-warnings around ffap and dired code.
	(ido-exit-minibuffer): Use exit-minibuffer instead of throw.
	(ido-wide-find-file, ido-wide-find-dir): Catch quit to cancel find.
	(ido-push-dir, ido-pop-dir, ido-wide-find-file-or-pop-dir):
	New functions for M-b/M-f to move among the directory components.
	(ido-make-merged-file-list): Catch quit to cancel merge.
	(ido-make-dir-list): Delete "." when ido-input-stack is non-empty.
	(ido-completion-help): No warnings for ido-completion-buffer-full.

2005-05-05  Daniel Pfeiffer  <occitan@esperanto.org>

	* font-lock.el (font-lock-negation-char-face): New face and variable.
	* progmodes/cc-fonts.el (c-cpp-matchers): Use it.
	* progmodes/sh-script.el (sh-font-lock-keywords): Use it.
	* progmodes/cperl-mode.el (cperl-init-faces): Use it.
	* progmodes/make-mode.el (makefile-font-lock-keywords): Use it.

2005-05-05  Juanma Barranquero  <lekktu@gmail.com>

	* emacs-lisp/byte-run.el (define-obsolete-function-alias):
	Fix typo in docstring.

	* progmodes/ebrowse.el (ebrowse-install-1-to-9-keys)
	(ebrowse-print-statistics-line)
	(ebrowse-electric-position-mode-hook): Fix typo in docstring.

	* term/w32-win.el (image-library-alist): Add additional name for
	Xpm library.

2005-05-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cmacexp.el (c-macro-preprocessor): Update for BSD and
	use gcc instead of cpp.

	* progmodes/gdb-ui.el (gdb-cpp-define-alist-flags): New variable.
	(gdb-create-define-alist): Use it.
	(gdb-cpp-define-alist-program): Update for MS-DOS.

2005-05-04  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cmacexp.el (c-macro-preprocessor): Update for Mac OS X.

2005-05-04  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key): No error when UNTRANSLATED is nil.

	* simple.el (line-move-1): Fix previous change to signal errors
	appropriately.

2005-05-03  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Now at 0.12.
	(icalendar-duration-correction): Remove.
	(icalendar--get-event-properties): Split result at commas.
	(icalendar--decode-isoduration): New optional argument
	DURATION-CORRECTION.
	(icalendar--convert-ordinary-to-ical, icalendar--convert-sexp-to-ical)
	(icalendar--convert-yearly-to-ical, icalendar--convert-weekly-to-ical)
	(icalendar--convert-block-to-ical, icalendar--convert-float-to-ical)
	(icalendar--convert-date-to-ical, icalendar--convert-cyclic-to-ical)
	(icalendar--convert-anniversary-to-ical): New functions, extracted
	from icalendar-export-region, with bug fixes.
	(icalendar-export-region): Use the above functions.
	(icalendar-import-buffer): Check before saving diary file.
	(icalendar--convert-recurring-to-diary)
	(icalendar--convert-non-recurring-all-day-to-diary)
	(icalendar--convert-non-recurring-not-all-day-to-diary): New functions,
	extracted from icalendar--convert-ical-to-diary, with bug fixes.
	(icalendar--convert-ical-to-diary): Use the above functions.

2005-05-03  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-define-alist, cc-create-define-alist):
	Remove these recent additions.
	(c-mode): Restore to before 2005-04-28.

	* progmodes/cc-vars.el (cc-define-list-program): Remove this
	recent addition.

	* progmodes/gdb-ui.el (gdb-cpp-define-alist-program)
	(gdb-define-alist): New variables.
	(gdb-create-define-alist): New function.
	(gdb-set-gud-minor-mode-1): Handle gdb-define-alist.
	(gdb-source, gdb-memory-set-repeat-count): Replace string-to-int
	with string-to-number.
	(gdb-reset): Kill gdb-define-alist.  Move assignments outside loop.

	* progmodes/gud.el: Replace string-to-int with string-to-number.
	(gud-find-file): Handle gdb-define-alist.

	* tooltip.el (tooltip-gud-tips): Use gdb-define-alist.

2005-05-02  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token):
	* calc/calc-bin.el (calc-word-size):
	* calc/calc-ext.el (calc-read-number-fancy):
	* calc/calc-forms.el (calc-time, calc-date-notation, math-this-year)
	(math-parse-date, math-parse-standard-date, calcFunc-tzone):
	* calc/calc-frac.el (calc-over-notation):
	* calc/calc-graph.el (calc-graph-plot, calc-graph-set-styles)
	(calc-graph-num-points, calc-graph-init):
	* calc/calc-prog.el (calc-read-parse-table-part)
	(calc-edit-macro-repeats):
	* calc/calc-yank.el (calc-do-grab-rectangle):
	* calc/calc.el (calcDigit-key, math-read-number, math-read-bignum):
	Replace `string-to-int' by `string-to-number'.

2005-05-02  Kim F. Storm  <storm@cua.dk>

	* kmacro.el: Use executing-kbd-macro-index variable.

2005-05-02  Thien-Thi Nguyen  <ttn@gnu.org>

	* net/rlogin.el (rlogin-parse-words): Delete func.
	(rlogin): Use split-string, not rlogin-parse-words.
	Also, if there are option-like elements in the parsed args,
	take the host to be the first arg immediately following them.
	Suggested by Michael Mauger.

2005-05-01  Luc Teirlinck  <teirllm@auburn.edu>

	* subr.el (executing-macro): Use `define-obsolete-variable-alias'.

2005-05-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-create-define-alist): Use a shell.
	(cc-mode-cpp-program): Rename to cc-define-list-program and
	move to cc-vars.el.

	* progmodes/cc-vars.el (cc-define-list-program):
	Change to "gcc -E -dM -".  Make customizable.

2005-05-02  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el: Fix check for CUA-mode if no init file.

2005-05-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-mode-cpp-program): Change to "gcc -E".

	* international/mule-util.el (truncate-string): Remove alias and
	obsolete declaration.

	* international/mule-cmds.el (update-iso-coding-systems):
	Remove alias and obsolete declaration.

	* international/mule.el (coding-system-parent): Remove alias and
	obsolete declaration.

	* subr.el (define-function, sref): Remove aliases and obsolete
	declarations.
	(chars-in-region): Remove obsolete declaration.

2005-05-01  Richard M. Stallman  <rms@gnu.org>

	* info.el (Info-mode): Set widen-automatically to nil, locally.

	* simple.el (widen-automatically): New variable.
	(pop-global-mark): Obey widen-automatically.

2005-05-01  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (function-key-map): Call substitute-key-definition
	before the keymap size is increased by a lot of define-key calls.

2005-05-01  Richard M. Stallman  <rms@gnu.org>

	* subr.el (add-to-invisibility-spec, remove-from-invisibility-spec):
	Rename ARG to ELEMENT.  Doc fix.

2005-05-01  Nick Roberts  <nickrob@snap.net.nz>

	* allout.el (allout-exposure): Remove macro and obsolete declaration.
	Remove references to allout-exposure/change to allout-new-exposure.

	* emacs-lisp/bytecomp.el (dot, dot-min, dot-max): Don't create
	bytecode symbols.

	* subr.el (dot, dot-marker, dot-min, dot-max, buffer-flush-undo)
	(compiled-function-p, focus-frame, unfocus-frame):
	Remove aliases and obsolete declarations.
	Back out inadvertent changes from previous commit.

2005-05-01  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (require-final-newline): Make Custom tags consistent
	with mode-require-final-newline.
	(mode-require-final-newline): Doc fix.

2005-05-01  Stefan Monnier <monnier@iro.umontreal.ca>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Fix regular expressions.

2005-05-01  David Kastrup <dak@gnu.org>

	* international/latexenc.el (latexenc-find-file-coding-system):
	Fix regular expressions.

2005-05-01  Nick Roberts  <nickrob@snap.net.nz>

	* subr.el (string-to-int): Make obsolete.

2005-04-30  Richard M. Stallman  <rms@gnu.org>

	* simple.el (next-error-overlay-arrow-position): Turn off, for ttys.

	* loadup.el: load jka-comp-hook.

	* jka-compr.el: Many functions and vars moved to jka-comp-hook.el.
	(jka-compr-handler): Add autoload.  `put' calls moved
	to jka-comp-hook.el.
	(compression, jka-compr): defgroups moved to jka-comp-hook.el.
	(jka-compr-inhibit): Autoload.

	* jka-comp-hook.el: New file.
	Enable the mode by default.

	* files.el (backup-buffer-copy): Use copy-file instead
	of write-region, and put back the 'excl.

2005-04-30  Chong Yidong  <cyd@stupidchicken.com>

	* progmodes/flymake.el (flymake-split-string)
	(flymake-split-string, flymake-log, flymake-pid-to-names)
	(flymake-reg-names, flymake-get-source-buffer-name)
	(flymake-unreg-names, flymake-add-line-err-info)
	(flymake-add-err-info): Clarify docstrings.
	(flymake-popup-menu, flymake-make-emacs-menu)
	(flymake-make-xemacs-menu): Add docstrings.
	(flymake-get-buffer-*, flymake-set-buffer-*): Functions deleted.
	Set variables directly throughout.

2005-04-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-create-define-alist): Check that file
	exists.  Initialize cc-define-alist.
	(c-mode): Add cc-create-define-alist locally to after-save-hook.
	If there is no file (Macroexpansion) don't create an alist.

2005-04-29  Sam Steingold  <sds@gnu.org>

	* progmodes/cc-mode.el (cc-mode-cpp-program): New user variable.
	(cc-create-define-alist): Use it instead of the hard-coded string.

2005-04-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-conf.el (file-coding-system-alist): Fix regexp
	for latexenc.

2005-04-29  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/generic.el: Improve commentary section.
	(define-generic-mode): Improve docstring.

2005-04-29  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (many places): Change to quiet the byte compiler.
	(org-prefix-format-compiled): New variable.
	(org-compile-prefix-format): New function.
	(org-timeline, org-agenda, org-diary): Call org-compile-prefix-format.
	(org-agenda-prefix-format,org-timeline-prefix-format): New options.
	(org-agenda-get-scheduled): Check if file is opened in `org-mode'.
	(org-get-entries-from-diary): Use `org-get-time-of-day' for
	consistency with entries from `org-mode' files.
	(org-get-time-of-day): Fix bug with partial matches early in a line.
	(org-non-link-chars): New constant.
	(org-link-regexp): Respect `org-non-link-chars'.
	(org-agenda-day-view): Remove command.
	(org-agenda-toggle-week-view): Rename from `org-agenda-week-view'.
	(org-follow-bbdb-link, org-store-link): Search also company field.
	(org-highlight-overlay): New variable.
	(org-highlight, org-unhighlight): New functions.
	(org-agenda-mode): Add pre-command-hook to remove highlight.
	(org-evaluate-time-range): Behavior depends upon whether time stamp
	contains a time or not.
	(org-show-subtree, org-show-entry): New functions.
	(org-agenda-cleanup-fancy-diary): Remove empty lines.

2005-04-28  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-output-filter-functions): Add autoload cookie.

2005-04-28  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-everywhere): Fix last change.

2005-04-28  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* international/latexenc.el: New file.
	* international/mule-conf.el (file-coding-system-alist): For .tex,
	.ltx, .dtx and .drv extensions, use `latexenc-find-file-coding-system'.

2005-04-28  Lute Kamstra  <lute@gnu.org>

	* font-lock.el (font-lock-add-keywords)
	(font-lock-remove-keywords): Clarify docstring.
	(font-lock-keywords-alist, font-lock-removed-keywords-alist):
	Don't start docstrings with a `*'.
	(font-lock-update-removed-keyword-alist): Give it a docstring.

	* generic-x.el: Update commentary section.
	Only require font-lock when compiling.
	Define all modes conditionally.
	Place all generic modes in the generic-x-modes customization group.
	(generic-x-modes): New customization group.
	(generic-default-modes, generic-mswindows-modes)
	(generic-unix-modes, generic-other-modes): New constants.
	(generic-define-mswindows-modes, generic-define-unix-modes):
	Update docstrings.  Make them obsolete.
	(generic-extras-enable-list): New default value.  Update docstring.
	Improve :type.  Change :set function.
	(bat-generic-mode-syntax-table, rul-generic-mode-syntax-table):
	Fix docstring.

	* emacs-lisp/generic.el (generic-mode-internal):
	Simplify font-lock-defaults.
	(define-generic-mode): Fix docstring.

2005-04-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/grep.el (grep-mode-font-lock-keywords): Use the
	font-lock-face property to highlight matches.

2005-04-28  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/cc-mode.el (cc-create-define-alist): New function.
	(cc-define-alist): New variable.
	(c-mode): Make it local and initialize it.

	* progmodes/gdb-ui.el (gdb-active-process): New variable.
	(gdb-exited): New function.
	(gdb-annotation-rules): Use it.
	(gdb-starting): Set gdb-active-process to t.
	(gdb-stopping): Amend doc string.
	(gdb-reset): Set gdb-active-process to nil.

	* tooltip.el (tooltip-gud-tips): Show the associated #define
	directives when a C program under GDB is not executing.

2005-04-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/cperl-mode.el (cperl-mode): Don't precompile the
	font-lock-fontify-syntactic-keywords.

	* font-lock.el (font-lock-default-fontify-region): Don't force
	parse-sexp-lookup-properties to nil.

2005-04-27  Alexander Klimov  <alserkli@inbox.ru>  (tiny change)

	* man.el (man-mode-syntax-table): Set up `:' to have
	word-constituent syntax.

2005-04-27  Lute Kamstra  <lute@gnu.org>

	* novice.el (disable-command): Don't add spurious newlines to the
	init file.  Reported by Dan Jacobson <jidanni@jidanni.org>.

2005-04-26  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-finish): Make sure there is more
	than one window before deleting window.

2005-04-26  Luc Teirlinck  <teirllm@auburn.edu>

	* shell.el (shell-prompt-pattern): Doc fix.
	(shell-mode): Set paragraph-separate buffer locally to "\\'".

	* comint.el (comint-prompt-regexp, comint-get-old-input)
	(comint-use-prompt-regexp)
	(comint-use-prompt-regexp-instead-of-fields)
	(comint-replace-by-expanded-history, comint-send-input)
	(comint-output-filter, comint-get-old-input-default)
	(comint-line-beginning-position, comint-bol, comint-show-output)
	(comint-backward-matching-input, comint-forward-matching-input)
	(comint-next-prompt, comint-previous-prompt):
	Rename `comint-use-prompt-regexp-instead-of-fields' to
	`comint-use-prompt-regexp'.  Keep old name as alias and declare
	obsolete.
	(comint-use-prompt-regexp): Shorten first line of doc string.

	* ielm.el (inferior-emacs-lisp-mode): Adapt to above name change.
	Set paragraph-separate buffer locally to "\\'".

	* hippie-exp.el (try-expand-line, try-expand-line-all-buffers):
	Adapt to above name change.

	* net/net-utils.el (nslookup-prompt-regexp, ftp-prompt-regexp)
	(smbclient-prompt-regexp): Ditto.

	* progmodes/inf-lisp.el (inferior-lisp-prompt): Ditto.

2005-04-27  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-location-alist): Rename from
	gdb-location-list.
	Break lines that are over 80 characters wide.

2005-04-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-info.el (cvs-fileinfo->full-path, cvs-display-full-path):
	New fun and var, to preserve compatibility.

	* pcvs.el, pcvs-info.el: Rename "full-path" -> "full-name".

2005-04-26  Dominique de Waleffe  <ddw@missioncriticalit.com>  (tiny change)

	* pcvs-info.el (cvs-fileinfo->backup-file): Don't pass the full file
	name to file-newer-than-file-p.

2005-04-26  Richard M. Stallman  <rms@gnu.org>

	* simple.el (line-move-1): Avoid using vertical-motion in easy cases.

	* progmodes/python.el (python-mode):
	Use new name eldoc-documentation-function.

	* hexl.el (hexl-mode): Use new name eldoc-documentation-function.

	* emacs-lisp/eldoc.el (eldoc-mode): Doc fix.
	(eldoc-documentation-function):
	Rename from eldoc-print-current-symbol-info-function.  Calls changed.

2005-04-26  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/byte-run.el (define-obsolete-function-alias): New macro.

2005-04-25  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (function-key-map): Fix strings for
	{C,S,A,C-S}-f[1-4].  Use substitute-key-definition to bind
	{C,S,A,C-S}-{f1-f12}.

2005-04-26  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system):
	Fix previous change.

2005-04-26  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/easy-mmode.el (define-minor-mode): Fix docstring.

	* font-lock.el (font-lock-fontify-region-function): Fix docstring.
	(font-lock-comment-delimiter-face): Ditto.

	* calc/calc.el (calc-trail-mode): Don't set font-lock-defaults.

2005-04-25  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-view-news): Let-bind inhibit-read-only
	to t while inserting information; use help-mode.

2005-04-25  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (ansi-term-color-vector): Use the xterm colors.
	(term-raw-map): Don't add mappings for \eO and \e[.  Map deletechar.

2005-04-25  Lute Kamstra  <lute@gnu.org>

	* font-core.el (font-lock-defaults): Fix docstring.

	* font-lock.el (font-lock-syntactic-face-function): Fix docstring.

2005-04-25  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (select-safe-coding-system):
	Don't check consistency with coding: spec, etc if raw-text or
	no-conversion was found to be safe.

2005-04-24  Richard M. Stallman  <rms@gnu.org>

	* mail/sendmail.el (mail-font-lock-keywords): Match any number of
	citation markers at start of each line.

	* mail/rmail.el (rmail-font-lock-keywords): Match any number of
	citation markers at start of each line.

	* font-lock.el (font-lock-comment-delimiter-face): Doc fix.

	* files.el (mode-require-final-newline): Fix previous change.
	(require-final-newline): Fix type label.

2005-04-24  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-calculate-indent): Fix treatment of first
	statement in buffer (broken by 2004-11-24 change).

2005-04-24  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-everywhere): Save and restore old read-buffer-function
	and read-file-name-function values.  Don't overwrite existing
	non-nil values if ido-mode is enabled without ido-everywhere.

2005-04-24  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (mode-require-final-newline): Minor doc fix.

2005-04-24  Eli Zaretskii  <eliz@gnu.org>

	* subr.el (syntax-after): Doc fix.
	(syntax-class): If argument is nil, return nil.  Mask off upper 16
	bits, not 8 bits.

	* files.el (mode-require-final-newline): Doc fix.
	(backup-buffer-copy): Fix last change.

2005-04-24  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Require select.  Set selection-coding-system to
	mac-system-coding-system.  Call menu-bar-enable-clipboard.
	(x-last-selected-text-clipboard, x-last-selected-text-primary)
	(x-select-enable-clipboard): New variables.
	(x-select-text, x-get-selection, x-selection-value)
	(x-get-selection-value, mac-select-convert-to-string)
	(mac-services-open-file, mac-services-open-selection)
	(mac-services-insert-text): New functions.
	(CLIPBOARD, FIND): Put mac-scrap-name property.
	(com.apple.traditional-mac-plain-text, public.utf16-plain-text)
	(public.tiff): Put mac-ostype property.
	(selection-converter-alist): Add entries for them.
	(mac-application-menu-map): New keymap.
	(interprogram-cut-function, interprogram-paste-function): Set to
	x-select-text and x-get-selection-value, respectively.
	(split-window-keep-point): Set to t.

2005-04-23  Richard M. Stallman  <rms@gnu.org>

	* files.el (read-directory-name): Always pass non-nil
	DEFAULT-FILENAME arg to read-file-name.
	(backup-buffer-copy, basic-save-buffer-2): Take care against
	writing thru an unexpected existing symlink.
	(revert-buffer): In indirect buffer, revert the base buffer.
	(magic-mode-alist): Doc fix.
	(buffer-stale-function): Doc fix.
	(minibuffer-with-setup-hook): Avoid warning.
	(mode-require-final-newline): Doc and custom fix.

	* follow.el (follow-end-of-buffer): Use with-no-warnings.

	* font-lock.el (font-lock-comment-face): On terminals with few colors,
	use the default appearance.
	(font-lock-comment-delimiter-face): New face, new variable.

	* imenu.el (imenu--generic-function): The official position of a
	definition is the start of the line that BEG is in.

	* midnight.el (midnight-timer): Move defvar up.

	* mouse.el (mouse-drag-region-1): Delete some debugging code.

	* saveplace.el (save-place-to-alist): Use with-no-warnings.

	* startup.el (command-line): Use with-no-warnings.

	* window.el (window-size-fixed): New defvar.

	* emacs-lisp/easymenu.el (easy-menu-do-define): Use defalias, not fset.

	* mail/rmail.el (rmail-font-lock-keywords):
	Use font-lock-comment-delimiter-face.

	* mail/sendmail.el (mail-font-lock-keywords):
	Use font-lock-comment-delimiter-face.

	* progmodes/compile.el (next-error-highlight-timer): New defvar.

2005-04-23  SAITO Takuya  <tabmore@rivo.mediatti.net>  (tiny change)

	* progmodes/compile.el (compilation-mode-font-lock-keywords):
	Specify t for LAXMATCH when matching directories.
	Save match data around compilation-compat-error-properties form.

2005-04-23  David Kastrup  <dak@gnu.org>

	* textmodes/tex-mode.el (TeX-mode, plain-TeX-mode, LaTeX-mode):
	Mention that the autoloaded aliases should be kept for AUCTeX.

2005-04-23  Andreas Schwab  <schwab@suse.de>

	* isearch.el (isearch-forward): Doc fix.

2005-04-23  Eli Zaretskii  <eliz@gnu.org>

	* jit-lock.el (jit-lock-stealth-time): Change default value to 16.
	(jit-lock-stealth-nice): Change default value to 0.5.

2005-04-23  Eric Hanchrow  <offby1@blarg.net>  (tiny change)

	* abbrev.el (write-abbrev-file): Write table entries in
	alphabetical order by table name.

2005-04-22  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-read-internal): Fix `list' completion.

2005-04-22  Kenichi Handa  <handa@m17n.org>

	* recentf.el (recentf-save-file-coding-system): New variable.
	(recentf-save-list): Encode the file by
	recentf-save-file-coding-system and add coding: tag.

2005-04-22  Nick Roberts  <nickrob@snap.net.nz>

	* emacs-lisp/byte-run.el (define-obsolete-variable-alias): New macro.

2005-04-21  Lute Kamstra  <lute@gnu.org>

	* loadhist.el (unload-feature): Don't remove a function from hooks
	if it is about to be restored to an autoload .  Remove functions
	that will become unbound from auto-mode-alist.  Simplify the code.

	* subr.el (assq-delete-all): New implementation that is linear,
	not quadratic.  Suggested by David Kastrup <dak@gnu.org>.
	(rassq-delete-all): New function.

	* menu-bar.el (menu-bar-options-save, menu-bar-showhide-menu):
	Add size-indication-mode.

2005-04-21  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el: Add autoload for widget-value in
	eval-when-compile.

2005-04-21  Nick Roberts  <nickrob@snap.net.nz>

	* menu-bar.el (menu-bar-options-save, menu-bar-showhide-menu):
	Add tooltip-mode.

	* bindings.el (mode-line-mode-menu): Remove tooltip-mode.

2005-04-20  Luc Teirlinck  <teirllm@auburn.edu>

	* progmodes/inf-lisp.el (inferior-lisp): New defgroup.
	(inferior-lisp-filter-regexp, inferior-lisp-program)
	(inferior-lisp-load-command, inferior-lisp-prompt)
	(inferior-lisp-mode-hook, lisp-source-modes)
	(inferior-lisp-load-hook): defvar->defcustom.
	(inferior-lisp-program, inferior-lisp-prompt)
	(inferior-lisp-load-hook): Doc fixes.
	(inferior-lisp-install-letter-bindings): Small change in
	introductory comment.

2005-04-20  Dan Nicolaescu  <dann@ics.uci.edu>

	* vc.el (vc-annotate-color-map): Change some colors so that text
	using them as foreground is readable on both white and black
	backgrounds.

2005-04-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-conf.el (translation-table-for-input):
	Remove redundant declaration.

2005-04-20  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-menu-map): Add tooltip-toggle-gud-tips.

	* tooltip.el (tooltip-gud-tips-p): Expand documentation.
	(tooltip-toggle-gud-tips): New function.

2005-04-20  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (mac-symbol-encoder): Fix mappings of left and
	right angle brackets.

2005-04-20  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-use-echo-area): Replace as alias and deprecate.

2005-04-19  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-get-absolute-file-name-basedir):
	Remove.  Update callers to use expand-file-name instead.

	* subr.el (syntax-class): New function.

	* simple.el (blink-matching-open): Use it.

	* paren.el (show-paren-function): Use it to recognize parens that are
	also used in 2-char comment markers.

2005-04-19  Lute Kamstra  <lute@gnu.org>

	* loadhist.el (unload-feature): Update for new format of
	load-history.  Simplify the code.

2005-04-19  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Add coding: tag and set it to iso-2022-7bit.
	(mac-add-charset-info): New function.  Initialize variable
	mac-charset-info-alist using it.
	(mac-centraleurroman, mac-cyrillic): Do not use UCS in table data
	for translation.
	(mac-symbol-encoder, mac-dingbats-encoder): New translation table.
	(mac-font-encoder-list): Add entries for mac-symbol and mac-dingbats.
	(ccl-encode-mac-symbol-font, ccl-encode-mac-dingbats-font):
	New CCL programs.

2005-04-19  Kim F. Storm  <storm@cua.dk>

	* simple.el (next-buffer, prev-buffer, next-error)
	(scroll-other-window, keyboard-quit, keyboard-escape-quit)
	(clone-indirect-buffer-other-window): Move bindings to bindings.el.

	* bindings.el (next-buffer, prev-buffer, next-error)
	(scroll-other-window, keyboard-quit, keyboard-escape-quit)
	(clone-indirect-buffer-other-window): Move bindings from simple.el.
	(next-buffer, prev-buffer): Add C-x C-right and C-x C-left bindings.
	(next-error, previous-error): Add M-g M-n/n and M-g M-p/p bindings.

2005-04-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* isearch.el (isearch-edit-string): Make the search-ring available for
	minibuffer history commands.
	(minibuffer-local-isearch-map): Remove bindings for M-p	and M-n,
	the default history commands now work just as well.
	(isearch-ring-retreat-edit, isearch-ring-advance-edit): Remove.

2005-04-18  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua--pre-command-handler): Add more
	elaborate check for shift modifier on non-window systems.

2005-04-18  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el: Make "--no-desktop" turn off `desktop-save-mode'.

2005-04-18  Kim F. Storm  <storm@cua.dk>

	* tooltip.el (tooltip-show): Change second arg to USE-ECHO-AREA
	and make it optional.  Don't test tooltip-gud-echo-area here.
	(tooltip-gud-process-output, gdb-tooltip-print):
	Pass tooltip-gud-echo-area to tooltip-show.
	(tooltip-help-tips): Remove second optional arg to tooltip-show.

2005-04-18  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* tooltip.el (tooltip-mode): `emacs-quick-startup' and
	`display-graphic-p' may not be bound yet.

2005-04-17  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): No longer enable Xterm Mouse mode by
	default in terminals compatible with xterm.

	* xt-mouse.el (xterm-mouse-mode): Set init value back to nil.

2005-04-18  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-gud-echo-area): Rename from
	tooltip-use-echo-area.
	(tooltip-show, tooltip-gud-process-output, gdb-tooltip-print)
	(tooltip-help-tips): Allow GUD tooltips to be displayed in echo
	area independently of where help tooltips are displayed.

2005-04-17  David Kastrup  <dak@gnu.org>

	* cus-theme.el (custom-theme-write-variables): Quote variables
	where necessary.

2005-04-17  Richard M. Stallman  <rms@gnu.org>

	* simple.el (yank-excluded-properties): Add follow-link to value.

	* jka-compr.el (jka-compr-compression-info-list): Fix custom type.

	* startup.el (fancy-splash-max-time): Just 30 seconds.
	(fancy-splash-delay): Just 7.
	(fancy-splash-screens): No time limit other than fancy-splash-max-time.

	* loadhist.el (unload-feature): Update for new format of load-history.
	Simplify the code.

	* mail/rmail.el (rmail-ignored-headers): Ignore more headers
	(rmail-font-lock-keywords): Don't fontify the text of a citation.

	* mail/sendmail.el (mail-font-lock-keywords):
	Don't fontify subject text.
	Don't fontify the text of a citation.

2005-04-17  Mark H. Weaver  <mhw@netris.org>  (tiny change)

	* comint.el (comint-output-filter): Run comint-output-filter-functions
	with point where the user had it.

2005-04-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/ucs-tables.el (ucs-set-table-for-input):
	Disable when using unify-on-decoding.

2005-04-16  Dan Nicolaescu  <dann@ics.uci.edu>

	* emulation/cua-base.el (cua-global-mark-face): Add special case
	for displays supporting a high number of colors.

2005-04-16  Matt Hodges  <MPHodges@member.fsf.org>  (tiny change)

	* repeat.el (repeat): Invoke pre-command-hook and post-command-hook.

2005-04-16  Chong Yidong  <cyd@stupidchicken.com>

	* filesets.el (filesets-add-buffer): If user supplies a name of a
	non-existing fileset, create a new fileset.

2005-04-16  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-up-heading-all): Fix bug with
	`outline-up-heading-all'.

2005-04-16  Andreas Schwab  <schwab@suse.de>

	* files.el (auto-mode-alist): Handle /etc/sysconfig/*,
	/etc/permissions.d/* and /etc/aliases.d/*.

2005-04-16  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (cp-make-coding-system):
	Set `translation-table-for-input' property value to the symbol
	ucs-mule-to-mule-unicode, not to that value.
	(pt154): Escape guillemet by `\'.

2005-04-15  Luc Teirlinck  <teirllm@auburn.edu>

	* loadup.el: Load tooltip if x-show-tip is fboundp.

	* startup.el (command-line): Add comment.

	* tooltip.el (tooltip-mode): Specify correct standard value for
	Custom in init-value.

2005-04-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-goto-info): Use existing Info buffer, if
	possible.

2005-04-15  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-agenda-date-prompt): Rename from
	`org-agenda-date-today'.
	(org-evaluate-time-range): Insert at point instead of directly
	after time range.
	(org-first-headline-recenter, org-subtree-end-visible-p)
	(org-optimize-window-after-visibility-change): New functions
	(org-agenda-post-command-hook): Don't allow point at end of line,
	to make sure it always hits the text properties.
	(org-agenda-next-date-line, org-agenda-previous-date-line):
	New commands.
	(org-set-regexps-and-options): Category may contain white space.
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	Improve marker positions.
	(org-agenda-new-marker): Argument POS made optional.
	(org-agenda-get-timestamps): Deadlines which are done are listed
	in org-done-face now.
	(org-agenda-get-todos, org-agenda-get-timestamps)
	(org-agenda-get-deadlines, org-agenda-get-scheduled):
	Set `undone-face' and `done-face' properties.
	(org-last-todo-state-is-todo): New variable.
	(org-todo): Set `org-last-todo-state-is-todo'.
	(org-agenda-todo): Change face according to
	`org-last-todo-state-is-todo'.  And change other lines referring to
	the same entry.
	(org-calendar-goto-agenda): New command.
	(org-calendar-to-agenda-key): New option.
	(org-startup-folded): New allowed value `content'.
	(org-set-regexps-and-options): Accept new value `content' for
	`org-startup-folded'.
	(org-get-current-options): Handle new value `content' for
	`org-startup-folded'.
	(org-insert-todo-heading): New command.
	(org-mode): Insert first line "*-* mode: org-mode -*-" when called
	interactively in empty file and option
	`org-insert-mode-line-in-empty-file' has been set.
	(org-agenda-todo,org-agenda-priority): Modify to use
	`org-agenda-change-all-lines'.
	(org-warning-face): Change color on dark background

2005-04-14  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* international/mule-cmds.el (set-locale-environment): On Mac OS,
	use preferences AppleLocale and AppleLanguages, and variable
	mac-system-locale for default locale.  On Mac OS Classic, use
	mac-system-coding-system for default coding systems.

	* term/mac-win.el: Don't set file-name-coding-system.
	Decode variables system-name, emacs-build-system, user-login-name, and
	user-full-name by mac-system-coding-system on Mac OS Classic.
	(mac-system-coding-system): New variable.

2005-04-13  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Handle `xterm-mouse-mode' before
	reading init file.

	* xt-mouse.el (xterm-mouse-mode): Adapt to above change.

2005-04-13  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/sh-script.el (sh-here-document-word): Make it a
	defcustom.  Doc fix.
	(sh-add): Bash uses $(( )) for arithmetic.
	(sh-while-getopts) <sh>: Set OPTIND back to 1 at end.
	(sh-maybe-here-document): Remove quotes and leading whitespace
	from heredoc word when closing.  Indent heredoc with tabs if word
	starts with "-".

2005-04-13  Richard M. Stallman  <rms@gnu.org>

	* simple.el (undo): Fix previous change.

	* custom.el (defface): Doc fix.

2005-04-13  Lute Kamstra  <lute@gnu.org>

	* Makefile.in (DONTCOMPILE): Remove list.
	(compile, compile-always): Don't use DONTCOMPILE.
	(update-authors): Load the library in which batch-update-authors
	is defined.
	* makefile.w32-in (DONTCOMPILE): Remove list.
	(compile, compile-always): Fix comments.
	(update-authors): Load the library in which batch-update-authors
	is defined.

	* generic-x.el (generic-mode-ini-file-find-file-hook):
	Rename to ini-generic-mode-find-file-hook.
	Keep generic-mode-ini-file-find-file-hook as an alias.
	(ini-generic-mode-find-file-hook): Rename from
	generic-mode-ini-file-find-file-hook.  Fix docstring.
	(ini-generic-mode): Docstring change.
	(bat-generic-mode-run-as-comint): Silence the byte compiler.

	* help.el (describe-key-briefly): UNTRANSLATED can be nil when
	called from lisp.

	* generic.el: Move to the emacs-lisp subdir.

2005-04-12  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (function-key-map): Add mappings for A-, C-, S-
	and C-S- function and cursor motion keys.

2005-04-12  Luc Teirlinck  <teirllm@auburn.edu>

	* startup.el (command-line): Enable Xterm Mouse mode by default.
	* xt-mouse.el (xterm-mouse-mode): Provide correct standard value
	for Custom.  No longer show "Mouse" in mode line when enabled.
	Doc fix.

2005-04-12  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-rectangle-face)
	(cua-rectangle-noselect-face): Define face attributes here.

	* emulation/cua-rect.el (cua--init-rectangles): Remove face setup.

2005-04-12  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* startup.el (command-line): Turn off blinking cursor if
	cursorBlink in resources is off or false.

2005-04-12  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el (dnd): Require dnd.
	(mac-drag-n-drop): Call dnd-handle-one-url.
	(kTextEncodingMacRoman, kTextEncodingISOLatin1)
	(kTextEncodingISOLatin2): Remove constants.
	(mac-script-code-coding-systems): New constant.
	(mac-handle-language-change): New function.
	(special-event-map): Bind it to `language-change' event.
	(mac-centraleurroman, mac-cyrillic): New coding systems.
	(mac-font-encoder-list, ccl-encode-mac-centraleurroman-font)
	(ccl-encode-mac-cyrillic-font): Rename mac-centraleurroman-encoder
	and mac-cyrillic-encoder to encode-mac-centraleurroman and
	encode-mac-cyrillic, respectively.

2005-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el, progmodes/gdb-ui.el (gdb-assembler-mode):
	Don't set overlay-arrow-string to "=>" as this is done
	globally in C now.

2005-04-12  Lute Kamstra  <lute@gnu.org>

	* generic-x.el (rc-generic-mode, rul-generic-mode):
	Fix auto-mode-alist entries.
	(etc-fstab-generic-mode): Tweak fontification.

	* generic.el (generic-make-keywords-list): Fix docstring.
	(generic-mode-internal): Simplify generic-font-lock-keywords.

2005-04-11  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-buffer-leading)
	(whitespace-buffer-trailing): Revert the incorrect test inversion.
	However, fix the highlight area for the leading and
	trailing whitespaces to show space.

2005-04-11  Rajesh Vaidheeswarran  <rv@gnu.org>

	* whitespace.el (whitespace-version): Bump to 3.5

	(whitespace-buffer-leading, whitespace-buffer-trailing):
	Invert sense of the test to highlight the whitespace.

2005-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gud-display-line): GUD uses its own
	overlay arrow now so don't set overlay-arrow-string.
	(gud-pdb-command-name): Revert back to "pdb" (2004-04-26).

2005-04-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-ansi-current-bold, term-ansi-current-underline)
	(term-ansi-current-reverse, term-ansi-current-invisible)
	(term-ansi-face-already-done): Change to boolean.
	(term-reset-terminal, term-handle-colors-array): Handle the above
	vars accordingly.
	(term-buffer-vertical-motion): Rename from buffer-vertical-motion.
	(term-emulate-terminal): Use the new name.

	* faces.el (secondary-selection): Use yellow1, not yellow.
	(trailing-whitespace): Use red1, not red.

2005-04-11  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* dired.el (dired-mode): Use dnd-* instead of x-dnd-*
	(dired-dnd-handle-local-file): Call dnd-get-local-file-name.
	(dired-dnd-handle-file): Call dnd-get-local-file-uri

	* cus-edit.el (dnd): New group.

	* term/w32-win.el (dnd): Require dnd
	(w32-drag-n-drop): Call dnd-handle-one-url.

	* x-dnd.el: Require dnd.
	(x-dnd-handle-uri-list, x-dnd-handle-file-name):
	Call dnd-handle-one-url.
	(x-dnd-types-alist, x-dnd-insert-utf8-text)
	(x-dnd-insert-utf16-text, x-dnd-insert-ctext): Change x-dnd-insert-text
	to dnd-insert-text.
	(x-dnd-protocol-alist, x-dnd-open-file-other-window)
	(x-dnd-handle-one-url, x-dnd-get-local-file-uri)
	(x-dnd-get-local-file-name, x-dnd-open-local-file)
	(x-dnd-open-file, x-dnd-insert-text): Move to dnd.el (without x-).

	* dnd.el (dnd-protocol-alist): New file with generic DND functions.

2005-04-11  JUAN-LEON Lahoz Garcia  <juanleon1@gmail.com>

	* wdired.el: Doc fixes.
	(wdired-confirm-overwrite): Rename from wdired-is-ok-overwrite.
	(wdired-use-dired-vertical-movement): Rename from
	wdired-always-move-to-filename-beginning.
	(wdired-mode-map): Use `ignore' instead of `wdired-newline'.
	(wdired-change-to-wdired-mode): Change mode name.
	(wdired-newline): Delete.

2005-04-11  Richard M. Stallman  <rms@gnu.org>

	* whitespace.el (whitespace-highlight-the-space):
	Don't call whitespace-unhighlight-the-space here.

	* simple.el (undo): Record t in undo-equiv-table
	for the redo record made by an undo-in-region.

2005-04-12  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-display-inferior-io-buffer)
	(gdb-frame-inferior-io-buffer): New Functions to control
	display of separate IO buffer.
	(menu): Add them to menu-bar.
	(gdb-display-buffer): Check for buffer another frame.
	Protect GUD buffer.
	(gdb-setup-windows): Create IO buffer if not already there.
	(gdb-memory-mode): Remove purecopy noops.

2005-04-11  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/f90.el (f90-electric-insert): Add optional prefix arg,
	and pass to self-insert-command.

2005-04-11  Lute Kamstra  <lute@gnu.org>

	* generic.el: Commentary section cleanup.
	(generic): Delete.
	(generic-use-find-file-hook, generic-lines-to-scan)
	(generic-find-file-regexp, generic-ignore-files-regexp)
	(default-generic-mode, generic-mode-find-file-hook)
	(generic-mode-ini-file-find-file-hook): Move to generic-x.el.
	* generic-x.el (generic-x): Docstring fix.  Put it in the data group.
	(generic-use-find-file-hook, generic-lines-to-scan)
	(generic-find-file-regexp, generic-ignore-files-regexp)
	(default-generic-mode, generic-mode-find-file-hook)
	(generic-mode-ini-file-find-file-hook): Move from generic.el.

2005-04-10  Karl Fogel  <kfogel@red-bean.com>

	* bookmark.el (bookmark-write-file): Catch errors writing file.
	This is the same change as revision 1.30 of saveplace.el.

2005-04-10  Richard M. Stallman  <rms@gnu.org>

	* startup.el (fancy-splash-tail): Update copyright year.
	(command-line): Split part of -Q into -D.
	(emacs-basic-display): New defvar.
	(fancy-splash-text): Correct name of menu item.

	* saveplace.el (save-place-alist-to-file): Catch errors writing file.

	* info.el (Info-fontify-node): Handle fontification of multiple * Menu
	lines in one node.

	* comint.el (comint-send-input): New arg ARTIFICIAL.
	Callers in this file changed.

	* abbrev.el (define-abbrevs): Read system abbrevs properly.

	* emacs-lisp/map-ynp.el (map-y-or-n-p): Clarify RET/q in help message.

2005-04-10  Chong Yidong  <cyd@stupidchicken.com>

	* url/url-ldap.el (url-ldap): Add docstring.  Fix call to
	`ldap-search-internal'.

2005-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* files.el (set-auto-mode-1): Use line-end-position.

	* international/latin-1.el:
	* international/latin-2.el:
	* international/latin-3.el:
	* international/latin-4.el:
	* international/latin-5.el:
	* international/latin-8.el:
	* international/latin-9.el: Give punctuation syntax to NBSP.

	* textmodes/bibtex.el (bibtex-autokey-titleword-ignore)
	(bibtex-reference-key, bibtex-autokey-demangle-name, bibtex-mode):
	Use char-classes to accept non-ascii letters, accepted in some recent
	bibtex implementations.

2005-04-10  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-set-minor-mode): Any non-nil value for the
	variable should enable the mode when set through Custom.

2005-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/vhdl-mode.el (vhdl-mode-map-init): Don't override default
	TAB binding so tab-always-indent is obeyed.
	(vhdl-minibuffer-local-map): Move initialization into declaration.
	(vhdl-mode-abbrev-table-init): Mark the abbrevs as `system'.
	(vhdl-run-when-idle, vhdl-create-mode-menu, vhdl-character-to-event)
	(vhdl-hooked-abbrev): Avoid test for XEmacs.
	(vhdl-current-line): Use line-beginning-position.
	(vhdl-doc-variable, vhdl-doc-mode): Call help-setup-xref before
	with-output-to-temp-buffer, so the current position can be recorded.

2005-04-10  Masatake YAMATO  <jet@gyve.org>

	* progmodes/compile.el (compilation-error-regexp-alist-alist):
	Add regexp for gcov.

2005-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* calendar/time-date.el (time-to-seconds, seconds-to-time)
	(days-to-time, time-subtract, time-add): Don't use the #xhhhh
	syntax which Emacs 20 doesn't support.

2005-04-09  Richard M. Stallman  <rms@gnu.org>

	* help.el (describe-key-briefly, describe-key):
	Replace strings as event types with "(any string)".

2005-04-09  Stefan Monnier  <monnier@iro.umontreal.ca>

	* arc-mode.el (archive-mode-map): Move initialization into
	the declaration.  Override *all* bindings of `undo'.
	(archive-lemacs): Remove, use (featurep 'xemacs) instead.

2005-04-09  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el (math-standard-units): Redefine Watt hour as W*hr.

2005-04-09  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (xterm-rgb-convert-to-16bit): Simplify.
	(xterm-register-default-colors): Update color values computation
	to match xterm-200.

2005-04-09  Kenichi Handa  <handa@m17n.org>

	* international/code-pages.el (iso-latin-7): Fix the map.

2005-04-08  Luc Teirlinck  <teirllm@auburn.edu>

	* emacs-lisp/lisp.el (defun-prompt-regexp)
	(parens-require-spaces, buffer-end, end-of-defun)
	(insert-parentheses): Doc fixes.

2005-04-08  Kim F. Storm  <storm@cua.dk>

	* comint.el (comint-highlight-prompt): Fix face spec.
	* hi-lock.el (hi-green): Likewise.

2005-04-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* cus-edit.el (custom-modified-face):
	* comint.el (comint-highlight-input): Fix previous changes.
	* term.el (term-handle-ansi-escape): Add a comment.

2005-04-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* whitespace.el (whitespace-highlight-the-space): Put the same overlay
	in the buffer and in whitespace-highlighted-space.
	(whitespace-unhighlight-the-space): Simplify.
	(whitespace-buffer): Simplify.

2005-04-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* textmodes/table.el (table-cell-face): Add special case for
	displays supporting a high number of colors.
	* progmodes/vhdl-mode.el (vhdl-font-lock-prompt-face)
	(vhdl-font-lock-reserved-words-face)
	(vhdl-speedbar-architecture-face)
	(vhdl-speedbar-instantiation-face)
	(vhdl-speedbar-architecture-selected-face)
	(vhdl-speedbar-instantiation-selected-face): Likewise.
	* progmodes/sh-script.el (sh-heredoc-face): Likewise.
	* progmodes/idlw-help.el (idlwave-help-link-face): Likewise.
	* progmodes/ebrowse.el (ebrowse-tree-mark-face)
	(ebrowse-root-class-face, ebrowse-member-attribute-face)
	(ebrowse-progress-face): Likewise.
	* progmodes/compile.el (compilation-info-face): Likewise.
	* progmodes/cc-fonts.el (c-invalid-face): Likewise.
	* emacs-lisp/re-builder.el (reb-match-3): Likewise.
	* calendar/calendar.el (diary-face): Likewise.
	* woman.el (woman-italic-face, woman-bold-face)
	(woman-unknown-face): Likewise.
	* wid-edit.el (widget-button-pressed-face): Likewise.
	* whitespace.el (whitespace-highlight-face): Likewise.
	* smerge-mode.el (smerge-mine-face, smerge-base-face): Likewise.
	* pcvs-info.el (cvs-marked-face): Likewise.
	* info.el (info-xref): Likewise.
	* ido.el (ido-subdir-face, ido-indicator-face): Likewise.
	* hilit-chg.el (highlight-changes-face)
	(highlight-changes-delete-face): Likewise.
	* hi-lock.el (hi-yellow, hi-green, hi-blue-b, hi-green-b)
	(hi-red-b): Likewise.
	* generic-x.el (show-tabs-tab-face, show-tabs-space-face): Likewise.
	* font-lock.el (font-lock-keyword-face)
	(font-lock-function-name-face, font-lock-warning-face): Likewise.
	* cus-edit.el (custom-invalid-face, custom-modified-face)
	(custom-set-face, custom-changed-face, custom-variable-tag-face)
	(custom-group-tag-face-1, custom-group-tag-face): Likewise.
	* comint.el (comint-highlight-prompt): Likewise.

2005-04-08  Lute Kamstra  <lute@gnu.org>

	* font-lock.el (font-lock-keywords): Docstring fixes.

2005-04-08  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-show-warning): If the number of unprintable
	chars are more than a limit, print " and more..." at the tail.

2005-04-08  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/authors.el (authors-aliases): Update list.
	(authors-ignored-files): New list.
	(authors-fixed-entries): Fix typo.
	(authors-renamed-files-alist): Update list.
	(authors-add): Check authors-ignored-files.

2005-04-08  Carsten Dominik  <dominik@science.uva.nl>

	* calendar/diary-lib.el (add-to-diary-list): MARKER argument made
	optional, to ensure backward compatibility.

2005-04-08  Stephen Eglen  <stephen@gnu.org>

	* textmodes/flyspell.el (flyspell-large-region): Doc fix.

2005-04-08  Kim F. Storm  <storm@cua.dk>

	* buff-menu.el (Buffer-menu-mode-map): Map follow-link to mouse-face.

	* mouse.el (mouse-on-link-p): Doc fix.

2005-04-07  Luc Teirlinck  <teirllm@auburn.edu>

	* ielm.el (ielm-prompt-read-only): Doc fix.

	* comint.el (comint-prompt-read-only): Doc fix.

2005-04-07  Benjamin Rutt  <brutt@bloomington.in.us>

	* ffap.el (ffap-pass-wildcards-to-dired): New user option to
	ensure dired always handles wildcards passed to ffap.
	(find-file-at-point): Use it.
	(ffap-dired-wildcards): Doc fix.

2005-04-07  Juri Linkov  <juri@jurta.org>

	* simple.el (next-error-overlay-arrow-position): New defvar.
	Put "=>" on its property `overlay-arrow-string'.  Add it to
	`overlay-arrow-variable-list'.

	* progmodes/compile.el (compilation-setup):
	Set `next-error-overlay-arrow-position' to nil.  Also set it to
	nil in the local hook `kill-buffer-hook'.  Make local variable
	`overlay-arrow-string' and set it to "=>".
	(compilation-goto-locus): Set BOL position to
	`next-error-overlay-arrow-position' instead of
	`overlay-arrow-position'.

	* info.el (Info-mode): Add `Info-kill-buffer' to `kill-buffer-hook'
	locally instead of adding it to the global hook.
	(Info-kill-buffer): Move up.

2005-04-06  Dan Nicolaescu  <dann@ics.uci.edu>

	* term/xterm.el (xterm-standard-colors): Update color values from
	xterm-200.

2005-04-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-keywords-2): Add \bfseries.

	* fast-lock.el:
	* lazy-lock.el: Move them to the obsolete subdir.

2005-04-06  JUAN-LEON Lahoz Garcia  <juanleon1@gmail.com>

	* wdired.el (wdired-advise-functions, wdired-add-skip-in-replace)
	(wdired-add-replace-advice): Remove.
	(wdired-change-to-wdired-mode): Use query-replace-skip-read-only.

2005-04-06  Kim F. Storm  <storm@cua.dk>

	* startup.el (command-line): Add --bare-bones alias for -Q.

2005-04-06  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Use create-fontset-from-mac-roman-font to
	create the startup fontset if a font specification ends with
	`mac-roman'.

2005-04-06  Lute Kamstra  <lute@gnu.org>

	* add-log.el (change-log-font-lock-keywords): Complete 2005-04-03
	change.

	* emacs-lisp/copyright.el (copyright-update-year): Replace the
	right subexpression.  Suggested by Jay Bingham <jay.bingham@hp.com>.

2005-04-05  Lute Kamstra  <lute@gnu.org>

	* generic.el (generic-mode-internal): Fix 2005-03-31 change.
	(define-generic-mode): Ditto.  Fix debug declaration.

	* generic-x.el (show-tabs-tab-face, show-tabs-space-face):
	Put them in the generic-x group.

	* calendar/timeclock.el (timeclock): Doc fix.

	* generic.el (define-generic-mode): Don't use custom-current-group.
	Document default :group value.
	* emacs-lisp/easy-mmode.el (define-minor-mode): Ditto.
	(define-global-minor-mode): Don't use custom-current-group.

2005-04-05  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* startup.el (command-line-1): Display startup-echo-area-message
	when fancy splash screen is in use.

	* progmodes/sh-script.el (sh-builtins) <bash>: Add `caller'.
	(sh-escaped-newline): New face.
	(sh-font-lock-keywords) <shell>: Improve regexp for escaped
	newline, and use sh-escaped-newline face.

	* progmodes/tcl.el (tcl-escaped-newline): New face.
	(tcl-builtin-list): New variable.
	(tcl-set-font-lock-keywords): Add builtins, variables, and escaped
	newlines.  Fix keywords subexpression number.

2005-04-05  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-diary-default-entry): Fix call to
	`add-to-diary-entry'.

2005-04-05  Kim F. Storm  <storm@cua.dk>

	* ediff-init.el: Use (featurep 'xemacs).

2005-04-05  David Ponce  <david@dponce.com>

	* cus-edit.el (face): Derive from symbol widget.  Display sample
	of the current face on the fly.
	(widget-face-sample-face-get, widget-face-notify): New functions.
	(widget-face-value-create): Remove.

	* wid-edit.el (widget-field-end): Temporarily remove field
	narrowing before to call `get-char-property'.

2005-04-04  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-replacement-list): Add subscripts.
	(math-read-subscripts): New variable.
	(math-read-preprocess-string): Process subscripts.

2005-04-04  Luc Teirlinck  <teirllm@auburn.edu>

	* comint.el (comint-prompt-read-only): Doc fix.

	* dired.el (dired-copy-filename-as-kill): Make `-' arg behave like
	`-1'.  Doc fix.

2005-04-04  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-insert-mode-line-in-empty-file):
	Change default value to nil.

2005-04-04  Lute Kamstra  <lute@gnu.org>

	* autorevert.el (auto-revert-mode): Specify :group.
	* battery.el (display-battery-mode): Specify :group.
	* diff-mode.el (diff-minor-mode): Specify :group.
	* font-core.el (font-lock-mode): Specify :group.
	* hl-line.el (hl-line-mode): Specify :group.
	* iimage.el (iimage): New customization group.
	(iimage-mode): Specify :group.
	* longlines.el (longlines-mode): Specify :group.
	* master.el: Don't require easy-mmode.
	(master): New customization group.
	(master-mode): Specify :group.
	* msb.el (msb-mode): Specify :group.
	* reveal.el (reveal-mode): Specify :group.
	* simple.el (next-error-follow-minor-mode): Specify :group.
	* smerge-mode.el (smerge-mode): Specify :group.
	* emacs-lisp/eldoc.el (eldoc-mode): Specify :group.
	* emulation/cua-base.el (cua-mode): Specify :group.
	* international/encoded-kb.el (encoded-kbd-mode): Specify :group.
	* language/thai-util.el (thai-auto-composition-mode)
	(thai-word-mode): Specify :group.
	* mail/supercite.el (sc-minor-mode): Specify :group.
	* progmodes/cwarn.el (cwarn-mode): Specify :group.
	* progmodes/flymake.el (flymake-mode): Specify :group.
	* progmodes/glasses.el (glasses-mode): Specify :group.
	* progmodes/hideif.el (hide-ifdef-mode): Specify :group.
	* textmodes/enriched.el (enriched-mode): Specify :group.
	* textmodes/refill.el (refill-mode): Specify :group.

	* add-log.el (change-log-font-lock-keywords): Names in
	parenthesized lists can contain spaces.

2005-04-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* startup.el (fancy-splash-text): Shorten default text of
	"Emacs Tutorial" line.  Also, if the current language env
	indicates an available tutorial file other than TUTORIAL,
	extract its title and append it to the line in parentheses.
	(fancy-splash-insert): If arg is a thunk, funcall it.

2005-04-04  Jay Belanger  <belanger@truman.edu>

	* calc.el (calc-language-alist): Add tags to customization type.

2005-04-03  Luc Teirlinck  <teirllm@auburn.edu>

	* xt-mouse.el (xterm-mouse-mode): Add explicit Custom group, mouse.
	Doc fix.

2005-04-03  Marcelo Toledo  <marcelo@gnu.org>

	* add-log.el (change-log-font-lock-keywords): The manual
	describing a Change Log entry, says: (...) "Aside from these
	header lines, every line in the change log starts with a space or
	a tab.".  The font-lock was not highlighting lines started with
	spaces, added support for it.

2005-04-03  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-url): Use format to generate the url.
	(bibtex-generate-url-list): Update docstring accordingly.  Put the
	complex example in the docstring.
	(bibtex-font-lock-url): Use pop.

2005-04-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/tcl.el (tcl-set-font-lock-keywords): Use new \_< ops.

	* pcvs.el (cvs-checkout): Prompt for cvsroot as well.

2005-04-03  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* filesets.el (filesets-set-default): Doc fix.

2005-04-03  Lute Kamstra  <lute@gnu.org>

	* generic.el (define-generic-mode): Add argument to specify
	keywords for defcustom.
	(default-generic-mode): Specify :group.

	* generic-x.el: Specify :group for all generic modes.

	* desktop.el (desktop-no-desktop-file-hook)
	(desktop-after-read-hook): Doc fix.

2005-04-02  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (visible-mode): Use explicit :group keyword.
	This changes the group of `visible-mode-hook' from paren-blinking
	to editing-basics.

2005-04-02  Sergey Poznyakoff  <gray@Mirddin.farlep.net>  (tiny change)

	* mail/rmail.el (rmail-parse-url): Bugfix.  Parse traditional
	mailbox specifications as well as URLs.
	(rmail-insert-inbox-text): Remove unused conditional branches.

2005-04-01  Jay Belanger  <belanger@truman.edu>

	* calc/calc-graph.el (calc-gnuplot-name, calc-gnuplot-plot-command)
	(calc-gnuplot-print-command): Move definitions to calc.el.

	* calc/calc-embed.el (calc-embedded-announce-formula)
	(calc-embedded-open-formula, calc-embedded-close-formula)
	(calc-embedded-open-word, calc-embedded-close-word)
	(calc-embedded-open-plain, calc-embedded-close-plain)
	(calc-embedded-open-new-formula, calc-embedded-close-new-formula)
	(calc-embedded-open-mode, calc-embedded-close-mode):
	Move definitions to calc.el.

	* calc/calc.el (calc-settings-file, calc-language-alist):
	Make customizable.
	(calc-embedded-announce-formula, calc-embedded-open-formula)
	(calc-embedded-close-formula, calc-embedded-open-word)
	(calc-embedded-close-word, calc-embedded-open-plain)
	(calc-embedded-close-plain, calc-embedded-open-new-formula)
	(calc-embedded-close-new-formula, calc-embedded-open-mode)
	(calc-embedded-close-mode, calc-gnuplot-name)
	(calc-gnuplot-plot-command, calc-gnuplot-print-command): Move here
	from other files and make customizable.

2005-04-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (cvs-temp-buffer, cvs-mode-kill-process, cvs-buffer-check):
	Use buffer-live-p.
	(cvs-mode-run): Don't call cvs-update-header here.
	(cvs-run-process): Call cvs-update-header.
	Use process properties for cvs-postprocess and cvs-buffer so that
	the sentinel can behave better if the temp buffer is killed.
	Use a pipe rather than a tty, to better handle unexpected prompts.
	(cvs-sentinel): Rewrite.  Call cvs-update-header.

2005-04-01  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-workfile-unchanged-p): Disable mtime check when
	we go via Tramp or Ange-FTP.  Suggested by Kai Grossjohann.

2005-03-31  Stefan Monnier  <monnier@iro.umontreal.ca>

	* generic.el (define-generic-mode): Add indentation rule.

2005-03-31  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (mode-require-final-newline): Make Custom correctly
	report a nil value and allow to set it to nil via Custom.
	Doc fix.

2005-04-01  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Enable the correct case setting for
	dotless-i and dotted-I.

2005-04-01  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-internal): Fall back to non-ido command if
	initial directory is on slow ftp (or tramp) host.

2005-03-31  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/autoload.el (make-autoload):
	Handle define-global-minor-mode.

	* emacs-lisp/easy-mmode.el (define-global-minor-mode):
	Rename from easy-mmode-define-global-mode.
	(easy-mmode-define-global-mode): Alias for define-global-minor-mode.

	* progmodes/scheme.el (scheme-mode-syntax-table):
	Update syntax of | and # for two-character comment syntax.

2005-03-31  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/easy-mmode.el (easy-mmode-define-global-mode)
	(define-minor-mode): Call custom-current-group at load-time.

	* generic.el (define-generic-mode): Add debug declaration.
	Add defcustom for the mode hook.
	(generic-mode-internal): Use run-mode-hooks.

2005-03-31  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-1-click-follows-link): Increase to 450 ms.
	(mouse-fixup-help-message): New defun called by show_help_echo
	to fixup mouse-2 prefix in help messages when applicable.

	* tooltip.el (tooltip-show-help-function): Don't fixup message here.

2005-03-31  Kenichi Handa  <handa@m17n.org>

	* language/thai-word.el (thai-find-word-ends): Pay attention to
	the case that we reach the end of buffer.

	* textmodes/fill.el (fill-text-properties-at): New function.
	(fill-newline): Use fill-text-properties-at instead of
	text-properties-at.

2005-03-31  Olive Lin  <olive.lin@versateladsl.be>  (tiny change)

	* textmodes/tex-mode.el (tex-start-tex) Use shell-quote-argument,
	not comint-quote-filename.

2005-03-31  Thien-Thi Nguyen  <ttn@gnu.org>

	* help-fns.el (help-with-tutorial): Revert last change.

2005-03-31  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-scroll-down): Add CUA property.

2005-03-30  Paul Eggert  <eggert@cs.ucla.edu>

	* calendar/cal-china.el: Update reference to "Calendrical
	Calculations" book; there's a new edition.
	* calendar/cal-coptic.el: Likewise.
	* calendar/cal-french.el: Likewise.
	* calendar/cal-hebrew.el: Likewise.
	* calendar/cal-islam.el: Likewise.
	* calendar/cal-iso.el: Likewise.
	* calendar/cal-julian.el: Likewise.
	* calendar/cal-mayan.el: Likewise.
	* calendar/cal-persia.el: Likewise.
	* calendar/calendar.el: Likewise.
	* calendar/holidays.el: Likewise.
	* calendar/lunar.el: Likewise.
	* calendar/solar.el: Likewise.

	* calendar/calendar.el (calendar-day-abbrev-array): Remove trailing
	white space from doc string.

2005-03-30  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-full-help): Remove email address.

2005-03-30  Thien-Thi Nguyen  <ttn@gnu.org>

	* help-fns.el (help-with-tutorial): Delete title line.

2005-03-30  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/cal-x.el (calendar-one-frame-setup)
	(calendar-only-one-frame-setup, calendar-two-frame-setup): Use t
	rather than 'symbol for set-window-dedicated-p.

	* calendar/appt.el (appt-buffer-name): Make it a constant.
	(appt-add): Doc fix.

	* filesets.el (filesets-menu-path, filesets-menu-before)
	(filesets-menu-in-menu): Doc fix.  Now valid in GNU Emacs.
	(filesets-menu-cache-file): Use directory ~/.emacs.d.
	(filesets-add-submenu): Delete and use add-submenu instead.

2005-03-30  Carsten Dominik  <dominik@science.uva.nl>

	* org.el (org-agenda-phases-of-moon, org-agenda-sunrise-sunset)
	(org-agenda-convert-date, org-agenda-goto-calendar): New commands.
	(org-diary-default-entry): New function.
	(org-get-entries-from-diary): Better parsing of diary entries.
	(org-agenda-check-no-diary): New function.
	("diary-lib"): Advice to function `add-to-diary-list', to allow
	linking to diary entries.
	(org-agenda-execute-calendar-command): New function.
	(org-agenda): Improve visible section in window.
	Use `org-fit-agenda-window'.
	(org-fit-agenda-window): New option.
	(org-move-subtree-down): Better handling of empty lines
	at end of subtree.
	(org-cycle): Numeric prefix is interpreted now as show-subtree N
	levels up.
	(org-fontify-done-headline): New option.
	(org-headline-done-face): New face.
	(org-set-font-lock-defaults): Use `org-headline-done-face'.
	(org-table-copy-down): Rename from `org-table-copy-from-above'.
	When current field is non-empty, it is copied to next row.
	(org-table-copy-from-above): Fix bug which made it
	impossible to copy fields containing only a single non-white character.

2005-03-30  Kim F. Storm  <storm@cua.dk>

	* kmacro.el (kmacro-end-macro): Isearch may store this command
	into the macro -- so ignore it when executing keyboard macro.

2005-03-30  Nick Roberts  <nickrob@snap.net.nz>

	* tooltip.el (tooltip-gud-display): Use gud-overlay-arrow-position.

2005-03-29  Kenichi Handa  <handa@m17n.org>

	* language/thai.el ("Thai"): Set setup-function and exit-function
	for Thai language environment.

	* language/thai-util.el: Require thai-word.
	(thai-word-mode-map): New variable.
	(thai-word-mode): New minor mode.
	(setup-thai-language-environment-internal): New function.
	(exit-thai-language-environment-internal): New function.

	* language/thai-word.el (thai-word-table): Declare it by defvar,
	use dolist to initialize it.
	(thai-kill-word, thai-backward-kill-word, thai-transpose-words)
	(thai-fill-find-break-point): New functions.

2005-03-29  Richard M. Stallman  <rms@gnu.org>

	* simple.el (idle-update-delay): Move definition up.
	(set-mark): Doc fix.

2005-03-29  Chong Yidong  <cyd@stupidchicken.com>

	* longlines.el: New file.

	* simple.el (buffer-substring-filters): New variable.
	(filter-buffer-substring): New function.
	(kill-region, copy-region-as-kill): Use it.

	* register.el (copy-to-register, append-to-register)
	(prepend-to-register): Use filter-buffer-substring.

2005-03-30  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el (gdb): (Re)-initialize gud-filter-pending-text.
	(gud-filter-pending-text): Move in front of gdb.
	(gud-overlay-arrow-position): New variable.
	(gud-sentinel, gud-display-line): Use it in place of
	overlay-arrow-position.

2005-03-29  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* progmodes/fortran.el (fortran-if-indent): Doc fix.
	(fortran-font-lock-keywords-2): Add "where", "elsewhere".
	(fortran-font-lock-keywords-4): New variable.
	(fortran-blocks-re, fortran-end-block-re)
	(fortran-start-block-re): New constants, for hideshow.
	(hs-special-modes-alist): Add a Fortran entry.
	(fortran-mode-map): Bind fortran-end-of-block,
	fortran-beginning-of-block to \M-\C-n, \M-\C-p.
	(fortran-mode): Doc fix.  Add fortran-font-lock-keywords-4.
	(fortran-looking-at-if-then, fortran-end-of-block)
	(fortran-beginning-of-block): New functions, for hideshow.

	* progmodes/f90.el (f90-end-block-re, f90-start-block-re):
	Doc fix.  Tweak regexp.
	(f90-beginning-of-block): Push mark first.

2005-03-29  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el: Update copyright date.
	(calc-version): Increase to 2.1.
	(calc-version-date): Remove.

	* calc/calc-help.el: Update copyright date.
	(calc-full-help): Remove reference to calc-version-date.
	Update copyright date.

2005-03-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc.el (vc-do-command): Use a pipe for async processes, so password
	prompts don't show up at places where the user can't reply.

2005-03-29  Olive Lin  <olive.lin@versateladsl.be>  (tiny change)

	* textmodes/tex-mode.el (tex-send-command): shell-quote-argument
	on the file name we pass to the inferior shell.

2005-03-29  Stephan Stahl  <stahl@eos.franken.de>  (tiny change)

	* progmodes/which-func.el (which-function): Be robust in the face of an
	imenu--make-index-alist failure.

2005-03-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* reveal.el (reveal-mode-map): Don't override C-a and C-e.

	* progmodes/python.el (python-preoutput-filter): Fix last change.

2005-03-29  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug-on-entry): Handle autoloaded
	functions and compiled macros.
	(debug-convert-byte-code): Handle macros too.
	(debug-on-entry-1): Don't signal an error when trying to clear a
	function that is not set to debug on entry.

2005-03-29  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el: Add functions to math-function-table
	properties of tex and math.

2005-03-29  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-plot-string): Translate characters by
	ps-print-translation-table.
	(ps-mule-begin-job): Call find-charset-region/string with
	ps-print-translation-table.
	(ps-mule-printable-p): Return t if CHARSET is ascii or latin-iso8859-1.

	* ps-print.el (ps-print-translation-table): New variable.
	(ps-plot-region): Translate characters by ps-print-translation-table.

2005-03-29  Juri Linkov  <juri@jurta.org>

	* simple.el (next-error-highlight-timer): New variable.

	* progmodes/compile.el (compilation-goto-locus):
	Use `next-error-highlight-timer' instead of `sit-for'.

2005-03-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mail/supercite.el (sc-mail-field): Use assoc-string.
	(sc-get-address): Simplify regexps.

	* files.el (minibuffer-with-setup-hook): New macro.
	(find-file-read-args): Use it to avoid let-binding
	minibuffer-with-setup-hook (which breaks turning on/off
	file-name-shadow-mode while in the prompt).

	* complete.el (PC-read-include-file-name-internal): Use
	test-completion.

2005-03-28  Luc Teirlinck  <teirllm@auburn.edu>

	* font-lock.el: Bind `font-lock-fontify-block' to M-o M-o.

2005-03-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* window.el (window-buffer-height): Use count-screen-lines.

	* progmodes/python.el (python-preoutput-leftover): New var.
	(python-preoutput-filter): Use it.
	(python-send-receive): Loop until all the result has been received.

2005-03-28  Juri Linkov  <juri@jurta.org>

	* dired.el (dired-mode-map): Add ellipsis to "Compare directories".

	* menu-bar.el (menu-bar-file-menu): Remove ellipsis from
	"Recover Crashed Session".
	(menu-bar-search-menu): Add ellipsis to "Search tagged files".
	(menu-bar-replace-menu): Add ellipsis to "Replace in tagged files".
	(menu-bar-goto-menu): Add ellipsis to "Set Tags File Name".
	(menu-bar-goto-menu): Add ellipsis to "Tags Apropos".
	(menu-bar-options-menu): Add ellipsis to "Set Font/Fontset".
	(menu-bar-manuals-menu): Add ellipsis to "Find Command in Manual".
	(menu-bar-manuals-menu): Add ellipsis to "Find Key in Manual".
	(menu-bar-help-menu): Remove ellipsis from "Find Emacs Packages".

	* ediff-hook.el (menu-bar-ediff-misc-menu, ediff-misc-menu):
	Remove ellipsis from "Ediff Manual", "Customize Ediff", "List
	Ediff Sessions", "Toggle use of separate control buffer frame",
	"Use separate frame for Ediff control buffer".

	* bookmark.el (menu-bar-bookmark-map): Add ellipsis to "Jump to
	Bookmark", "Set Bookmark", "Insert Contents", "Insert Location",
	"Rename Bookmark", "Delete Bookmark".

	* info.el (Info-mode-menu): Remove ellipsis from "Index".
	Add ellipsis to "Lookup a String", "Lookup a string in all indices".
	Add `:active Info-index-alternatives' to "Next Matching Item".

	* wdired.el (wdired-change-to-wdired-mode):
	Mention `wdired-abort-changes' key in the initial message.

	* international/mule.el (auto-coding-alist): Associate non-ascii
	image filename extensions with `no-conversion'.

2005-03-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/iso-acc.el:
	* obsolete/iso-acc.el: Move iso-acc to the obsolete subdir.

2005-03-26  Luc Teirlinck  <teirllm@auburn.edu>

	* textmodes/sgml-mode.el (html-mode): Doc update.

	* autorevert.el (auto-revert-check-vc-info): Minor doc fix.

2005-03-26  Dan Nicolaescu  <dann@ics.uci.edu>

	* term.el (term-move-columns): Fix face after extending a line.
	(term-insert-spaces): Likewise.
	(term-reset-terminal): Fix off by one error.

2005-03-26  Eli Zaretskii  <eliz@gnu.org>

	* international/mule.el (auto-coding-alist): Add .xpi files.

	* files.el (auto-mode-alist): Add .xpi files.

2005-03-26  Jure Cuhalev  <gandalf@owca.info>  (tiny change)

	* textmodes/ispell.el (ispell-dictionary-alist-6): Add slovenian.

2005-03-26  Eli Zaretskii  <eliz@gnu.org>

	* term/bobcat.el: Don't use keyswap.el, since it is now obsolete.

2005-03-26  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/cal-menu.el (top level): Delete local C-down-mouse-3
	binding.  Suggested by Stephan Stahl <stahl@eos.franken.de>.

	* calendar/cal-move.el (calendar-beginning-of-year): Move the
	cursor to Jan 1 when needed.
	(calendar-end-of-year): Fix -/+ typo.
	Reported by Chong Yidong <cyd@stupidchicken.com>.

2005-03-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-mode): Add autoload cookie.

	* emacs-lisp/debug.el (debugger-record-expression): Add a missing
	format to `message'.  Inspired by Deepak Goel <deego@gnufans.org>.

2005-03-25  Richard M. Stallman  <rms@gnu.org>

	* filesets.el (filesets-init): Add autoload.

	* mail/mailalias.el (mail-directory): Doc fix.

2005-03-25  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/mailalias.el (mail-directory-process): Do nothing if
	mail-directory-process is an atom.
	(mail-get-names): Ignore mail-directory-names if it is an atom.
	(mail-directory-process defvar): Doc fix.
	(mail-names): Doc fix.

2005-03-25  Johan Bockg,Ae(Brd  <bojohan+mail@dd.chalmers.se>  (tiny change)

	* textmodes/flyspell.el (mail-mode-flyspell-verify): Fix regexp syntax.

2005-03-26  Kenichi Handa  <handa@m17n.org>

	* international/mule-util.el (detect-coding-with-priority):
	Call update-coding-systems-internal before detect-coding-region.

2005-03-26  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-breakpoints-mode-map)
	(gdb-frames-mode-map): Add follow-link property.

2005-03-25  Jay Belanger  <belanger@truman.edu>

	* calc/calcalg2.el (calc-solve-for): Use "Variable(s)" to prompt
	for variables.

2005-03-25  Juri Linkov  <juri@jurta.org>

	* image-mode.el: Optimize image filename extension regexps in
	autoload cookies.  Associate .x[bp]m with `image-mode-maybe'
	in `auto-mode-alist'.
	(image-mode): Add `image-toggle-display-text' to local hook
	`change-major-mode-hook'.  Display the image as an image by
	default.  Set `cursor-type' and `truncate-lines' if the image
	is already displayed.  Take into account the current mode (image
	or text) in message.
	(image-minor-mode): New minor mode.
	(image-mode-maybe, image-toggle-display-text): New functions.
	(image-toggle-display): Use called-interactively-p.
	Let-bind `inhibit-read-only' to t.

	* image-mode.el (image-minor-mode): Set `cursor-type' and
	`truncate-lines' if the image is already displayed.  Add turning
	image-minor-mode off to `change-major-mode-hook'.  Add message.
	Call `image-toggle-display-text' after turning image-minor-mode off.

2005-03-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* international/mule-cmds.el (set-locale-environment): For Mac OS X's
	Terminal.app, use utf-8.
	(set-display-table-and-terminal-coding-system): Add coding-system arg.
	(set-locale-environment): Use it.

	* term/xterm.el: Undo last change, better done in mule-cmds.el.

	* emacs-lisp/rx.el (rx-constituents): Add symbol-start and symbol-end.

	* progmodes/python.el (python-close-block-statement-p)
	(python-outdent-p, python-current-defun): Use symbol-end.

2005-03-25  Karl Chen  <quarl@cs.berkeley.edu>  (tiny change)

	* files.el (save-some-buffers): Doc fix.

2005-03-25  Werner Lemberg  <wl@gnu.org>

	* complete.el, thumbs.el: Replace `legal' with `valid'.
	* calendar/calendar.el: Replace `legal' with `valid'.
	* emacs-lisp/advice.el: Replace `legal' with `valid'.
	* mail/supercite.el: Replace `legal' with `valid'.
	* progmodes/cperl-mode.el, progmodes/idlw-shell.el
	* progmodes/idlwave.el, progmodes/vhdl-mode.el:
	Replace `legal' with `valid'.
	* textmodes/reftex-vars.el, textmodes/reftex.el:
	Replace `legal' with `valid'.

2005-03-25  Werner Lemberg  <wl@gnu.org>

	* calc/calc-forms.el, calc/calc-sel.el:
	* midnight.el, vc-cvs.el:
	* emacs-lisp/cl-macs.el:
	* emulation/vip.el:
	* eshell/esh-io.el, eshell/esh-var.el:
	* mail/supercite.el:
	* progmodes/ebnf-abn.el, progmodes/ebnf-bnf.el
	* progmodes/ebnf-ebx.el, progmodes/ebnf-dtd.el, progmodes/ebnf-iso.el
	* progmodes/ebnf-yac.el, progmodes/ebnf2ps.el, progmodes/idlwave.el
	* progmodes/sh-script.el, progmodes/xscheme.el:
	* textmodes/refbib.el, textmodes/refer.el, textmodes/reftex-cite.el
	* textmodes/reftex-index.el, textmodes/reftex-parse.el
	* textmodes/reftex-ref.el, textmodes/reftex-vars.el
	* textmodes/reftex.el, textmodes/org.el:
	Replace `illegal' with `invalid'.

2005-03-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/flymake.el (flymake-get-file-name-mode-and-masks)
	(flymake-find-buildfile, flymake-find-possible-master-files)
	(flymake-check-include, flymake-parse-line): Replace loops over the
	length of lists, by loops over lists, to remove silly O(n,A2(B) behavior.

	* progmodes/flymake.el (flymake-ensure-ends-with-slash): Remove.
	Substitute file-name-as-directory in the rest of the file.
	(flymake-get-common-file-prefix): Rewrite, using compare-strings.
	(flymake-replace-region): Remove unused arg `buffer'.
	(flymake-check-patch-master-file-buffer): Update calls to it.
	(flymake-add-err-info): Remove unused var `count'.
	(flymake-mode): Use define-minor-mode.

	* progmodes/flymake.el: Use with-current-buffer.
	(flymake-float-time, flymake-get-temp-dir, flymake-line-end-position)
	flymake-replace-regexp-in-string, flymake-line-beginning-position)
	(flymake-popup-menu, flymake-current-row, flymake-selected-frame):
	Avoid testing for `xemacs'.
	(flymake-nop): Move.
	(flymake-region-has-flymake-overlays): Return the computed value.
	(flymake-reformat-err-line-patterns-from-compile-el): Use dolist.
	Remove unused var `endline'.
	(flymake-get-line-count): Remove unused function.
	(flymake-display-err-menu-for-current-line): Unused var move-mouse-pos.

	* emulation/vi.el:
	* generic.el:
	* hilit-chg.el (global-highlight-changes):
	* hi-lock.el (hi-lock-mode):
	* follow.el: find-file-hooks -> find-file-hook.

	* comint.el (comint-insert-input): Obey mouse-yank-at-point.

2005-03-24  Juri Linkov  <juri@jurta.org>

	* dired.el (dired-mode-map): Add menu item "Compare directories"
	for dired-compare-directories.

	* dired-aux.el (dired-compare-directories): Add autoload cookie.
	Doc fix.  Replace `read-file-name' with `read-directory-name'.

2005-03-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* term/xterm.el: If running in Terminal.app set coding-system to utf-8.

2005-03-24  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-mode-change): Save all
	relevant mode settings in calc-embedded-original-modes when modes
	are permanently changed.

2005-03-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* autoinsert.el: find-file-hooks -> find-file-hook.

2005-03-24  Lute Kamstra  <lute@gnu.org>

	* generic.el (generic-font-lock-defaults): Make it obsolete.
	(generic-font-lock-keywords): New variable to replace
	generic-font-lock-defaults.
	(generic-mode-set-font-lock): Delete it.
	(generic-mode-internal): Don't call generic-mode-set-font-lock.
	(generic-bracket-support): Add docstring.

	* generic-x.el: Rename generic-font-lock-defaults to
	generic-font-lock-keywords throughout.
	(mailagent-rules-setup-function): Delete it.
	(mailagent-rules-generic-mode): Use anonymous function instead.
	(show-tabs-generic-mode-font-lock-defaults-1)
	(show-tabs-generic-mode-font-lock-defaults-2): Make them constants.
	Quote faces.
	(show-tabs-tab-face, show-tabs-space-face): Specify background,
	not foreground.

	* emacs-lisp/lisp-mode.el (lisp-imenu-generic-expression):
	Recognize define-generic-mode.

2005-03-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* icomplete.el (icomplete-simple-completing-p): Don't turn on icomplete
	if there's no completion table.

2005-03-23  Miles Bader  <miles@gnu.org>

	* progmodes/gdb-ui.el (breakpoint-enabled, breakpoint-disabled):
	Remove tty-specific variants, as they're no longer needed.

2005-03-23  Lute Kamstra  <lute@gnu.org>

	* generic-x.el: Code cleanup: make args constant whenever possible.
	(installshield-statement-keyword-list)
	(installshield-system-functions-list)
	(installshield-system-variables-list, installshield-types-list)
	(installshield-funarg-constants-list): Make them constants.

	* generic.el (generic-make-keywords-list): Add autoload cookie.

	* calendar/time-date.el: Add comment on time value formats.
	Don't require parse-time.
	(with-decoded-time-value): New macro.
	(encode-time-value): New function.
	(time-to-seconds, time-less-p, time-subtract, time-add): Use them.
	(days-to-time): Return a valid time value when arg is huge.
	(time-since): Use time-subtract.
	(time-to-number-of-days): Use time-to-seconds.

2005-03-23  David Ponce  <david@dponce.com>

	* recentf.el: (recentf-keep): New option.
	(recentf-menu-action): Default to `find-file'.
	(recentf-keep-non-readable-files-flag)
	(recentf-keep-non-readable-files-p)
	(recentf-file-readable-p, recentf-find-file)
	(recentf-cleanup-remote): Remove.
	(recentf-include-p): More robust.
	(recentf-keep-p): New function.
	(recentf-remove-if-non-kept): Rename from
	`recentf-remove-if-non-readable'.  Use `recentf-keep-p'.
	All callers updated.
	(recentf-menu-items-for-commands): Fix help string.
	(recentf-track-closed-file): Update.  Doc fix.
	(recentf-cleanup): Update.  Count removed files.  Doc fix.

2005-03-23  Kim F. Storm  <storm@cua.dk>

	* progmodes/gdb-ui.el (breakpoint-enabled, breakpoint-disabled):
	Don't inherit from fringe face (now happens automatically).

2005-03-22  Kim F. Storm  <storm@cua.dk>

	* tooltip.el (tooltip-show-help-function): Ignore negative mouse
	position values.

2005-03-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* menu-bar.el (showhide-date-time): Remove.
	(menu-bar-showhide-menu): Use menu-bar-make-mm-toggle.
	(menu-bar-make-mm-toggle): Simplify.

2005-03-22  JUAN-LEON Lahoz Garcia  <juanleon1@gmail.com>

	* progmodes/perl-mode.el (perl-font-lock-keywords-2):
	Accept qualified variable and function names.

2005-03-22  Thien-Thi Nguyen  <ttn@gnu.org>

	* bindings.el (completion-ignored-extensions):
	Remove ".lis" for `vax-vms'.

2005-03-22  Andreas Schwab  <schwab@suse.de>

	* generic-x.el: Revert last change.
	* ldefs-boot.el: Update.

2005-03-22  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-original-modes): New variable.
	(calc-embedded-save-original-modes)
	(calc-embedded-restore-original-modes): New functions.
	(calc-do-embedded): Save original modes when entering embedded mode
	and restore when leaving embedded mode.
	(calc-embedded-modes-change): Change the value of
	calc-embedded-original-modes to reflect permanent changes.

2005-03-22  Lute Kamstra  <lute@gnu.org>

	* generic-x.el: Require generic again.

2005-03-22  Miles Bader  <miles@gnu.org>

	* progmodes/gdb-ui.el (breakpoint-enabled, breakpoint-disabled):
	Tweak details to look good on both ttys and bitmap displays, light
	or dark background, etc.

2005-03-21  Kim F. Storm  <storm@cua.dk>

	* tooltip.el (tooltip-show-help-function): Check car and cdr of
	mouse position.

2005-03-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* icomplete.el: Don't forcibly turn on the mode upon load.
	(icomplete-mode): Use define-minor-mode.
	(icomplete-eoinput): Default to nil.
	(icomplete-minibuffer-setup): Remove autoload.
	(icomplete-tidy): Simplify.
	(icomplete-exhibit): Use buffer-undo-list to determine if we're still
	in the initial state or if the user has modified the field.
	Fix handling of icomplete-max-delay-chars.
	Remove code that handles the oddball case where
	minibuffer-completion-table is an integer.
	Wrap icomplete-completions in while-no-input in case building
	completions takes more time than expected.
	(icomplete-completions): Simplify.

2005-03-21  Richard M. Stallman  <rms@gnu.org>

	* jka-compr.el (jka-compr-really-do-compress):
	Make variable buffer-local.

	* image-mode.el: Handle .xpm files too.
	(image-toggle-display): Preserve modification flag.

	* help.el (where-is): Don't mention aliases with no key bindings.

2005-03-21  Lute Kamstra  <lute@gnu.org>

	* generic.el: Fix commentary section.  Don't require cl for
	compilation.
	(generic-mode-list): Add autoload cookie.
	(generic-use-find-file-hook, generic-lines-to-scan)
	(generic-find-file-regexp, generic-ignore-files-regexp)
	(generic-mode, generic-mode-find-file-hook)
	(generic-mode-ini-file-find-file-hook): Fix docstrings.
	(define-generic-mode): Make it a defmacro.  Fix docstring.
	(generic-mode-internal): Code cleanup.  Add autoload cookie.
	(generic-mode-set-comments): Code cleanup.
	* generic-x.el: Don't prevent compilation.  Don't require generic.
	Follow coding conventions.  Minor code cleanup.
	(etc-fstab-generic-mode): Add some keywords.
	* font-lock.el (lisp-font-lock-keywords-1): Font lock a call to
	define-generic-mode like a function declaration.

2005-03-21  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-do-embedded): Put data on stack before
	changing modes.

2005-03-21  Sam Steingold  <sds@gnu.org>

	* add-log.el (add-log-current-defun): Support more C DEFUN forms.

2005-03-21  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/dcl-mode.el (dcl-font-lock-keywords):
	Add underscore to "f$ lexicals" regexp.

2005-03-20  Juri Linkov  <juri@jurta.org>

	* subr.el (progress-reporter-do-update): When `min-value' is equal
	to `max-value', set `percentage' to 0 and prevent division by zero.

2005-03-20  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.48.

	* tramp.el (all): Change all addresses to .gnu.org.
	(tramp-append-tramp-buffers): New defun.
	(tramp-bug): Apply `tramp-append-tramp-buffers' as post-hook.
	Catch `dont-send' signal.
	(tramp-set-auto-save-file-modes): Set always permissions, because
	there might be an old auto-saved file belonging to another
	original file.  This could be a security threat.  Reported by
	Kjetil Kjernsmo <kjetil@kjernsmo.net>.
	Check for Emacs 21.3.50 removed.

	* tramp-smb.el (all): Remove debug construct for
	`with-parsed-tramp-file-name'.
	(tramp-smb-prompt): Prompt can contain spaces inside directory names.
	(tramp-smb-handle-delete-directory, tramp-smb-handle-delete-file):
	No error message if DIRECTORY or FILENAME doesn't exist.
	(tramp-smb-open-connection): Check existence of
	`tramp-smb-program'.

2005-03-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/perl-mode.el (perl-font-lock-syntactic-face-function):
	Properly handle the case where the `m' or `s' command's argument is not
	yet terminated.
	(perl-indent-new-calculate): New function.
	(perl-indent-line): Use it.

2005-03-20  Miles Bader  <miles@gnu.org>

	* progmodes/gdb-ui.el (gdb-put-breakpoint-icon): Use breakpoint faces
	in text-mode too.  Change to new face names.
	(breakpoint-enabled): Rename from `breakpoint-enabled-bitmap-face'.
	Add `:weight bold' attribute.
	(breakpoint-disabled): Rename from `breakpoint-disabled-bitmap-face'.

2005-03-19  Juri Linkov  <juri@jurta.org>

	* files.el (auto-mode-alist): Add comment.  Optimize jar/ear/war.

	* international/mule.el (auto-coding-alist): Sync with
	`auto-mode-alist' by adding upper case archive file extensions
	and adding ear/war to jar extension.

2005-03-19  David Casperson  <casper@unbc.ca>  (tiny change)

	* textmodes/tex-mode.el (tex-view): If tex-shell process is not
	running, restart it.

2005-03-19  Yoichi NAKAYAMA  <yoichi@geiin.org>  (tiny changes)

	* finder.el (finder-current-item): Throw an error on an empty line.

	* man.el (Man-follow-manual-reference): If current-word returns
	nil, use "".

2005-03-19  Matt Hodges  <MPHodges@member.fsf.org>

	* simple.el (goto-line): Doc fix.

2005-03-19  Aaron Hawley  <Aaron.Hawley@uvm.edu>  (tiny change)

	* files.el (save-buffer): Doc fix.

2005-03-19  Michael R. Mauger  <mmaug@yahoo.com>

	* recentf.el (recentf-cleanup-remote): New variable.
	(recentf-cleanup): Use it to conditionally check availability of
	remote files.

2005-03-19  Joe Edmonds  <joe-bugs-debian-org@elem.com>  (tiny change)

	* emacs-lisp/lisp-mode.el (lisp-mode-variables): Recognize `@' in
	function names.

2005-03-19  Eli Zaretskii  <eliz@gnu.org>

	* language/thai-word.el: New file.

2005-03-19  JUAN-LEON Lahoz Garcia  <juanleon1@gmail.com>

	* files.el (backup-buffer): If the file's directory is not
	writable, use copy instead of move to backup the file.

2005-03-19  Eli Zaretskii  <eliz@gnu.org>

	* obsolete/keyswap.el: Moved to obsolete/ from term/.

2005-03-19  Vinicius Jose Latorre  <viniciusjl@ig.com.br>

	* ps-print.el (ps-generate-string-list, ps-generate-header-line):
	Use functionp instead of symbolp and fboundp.  Reported by Drkm
	<darkman_spam@yahoo.fr>.
	(ps-print-version): New version 6.6.6.

2005-03-18  Tak Ota  <Takaaki.Ota@am.sony.com>

	* textmodes/table.el (table--line-column-position): New idiom.
	(table--row-column-insertion-point-p): New function to test
	validity of row and column insertion operation at a location.
	(table-global-menu, table-cell-menu): Use above functions for
	deterministic test operation.
	(table--editable-cell-p): Behave in deterministic fashion.

2005-03-18  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-lazy-highlight-new-loop):
	Make arguments beg and end optional.
	(isearch-update): Remove optional arguments nil from
	isearch-lazy-highlight-new-loop.
	(isearch-lazy-highlight-search): Let-bind case-fold-search to
	isearch-lazy-highlight-case-fold-search instead of
	isearch-case-fold-search, and let-bind isearch-regexp to
	isearch-lazy-highlight-regexp.
	Use isearch-lazy-highlight-last-string instead of isearch-string.

	* replace.el (perform-replace): Remove bindings of global
	variables isearch-string, isearch-regexp, isearch-case-fold-search.
	Add three new arguments to `replace-highlight'.
	(replace-highlight): Add arguments string, regexp, case-fold.
	Let-bind isearch-string, isearch-regexp, isearch-case-fold-search
	to allow isearch-lazy-highlight-new-loop to use these values
	to set corresponding isearch-lazy-highlight-* internal
	variables whose values lazy highlighting will use regardless of
	changes to global variables isearch-string, isearch-regexp,
	isearch-case-fold-search during lazy highlighting loop.
	(replace-dehighlight): Rename `isearch-lazy-highlight-cleanup'
	to `lazy-highlight-cleanup'.

	* textmodes/ispell.el (ispell-lazy-highlight): New defcustom.
	(ispell-highlight-face): Set default face to `isearch' when
	lazy highlighting is enabled.
	(ispell-highlight-spelling-error-overlay): Set `ispell-overlay'
	priority to 1.  Add lazy highlighting.
	(ispell-highlight-spelling-error-xemacs): Remove obsolete arg
	from `isearch-dehighlight'.

2005-03-18  David Ponce  <david@dponce.com>

	* files.el (hack-local-variables): Do a case-insensitive search
	for End.

2005-03-18  Juri Linkov  <juri@jurta.org>

	* isearch.el (lazy-highlight-cleanup) <command>: Rename from
	`isearch-lazy-highlight-cleanup', add alias to old name and
	declare obsolete.  Add release numbers to other obsolete vars.
	(isearch-done, isearch-lazy-highlight-new-loop):
	Rename `isearch-lazy-highlight-cleanup' to `lazy-highlight-cleanup'.
	(lazy-highlight-cleanup) <variable>: Doc fix.
	(isearch-lazy-highlight-update): Rename obsolete
	`isearch-lazy-highlight-face' to `lazy-highlight-face'.

2005-03-18  Kenichi Handa  <handa@m17n.org>

	* language/thai-util.el: Fix categorization of Thai characters in
	thai-category-table.
	(thai-composition-pattern): Adjust it for the above change.
	(thai-self-insert-command, thai-compose-syllable): New functions.
	(thai-compose-region): Use thai-compose-syllable.
	(thai-compose-string): Likewise.
	(thai-composition-function): Likewise.
	(thai-auto-composition): New function.
	(thai-auto-composition-mode): New minor mode.

	* language/thai.el: Fix patterns to be registered in
	composition-function-table.

	* international/quail.el (quail-input-method): Locally bind
	inhibit-modification-hooks to t.

2005-03-17  Richard M. Stallman  <rms@gnu.org>

	* progmodes/perl-mode.el (perl-mode-hook): Defvar it.
	(perl-mode): Use run-mode-hooks.

	* mail/rmail.el (rmail-movemail-program, rmail-pop-password)
	(rmail-pop-password-required, rmail-remote-password): Doc fixes.
	(rmail-preserve-inbox, rmail-probe, rmail-autodetect): Doc fix.

	* mail/sendmail.el (sendmail-send-it): Reenable the code
	to compute resend-to-address and use it.

	* tar-mode.el (tar-mode): Turn off undo unconditionally.

	* image-mode.el: New file.

	* image.el (insert-sliced-image): Add autoload cookie.

	* font-lock.el (font-lock-lines-before): New user option.
	(font-lock-after-change-function): Obey it.

	* bindings.el (esc-map): Make M-g a prefix.
	Bind M-g g and M-g M-g to goto-line.

	* faces.el (face-id): Doc fix.

2005-03-17  Frederik Fouvry  <fouvry@CoLi.Uni-SB.DE>

	* mail/rmail.el (rmail-unknown-mail-followup-to): New function.
	(rmail-show-message): Use rmail-unknown-mail-followup-to.
	(rmail-reply): Recognize Mail-Followup-To and Mail-Reply-To headers.

	* mail/sendmail.el (mail-yank-ignored-headers)
	(mail-font-lock-keywords, mail-mode-fill-paragraph):
	Add Mail-Followup-To and Mail-Reply-To headers.
	(mail-citation-hook): Add autoload cookie.
	(mail-mode): Doc fix.
	(mail-mode-map): Bind mail-mail-followup-to and mail-mail-reply-to.
	(mail-send): Compute Mail-Followup-To and Mail-Reply-To headers.
	(mail-mode-fill-paragraph): Handle those headers.
	(mail-mailing-lists): New variable.
	(mail-mail-reply-to, mail-mail-followup-to): New functions.

2005-03-17  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-fallback): Check for `(car previous)'
	before calling `isearch-other-end-state'.

2005-03-17  Kim F. Storm  <storm@cua.dk>

	* simple.el (move-beginning-of-line): Move to beginning of buffer
	line, as well as beginning of screen line.

2005-03-16  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (mark-diary-entries): Use new optional
	argument REDRAW rather than calendar-redrawing variable.
	* calendar/calendar.el (calendar-redrawing): Delete.
	(redraw-calendar): Do not bind calendar-redrawing.

2005-03-16  Matt Hodges  <MPHodges@member.fsf.org>

	* calendar/diary-lib.el (diary-redraw-calendar): Preserve point in
	diary-file buffer.

2005-03-16  Stefan Monnier  <monnier@iro.umontreal.ca>

	* help.el (describe-mode): Allow a :minor-mode-function property to
	specify a different minor mode toggle function than the variable.
	* simple.el (auto-fill-function):
	* subr.el (add-minor-mode): Use it.

2005-03-16  Kenichi Handa  <handa@m17n.org>

	* language/ethio-util.el (sera-being-called-by-w3): New variable.
	(ethio-sera-to-fidel-ethio): Check also sera-being-called-by-w3.
	(ethio-fidel-to-sera-buffer): Likewise.

2005-03-16  Juri Linkov  <juri@jurta.org>

	* emacs-lisp/find-func.el (find-function-regexp):
	Add defun-emitting macro `menu-bar-make-toggle'.

	* isearch.el: Put `isearch-scroll' property to
	`split-window-horizontally'.

	* info.el: Update error messages for `debug-ignored-errors'.
	(Info-isearch-search): Doc fix.
	(Info-find-node): Move up code to go into info buffer before
	recording the node to the history.
	(Info-fontify-node): Fontify titles only if the next line
	has two or more `*', `=', `-', `.'.
	Display "go to this node" for empty (match-string 3).

2005-03-16  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* term/mac-win.el: Add mouse pointer shape constants.

2005-03-15  Kim F. Storm  <storm@cua.dk>

	* simple.el (move-beginning-of-line): Use vertical-motion.

2005-03-15  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-error): New variable.
	(isearch-invalid-regexp, isearch-within-brackets): Remove.
	(isearch-error-state): Rename from `isearch-invalid-regexp-state'.
	(isearch-within-brackets-state): Remove.
	(isearch-case-fold-search-state, isearch-pop-fun-state):
	Decrease frame index.
	(isearch-mode, isearch-top-state, isearch-push-state)
	(isearch-edit-string, isearch-abort, isearch-search-and-update)
	(isearch-fallback, isearch-message-prefix, isearch-message-suffix)
	(isearch-search, isearch-lazy-highlight-new-loop):
	Replace `isearch-invalid-regexp' with `isearch-error'.
	Remove `isearch-within-brackets'.
	(isearch-search): Add `search-failed' handler to `condition-case'.
	(isearch-lazy-highlight-search): Add `condition-case' to catch
	errors and allow `isearch-lazy-highlight-update' to try
	highlighting from the beginning of the window.
	(isearch-repeat): Move up code to set isearch-wrapped to t
	before calling isearch-wrap-function.

	* info.el (Info-isearch-initial-node): New internal variable.
	(Info-search): Signal an error in isearch mode when search leaves
	the initial node.  Signal an error when `bound' is non-nil and
	nothing was found in the current subfile.
	(Info-isearch-search): Remove `condition-case'.
	(Info-isearch-wrap): Don't wrap when search failed during leaving
	the initial node.  If `Info-isearch-search' is nil, wrap around
	the current node.
	(Info-isearch-start): New fun.
	(Info-mode): Add buffer-local hook `Info-isearch-start' to
	`isearch-mode-hook'.

2005-03-15  YAMAMOTO Mitsuharu  <mituharu@math.s.chiba-u.ac.jp>

	* simple.el (normal-erase-is-backspace): Set default to t if
	running on Mac.

	* term/mac-win.el (function-key-map): Sync with x-win.el.

2005-03-15  Kenichi Handa  <handa@m17n.org>

	* international/mule-cmds.el (locale-language-names): Modify the
	format of elements and add more entries.
	(locale-preferred-coding-systems): Add more entries.
	(set-locale-environment): Adjust for the change of
	locale-language-names.

2005-03-14  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs.el (smerge-ediff): Remove bogus autoload.

2005-03-14  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-make-xrefs): Docstring fix.
	Ignore a `*' at the beginning of a line.

	* subr.el (macro-declaration-function): Move to emacs-lisp/byte-run.el.
	* emacs-lisp/byte-run.el (macro-declaration-function): Move from
	subr.el.
	(dont-compile, eval-when-compile, eval-and-compile): Use declare
	to specify indentation.

	* generic.el (define-generic-mode): Let generic-mode-list be a
	list of strings; test membership with equal.

2005-03-14  Kim F. Storm  <storm@cua.dk>

	* simple.el (next-line, previous-line): Add optional try-vscroll
	arg to recognize interactive use.  Pass it on to line-move.
	(line-move): Don't perform auto-window-vscroll when defining or
	executing keyboard macro to ensure consistent behavior.

2005-03-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pcvs-util.el (cvs-string->strings): Strip trailing whitespace.

2005-03-13  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug): Set debug-on-exit before calling
	debugger-setup-buffer so that backtrace marks the frames set to
	debug-on-exit and we don't have to do it manually.  Set an extra
	debug-on-exit for macro's.
	(debugger-setup-buffer): Don't mark the top frame manually.

2005-03-12  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/byte-run.el: Replace lisp-indent-hook with
	lisp-indent-function throughout.
	(with-no-warnings): Set lisp-indent-function property.

2005-03-12  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/dcl-mode.el (dcl-mode-syntax-table):
	Add entry for backslash.

2005-03-12  Juri Linkov  <juri@jurta.org>

	* info.el (Info-search): Four fixes for backward search.

2005-03-11  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-language-alist): New variable.
	* calc/calc-embed.el (calc-embedded-language-alist): Remove.
	(calc-embedded-find-modes): Use calc-language-alist instead of
	calc-embedded-language-alist.

2005-03-11  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (calendar-redrawing): New internal
	variable.
	(redraw-calendar): Remove bogus save-excursion from previous
	change.  Bind calendar-redrawing to t for mark-diary-entries.
	* calendar/diary-lib.el (mark-diary-entries): No need to redraw
	calendar if that is why we were called.

2005-03-11  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (make-coding-system): Set property
	coding-system-define-form to nil.
	(define-coding-system-alias): Likewise.

2005-03-11  Kenichi Handa  <handa@m17n.org>

	These changes are suggested by Dave Love <fx@gnu.org>.

	* textmodes/fill.el: Change encoding to iso-2022-7bit and add
	coding: tag.
	(adaptive-fill-regexp): Add more bullets.
	(fill-french-nobreak-p): Add Latin-1 and Latin-9 guillemets in
	regexps.

2005-03-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* help.el (describe-mode): Properly handle non-trivial lighters.
	Don't ignore minor modes that are not listed in minor-mode-list.

	* tooltip.el (tooltip-mode): Don't complain that you can't turn the
	feature ON when the user requests to turn it OFF.

2005-03-10  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug-entry-code): Delete it.
	(implement-debug-on-entry): New function to replace debug-entry-code.
	(debug-on-entry-1): Use implement-debug-on-entry.  Delete the
	second argument as the 2005-03-07 change makes it obsolete.
	(debug-on-entry, cancel-debug-on-entry): Update call to
	debug-on-entry-1.
	(debug, debugger-setup-buffer): Comment update.
	(debugger-frame-number): Update to work with implement-debug-on-entry.

2005-03-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (math-ms-args): Declare it.
	(calc-embedded-eval-expr, calc-embedded-eval-get-var): Use variable
	math-ms-args.
	(calc-embedded-subst): Use math-multi-subst-rec to substitute
	variables.

2005-03-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler, gdb-get-location):
	Use message-box.

	* tooltip.el (tooltip-mode): Use define-minor-mode and simplify.
	(tooltip-activate-mouse-motions-if-enabled): Use dolist.
	(tooltip-gud-tips): Simplify.
	(tooltip-gud-tips-p): Remove superfluous :set.
	(tooltip-gud-modes): Add fortran-mode.
	(gdb-tooltip-print): Remove newline for tooltip-use-echo-area.

	* bindings.el (mode-line-mode-menu): Add tooltip-mode to mode-line.

2005-03-09  Kim F. Storm  <storm@cua.dk>

	* play/animate.el (animate-place-char): Use forward-line instead
	of next-line to improve performance.

2005-03-09  Simon Josefsson  <jas@extundo.com>

	* net/browse-url.el (browse-url-default-browser): Doc fix.

2005-03-09  Miles Bader  <miles@gnu.org>

	* emacs-lisp/bytecomp.el (byte-compile-variable-ref)
	(byte-compile-obsolete): Change " since VER" to " (as of Emacs VER)".

2005-03-09  Kenichi Handa  <handa@m17n.org>

	* international/latin-1.el: Set case and syntax for 255 only if
	set-case-syntax-set-multibyte is nil.

	* textmodes/ispell.el (ispell-insert-word): New function.
	(ispell-word): Use ispell-insert-word to insert a new word.
	(ispell-process-line): Likewise.
	(ispell-complete-word): Likewise.

2005-03-09  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (redraw-calendar): Preserve point.
	Reported by Matt Hodges <MPHodges@member.fsf.org>.
	(calendar-week-start-day): Move after definition of
	redraw-calendar.  Delete buffer test, since redraw-calendar has
	that now.

	* calendar/diary-lib.el (mark-diary-entries): Only call
	redraw-calendar in the first of any recursive calls.
	Reported by Alan Shutko <ats@acm.org>.

2005-03-08  Juri Linkov  <juri@jurta.org>

	* textmodes/sgml-mode.el (sgml-tag, html-tag-alist)
	(html-horizontal-rule, html-line, html-image, html-checkboxes)
	(html-radio-buttons): Add a space before the trailing `/>' where
	sgml-xml-mode is non-nil.
	(sgml-delete-tag): Check if the tag ends with `/>' to not delete
	the subsequent tag of the empty XML tag.
	(html-href-anchor): Don't set initial input to "http:".
	(html-image): Ask for the image URL and set point inside alt="".
	(html-name-anchor): Duplicate the name in the `id' attribute when
	sgml-xml-mode is non-nil.
	(html-paragraph): Remove \n before <p>.
	(html-checkboxes, html-radio-buttons): Insert `checked="checked"'
	instead of `checked' when sgml-xml-mode is non-nil.

	* facemenu.el (list-colors-print): Print #RRGGBB in default face.
	Remove 1 space before #RRGGBB to not truncate it on terminal
	windows w/o fringes.  Remove 1 space between bg and fg examples
	to get more space.
	(list-colors-duplicates): Replace `and' with `if' for `boundp' to
	avoid byte-compile warnings.

	* image-file.el (image-file-handler): Put `safe-magic' property to
	`image-file-handler'.

	* info.el (Info-isearch-search): Emulate word search in
	isearching through multiple Info nodes with Info-search.
	(Info-isearch-wrap): Allow isearch-word.

2005-03-08  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-step-through): Make sure that
	stepping into the debugger's code is not possible.
	(debugger-jumping-flag): Docstring update.

2005-03-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-do-embedded): Reset mode line when
	embedded mode begins.
	(calc-embedded-language-alist): New variable.
	(calc-embedded-find-modes): Use calc-embedded-language-alist to
	set default language mode.

2005-03-08  Kenichi Handa  <handa@m17n.org>

	* international/ccl.el (define-ccl-program): Fix docstring about
	extra 256 bytes assured for the output buffer.

	* international/utf-16.el (ccl-encode-mule-utf-16le-with-signature):
	Fix BUFFER_MAGNIFICATION to 2.
	(ccl-encode-mule-utf-16be-with-signature): Likewise.

2005-03-07  Karl Chen  <quarl@cs.berkeley.edu>

	* align.el (align-rules-list): Added an alignment rule for CSS
	declarations (applies to css-mode and html-mode buffers).

2005-03-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debug-on-entry-1): Fix handling of macros.

2005-03-07  Kim F. Storm  <storm@cua.dk>

	* simple.el (move-beginning-of-line): New command.

	* bindings.el (global-map): Bind C-a to move-beginning-of-line.

	* reveal.el (reveal-mode-map): Bind C-a to beginning-of-line.

	* emulation/cua-base.el: Put CUA move property on move-end-of-line
	and move-beginning-of-line.

	* apropos.el (apropos-print): Omit command from M-x ... RET.

2005-03-07  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-create-handler): Handle just MI case.
	(gdb-send, gdb-send-item): Log items sent from gdb-send too.

2005-03-06  Richard M. Stallman  <rms@gnu.org>

	* bindings.el (esc-map): Bind M-g to goto-line.

	* facemenu.el (global-map): Bind M-o, not M-g.

2005-03-06  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* menu-bar.el (menu-bar-file-menu): Add the same :enable to
	"Open Directory" as for "Open File".

2005-03-06  Chong Yidong  <cyd@stupidchicken.com>

	* simple.el (activate-mark-hook, deactivate-mark-hook): Add defvars.
	(push-mark-command): Run activate-mark-hook.

2005-03-06  Richard M. Stallman  <rms@gnu.org>

	* help-mode.el (help-mode-finish): Don't alter the element
	in view-return-to-alist if there already is one.

	* jit-lock.el (jit-lock-stealth-fontify): When calling sit-for,
	make sure the current buffer is the expected one.

	* novice.el (disabled-command-function): Output in *Disabled Command*.
	Explicitly ignore non-keyboard events, and explicitly handle C-g.

	* textmodes/flyspell.el (flyspell-large-region):
	Pass args differently for aspell.

	* files.el (mode-require-final-newline): Doc fix.

2005-03-03  Stephan Stahl  <stahl@eos.franken.de>  (tiny change)

	* progmodes/which-func.el (which-function):
	Specify NOERROR when calling imenu--make-index-alist.

2005-03-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (normal-erase-is-backspace): Define default value.

	* custom.el (custom-theme-set-variables): Remove unused var
	`immediate'.
	(custom-reevaluate-setting): Simple function to handle variables
	that are defined before their default value can really be
	computed.

	* startup.el (command-line): Use it for temporary-file-directory,
	small-emporary-file-directory, auto-save-file-name-transforms,
	blink-cursor-mode, and normal-erase-is-backspace.

	* font-lock.el (font-lock-fontify-keywords-region): Ensure forward
	progress, even with buggy anchored keywords.

2005-03-05  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (goto-line): Remove unbalanced final parenthesis.

2005-03-05  Richard M. Stallman  <rms@gnu.org>

	* simple.el (goto-line): Use a number at point as the default.
	With C-u as arg, switch buffers.

2005-03-05  Juri Linkov  <juri@jurta.org>

	* frame.el (blink-cursor-mode): Replace `emacs-quick-startup'
	with `no-blinking-cursor'.

	* startup.el (no-blinking-cursor): New defvar.
	(command-line): Add `--no-blinking-cursor' to longopts.
	Set `no-blinking-cursor' to t for command line arguments
	-Q, -nbc, --no-blinking-cursor.  Replace `emacs-quick-startup'
	with `no-blinking-cursor' in the condition for calling
	`blink-cursor-mode'.

2005-03-04  Luc Teirlinck  <teirllm@auburn.edu>

	* menu-bar.el (menu-bar-make-mm-toggle): Doc fix.
	(menu-bar-options-save): Add blink-cursor-mode.
	(menu-bar-options-menu): Add blink-cursor-mode.

2005-03-04  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar-version): Increase to 0.11.
	(icalendar-export-file, icalendar-export-region)
	(icalendar-import-file, icalendar-import-buffer): Add autoload cookies.
	(icalendar--convert-ical-to-diary): Fix problem with DURATION.

2005-03-04  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debugger-step-after-exit): Make it a defvar.
	(debug-function-list): Ditto.

2005-03-04  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfmt.el (texinfo-append-refill):
	Redefine the types of line to which @refill
	is not appended by replacing a search for `@refill\\|@bye' with
	`@refill\\|^[ \t]*@'.  The intent is to solve both the `@end
	itemize@refill' bug and the unfilled long lines bug.
	(texinfmt-version): Update number and date.

2005-03-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* international/code-pages.el (windows-1250, windows-125[2-8])
	(iso-8859-10, -13, -16, georgian-ps): Add autoload cookies.

2005-03-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* frame.el (blink-cursor-mode): `emacs-quick-startup' may not be
	bound yet.

2005-03-02  Romain Francoise  <romain@orebokech.com>

	* ibuf-ext.el (ibuffer-filter-disable): Move back to the current
	buffer after removing limits.
	(ibuffer-pop-filter): Ditto.
	Update copyright.

2005-03-02  Miles Bader  <miles@gnu.org>

	* button.el (make-text-button): If the user doesn't specify a
	type, use the default.  Rewrite to use `add-text-properties' and
	plist functions.

2005-03-01  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (inhibit-debug-on-entry): Add docstring.
	(debugger-jumping-flag): New var.
	(debug-entry-code): Use it.
	(debugger-jump): Use debugger-jumping-flag and add
	debugger-reenable to post-command-hook.
	(debugger-reenable): Use debugger-jumping-flag and remove itself
	from post-command-hook.
	(debug, debug-on-entry, cancel-debug-on-entry): Remove call to
	debugger-reenable.

2005-03-01  Robert J. Chassell  <bob@rattlesnake.com>

	* textmodes/texinfmt.el (texinfo-no-refill-regexp): Comment out
	inclusion of "itemize\\|", which may be unnecessary, is certainly
	inelegant, and stops refilling in itemize lists when formatting
	Japanese Texinfo files to Info.
	Update copyright to 2005.

2005-03-01  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-get-location): Use a warning instead
	of an error if GDB can't find the source file.

2005-03-01  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/calendar.el (redraw-calendar): Work from any buffer,
	not just the calendar.

	* calendar/diary-lib.el (mark-diary-entries): Remove any old marks
	first.
	(diary-redraw-calendar): New function.
	(make-diary-entry): Add diary-redraw-calendar to local
	write-contents-functions.  Turn off selective display before
	inserting in diary.

2005-03-01  Kim F. Storm  <storm@cua.dk>

	* emacs-lisp/copyright.el (copyright-fix-years): New command.

2005-03-01  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/debug.el (debug-on-entry-1): Reimplement to make sure
	that debug-entry-code can be safely removed from a function while
	this code is being evaluated.  Revert the 2005-02-27 change as the
	new implementation no longer requires it.  Make sure that a
	function body containing just a string is not mistaken for a docstring.
	(debug): Skip one more frame in case of debug on entry.
	(debugger-setup-buffer): Delete one more frame line in case of
	debug on entry.
	(debugger-frame-number): Update to use the new text introduced by
	the 1999-11-03 change.  Skip one more frame in case of debug on entry.

2005-02-28  Kim F. Storm  <storm@cua.dk>

	* double.el (double-translate-key): Call force-window-update after
	read-event to avoid crash in redisplay.

2005-02-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (inhibit-debug-on-entry): New var.
	(debug): Use it.  Move the inhibit-trace earlier.
	(debug-entry-code): New const.
	(debug-on-entry-1): Use it.

2005-02-28  Chong Yidong  <cyd@stupidchicken.com>

	* international/utf-16.el (ccl-encode-mule-utf-16le):
	Fix BUFFER_MAGNIFICATION to 2.
	(ccl-encode-mule-utf-16be): Likewise.

2005-02-28  Kenichi Handa  <handa@m17n.org>

	* international/utf-16.el (ccl-encode-mule-utf-16le-with-signature):
	Fix BUFFER_MAGNIFICATION to 4.
	(ccl-encode-mule-utf-16be-with-signature): Likewise.

2005-02-28  Nick Roberts  <nickrob@snap.net.nz>

	* speedbar.el (speedbar-update-flag): Doc fix.
	(speedbar-show-info-under-mouse): Give set-mouse-position the right
	argument.

2005-02-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* reveal.el (reveal-post-command): Don't try to reveal overlays which
	have a non-nil `invisible' property but are actually visible.

	* progmodes/perl-mode.el (perl-imenu-generic-expression): Add entries
	for perldoc sections.
	(perl-outline-regexp, perl-outline-level): New var and function.
	(perl-mode): Use them.

2005-02-27  Glenn Morris  <gmorris@ast.cam.ac.uk>

	* calendar/diary-lib.el (diary-remind): Discard any mark portion
	from diary-entry.  Reported by Andrew Kemp <ajwk@pell.uklinux.net>.

2005-02-27  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el: Comment change.
	(custom-buffer-create-internal): Slightly reword text at top of
	Custom buffers.  Mention there that saving an option edits the
	init file.  Add link to Emacs manual node on `custom-file'.
	(custom-magic-alist): Rewrite individual State messages to use
	capitalized keywords.  Doc fix.

2005-02-27  Matt Hodges  <MPHodges@member.fsf.org>

	* calendar/calendar.el (calendar-buffer): Move above
	calendar-week-start-day.
	(calendar-week-start-day): Doc fix.  Add :set function.
	(calendar-minimum-window-height): New variable.
	(generate-calendar-window): Only resize window if selected-window
	is displaying the calendar buffer.  Use new variable
	calendar-minimum-window-height.
	(generate-calendar): Reword error message.
	(calendar-mode-map): Bind DEL to scroll-other-window-down.

2005-02-27  Andreas Schwab  <schwab@suse.de>

	* vc.el (vc-do-command): Don't run command asynchronously when
	operating in a remote directory.

	* net/tramp.el (tramp-file-name-for-operation): Fix misapplied
	change from sync with Tramp 2.0.47.

2005-02-27  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-change-dictionary): Doc fix.

	* textmodes/flyspell.el (flyspell-mode-on):
	Call ispell-change-dictionary only if necessary.

	* emacs-lisp/re-builder.el (regexp-builder): New function.

	* register.el (describe-register-1): Explicitly handle
	yank-excluded-properties = t.

	* cus-edit.el (custom-buffer-create-internal): Improve progress msgs.
	(custom-magic-alist): Change the status descriptions again.
	(face widget-type): Total rewrite based on `restricted-sexp'
	to eliminate the confusing double hiding levels.

	* emacs-lisp/debug.el (debug-on-entry-1):
	If function body is empty, add nil as body form.

2005-02-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/trace.el (inhibit-trace): New var.
	(trace-make-advice): Use it.

	* emacs-lisp/debug.el (debug): Put back the inhibit-trace.

2005-02-26  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-1-click-in-non-selected-windows): New defcustom.
	(mouse-on-link-p, mouse-drag-region-1): Use it.

2005-02-25  Lute Kamstra  <lute@gnu.org>

	* replace.el (query-replace-read-from): Fix 2005-02-19 change.

2005-02-24  Luc Teirlinck  <teirllm@auburn.edu>

	* frame.el (blink-cursor-mode): Add :group keyword.

2005-02-24  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar--decode-isodatetime):
	New optional argument DAY-SHIFT.
	(icalendar-export-region): Fix coding-system-for-write.
	(icalendar--convert-ical-to-diary): Shift end-day of all-day
	events by one.

2005-02-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/tex-mode.el (tex-font-lock-keywords-3): #n is atomic.

2005-02-24  Kim F. Storm  <storm@cua.dk>

	* international/iso-acc.el (iso-accents-compose): Fix crash
	during redisplay.  Call force-window-update after read-event
	and delete-region to signal that window is not accurate.

2005-02-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/debug.el (debug): Hide the buffer if it's not killed.
	Remove unused and inexistent var `inhibit-trace'.
	(debugger-mode): Use run-mode-hooks.
	(debugger-list-functions): Add buttons; setup xref stack.

2005-02-23  Richard M. Stallman  <rms@gnu.org>

	* calendar/appt.el (appt-time-msg-list): 3rd elt of each
	appointment says it was explicitly made.
	(appt-add): Set the 3rd element.
	(appt-make-list): Preserve explicit appointments.

	* subr.el (find-tag-default): Catch errors in forward-sexp.

2005-02-23  Juri Linkov  <juri@jurta.org>

	* info.el (Info-isearch-search): New defcustom.
	(Info-isearch-search): Call the default isearch function
	when Info-isearch-search is nil.
	(Info-isearch-wrap): Use variable Info-isearch-search.

2005-02-22  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el: Comment change.

2005-02-22  Kim F. Storm  <storm@cua.dk>

	* progmodes/hideif.el (hide-ifdef-use-define-alist):
	Use completing-read.  Suggested by Juan-Leon Lahoz Garcia.

2005-02-22  Simon Josefsson  <jas@extundo.com>

	* net/browse-url.el (browse-url-netscape-new-window-is-tab):
	New variable.
	(browse-url-netscape): Use it.  Suggested by "Johann 'Myrkraverk'
	Oskarsson" <myrkraverk@users.sourceforget.net>.

2005-02-22  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-on-link-p): If arg POS is a mouse event,
	check that window of that event is the selected window.
	(mouse-drag-region-1): Compare mouse event window to selected
	window before setting point.

	* tooltip.el (tooltip-show-help-function): Pass event to
	mouse-on-link-p so it can check selected window.

2005-02-22  Kenichi Handa  <handa@m17n.org>

	* ps-mule.el (ps-mule-header-string-charsets): Delete it.
	(ps-mule-show-warning): New function.
	(ps-mule-begin-job): Use ps-mule-show-warning if unprintable
	characters are found.

	* ps-print.el (ps-header-footer-string): Return a list of header
	and footer strings.

2005-02-21  Wolfgang Jenkner  <wjenkner@inode.at>  (tiny change)

	* pcvs.el (cvs-retrieve-revision): Fix thinko.

2005-02-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* frame.el (blink-cursor-mode): Use define-minor-mode.

	* term/mac-win.el (function-key-map): Use char-names more consistently.
	(file-name-coding-system): Only set it for MacOS-9.  The other case is
	already handled in mule-cmds.el (where it also works when mac-win.el
	is not used).

2005-02-21  Kenichi Handa  <handa@m17n.org>

	* international/mule.el (ctext-pre-write-conversion): Always use
	" *code-converting-work*" buffer for work.

	* textmodes/ispell.el (ispell-dictionary-alist): Fix docstring.

2005-02-20  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/scheme.el (scheme-font-lock-keywords-2): Handle named-let.

2005-02-20  Jonathan Yavner  <jyavner@member.fsf.org>

	* ses.el (undo-more): Restore defadvice, but only the part that
	allows changes outside the restricted area of the buffer.

2005-02-20  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move): Add fourth optional arg try-vscroll which
	must be set to perform auto-window-vscroll.
	When moving backwards and doing auto-window-vscroll, automatically
	vscroll to the last part of lines which are taller than the window.
	(next-line, previous-line): Set try-vscroll arg on line-move.

2005-02-19  Dan Nicolaescu  <dann@ics.uci.edu>

	* replace.el (query-replace, query-replace-regexp)
	(replace-string, replace-regexp): When operating on region, make
	the minibuffer prompt say so.

	* isearch.el (isearch-forward): Document isearch-query-replace and
	isearch-query-replace-regexp keybindings.

2005-02-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token): Add local variable.

	* calc/calc-prog.el (calc-user-define-edit): Add local variable.
	(calc-edit-top): Move declaration to earlier in file.
	(calc-edit-macro-repeats): Add local variables.

	* calc/calcalg2.el: Add differentiation rule for calcFunc-coth.
	Adjust differentiation rules for calcFunc-tan, calcFunc-cot,
	calcFunc-tanh.
	Adjust integration rule for calcFunc-tan.

2005-02-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* viper-cmd.el (viper-prefix-commands): Make into a defconst.
	(viper-exec-buffer-search): Use regexp-quote to quote buffer string.
	(viper-minibuffer-setup-sentinel): Make some variables buffer-local.
	(viper-skip-separators): Bug fix.
	(viper-set-searchstyle-toggling-macros): Allow to unset macros in a
	particular major mode.
	(viper-del-backward-char-in-replace): Don't put deleted char on the
	kill ring.

	* viper-ex.el (viper-color-display-p): New function.
	(viper-has-face-support-p): Use viper-color-display-p.

	* viper-keym.el (viper-gnus-modifier-map): New keymap.

	* viper-macs.el (viper-unrecord-kbd-macro): Bug fix.

	* viper-util.el (viper-glob-unix-files): Fix shell status check.
	(viper-file-remote-p): Make equivalent to file-remote-p.

	* viper.el (viper-major-mode-modifier-list):
	Use viper-gnus-modifier-map.

2005-02-19  David Kastrup  <dak@gnu.org>

	* subr.el (subregexp-context-p): Fix garbled doc string by adding
	quoting.

2005-02-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-math.el (calc-arctan, calc-tanh, calc-arctanh):
	Remove extra definitions.
	(calc-coth): New function.
	(calcFunc-cot): Fix `let'.

2005-02-19  Eli Zaretskii  <eliz@gnu.org>

	* faces.el (escape-glyph, minibuffer-prompt): Add commentary for
	the reasons we use "type pc" in these faces.

	* button.el (button): Ditto.

2005-02-19  Michael Mauger  <mmaug@yahoo.com>

	* replace.el (query-replace-read-from): Set the value of
	query-replace-from-history-variable to handle the case of an empty
	string entered to accept the suggested default.

	* net/tramp.el (tramp-file-name-for-operation):
	Use dired-call-process instead of dired-call-process-command.

2005-02-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-arith.el (math-trig-inverses, math-div-trig)
	(math-div-non-trig): New variables.
	(math-combine-prod-trig, math-div-new-trig, math-div-new-non-trig)
	(math-div-isolate-trig, math-div-isolate-trig-term): New functions.
	(math-combine-prod, math-div-symb-fancy): Add simplifications for
	trig expressions.

2005-02-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-var-update-handler)
	(gdb-speedbar-timer-fn): Ensure speedbar updates with new values
	for watch expressions,
	(gdb-var-create-handler): Don't set speedbar-update-flag.
	(gdb-post-prompt): Simplify test for speedbar.

2005-02-19  Michael Kifer  <kifer@cs.stonybrook.edu>

	* ediff.el (ediff-set-diff-overlays-in-one-buffer)
	(ediff-set-fine-overlays-in-one-buffer,ediff-goto-word): Make sure
	we use the syntax table of the correct buffer.
	(ediff-same-file-contents,ediff-same-contents): Enhancements thanks to
	Felix Gatzemeier.

	* ediff-init.el (ediff-hide-face): Check for definedness of functions.
	(ediff-file-remote-p): Make synonymous with file-remote-p.
	In all deffaces ediff-*-face-*, use min-colors.

	* ediff-mult.el (ediff-meta-mark-equal-files): Make use of
	ediff-recurse-to-subdirectories.
	(ediff-mark-if-equal): Check that the arguments are strings, use
	ediff-same-contents (after to Felix Gatzemeier).

	* ediff.el (ediff-merge-on-startup): Don't set buffer-modified-p to
	nil.

2005-02-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* log-view.el (log-view-message-re): Fix up Subversion regexp.

2005-02-18  David Kastrup  <dak@gnu.org>

	* progmodes/meta-mode.el (meta-mark-active): Fix condition to just
	use `mark-active' when defined.

2005-02-18  Kenichi Handa  <handa@m17n.org>

	* ps-print.el (ps-font-info-database): New entry
	ZapfChancery-MediumItalic with correct font name.  Fix font name
	of the entry Zapf-Chancery-MediumItalic.

2005-02-16  Luc Teirlinck  <teirllm@auburn.edu>

	* autorevert.el (auto-revert-stop-on-user-input): Further doc fix.

2005-02-16  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-fallback-command): Pass user input to fallback command.

2005-02-16  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-set-gud-minor-mode-existing-buffers)
	(gdb-find-file-hook): Add server prefix.

2005-02-16  Richard M. Stallman  <rms@gnu.org>

	* replace.el (perform-replace): Pass new args to replace-highlight.
	(replace-highlight): Take region args,
	and pass them to isearch-lazy-highlight-new-loop.

	* novice.el (disabled-command-hook): Autoload the defalias
	and the make-obsolete-variable call.

	* menu-bar.el (menu-bar-select-frame): FRAME defaults to selected.

	* isearch.el (isearch-lazy-highlight-start-limit)
	(isearch-lazy-highlight-end-limit): New variables limit
	the region for highlighting.
	(isearch-lazy-highlight-new-loop): New args BEG and END.
	(isearch-lazy-highlight-search): Use the new vars.
	(isearch-lazy-highlight-update): Likewise.

	* dired.el (dired-build-subdir-alist): Bind buffer-undo-list to t.

	* cus-start.el (all): Use default-boundp.

2005-02-15  David Casperson  <casper@unbc.ca>  (tiny change)

	* menu-bar.el (menu-bar-select-frame): Handle current frame.

2005-02-15  Luc Teirlinck  <teirllm@auburn.edu>

	* autorevert.el (auto-revert-stop-on-user-input)
	(auto-revert-verbose): Doc fixes.

2005-02-15  Benjamin Riefenstahl  <Benjamin.Riefenstahl@epost.de>

	* international/mule-cmds.el (set-locale-environment): Remove call
	to set-selection-coding-system on Windows.

2005-02-15  Jay Belanger  <belanger@truman.edu>

	* calc/calc-alg.el: Add simplification rules for calcFunc-sec,
	calcFunc-csc, calcFunc-cot, calcFunc-sech, calcFunc-csch, and
	calcFunc-coth.
	(math-simplify-sqrt): Add simplifications.

	* calc/calc-arith.el (math-real-if-arg-functions): Add functions
	to list.

	* calc/calc-ext.el: Add functions to autoloads.

	* calc/calc-math.el (calc-sec, calc-csc, calc-cot, calc-sech)
	(calc-csch, calc-coth, calcFunc-sec, calcFunc-csc, calcFunc-cot)
	(calcFunc-sech, calcFunc-csch, calcFunc-coth, math-sec-raw)
	(math-csc-raw, math-cot-raw): New functions.

	* calc/calc-rules.el (calc-DistribRules, calc-NegateRules): Add	rules.

	* calc/calc-undo.el (calc-handle-undo): Remove prefix from
	the variable name in a message.

	* calc/calc-units.el: Add simplification rules for calcFunc-sec,
	calcFunc-csc, calcFunc-cot.

	* calc/calcalg2.el: Add derivative and integration rules for
	calcFunc-sec, calcFunc-csc, calcFunc-cot, calcFunc-sech,
	calcFunc-csch, calcFunc-coth.
	(math-do-integral-methods): Add to checks for when to use
	substitutions.

	* calc/calccomp.el (math-eqn-special-funcs): Add functions to list.

2005-02-15  Lute Kamstra  <lute@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-mode-variables):
	Add ;;;###autoload to `outline-regexp'.  Suggested by Stefan Monnier
	<monnier@iro.umontreal.ca>
	(lisp-outline-level): Improve efficiency.  Suggested by David
	Kastrup <dak@gnu.org>.

2005-02-15  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-find-file-unhook): New variable.
	(gdb-set-gud-minor-mode, gdb-set-gud-minor-mode-1)
	(gdb-set-gud-minor-mode-existing-buffers): New functions.
	(gdb-find-file-hook): New hook.  Add it to find-file-hook.
	(gdb-info-breakpoints-custom, gdb-source-info): Simplify.

2005-02-14  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Comment change.

2005-02-14  Lute Kamstra  <lute@gnu.org>

	* cus-start.el (all): Check if symbol is void.

2005-02-14  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-cite.el (reftex-do-citation): Cleanup single
	optional argument to \cite.

2005-02-14  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-buffer-create-internal): Update help message.
	(custom-magic-alist): Update help messages.

	* cus-start.el (all): Allow a var to specify a standard value.

2005-02-12  Luc Teirlinck  <teirllm@auburn.edu>

	* custom.el (custom-theme-set-variables): Handle variable aliases.

	* frame.el (blink-cursor-timer): Doc fix.
	(blink-cursor): Make it an alias for `blink-cursor-mode' and
	declare obsolete.
	(blink-cursor-mode): Define with defcustom and use correct
	standard expression in that defcustom.
	* startup.el (command-line): Adapt to above changes in frame.el.

2005-02-11  Lute Kamstra  <lute@gnu.org>

	* apropos.el (apropos-score-doc): Prevent division by zero.

2005-02-11  Ulf Jasper  <ulf.jasper@web.de>

	* calendar/icalendar.el (icalendar--get-event-property): Doc fix.
	(icalendar--get-event-property-attributes)
	(icalendar--get-event-properties)
	(icalendar--datetime-to-diary-date): New functions.
	(icalendar--split-value): Doc fix.
	(icalendar--datetime-to-noneuropean-date)
	(icalendar--datetime-to-european-date): New optional argument
	SEPARATOR.  Return result as a string instead of a list.
	(icalendar--get-weekday-number): Check if ABBREVWEEKDAY is nil.
	(icalendar--convert-string-for-export): Rename arg S to STRING.
	(icalendar-export-region): Doc fix.  Change name of error buffer.
	Save output buffer.
	(icalendar-import-file): Add blank at end of prompt.
	(icalendar-import-buffer): Doc fix.  Do not switch to error
	buffer.  Indicate status in return value.
	(icalendar--convert-ical-to-diary): Doc fix.  Change name of error
	buffer.  Save output buffer.  Handle exception from recurrence
	rules (EXDATE, EXRULE).  Handle start- and end-date of recurring
	events.  Fix problems with weekly all-day events.

2005-02-10  Richard M. Stallman  <rms@gnu.org>

	* simple.el (eval-expression-print-format):
	Avoid warning about edebug-active.

	* help.el (help-for-help-internal): Rename from help-for-help.
	(help-for-help): Define with defalias.

	* font-core.el (font-lock-default-function): Use with-no-warnings.

	* cus-edit.el (custom-buffer-create-internal): Improve help-echo.

	* custom.el (defface): Doc fix.

2005-02-10  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-ann3): Re-instate GDB command "set
	width 0" to prevent word wrapping problems.

2005-02-09  Kim F. Storm  <storm@cua.dk>

	* ido.el (ido-file-extensions-order): New defcustom.
	(ido-file-extension-lessp, ido-file-extension-aux)
	(ido-file-extension-order): New advanced file ordering.
	(ido-file-lessp): New simple file ordering.
	(ido-sort-list): Remove.
	(ido-make-file-list): Use ido-file-lessp or ido-file-extension-lessp.
	(ido-make-dir-list, ido-completion-help): Use ido-file-lessp.

2005-02-08  Dan Nicolaescu  <dann@ics.uci.edu>

	* progmodes/grep.el (grep-regexp-alist): Match an optional ^[[K
	that some versions of grep produce.
	(grep-mode-font-lock-keywords): Likewise.

2005-02-09  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-location-list): New variable.
	(gdb-cdir): Delete.
	(gdb-info-breakpoints-custom, gdb-goto-breakpoint)
	(gdb-source-info): Treat case when source file is in another
	directory properly.
	(gdb-get-location): New function.

2005-02-07  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-write-parse-table-part)
	(calc-fix-token-name): Fix a check for language type.

	* calc/calccomp.el (math-compose-expr): Fix a check for language type.

2005-02-07  Andre Spiegel  <spiegel@gnu.org>

	* vc-hooks.el (vc-make-version-backup): Ignore file-errors such
	as directory not writable.

2005-02-07  Kim F. Storm  <storm@cua.dk>

	* emulation/cua-base.el (cua-max-undo, cua-undo): Remove.
	(cua--standard-movement-commands): Remove list.
	Instead, set CUA property value to move for movement commands.
	(cua-movement-commands): Remove.  Users must set CUA prop instead.
	(cua--pre-command-handler): Check CUA property.
	(cua--init-keymaps): Don't remap undo commands.
	(cua-mode): Don't call cua--rectangle-on-off.

	* emulation/cua-rect.el (cua--undo-list, cua--tidy-undo-counter)
	(cua--rect-undo, cua--tidy-undo-lists, cua--rectangle-on-off): Remove.
	(cua--rect-undo-set-point): New var.
	(cua--rectangle-undo-boundary): Setup undo apply entry.
	(cua--rect-undo-handler): New function for rectangle undo.
	(cua--rect-start-position, cua--rect-end-position): Add.
	(cua--rectangle-post-command): Call cua--rectangle-set-corners
	for restored rectangle.  Set point if cua--rect-undo-set-point.

2005-02-06  Jay Belanger  <belanger@truman.edu>

	* calc/calc-lang.el (calc-tex-language): Display more information
	in messages.

	* calc/calccomp.el (math-compose-expr): Allow multiline matrices
	in TeX mode.

2005-02-06  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp.el (buffer-end): Doc fix.

2005-02-05  Arne_J,Ax(Brgensen  <arne@arnested.dk>  (tiny change)

	* net/ldap.el (ldap-search-internal): Support attributes with
	optional descriptions separated by a semi-colon, as in
	"userCertificate;binary".

2005-02-05  Jan Dj,Ad(Brv  <jan.h.d@swipnet.se>

	* x-dnd.el (x-dnd-handle-xdnd): Handle the case where the flags
	isn't a cons (i.e. the version is 0).

2005-02-05  Eli Zaretskii  <eliz@gnu.org>

	* help.el (help-for-help): Doc fix.

2005-02-05  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el: Update copyright.  Put GDB-Frames before
	GDB-Windows on the menu-bar as this works better.

2005-02-04  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-update): Don't put in
	unnecessary newlines.  Adjust the end of formula marker.

	* calc/calc-lang.el (math-latex-parse-frac): Don't use arguments.
	(math-latex-parse-two-args): New function.

2005-02-03  Lute Kamstra  <lute@gnu.org>

	* help-fns.el (help-with-tutorial): Make sure that users cannot
	remove the entire text of the tutorial by means of `undo'.

2005-02-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/ispell.el (ispell-internal-change-dictionary): Fix problem
	in recent changes, where the ispell process was repeatedly
	killed & restarted.

	* international/mule-cmds.el (set-locale-environment): Set file-name
	coding system to utf-8 on Darwin systems.
	(set-default-coding-systems): Don't set default-file-name-coding-system
	on Darwin systems.

2005-02-03  Richard M. Stallman  <rms@gnu.org>

	* hi-lock.el (hi-lock-mode): Turning on Hi-Lock turns on Font-Lock.

2005-02-03  Matt Hodges  <MPHodges@member.fsf.org>

	* faces.el (list-faces-display): Add optional argument.

2005-02-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* font-core.el (font-lock-default-function): Handle the rare case where
	only font-lock-keywords is set.

2005-02-02  Kenichi Handa  <handa@m17n.org>

	* international/characters.el: Cancel previous change for
	I-WITH-DOT-ABOVE and DOTLESS-i.

	* international/latin-5.el: Cancel previous change.

2005-02-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gud.el: Correction to syntax in gud-menu-map.

2005-02-02  Kenichi Handa  <handa@m17n.org>

	* international/latin-5.el (tbl): Setup cases of I-WITH-DOT-ABOVE,
	DOTLESS-i.

	* international/characters.el: Setup cases of GREEK-FINAL-SIGMA,
	Y-WITH-DIAERESIS, I-WITH-DOT-ABOVE, DOTLESS-i.

	* case-table.el (get-upcase-table): New function.
	(copy-case-table): Copy upcaes table too if non-nil.
	(set-case-syntax-delims): Maintain upcase table too.
	(set-case-syntax-pair): Likewise.
	(set-upcase-syntax, set-downcase-syntax): New functions.
	(set-case-syntax): Maintain upcase table too.

2005-02-02  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-goto-info): Delete.

	* progmodes/gud.el (gud-goto-info): New function.
	(gud-tool-bar-map): Use correct icon.

2005-02-01  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-indent-function): Fix bug:
	When delegating, order args in the funcall correctly.

2005-02-01  Thien-Thi Nguyen  <ttn@gnu.org>

	* emacs-lisp/lisp-mode.el (lisp-indent-function): Doc fix.

2005-02-01  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex.el (reftex-access-scan-info): Error out in a
	buffer not visiting a file.

2005-01-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-embed.el (calc-embedded-find-bounds): Set the formula
	bound on the line with the formula.

2005-01-31  Kim F. Storm  <storm@cua.dk>

	* ses.el (ses-create-cell-variable-range)
	(ses-destroy-cell-variable-range, ses-reset-header-string)
	(ses-set-with-undo, ses-unset-with-undo, ses-aset-with-undo)
	(ses-insert-row): Fix format of apply undo entries.

2005-01-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token): Separate the TeX and LaTeX
	parts.

	* calc/calc-embed.el (calc-embedded-open-formula)
	(calc-embedded-close-formula): Ignore matrix environments.

	* calc/calc-ext.el (math-read-big-expr): Make LaTeX the default
	TeX mode.

	* calc/calc-lang.el (math-function-table, math-oper-table)
	(math-variable-table): Adjust the LaTeX portions.

	* calc/calc.el (math-tex-ignore-words): Remove LaTeX portion.
	(math-latex-ignore-words): New constant.

2005-01-31  Richard M. Stallman  <rms@gnu.org>

	* textmodes/ispell.el (ispell-local-dictionary-overridden): New var.
	(ispell-local-dictionary): Doc fix.
	(ispell-dictionary-alist): Don't include ispell-local-dictionary-alist.
	Don't reinitialize at run time.  Don't defcustom.
	All uses changed to append ispell-local-dictionary-alist,
	or check it first.
	(ispell-current-dictionary): New variable for dictionary in use.
	(ispell-dictionary): Now used only for global default.
	(ispell-start-process): Set ispell-current-dictionary,
	not ispell-dictionary.
	(ispell-change-dictionary): Use this only for setting
	user preferences.
	(ispell-internal-change-dictionary): New function
	to change the current dictionary in use.
	(ispell-region, ispell-process-line, ispell-buffer-local-dict):
	Use ispell-current-dictionary.
	Handle ispell-local-dictionary-overridden.
	(ispell-buffer-local-dict): Call ispell-internal-change-dictionary.

2005-01-31  Jay Belanger  <belanger@truman.edu>

	* calc/calc-aent.el (math-read-token): Add support for LaTeX.

	* calc/calc-ext.el: Add calc-latex-language to autoloads.
	(calc-mode-map): Add calc-latex-language.

	* calc/calc-lang.el (calc-latex-language, math-latex-parse-frac)
	(math-latex-print-frac): New functions.
	(math-oper-table, math-function-table, math-variable-table)
	(math-complex-format, math-input-filter): Add latex properties.
	(calc-set-language): Set math-expr-special-function-mapping.

	* calc/calc-prog.el (calc-edit-user-syntax, calc-fix-token-name)
	(calc-write-parse-table-part): Add LaTeX support.

	* calc/calc.el (calc-language): Adjust docstring.
	(calc-set-mode-line): Add LaTeX support.
	(math-expr-special-function-mapping): New variable.
	(math-tex-ignore-words): Add to list.

	* calc/calccomp.el (math-compose-expr, math-compose-rows):
	Add LaTeX support.
	(math-compose-expr): Add support for special functions.

	* calc/calc-help.el (calc-d-prefix-help): Add LaTeX.

2005-01-31  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-memory-address)
	(gdb-memory-repeat-count, gdb-memory-format, gdb-memory-unit)
	(gdb-memory-mode-map, gdb-memory-format-keymap)
	(gdb-memory-format-menu, gdb-memory-unit-keymap)
	(gdb-memory-unit-menu): New variables for a buffer
	that lets the user examine program memory.
	(gdb-memory-set-address, gdb-memory-set-repeat-count)
	(gdb-memory-format-binary, gdb-memory-format-octal)
	(gdb-memory-format-unsigned, gdb-memory-format-signed)
	(gdb-memory-format-hexadecimal, gdb-memory-format-menu)
	(gdb-memory-format-menu-1, gdb-memory-unit-giant)
	(gdb-memory-unit-word, gdb-memory-unit-halfword)
	(gdb-memory-unit-byte, gdb-memory-unit-menu)
	(gdb-memory-unit-menu-1, gdb-make-header-line-mouse-map)
	(gdb-memory-mode, gdb-memory-buffer-name)
	(gdb-display-memory-buffer, gdb-frame-memory-buffer):
	New functions for above buffer.

2005-01-30  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (custom-bury-buffer): Function deleted.
	(custom-buffer-done-function): Option deleted.
	(custom-buffer-done-kill): New (replacement option.
	(Custom-buffer-done): Call quit-window.
	(custom-buffer-create-internal): Update for above changes.

2005-01-29  Luc Teirlinck  <teirllm@auburn.edu>

	* simple.el (undo-ask-before-discard): New var.
	(undo-outer-limit-truncate): Implement it.
	(undo-extra-outer-limit): Doc update.

2005-01-29  Richard M. Stallman  <rms@gnu.org>

	* ses.el (undo-more): Delete defadvice.
	(ses-begin-change): Doc fix.

	* dired.el (dired-mode-map): Remap `undo' and `advertised-undo'
	instead of rebinding C-x u and C-_.

	* files.el (normal-backup-enable-predicate): Return nil for files
	in /tmp, regardless of temporary-file-directory.

	* man.el (Man-getpage-in-background): Disable undo in Man buffer.

	* rect.el (delete-rectangle-line, delete-extract-rectangle-line)
	(open-rectangle, delete-whitespace-rectangle-line)
	(clear-rectangle-line): If FILL, pass t instead of FILL
	for move-to-column's 2nd arg.

	* simple.el (undo): Fix the test for continuing a series of undos.
	(undo-more): Set pending-undo-list to t when we reach end.
	(pending-undo-list): Move up defvar.

	* wid-edit.el (widget-button-click):
	Shorten the range of the track-mouse binding.

	* comint.el (comint-insert-input): Undo previous changes;
	use last-input-event in interactive spec.

2005-01-29  Eli Zaretskii  <eliz@gnu.org>

	* progmodes/compile.el (compilation-start): Bind buffer-read-only
	to nil before invoking call-process.  Reset buffer's modified flag
	after fontifying it in the no-async branch.

	* wid-edit.el (widget-specify-button): If mouse pointer shape
	cannot be changed, use mouse face instead.

2005-01-29  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-info-breakpoints-custom)
	(gdb-goto-breakpoint): Make breakpoint handling work on template
	functions in C++.  Reported by Martin Reed <mjreed@essex.ac.uk>
	(gdb-assembler-custom): Update to recognize breakpoint information
	added on 2005-01-19.

2005-01-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* progmodes/scheme.el (scheme-mode-variables): Set comment-add.
	(dsssl-mode): Use define-derived-mode.
	(scheme-mode-initialize): Remove.
	(scheme-mode): Use run-mode-hooks.

	* cus-edit.el (customize-group-other-window)
	(custom-buffer-create-other-window): Don't override special-display-*.
	(custom-mode-map): Make it dense.

	* emacs-lisp/lisp-mode.el (eval-defun-1): Make sure `defvar' always
	sets the default value.

2005-01-28  Eli Zaretskii  <eliz@gnu.org>

	* descr-text.el: Add more keywords.

2005-01-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* speedbar.el: Avoid unnecessary use of locate-library.

	* international/mule-cmds.el (standard-display-european-internal):
	Don't fiddle with latin-1 non-break space any more since it's now
	special cased in the C code.
	Don't "do&undo" setting for 160 (especially, don't undo incorrectly).

2005-01-26  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-start.el (all): Add `undo-outer-limit'.

2005-01-25  Roland Winkler  <Roland.Winkler@physik.uni-erlangen.de>

	* textmodes/bibtex.el (bibtex-format-entry):
	Use `bibtex-empty-field-re' only on the text of fields, not on entire
	field lines.
	(bibtex-autofill-entry): Use `bibtex-empty-field-re' on a string,
	not on part of a buffer.

2005-01-25  Lute Kamstra  <lute@gnu.org>

	* textmodes/bibtex.el (bibtex-empty-field-re): Don't match
	nonempty field text strings like "{letters\\macro{}more letters}".
	Clarify docstring.
	(bibtex-sort-entry-class, bibtex-autokey-titleword-ignore)
	(bibtex-entry-offset, bibtex-parse-association)
	(bibtex-parse-field-name): Fix typos in docstrings.
	(bibtex-field-list, bibtex-find-crossref): Fix typos in error messages.

2005-01-24  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-global.el (reftex-isearch-push-state-function)
	(reftex-isearch-pop-state-function, reftex-isearch-isearch-search)
	(reftex-isearch-switch-to-next-file, reftex-isearch-turn-off)
	(reftex-isearch-turn-on, reftex-isearch-minor-mode): New functions.

	* textmodes/reftex.el (reftex-mode-menu): Add entry for reftex
	isearch minor mode.

2005-01-24  Luc Teirlinck  <teirllm@auburn.edu>

	* help-at-pt.el (help-at-pt-display-when-idle): Add autoload cookie.

2005-01-24  Lute Kamstra  <lute@gnu.org>

	* textmodes/ispell.el (ispell-dictionary-alist-4): Rewrite the
	CASECHARS and NOT-CASECHARS regular expressions of the
	"nederlands" and "nederlands8" dictionaries to prevent a "Range
	striding over charsets" error.

2005-01-24  Jay Belanger  <belanger@truman.edu>

	* calc/calc-store.el (calc-declare-variable): Use calc-var-name to
	display variable name.

2005-01-24  Kenichi Handa  <handa@m17n.org>

	* international/encoded-kb.el (encoded-kbd-iso2022-single-shift):
	Fix setting of the element of encoded-kbd-iso2022-invocations.

2005-01-24  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-goto-breakpoint, gdb-frames-select)
	(gdb-threads-select): Change to also accept mouse events.
	(gdb-mouse-goto-breakpoint, gdb-frames-mouse-select)
	(gdb-threads-mouse-select): Delete.

2005-01-23  Luc Teirlinck  <teirllm@auburn.edu>

	* files.el (insert-directory): Take care of empty directory,
	listed without -a switch.

2005-01-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/refill.el (refill-post-command-function):
	Add `indent-new-comment-line' and `reindent-then-newline-and-indent'
	to the list of functions that we should be careful not to undo.
	(refill-late-fill-paragraph-function): Remove.
	(refill-saved-state): New var.
	(refill-mode): Use it to save fill-paragraph-function.
	Save also the value of auto-fill-function.

	* term/w32-win.el: Simplify code.

2005-01-23  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move): Adapt to new return value from
	pos-visible-in-window-p.

	* simple.el (line-move): Fix last change.  Check partial
	visibility at point rather than at window-start.

2005-01-22  Jason Rumney  <jasonr@gnu.org>

	* term/w32-win.el (xw-defined-colors): Remove debug-message.

2005-01-22  David Kastrup  <dak@gnu.org>

	* progmodes/grep.el: Add alias `find-grep' for `grep-find'.

2005-01-22  Eli Zaretskii  <eliz@gnu.org>

	* type-break.el (type-break-mode): Add a test for
	type-break-file-name being non-nil.

2005-01-22  Toby Allsopp  <Toby.Allsopp@navman.com>  (tiny change)

	* net/eudc.el (top level): Call (message "") via progn, so that
	eudc-options-file is loaded.

2005-01-22  Kim F. Storm  <storm@cua.dk>

	* simple.el (line-move-1): Rename from line-move.
	(line-move): New function that adjusts vscroll for partially
	visible rows, and calls line-move-1 otherwise.

2005-01-21  Ren,Ai(B Kyllingstad  <listmailxemacs@kyllingstad.com>

	* pcomplete.el: Define pcomplete-read-event instead of read-event,
	since it's not a complete read-event implementation

2005-01-20  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el (calc-fancy-prefix-other-key): Set prefix arg
	for called function.

2005-01-20  Steven Tamm  <steventamm@mac.com>

	* term/mac-win.el (process-connection-type): Remove.
	Controlled now by s/darwin.h:PTY_ITERATION.

2005-01-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* window.el (handle-select-window): Don't switch window when we're
	in the minibuffer.

2005-01-10  Paul Pogonyshev  <pogonyshev@gmx.net>

	* subr.el (dotimes-with-progress-reporter): New macro.

	* ses.el (ses-dotimes-msg): Remove macro.
	Use `dotimes-with-progress-reporter' instead.

2005-01-19  Steven Tamm  <steventamm@mac.com>

	* term/mac-win.el (process-connection-type): Use new
	operating-system-release variable to use ptys on Darwin 7 (OS X
	10.3) when using carbon build.

2005-01-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el (calc-fancy-prefix-other-key): Don't clear
	flags if the last command was a tab or M-tab.

	* calc/calc-prog.el (calc-user-define-edit): Put original formula
	in formula editing buffer.

2005-01-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-put-breakpoint-icon): Add help-echo for
	breakpoint image symbol in margin.

2005-01-19  Jay Belanger  <belanger@truman.edu>

	* calc/calc-prog.el (calc-execute-kbd-macro):
	Ignore calc-keep-arg-flag.

2005-01-19  Kenichi Handa  <handa@m17n.org>

	* textmodes/ispell.el (ispell-looking-at): New function.
	(ispell-process-line): Use ispell-looking-at to compare the ispell
	output and the buffer contents.

2005-01-18  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-display-raw): Fix docstring.

2005-01-18  Stefan Monnier  <monnier@iro.umontreal.ca>

	* simple.el (blink-matching-open): Strip extra info from syntax.

	* progmodes/sh-script.el (sh-here-doc-open-re): Don't allow | or other
	funny chars in the end-of-here-doc marker.

2005-01-19  Nick Roberts  <nickrob@snap.net.nz>

	* progmodes/gdb-ui.el (gdb-put-string): Copy/create strings so
	that enable/disabled state of breakpoints is shown correctly in
	fringe and on ttys.
	(gdb-put-breakpoint-icon, gdb-info-breakpoints-custom):
	Add breakpoint information as text properties.
	(gdb-mouse-toggle-breakpoint):
	Rename to gdb-mouse-set-clear-breakpoint.
	(gdb-mouse-toggle-breakpoint): New function.  Enable/disable
	breakpoints in the margin.
	(gdb-remove-strings): Simplify.

2005-01-17  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-mode): Inhibit read-only when
	erasing buffer.

2005-01-17  Richard M. Stallman  <rms@gnu.org>

	* progmodes/grep.el (grep-find): Copy from `grep' the condition
	for calling grep-compute-defaults.

	* play/decipher.el (decipher-mode): Don't call decipher-read-alphabet
	if buffer is empty.

	* emacs-lisp/lisp.el (backward-kill-sexp, kill-sexp): Doc fixes.

2005-01-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* hilit-chg.el (highlight-changes-mode): Don't autoload.

	* bindings.el (mode-line-mode-menu): Use bound-and-true-p for all the
	non-preloaded variables.

2005-01-17  Steven Tamm  <steventamm@mac.com>

	* textmodes/tex-mode.el (tex-start-shell): Adding -i to the
	tex-shell cause to force interactivity when using pipes.

2005-01-17  Kim F. Storm  <storm@cua.dk>

	* simple.el (just-one-space): Make arg optional.

2005-01-17  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-event): Set new optional fourth arg in
	posn-at-x-y to t to access left-margin.

2005-01-16  Michael Albinus  <michael.albinus@gmx.de>

	Sync with Tramp 2.0.47.

	* tramp.el (tramp-operation-not-permitted-regexp) New defcustom,
	catching keep-date problems in cp/scp operations.
	(tramp-handle-copy-file): Don't call `set-file-modes'
	unconditionally.  Specialized functions should know better what is
	necessary.  This improves performance a little bit, and the
	functions could catch errors with `cp -p' and `scp -p'.
	(tramp-do-copy-or-rename-file-via-buffer)
	(tramp-do-copy-or-rename-file-out-of-band): Call `set-file-modes'
	when appropriate.
	(tramp-do-copy-or-rename-file-directly): Mask `cp -p' error.
	Call `set-file-modes' when appropriate.
	(tramp-action-out-of-band): Mask `scp -p' error.  Reported by Isak
	Johnsson <isak@hypergene.com>
	(tramp-get-buffer, tramp-get-debug-buffer): Discard the undo list
	of both Tramp buffer and debug buffer.  Reported by Joakim Verona
	<joakim@verona.se>
	(tramp-file-name-for-operation): Mark `shell-command' as magic for
	Emacs only.

	* tramp-util.el (tramp-minor-mode): New minor mode.  Add it to
	`find-file-hooks' and `dired-mode-hook'.
	(tramp-minor-mode-map): Respective map.  Add remapping for
	`compile' and `recompile'.
	(tramp-remap-command, tramp-recompile): New defuns.
	(tramp-compile): Enable `tramp-minor-mode' and `compilation-mode'
	in buffer "*Compilation*".  Call the commands asynchronously.

	* tramp-vc.el (tramp-vc-do-command, tramp-vc-do-command-new)
	(tramp-vc-simple-command): Call `tramp-handle-shell-command' but
	`shell-command', because it isn't magic in XEmacs.  Reported by
	Adrian Aichner <adrian@xemacs.org>.

	* tramp-smb.el (tramp-smb-file-name-handler-alist): Add entry for
	`substitute-in-file-name.
	(tramp-smb-handle-substitute-in-file-name): New defun.
	(tramp-smb-advice-PC-do-completion): Delete advice.

2005-01-16  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* tramp.el (tramp-wait-for-output): Fix typo in echo processing.
	Fix error in deleting region.

2005-01-15  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/lisp-mnt.el (lm-with-file): Use Lisp mode in temp buffer.
	In non-temp buffer, switch syntax table temporarily.

	* emacs-lisp/lisp-mode.el (indent-pp-sexp): Doc fix.

	* replace.el (occur-accumulate-lines, occur-engine): Avoid warnings.

	* tar-mode.el (tar-extract): Bind buffer-undo-list to t.

	* imenu.el (imenu--split-menu): Copy menulist before sorting.
	(imenu--generic-function): Use START, not BEG, as pos of definition.

	* simple.el (just-one-space): Argument specifies number of spaces.

	* simple.el (eval-expression-print-format): Avoid warning
	about edebug-active.

2005-01-15  James R. Van Zandt  <jrvz@comcast.net>  (Tiny change)

	* progmodes/sh-script.el: Code copied from make-mode.el
	with small changes,
	(sh-mode-map): Bind C-c C-\.
	(sh-backslash-column, sh-backslash-align): New variables.
	(sh-backslash-region, sh-append-backslash): New functions.

2005-01-15  Sergey Poznyakoff  <gray@Mirddin.farlep.net>

	* mail/rmail.el: Updated to work with movemail from GNU Mailutils
	(rmail-pop-password, rmail-pop-password-required): Move to
	rmail-obsolete group.
	(rmail-set-pop-password): Rename to rmail-set-remote-password.
	All callers updated.
	(rmail-get-pop-password): Rename to rmail-get-remote-password.
	Take an argument specifying whether it is POP or IMAP mailbox we
	are using.  All callers updated.
	(rmail-pop-password-error): Rename to
	rmail-remote-password-error.  Added mailutils-specific error message.
	(rmail-movemail-search-path)
	(rmail-movemail-variant-in-use): New variables.
	(rmail-remote-password, rmail-remote-password-required):
	New customization variables.
	(rmail-probe,rmail-autodetect, rmail-movemail-variant-p): New funs.
	(rmail-parse-url): New function.
	(rmail-get-new-mail, rmail-insert-inbox-text): Update for use
	with GNU mailutils movemail.

2005-01-15  Kevin Ryde  <user42@zip.com.au>

	* info-look.el (c-mode/symbol): Add ^` to prefix, and change
	suffix to space, $ or '$, to correctly position point when going
	to @table style constants like DBL_MAX.

2005-01-15  Jorgen Schaefer  <forcer@forcix.cx>  (tiny change)

	* type-break.el (type-break-mode, type-break-file-time)
	(type-break-file-keystroke-count, type-break-choose-file):
	Don't store data in or load data from the file if type-break-file-name
	is nil.
	(type-break-file-name): Doc update as per the above.

2005-01-15  Stephen Eglen  <S.J.Eglen@damtp.cam.ac.uk>  (tiny change)

	* woman.el (woman-dired-define-key-maybe): If KEY is undefined,
	lookup-key might return nil; handle that.

2005-01-15  Alan Mackenzie  <acm@muc.de>

	* ebrowse.el (ebrowse-class-in-tree): Return the tail of the tree
	rather than the element found, thus enabling the tree to be setcar'd.

2005-01-14  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/org.el (org-show-following-heading): New option.
	(org-show-hierarchy-above): Use `org-show-following-heading'.
	(org-cycle): Documentation fix.

	* textmodes/org.el (orgtbl-optimized): New option
	(orgtbl-mode): New command, a minor mode.
	(orgtbl-mode-map): New variable.
	(turn-on-orgtbl, orgtbl-mode, orgtbl-make-binding)
	(orgtbl-error, orgtbl-self-insert-command)
	(orgtbl-delete-backward-char, orgtbl-delete-char): New functions.

	* textmodes/org.el (org-mode): `org-table-may-need-update' is now
	a local variable in each org-mode buffer.

	* textmodes/org.el (org-set-regexps-and-options): Rename from
	`org-set-regexps'.  Added checking for STARTUP keyword.
	(org-get-current-options): Add STARTUP options.
	(org-table-insert-row): Make mode intelligent about when
	realignment is needed.
	(org-self-insert-command, org-delete-backward-char, org-delete-char):
	New commands.
	(org-enable-table-editor): New default value `optimized'.
	(org-table-blank-field): Support blanking regions if active.

2005-01-14  Carsten Dominik  <dominik@science.uva.nl>

	* textmodes/reftex-cite.el (reftex-bib-sort-year): Catch the case
	if the year is not given.

	* textmodes/reftex-ref.el (reftex-replace-prefix-escapes):
	Add new escapes %m and %M, fixed bug with %F by adding
	save-match-data.
	(reftex-reference): Remove ?. from list of spaces.
	(reftex-label-info): Add automatic label prefix recognition.

	* textmodes/reftex-index.el (reftex-index-next-phrase):
	Add slave parameter to call of `reftex-index-this-phrase'.
	(reftex-index-this-phrase): New optional argument.
	(reftex-index-region-phrases): Add slave parameter to call of
	`reftex-index-this-phrase'.
	(reftex-display-index): New argument redo.
	(reftex-index-rescan): Add 'redo to arguments of
	`reftex-display-index'.
	(reftex-index-Rescan, reftex-index-revert)
	(reftex-index-switch-index-tag): Add 'redo to arguments of
	`reftex-display-index'.
	(reftex-index-make-phrase-regexp): Fix bug with case-sensitive
	indexing.  Fix bug with matching is there is a quote before or
	after the word.

	* textmodes/reftex-cite.el (reftex-all-used-citation-keys):
	Fix bug when collecting citation keys in lines with comments.
	(reftex-citation): Prefix argument no longer rescans the document,
	but forces prompting for optional arguments of cite macros.
	(reftex-do-citation): Prompting for optional arguments implemented.

	* textmodes/reftex-vars.el (reftex-cite-format-builtin):
	Add optional arguments to most cite commands.
	(reftex-cite-cleanup-optional-args): New option
	(reftex-cite-prompt-optional-args): New option.
	(reftex-trust-label-prefix): New option.

	* textmodes/reftex-toc.el (reftex-toc-find-section):
	Add push-mark before changing the position in the buffer.

	* textmodes/reftex.el (reftex-prefix-to-typekey-alist): New variable.
	(reftex-compile-variables): Compute reftex-prefix-to-typekey-alist.

2005-01-14  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-event): Compute window co-ordinates
	more carefully.

2005-01-13  Stefan Monnier  <monnier@iro.umontreal.ca>

	* textmodes/sgml-mode.el (sgml-fill-nobreak): New fun.
	(sgml-mode): Use it.
	(sgml-get-context): Better keep track of implicitly closed tags.

2005-01-13  Kenichi Handa  <handa@m17n.org>

	* textmodes/ispell.el: These changes are to fix misalignment error
	caused by equivalent characters of different Emacs charsets.
	(ispell-unified-chars-table): New variable.
	(ispell-get-decoded-string): New function.
	(ispell-get-casechars, ispell-get-not-casechars)
	(ispell-get-otherchars): Call ispell-get-decoded-string.

2005-01-12  Johan Bockg,Ae(Brd  <bojohan@users.sourceforge.net>

	* custom.el (custom-declare-variable): Just put symbol instead
	of (defvar . symbol) in `current-load-list'.

2005-01-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* emacs-lisp/elint.el: Fixed typo in Commentary section.

2005-01-12  Jay Belanger  <belanger@truman.edu>

	* calc/calc-help.el (calc-describe-key): Use temporary info buffer
	to create a Calc summary.

2005-01-12  Kim F. Storm  <storm@cua.dk>

	* mouse.el (mouse-on-link-p): Change functionality and doc
	string to comply with latest description in lisp ref.

2005-01-12  Nick Roberts  <nickrob@snap.net.nz>

	* xt-mouse.el (xterm-mouse-translate, xterm-mouse-event):
	Enable mouse clicks on mode-line, header-line and margin.
	(event-type): Give mouse event symbols an 'event-kind property
	with value 'mouse-click.

2005-01-12  Juri Linkov  <juri@jurta.org>

	* facemenu.el (list-colors-display): Add new arg buffer-name.
	Use it.  Fix docstring.  Replace code for identifying duplicate
	colors by the name with call to `list-colors-duplicates' which
	identifies duplicate colors by the value unless the color
	is one of special Windows colors.  Set truncate-lines to t.
	Print sorted duplicate color names on each line.  Indent to 22
	\(the longest color name in rgb.txt) instead of 20.  Optimize.
	(list-colors-duplicates): New function.
	(facemenu-color-name-equal): Delete function.

	* facemenu.el (list-colors-print): New function created from code
	in list-colors-display.  Print #RRGGBB at the window right edge.
	(list-colors-display): When temp-buffer-show-function is not
	defined, call list-colors-print from temp-buffer-show-hook
	to get the right value of window-width in list-colors-print
	after the buffer is displayed.

	* simple.el (pop-mark): Move deactivate-mark out of conditional
	part to deactivate the active mark regardless of the state of the
	mark ring.

	* desktop.el (desktop-save): Add `mode: emacs-lisp' to the local
	variables line in desktop files.

2005-01-12  Juri Linkov  <juri@jurta.org>

	* isearch.el (search-highlight, isearch, isearch-lazy-highlight):
	Bring together isearch highlight related options.
	(lazy-highlight): Replace group `replace' by `matching'.
	(lazy-highlight-cleanup, lazy-highlight-initial-delay)
	(lazy-highlight-interval, lazy-highlight-max-at-a-time)
	(lazy-highlight): Add aliases to old names isearch-lazy-highlight-...
	and declare them obsolete.
	(lazy-highlight-face): Rename from isearch-lazy-highlight-face.
	(isearch-faces): Remove defgroup.
	(isearch-overlay, isearch-highlight, isearch-dehighlight):
	Move isearch highlighting code closer to lazy highlighting code.

	* replace.el (query-replace-lazy-highlight): Add lazy-highlight group.
	(query-replace-highlight, query-replace-lazy-highlight)
	(query-replace): Move definitions to the beginning of the file.

2005-01-11  Juri Linkov  <juri@jurta.org>

	* toolbar/back_arrow.xpm, toolbar/back_arrow.pbm
	* toolbar/lc-back_arrow.xpm, toolbar/lc-fwd_arrow.xpm
	* toolbar/fwd_arrow.xpm, toolbar/fwd_arrow.pbm: New icons.

	* info.el (Info-history-forward): New variable.
	(Info-select-node): Reset Info-history-forward to nil.
	(Info-last): Turn into defalias.
	(Info-history-back): Rename from Info-last.
	Add current node to Info-history-forward.
	(Info-history-forward): New fun.
	(Info-mode-map): Replace Info-last by Info-history-back.
	Bind Info-history-forward to "r".
	(Info-mode-menu): Replace Info-last by Info-history-back.
	Fix menu item text.  Add menu item for Info-history-forward.
	(info-tool-bar-map): Replace Info-last by Info-history-back.
	Replace its icon "undo" by "back_arrow".  Add icon "fwd_arrow"
	for Info-history-forward.
	(Info-mode): Replace Info-last by Info-history-back in docstring.
	Add local variable Info-history-forward.
	(Info-goto-emacs-command-node): Replace Info-last by Info-history-back.

2005-01-11  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mouse.el (mouse-drag-mode-line-1, mouse-drag-vertical-line)
	(mouse-drag-region, mouse-drag-region-1, mouse-drag-secondary):
	Ignore select-window events rather than fiddle with
	mouse-autoselect-window.

2005-01-11  Matthew Mundell  <matt@mundell.ukfsn.org>

	* type-break.el (type-break-mode): Fix previous change.

2005-01-10  Jay Belanger  <belanger@truman.edu>

	* calc/calc-ext.el (calc-reset): Reset when inside embedded
	calculator; only reset when point is inside a calculator.
	Don't adjust the window height if the window takes up the whole height
	of the frame.

2005-01-10  Thien-Thi Nguyen  <ttn@gnu.org>

	* ebuff-menu.el (Electric-buffer-menu-mode):
	Preserve value of buffer-local var header-line-format.

2005-01-09  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-mode-var-list-restore-saved-values):
	Make sure settings file exists before accessing it.

	* calc/calc-embed.el (calc-embedded-subst):
	Replace math-multi-subst-rec, which is only supposed to be called
	by math-multi-subst, by math-multi-subst.

2005-01-09  Andre Spiegel  <spiegel@gnu.org>

	* vc.el (vc-allow-async-revert): New user option.
	(vc-disable-async-diff): New internal variable.
	(vc-revert-buffer): Use them to disable asynchronous diff.

	* vc-cvs.el, vc-arch.el, vc-svn.el, vc-mcvs.el (vc-cvs-diff)
	(vc-arch-diff, vc-svn-diff, vc-mcvs-diff): Don't diff
	asynchronously if vc-disable-async-diff is t.

2005-01-09  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (defcalcmodevar): New macro.
	(calc-mode-var-list-restore-default-values)
	(calc-mode-var-list-restore-saved-values): New functions.
	(calc-mode-var-list): Use defcalcmodevar to define it.
	(calc-always-load-extensions, calc-line-numbering)
	(calc-line-breaking, calc-display-just, calc-display-origin)
	(calc-number-radix, calc-leading-zeros, calc-group-digits)
	(calc-group-char, calc-point-char, calc-frac-format)
	(calc-prefer-frac, calc-hms-format, calc-date-format)
	(calc-float-format, calc-full-float-format, calc-complex-format)
	(calc-complex-mode, calc-infinite-mode, calc-display-strings)
	(calc-matrix-just, calc-break-vectors, calc-full-vectors)
	(calc-full-trail-vectors, calc-vector-commas, calc-vector-brackets)
	(calc-matrix-brackets, calc-language, calc-language-option)
	(calc-left-label, calc-right-label, calc-word-size)
	(calc-previous-modulo, calc-simplify-mode, calc-auto-recompute)
	(calc-display-raw, calc-internal-prec, calc-angle-mode)
	(calc-algebraic-mode, calc-incomplete-algebraic-mode)
	(calc-symbolic-mode, calc-matrix-mode, calc-shift-prefix)
	(calc-window-height, calc-display-trail, calc-show-selections)
	(calc-use-selections, calc-assoc-selections)
	(calc-display-working-message, calc-auto-why, calc-timing)
	(calc-mode-save-mode, calc-standard-date-formats, calc-autorange-units)
	(calc-was-keypad-mode, calc-full-mode, calc-user-parse-tables)
	(calc-gnuplot-default-device, calc-gnuplot-default-output)
	(calc-gnuplot-print-device, calc-gnuplot-print-output)
	(calc-gnuplot-geometry, calc-graph-default-resolution)
	(calc-graph-default-resolution-3d, calc-invocation-macro)
	(calc-show-banner): Use defcalcmodevar to declare them and set
	their default values.

	* calc/calc-ext.el (calc-reset): Restore saved values of variables
	instead of default values (but restore default values if there is
	an argument of 0).

2005-01-09  David Kastrup  <dak@gnu.org>

	* desktop.el (desktop-restore-eager): Fix typo in type.

2005-01-08  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (customize): Delete :link.

2005-01-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-mode): Remove the extension from the
	`calc-settings-file' file name when loading it.

2005-01-08  Kim F. Storm  <storm@cua.dk>

	* info.el (Info-mode-map, Info-next-link-keymap)
	(Info-prev-link-keymap, Info-up-link-keymap):
	Map follow-link to mouse-face.
	(Info-fontify-node): Add "mouse-2: " prefix to tooltip.

2005-01-08  Jay Belanger  <belanger@truman.edu>

	* calc/calc.el (calc-settings-file): Change default value.
	Suggested by cgw in a comment in calc-mode.el.

	* calc/calc-mode.el (calc-settings-file-name):
	Compare calc-settings-file to user-init-file instead of ~/.emacs.
	Replace ~/.emacs in a prompt by calc-settings-file.

2005-01-07  Lars Hansen  <larsh@math.ku.dk>

	* desktop.el (desktop-restore-eager, desktop-lazy-verbose)
	(desktop-lazy-idle-delay): New customizable variables.
	(desktop-buffer-args-list): New variable.
	(desktop-append-buffer-args): New function.
	(desktop-save): Call desktop-append-buffer-args for some buffers.
	(desktop-lazy-create-buffer): New function.
	(desktop-idle-create-buffers): New function.
	(desktop-read): Add message about buffers to restore lazily.
	(desktop-lazy-abort): New command.
	(desktop-clear): Call desktop-lazy-abort.
	(desktop-lazy-complete): New command.

2005-01-06  Richard M. Stallman  <rms@gnu.org>

	* emacs-lisp/find-func.el (find-face-definition):
	Rename from find-face.

2005-01-06  Kim F. Storm  <storm@cua.dk>

	* simple.el (completion-list-mode-map): Map follow-link to mouse-face.

	* man.el (Man-xref-man-page, Man-xref-header-file)
	(Man-xref-normal-file): Add follow-link property.

2005-01-06  Jay Belanger  <belanger@truman.edu>

	* calc/calc-units.el: Make sure the proper macro definitions are
	available when compiling.

2005-01-06  Juri Linkov  <juri@jurta.org>

	* isearch.el (isearch-lazy-highlight-update):
	Rename `isearch-lazy-highlight-interval' to `lazy-highlight-interval'.

2005-01-06  Miles Bader  <miles@gnu.org>

	* isearch.el (lazy-highlight): Rename from `lazy-highlight-face'.
	(isearch-lazy-highlight-face): Use new name.

2005-01-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* uniquify.el (uniquify-rationalize-file-buffer-names):
	Re-add an interactive spec.
	(uniquify-rationalize-file-buffer-names): Fix corner case when renaming
	to the same name.

	* isearch.el (isearch-dehighlight): Remove unused arg `totally'.
	(isearch-update, isearch-done): Adjust calls accordingly.

2005-01-05  Richard M. Stallman  <rms@gnu.org>

	* custom.el (custom-set-variables, custom-theme-set-variables):
	Clarify documentation.

	* emacs-lisp/find-func.el (find-variable)
	(find-variable-other-window, find-variable-other-frame):
	Fix the TYPE args to find-function-read and find-function-do-it.
	(find-function): Doc fix.
	(find-function-at-point): Replace function-at-point alias.

2005-01-04  Richard M. Stallman  <rms@gnu.org>

	* cus-face.el (custom-declare-face):
	Record defface in current-load-list.

	* help-fns.el (variable-at-point): New arg ANY-SYMBOL.

	* emacs-lisp/find-func.el: Doc fixes.
	(find-face-regexp): New variable.
	(find-function-regexp-alist): New variable.
	(find-function-C-source): Third arg is now TYPE.
	(find-function-search-for-symbol): Handle general TYPE.
	(find-function-read, find-function-do-it): Handle general TYPE.
	(find-definition-noselect, find-face): New functions.
	(function-at-point): Alias deleted.

2005-01-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* battery.el (display-battery-mode): Rename from display-battery.
	Handle the case where it gets turned off.

2005-01-04  Richard M. Stallman  <rms@gnu.org>

	* cus-edit.el (customize): Make :link point to user doc.

	* man.el (Man-fontify-manpage): Turn off undo generation.

	* add-log.el (change-log-font-lock-keywords): Don't match just "From".

2005-01-04  Andreas Schwab  <schwab@suse.de>

	* files.el (insert-directory): Only look for error lines in
	inserted text.  Don't move too far after processing --dired markers.

2005-01-04  Richard M. Stallman  <rms@gnu.org>

	* mail/mailabbrev.el (sendmail-pre-abbrev-expand-hook):
	Don't expand if the character is @, period, dash, etc.
	(define-mail-abbrev): Quote names that contain problem characters.

2005-01-04  Thien-Thi Nguyen  <ttn@gnu.org>

	* progmodes/hideshow.el: No longer require `cl'; `dolist' is standard.

2005-01-03  Richard M. Stallman  <rms@gnu.org>

	* replace.el (replace-dehighlight): Use lazy-highlight-cleanup.
	(query-replace-highlight, query-replace-lazy-highlight)
	(query-replace): Definitions moved up.  Doc fix.

2005-01-03  Richard M. Stallman  <rms@gnu.org>

	* isearch.el (lazy-highlight): Group renamed from isearch-lazy-...
	(lazy-highlight-cleanup, lazy-highlight-initial-delay)
	(lazy-highlight-interval, lazy-highlight-max-at-a-time)
	(lazy-highlight-face): Rename from isearch-lazy-...
	Change all references to them.

2005-01-03  Luc Teirlinck  <teirllm@auburn.edu>

	* cus-edit.el (custom-file): Doc fix for defcustom.
	(custom-file): The function no longer sets the variable
	`custom-file' to its return value.

	* startup.el (command-line): No longer load `custom-file'.

2005-01-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* emacs-lisp/find-func.el (find-variable-regexp): Avoid defface.

	* progmodes/perl-mode.el (perl-nochange, perl-calculate-indent):
	Don't confuse module-prefixed identifiers for labels.
	Reported by Juan-Leon Lahoz Garcia <juanleon1@gmail.com>.

2005-01-02  Richard M. Stallman  <rms@gnu.org>

	* files.el (basic-save-buffer-1): Fix previous change.

	* loadhist.el (file-loadhist-lookup): New function.
	(file-provides, file-requires): Use it.

	* electric.el (Electric-pop-up-window): Use fit-window-to-buffer
	instead of calculating the right size.

2005-01-02  Karl Chen  <quarl@cs.berkeley.edu>  (tiny change)

	* vc-svn.el (vc-svn-diff): Stay local if possible.

2005-01-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* vc-arch.el (vc-arch-workfile-version): Handle the empty-branch case.

	* files.el (hack-local-variables): Fix last change.

2005-01-02  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-top): New variable.
	(calc-edit-mode): Set calc-edit-top to be the beginning of the edited
	object.  Change header properties.
	(calc-edit-finish, calc-edit-finish-stack-object)
	(calc-edit-show-buffer): Use calc-edit-top to find the beginning of the
	edited object.
	* calc/calc-sel.el (calc-finish-selection-edit): Use calc-edit-top
	for the beginning of the edited object.
	* calc/calc-embed.el (calc-embedded-finish-edit): Use calc-edit-top
	for the beginning of the edited object.
	* calc/calc-prog.el (calc-edit-macro-finish-edit)
	(calc-finish-formula-edit, calc-macro-repeats)
	(calc-edit-macro-adjust-buffer, calc-edit-format-macro-buffer)
	(calc-edit-macro-pre-finish-edit): Use calc-edit-top for the
	beginning of the edited object.
	(calc-user-define-edit): Change the header for editing macros.
	Remove unnecessary variable.

2005-01-01  Jay Belanger  <belanger@truman.edu>

	* calc/calc-yank.el (calc-edit-mode): Change default header.
	(calc-edit-finish, calc-show-edit-buffer): Adjust to handle new header.
	* calc/calc-store.el (calc-edit-variable): Change title to match new
	header.
	* calc/calc-prog.el (calc-edit-user-syntax): Change title in edit
	mode to match new header.
	(calc-user-define-edit): Change titles to include names of commands.
	(calc-finish-formula-edit): Adjust to handle new header.
	(calc-finish-macro-edit): Remove.
	(calc-edit-macro-repeats, calc-edit-macro-adjust-buffer)
	(calc-edit-macro-command, calc-edit-macro-command-type)
	(calc-edit-macro-combine-alg-ent, calc-edit-macro-combine-ext-command)
	(calc-edit-macro-combine-var-name, calc-edit-macro-combine-digits)
	(calc-edit-format-macro-buffer, calc-edit-macro-pre-finish-edit)
	(calc-edit-macro-finish-edit): New functions.
	(calc-user-define-edit): Use new functions to edit named calc macros.

2005-01-01  Stefan  <monnier@iro.umontreal.ca>

	* files.el (hack-local-variables): Cleanup prefix/suffix matching.

	* ses.el (copy-region-as-kill): Deactivate mark.

2005-01-01  Richard M. Stallman  <rms@gnu.org>

	* replace.el (occur-1): If the output buffer is also an input,
	don't kill it, rename it.

	* faces.el (set-face-background, set-face-foreground): Doc fix.

	* cus-face.el (custom-face-attributes): Fix :help-echo strings
	for :foreground and :background.

	* dired.el (dired-view-command-alist): Variable deleted.
	(dired-view-file, dired-mouse-find-file-other-window):
	Delete the code to use it.

2005-01-01  Kim F. Storm  <storm@cua.dk>

	* image.el (insert-sliced-image): Use t for line-height property.

See ChangeLog.11 for earlier changes.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:

    Copyright (C) 2005 Free Software Foundation, Inc.
  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.

;;; arch-tag: e39939be-dab3-400e-86f5-0e2701a883c1
