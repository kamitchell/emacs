2006-01-15  Bill Wohler  <wohler@newt.com>

	* mh-exec.el: Require mh-acros, mh-buffers, and mh-utils for
	standalone compile.
	(mh-progs, mh-lib, mh-lib-progs): Move here from mh-init.el.

	* mh-init.el (mh-progs, mh-lib, mh-lib-progs): Move to mh-exec.el,
	where they are used.

	* mh-comp.el (mh-pgp-support-flag): Move here from mh-utils.el;
	needed to help remove dependency on mh-utils.

	* mh-exec.el: New file. Move process support routines here from
	mh-utils.el.

	* mh-init.el (mh-utils): Remove require.
	(mh-exec): Add require.
	(mh-profile-component, mh-profile-component-value): Move here from
	mh-utils.el.

	* mh-utils.el (mh-pgp-support-flag): Move to mh-comp.el to reduce
	dependencies on mh-utils.el.
	(mh-profile-component, mh-profile-component-value): Move to
	mh-init.el since that's the only place that uses them. (Other than
	mh-alias.el; I'm thinking that mh-find-path can set variable from
	the Aliasfile component like it does the other components).
	(mh-index-max-cmdline-args, mh-xargs, mh-quote-for-shell)
	(mh-exec-cmd, mh-exec-cmd-error, mh-exec-cmd-daemon)
	(mh-exec-cmd-env-daemon, mh-process-daemon, mh-exec-cmd-quiet)
	(defvar, mh-exec-cmd-output)
	(mh-exchange-point-and-mark-preserving-active-mark)
	(mh-exec-lib-cmd-output, mh-handle-process-error): Move to new
	file mh-exec.el so that mh-init.el doesn't have to depend on
	mh-utils.el, breaking circular dependency.

	* mh-alias.el: 
	* mh-customize.el: 
	* mh-e.el: 
	* mh-funcs.el: 
	* mh-gnus.el: 
	* mh-identity.el: 
	* mh-inc.el: 
	* mh-junk.el: 
	* mh-mime.el: 
	* mh-print.el: 
	* mh-search.el: 
	* mh-seq.el: 
	* mh-speed.el: Added debugging statements (commented out) around
	requires to help find dependency loops. Will remove them when
	issues are resolved.

2006-01-14  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-index): Rename group to mh-search and sort
	group definition and options accordingly.
	(mh-index-program): Rename to mh-search-program.
	(mh-kill-folder-suppress-prompt-hooks): Rename mh-index-p to
	mh-search-p.
	(mh-search-mode-hook): Change group from mh-index to mh-search.
	(mh-index-folder): Rename to mh-search-folder. Change group from
	mh-index to mh-search.

	* mh-e.el (mh-folder-font-lock-keywords): Rename mh-index-folder
	to mh-search-folder.

	* mh-search.el (mh-indexer) Rename to mh-searcher. The commands
	pick and grep are searchers too but aren't indexed.
	(mh-index-execute-search-function): Rename to mh-search-function.
	(mh-index-next-result-function): Rename to
	mh-search-next-result-function.
	(mh-index-regexp-builder): Rename to mh-search-regexp-builder.
	(mh-search): Since redo-search-flag defaults to nil and is of
	lesser importance, make it an optional argument and place it after
	the folder and search-regexp arguments. Sync docstring with
	manual.
	(mh-search-mode-map): Autoload so that keys are shown in help even
	before mh-search is loaded.
	(mh-search-mode): Sync docstring with manual.
	(mh-index-do-search): Rename argument indexer to searcher. Sync
	docstring with manual.
	(mh-pick-do-search): Sync docstring with manual.
	(mh-index-p): Rename to mh-search-p.
	(mh-indexer-choices): Rename to mh-search-choices.
	(mh-index-choose): Rename to mh-search-choose. Rename argument
	indexer to searcher.
	(mh-swish++-execute-search, mh-swish-execute-search)
	(mh-mairix-execute-search, mh-namazu-execute-search): Drop "and
	read the results" from docstring since these functions don't.
	(mh-pick-execute-search, mh-grep-execute-search): Sync docstring
	with manual.
	(mh-index-generate-pretty-name): Prune -search from string so that
	folder names for pick searches are the same as those of other
	searches.

2006-01-13  Bill Wohler  <wohler@newt.com>

	* mh-acros.el (require): Added Satyaki's comment regarding what
	needs to happen to remove this defadvice which caused a little
	discussion on emacs-devel today (see Subject: mh-e/mh-acros.el
	advices `require' incorrectly).

	* mh-search.el (mh-index-next-result-function): Add format to
	docstring.
	(mh-mairix-next-result): Use nil instead of () which doesn't stand
	out as well.
	(mh-pick-execute-search): Operate across all folders if no folder
	given and recurse folder(s).
	(mh-pick-next-result): Handle new output.

	* mh-utils.el: (mh-collect-folder-names): Fix docstring.
	(mh-children-p, mh-folder-list): New functions.	

2006-01-12  Bill Wohler  <wohler@newt.com>

	* mh-search.el: New file containing contents of mh-index.el and
	mh-pick.el. C-c C-c launches your mh-index-program; C-c C-p runs
	pick. Pick no longer sets the "search" sequence. Instead, it
	brings up a folder view that we're accustomed to. (closes SF
	#829207).
	(mh-index-search): Rename to mh-search.
	(mh-pick-menu): Rename menu from Pick to Search. Rename Execute
	the Search to Perform Search and call mh-do-search. Add Search
	with Pick menu item.
	(mh-do-search): Delete.
	(mh-search-mode): Rename from mh-pick-mode.
	(MH-Search): Rename mode from MH-Pick.
	(mh-search-mode-map): Rename from mh-pick-mode-map.
	(mh-search-mode-help-messages): Rename from
	mh-pick-mode-help-messages.
	(mh-index-choose): Don't reuse the last value of mh-indexer; when
	mh-pick-do-search sets it to 'pick, we don't necessarily want to
	stay with that choice!

	* mh-index.el:
	* mh-pick.el: Merge into mh-search.el and delete.

	* mh-customize.el (mh-index-program): Change mh-index-search to
	mh-search in docstring.
	(mh-tool-bar-search-function): Change default from
	mh-search-folder to mh-search. Remove mh-search-folder as choice
	and rename mh-index-search choice to mh-search. Fix docstring.
	(mh-pick-mode-hook): Rename to mh-search-mode-hook and change
	mh-search-folder to mh-search in docstring.

	* mh-e.el (mh-folder-folder-menu): Delete Search a Folder. Change
	Indexed Search to Search. Use mh-search instead of
	mh-index-search.
	(mh-folder-map): Delete i (mh-index-search) keybinding. Change s
	from mh-show-search-folder to mh-search.

	* mh-seq.el (mh-put-msg-in-seq): Fix docstring now that
	mh-search-folder no longer creates the search sequence.

	* mh-utils.el (mh-show-search-folder): Delete.
	(mh-show-folder-map): Delete i (mh-index-search) keybinding.
	Change s from mh-show-search-folder to mh-search.
	(mh-show-folder-menu): Delete Search a Folder. Change Indexed
	Search to Search. Use mh-search instead of mh-index-search.
	(mh-index-max-cmdline-args, mh-xargs, mh-quote-for-shell): Move
	here from deleted mh-index.el.

2006-01-11  Bill Wohler  <wohler@newt.com>

	* mh-acros.el (mh-defun-compat, mh-defmacro-compat): Move here
	from mh-gnus.el.

	* mh-gnus.el: Require mh-acros.
	(mh-defmacro-compat, mh-defun-compat): Move to mh-acros.el.

	* mh-utils.el (mh-x-image-url-cache-canonicalize): Use
	url-hexify-string to remove special characters from filenames
	(closes SF #1396499). Note that this invalidates the existing
	names in your cache so you might as well remove
	~/Mail/.mhe-x-image-cache/* now.
	(url-unreserved-chars, url-hexify-string): Define if not defined.
	Copied from url-util.el in Emacs22 for Emacs 21.

	* mh-buffers.el: New file. Contains constants and code from
	mh-index.el and mh-utils.el.

	* mh-alias.el: 
	* mh-comp.el: 
	* mh-e.el: 
	* mh-funcs.el: 
	* mh-init.el:
	* mh-junk.el: 
	* mh-mime.el:
	* mh-print.el:
	* mh-seq.el: Require new file mh-buffers.el.

	* mh-index.el: Require new file mh-buffers.el.
	(mh-index-temp-buffer, mh-checksum-buffer): Move to new file
	mh-buffers.el.

	* mh-utils.el: Require new file mh-buffers.el.
	(mh-temp-buffer, mh-temp-fetch-buffer)
	(mh-aliases-buffer, mh-folders-buffer, mh-help-buffer)
	(mh-info-buffer, mh-log-buffer, mh-mail-delivery-buffer)
	(mh-recipients-buffer, mh-sequences-buffer, mh-log-buffer-lines)
	(mh-truncate-log-buffer): Move to new file mh-buffers.el.

	* mh-comp.el (mh-forward): Cosmetics on prompt when draft exists.
	(mh-send-letter): Add -msgid to mh-send-args (closes SF #725425).

2006-01-10  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-insert-letter): If you choose a different folder,
	the cur message is used. Sync docstring with manual (closes SF
	#1205890).

	* mh-mime.el (mh-compose-forward): Use standard range argument
	instead of messages. Use more powerful mh-read-range instead of
	read-string. Sync docstring with manual (close SF #1205890).

	* mh-index.el (mh-index-search): Checking mh-find-path-run is
	unnecessary.
	(mh-index-next-folder): Don't back up a line when going backwards
	since this skips the current folder heading if point is on the
	first message after the folder heading (closes SF #1126188).

	* mh-init.el (mh-sys-path): Co-locate with mh-variants, which uses
	it.
	(mh-variants): Note variable isn't meant to be accessed directly;
	use function mh-variants instead.
	(mh-variant-info, mh-variant-mh-info, mh-variant-mu-mh-info)
	(mh-variant-nmh-info): Co-locate next to mh-variants, which uses
	them. Updated to use mh-file-command-p which is more accurrate
	than file-executable-p which returns t for directories.
	(mh-file-command-p): Move here from mh-utils, since
	mh-variant-*-info are the only functions to use it.
	(mh-variant-set, mh-variant-set-variant, mh-variant-p): Use
	function mh-variants instead of variable. More robust.
	(mh-find-path-run): Move here from mh-utils.el. Mention that
	checking this variable is unnecessary.
	(mh-find-path): Move here from mh-utils.el. With the advent of MH
	variants and an mhparam command that doesn't work if there isn't
	an MH profile, we can't get libdir for running install-mh. So
	don't bother. If there's an issue with the environment, direct the
	user to install MH and run install-mh (closes SF #835192). Don't
	read ~/.mh_profile directly. Use mh-profile-component which uses
	mhparam (closes SF #1016027).

	* mh-utils.el (mh-get-profile-field): Rename to
	mh-profile-component-value. Add colon to search removing
	unnecessary addition of colon to field in mh-profile-component.
	(mh-profile-component): Modify call to mh-profile-component-value
	accordingly. Move next to mh-profile-component-value.
	(mh-find-path-run, mh-find-path, mh-file-command-p): Move to
	mh-init.el. It makes sense that code that is only run once per
	session (more or less) is in mh-init.el rather than cluttering
	mh-utils.el.
	(mh-no-install, mh-install): Delete.

	* mh-customize.el (mh-folder-msg-number): 
	* mh-mime.el (mh-file-mime-type): Removed trailing whitespace.

2006-01-09  Bill Wohler  <wohler@newt.com>

	* mh-init.el (mh-variant-mu-mh-info, mh-variant-nmh-info): Applied
	patch from Satyaki from SF #1016027.

	* mh-e.el (mh-rescan-folder): Try to keep cursor at current
	message, even if cur sequence is no longer present (closes SF
	#1207247).

	* mh-comp.el: Use ";; Shush compiler." comment consistently per
	Mark's suggestion.
	(mh-letter-mode): Derive from mail-mode and delete code copied
	from mail-mode (closes SF #1385571). Mention mail-mode-hook in
	docstring.
	(mh-fill-paragraph-function): Delete. Handled by mail-mode.
	(mh-to-field-choices): For consistency with mail-mode, add "a" for
	"Mail-Reply-To:", "l" for "Mail-Followup-To:", and "r" for
	"Reply-To:". Change "r" to "m" for "From:" (closes SF #1400139).
	(mh-to-fcc): Move setting of folder argument to interactive
	argument as is the norm.
	(mh-letter-complete-function-alist): Add mail-reply-to.
	(mh-letter-mode-map): Add keys for mh-to-field (Mail-Reply-To,
	Mail-Followup-To, Reply-To, From).

	* mh-customize.el: Use ";; Forward definition." consistently.
	Comment declaration to remind programmer to update forward
	definition if default changes.

	* mh-funcs.el: 
	* mh-inc.el: 
	* mh-init.el: 
	* mh-mime.el: 
	* mh-seq.el: 
	* mh-utils.el: Use ";; Shush compiler." comment consistently per
	Mark's suggestion.

2006-01-08  Bill Wohler  <wohler@newt.com>

	Removed code that was marked as Emacs 20 compatible that was
	easily found showing how important it is to document such
	things (closes SF #1359240). Feel free to nuke any other Emacs 20
	peculiarities that you find. Wrapped code for shushing compiler
	with (eval-when-compile), sometimes moving the defvars closer to
	where they were used.
	
	* mh-alias.el (mh-alias-gecos-name): Use replace-regexp-in-string
	instead of mh-replace-in-string as mh-replace-in-string was
	replaced by a more appropriate defsubst in mh-xemacs.el.

	* mh-comp.el: Require cleanup, wrap compiler-shushing defvars with
	eval-when-compile.
	(mh-file-is-vcard-p): Removed redundant test.

	* mh-customize.el: Require cleanup, wrap compiler-shushing defvars
	with eval-when-compile.
	(mh-adaptive-cmd-note-flag, mh-invisible-header-fields)
	(mh-invisible-header-fields-default): Add forward definitions.
	(mh-invisible-header-fields-default): Alphabetize.

	* mh-e.el: Require cleanup, wrap compiler-shushing defvars with
	eval-when-compile.
	(mh-thread-scan-line-map-stack, tool-bar-mode): Delete unused
	variables.
	(mh-colors-available-p): Just call display-color-cells. It's on
	all supported Emacsen (and defaliased on XEmacs).

	* mh-funcs.el:
	* mh-inc.el:
	* mh-init.el: Wrap compiler-shushing defvars with
	eval-when-compile.

	* mh-identity.el: Don't need (mh-require-cl).

	* mh-index.el: Don't need to load executable any more.

	* mh-mime.el: Wrap compiler-shushing defvars with
	eval-when-compile.
	(mh-have-file-command): Initialize variable to 'undefined. Add
	docstring. Update function of same name accordingly. Also don't
	need to load executable any more.
	(mh-mime-content-types): Delete.
	(mh-minibuffer-read-type): Prompt user for type if
	mh-file-mime-type returns application/octet-stream. Assume we have
	mailcap-mime-types.
	(mh-mime-display): Update error message.

	* mh-seq.el: Require cleanup, and wrap compiler-shushing defvars
	with eval-when-compile.

	* mh-utils.el: Require cleanup, and wrap compiler-shushing defvars
	with eval-when-compile.
	(mh-clean-msg-header): Don't set after-change-functions to nil.
	(mh-replace-in-string): Remove. Create defsubst in mh-xemacs.el
	instead.
	
2006-01-07  Bill Wohler  <wohler@newt.com>

	* mh-customize.el: Updated Faces documentation in header.
	(mh-invisible-header-fields-internal): Add X-Lumos-SenderID,
	X-Return-Path-Hint, and X-Roving-* from Roving ConstantContact.

	* mh-mime.el (mh-mml-tag-present-p): Update regexp to handle <mml>
	tags inserted by Gnus gnus-summary-mail-forward (closes SF
	#1399307).

2006-01-03  Mark D. Baushke  <mdb@gnu.org>

	* mh-e.el (mh-delete-a-msg): Fix whitespace nit.
	* mh-index.el (mh-mairix-execute-search): Fix symbol quote.

2006-01-03  Bill Wohler  <wohler@newt.com>

	* mh-alias.el (mh-alias-add-alias): Grand message and error string
	unification. Use single sentence if possible by using semicolon.
	Don't end message with punctuation. Don't need format with
	message. Quote messages as in docstrings: use `' around symbols,
	\" for option choices. Don't use quotes around %s.
	
	* mh-comp.el (mh-complete-word): Ditto.

	* mh-customize.el (mh-adaptive-cmd-note-flag-check)
	(mh-scan-format-file-check): Ditto.

	* mh-e.el (mh-refile-or-write-again, mh-previous-unread-msg)
	(mh-delete-a-msg, mh-refile-a-msg, mh-next-unread-msg)
	(mh-msg-num-width-to-column): Ditto.

	* mh-identity.el (mh-identity-field-handler): Ditto.

	* mh-index.el (mh-mairix-execute-search)
	(mh-swish-execute-search, mh-swish++-execute-search)
	(mh-namazu-execute-search): Ditto.

	* mh-init.el (mh-variant-set): Ditto.

	* mh-mime.el (mh-mh-to-mime-undo, mh-mml-forward-message)
	(mh-secure-message, mh-mime-display): Ditto.

	* mh-pick.el (mh-search-folder, mh-pick-construct-regexp): Ditto.

	* mh-seq.el (mh-narrow-to-seq, mh-put-msg-in-seq, mh-read-seq)
	(mh-read-range, mh-thread-container-subject): Ditto.

	* mh-utils.el (mh-x-image-scale-and-display)
	(mh-prompt-for-folder, mh-handle-process-error)
	(mh-list-to-string-1): Ditto.

	* mh-comp.el (mh-reply): Use standard default notation in
	prompts (closes SF #1275933).

	* mh-mime.el (mh-mime-save-parts): Ditto.

	* mh-seq.el (mh-read-seq, mh-read-range): Ditto.

	* mh-customize.el (mh-folder-msg-number): Snow is actually
	off-white on low color displays which turns to white when bold.
	This is unreadable on white backgrounds. Use snow with min-colors
	requirement. Use cyan on low-color displays.

	* mh-init.el (mh-defface-compat): On low-color displays, delete
	the high-color display rather than simply strip the min-colors
	requirement since the existing algorithm shadowed the desired
	display on low-color displays.

	* mh-alias.el (mh-alias-add-alias): Remove leading * from
	docstring.

2006-01-02  Bill Wohler  <wohler@newt.com>

	* mh-alias.el (mh-alias-grab-from-field): Remove leading * from
	docstring. Does this mean something in a defun?

	* mh-customize.el (bw-new-face-to-old, bw-old-face-to-new):
	Checkdoc fix.

	* mh-e.el (mh-inc-folder): Rename maildrop-name argument to file
	so it reads better in docstring and manual. Sync docstring with
	manual.

	* mh-init.el (mh-defface-compat): Remove trailing space (checkdoc).

	* mh-alias.el (mh-alias-apropos): Sync docstring with manual.

	* mh-comp.el (mh-redistribute, mh-to-field, mh-to-fcc)
	(mh-insert-auto-fields, mh-send-letter, mh-yank-cur-msg)
	(mh-fully-kill-draft, mh-open-line, mh-letter-complete)
	(mh-letter-complete-or-space, mh-letter-confirm-address)
	(mh-letter-next-header-field-or-indent)
	(mh-letter-previous-header-field): Ditto.

	* mh-customize.el (mh-alias-completion-ignore-case-flag)
	(mh-default-folder-for-message-function, mh-mml-method-default)
	(mh-signature-file-name, mh-yank-behavior, mh-show-hook)
	(mh-show-mode-hook) Ditto.

	* mh-e.el (mh-refile-or-write-again, mh-toggle-showing): Ditto.

	* mh-funcs.el (mh-pipe-msg, mh-sort-folder, mh-undo-folder)
	(mh-store-msg, mh-store-buffer): Ditto

	* mh-index.el (mh-index-search, mh-index-do-search)
	(mh-index-next-folder, mh-index-sequenced-messages): Ditto.

	* mh-junk.el (mh-spamassassin-blacklist): Ditto.

	* mh-mime.el (mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-type, mh-mh-to-mime, mh-mh-to-mime-undo)
	(mh-mml-secure-message-sign, mh-mml-secure-message-encrypt)
	(mh-mml-secure-message-signencrypt): Ditto

	* mh-pick.el (mh-search-folder): Ditto.

	* mh-seq.el (mh-widen): Ditto.

	* mh-utils.el (mh-show, mh-modify): Ditto.

2006-01-02  Mark D. Baushke  <mdb@gnu.org>

	* mh-mime.el (mh-mml-unsecure-message): Remove unused argument.

2006-01-01  Bill Wohler  <wohler@newt.com>

	* mh-customize.el: Sync docstrings with manual for faces and sort
	them alphabetically.
	(mh-faces): Move below mh-hooks.
	(mh-folder-faces, mh-index-faces, mh-letter-faces)
	(mh-show-faces, mh-speed-faces): Delete. Organize faces like
	hooks.
	(mh-speed-update-interval): Fix group (mh-speedbar, not mh-speed).
	(facemenu-unlisted-faces): Might as well ignore all MH-E faces.
	(mh-folder-body-face, mh-folder-cur-msg-face)
	(mh-folder-cur-msg-number-face, mh-folder-date-face)
	(mh-folder-followup-face, mh-folder-msg-number-face)
	(mh-folder-deleted-face, mh-folder-refiled-face)
	(mh-folder-subject-face, mh-folder-address-face)
	(mh-folder-scan-format-face, mh-folder-to-face)
	(mh-index-folder-face, mh-show-cc-face, mh-show-date-face)
	(mh-show-header-face, mh-show-pgg-good-face)
	(mh-show-pgg-unknown-face, mh-show-pgg-bad-face)
	(mh-show-to-face, mh-show-from-face, mh-show-subject-face):
	Delete.
	(mh-folder-cur-msg): Unused. Delete.
	(mh-folder-address): Use defface; inherit from mh-folder-subject.
	(mh-folder-body, mh-folder-cur-msg-number, mh-folder-date):
	Inherit from mh-folder-msg-number.
	(mh-folder-deleted): Use defface. Inherit from
	mh-folder-msg-number.
	(mh-folder-sent-to-me-hint): New face. Inherit from
	mh-folder-date.
	(mh-folder-sent-to-me-sender): Rename from mh-folder-scan-format.
	Use defface. Inherit from mh-folder-followup.
	(mh-show-xface): Inherit from mh-show-from and highlight.
	(bw-face-generation, bw-toggle-faces)
	(bw-new-face-to-old, bw-old-face-to-new): New (tempoarary)
	variables, functions for toggling between old and new faces.

	* mh-e.el (font-lock-auto-fontify, font-lock-defaults): Hide in
	eval-when-compile. We should probably do this throughout.
	(mh-scan-good-msg-regexp, mh-scan-deleted-msg-regexp)
	(mh-scan-refiled-msg-regexp, mh-scan-cur-msg-number-regexp)
	(mh-scan-date-regexp, mh-scan-rcpt-regexp, mh-scan-body-regexp)
	(mh-scan-subject-regexp): Sync docstrings with manual
	(mh-scan-format-regexp): Rename to
	mh-scan-sent-to-me-sender-regexp. Drop date parenthesized
	expression. Make expression more like the others (anchored at the
	beginning of line). Sync docstrings with manual.
	(mh-folder-font-lock-keywords): Use faces directly rather than
	-face variables. Use mh-scan-sent-to-me-sender-regexp instead of
	mh-scan-format-regexp, and within that expression, use faces
	mh-folder-sent-to-me-hint and mh-folder-sent-to-me-sender instead
	of mh-folder-date-face and mh-folder-scan-format-face which were
	misleading.

	* mh-mime.el (mh-mime-security-button-face): Use faces directly
	rather than -face variables.

	* mh-utils.el (mh-show-font-lock-keywords): Use faces directly
	rather than -face variables.
	(mh-face-foreground-compat, mh-face-background-compat): New macros.
	(mh-face-display-function): Use mh-face-foreground-compat and
	mh-face-background-compat to use inherited attributes of
	mh-show-xface on Emacs 22 while still working on Emacs 21.

2005-12-28  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-e-user-agent): Move here from simple.el. Use
	mh-user-agent-compose instead of mh-smail-batch.

2005-12-27  Bill Wohler  <wohler@newt.com>

	* mh-utils.el (mh-prompt-for-folder): Use can-create argument to
	suppress creation of folder if it doesn't exist.

2005-12-27  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mh-utils.el (mh-process-daemon): Don't change buffer in proc-filter.

2005-12-23  Bill Wohler  <wohler@newt.com>

	* mh-e.el (mh-folders-changed): Fix typo in docstring.

	Follow MH-E Developers Guide conventions. Use `' quotes for Help
	hyperlinks such as symbols, Info nodes, or URLs. Use \" quotes for
	everything else. Otherwise, you can accidently get links to
	nonsense symbols.

2005-12-22  Bill Wohler  <wohler@newt.com>

	Follow Emacs coding conventions. Use default setting of
	emacs-lisp-docstring-fill-column which is 65.

	* mh-alias.el (mh-alias-reload): Sync docstrings with manual.

	* mh-comp.el (mh-letter-mode): Use 60 column width.
	(mh-forward, mh-insert-signature, mh-send-letter): Sync docstrings
	with manual.
	(mh-yank-cur-msg): Mention that mh-ins-buf-prefix isn't used if
	you have added a mail-citation-hook and neither are used if you
	use one of the supercite flavors of mh-yank-behavior. Sync
	docstrings with manual.

	* mh-customize.el (mh-kill-folder-suppress-prompt-hooks): Rename
	from mh-kill-folder-suppress-prompt-hook since it is an abnormal
	hook. Use "Hook run by `function'..." instead of "Invoked...".
	Sync docstrings with manual.
	(mh-ins-buf-prefix, mh-yank-behavior): Mention that
	mh-ins-buf-prefix isn't used if you have added a
	mail-citation-hook and neither are used if you use one of the
	supercite flavors of mh-yank-behavior. Sync docstrings with
	manual.
	(mail-citation-hook): Delete. Use one in sendmail.el.
	(mh-signature-file-name, mh-after-commands-processed-hook)
	(mh-alias-reloaded-hook, mh-before-commands-processed-hook)
	(mh-before-quit-hook, mh-before-send-letter-hook)
	(mh-delete-msg-hook, mh-find-path-hook, mh-folder-mode-hook)
	(mh-forward-hook, mh-inc-folder-hook, mh-insert-signature-hook)
	(mh-letter-mode-hook)
	(mh-mh-to-mime-hook, mh-pick-mode-hook, mh-quit-hook)
	(mh-refile-msg-hook, mh-show-hook, mh-show-mode-hook)
	(mh-unseen-updated-hook): Use "Hook run by `function'..." instead
	of "Invoked...". Sync docstrings with manual.

	* mh-e.el (mh-last-destination, mh-last-destination-folder)
	(mh-last-destination-write, mh-folder-mode-map, mh-arrow-marker)
	(mh-delete-list, mh-refile-list, mh-folders-changed)
	(mh-next-direction, mh-view-ops, mh-folder-view-stack)
	(mh-index-data, mh-first-msg-num, mh-last-msg-num)
	(mh-mode-line-annotation, mh-sequence-notation-history)
	(mh-colors-available-flag): Move comment into docstring.
	(mh-delete-msg, mh-execute-commands, mh-inc-folder, mh-quit)
	(mh-process-commands): Sync docstrings with manual.
	(mh-refile-msg): Small doc edit.
	(mh-delete-a-msg, mh-refile-a-msg): Sync docstrings with manual.
	Rename msg argument to message.

	* mh-funcs.el (mh-kill-folder): Sync docstrings with manual.

	* mh-e.el (mh-update-unseen): No longer say "The value of
	`foo-hook' is a list of functions to be called, with no arguments,
	...," but rather just "The hook foo-hook is called...".

	* mh-mime.el (mh-mh-to-mime): Ditto.

	* mh-pick.el (mh-pick-mode): Ditto.

	* mh-utils.el (mh-showing-mode): Use uppercase for argument in
	docstring.
	(mh-seq-list, mh-seen-list, mh-showing-with-headers): Move comment
	into docstring.
	(mh-show-mode, mh-show-msg, mh-find-path): Sync docstrings with
	manual.

2005-12-19  Stephen Gildea  <gildea@stop.mail-abuse.org>

	* mh-customize.el (mh-after-commands-processed-hook): New
	variable.
	(mh-before-commands-processed-hook): Rename
	mh-folder-updated-hook.

	* mh-e.el (mh-process-commands): Rename mh-folder-updated-hook to
	mh-before-commands-processed-hook, call new
	mh-after-commands-processed-hook.
	(mh-folders-changed): New variable (for use in
	mh-after-commands-processed-hook).

2005-12-19  Bill Wohler  <wohler@newt.com>

	* mh-acros.el:
	* mh-alias.el:
	* mh-comp.el:
	* mh-customize.el:
	* mh-e.el:
	* mh-funcs.el:
	* mh-gnus.el:
	* mh-identity.el:
	* mh-inc.el:
	* mh-index.el:
	* mh-init.el:
	* mh-junk.el:
	* mh-mime.el:
	* mh-pick.el:
	* mh-print.el:
	* mh-seq.el:
	* mh-speed.el:
	* mh-utils.el:
	Follow commenting conventions. Don't use ;;; form so much, except
	for headings. Precede headings with page feed. This was mostly
	already done, so I made it a convention. Did not update copyright
	on a couple of files since this was an insignificant change.

2005-12-18  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-toolbar): Rename to mh-tool-bar.
	(mh-tool-bar-search-function): Sync docstrings with manual.
	(mh-tool-bar-customize): Replace toolbar with tool bar in
	docstring.
	(mh-tool-bar-letter-help): Fix manual reference.
	(mh-xemacs-use-toolbar-flag): Rename to
	mh-xemacs-use-tool-bar-flag. Initialize to
	mh-xemacs-has-tool-bar-flag. Sync docstrings with manual.
	(mh-xemacs-toolbar-position): Rename to
	mh-xemacs-tool-bar-position. Initialize to nil. Drop "no tool bar"
	option (redundant) and change "Same As Default Tool Bar" setting
	to nil. Sync docstrings with manual.
	(mh-tool-bar-define): Replace toolbar with tool-bar or tool bar
	depending on context.
	(mh-toolbar-init): Rename to mh-tool-bar-init. Simplify condition
	for calling set-specifier. Only look at the value of
	mh-xemacs-use-tool-bar-flag.
	(mh-tool-bar-folder-buttons, mh-tool-bar-letter-buttons): Sync
	docstrings with manual.

	* mh-comp.el (mh-letter-mode): Use mh-tool-bar-init instead of
	mh-toolbar-init.

	* mh-e.el (mh-folder-mode): Ditto.

	* mh-utils.el (mh-show-mode): Ditto.

2005-12-15  Bill Wohler  <wohler@newt.com>

	* mh-e.el (mh-delete-msg): Sync docstrings with manual.

	* mh-seq.el (mh-delete-subject, mh-thread-next-sibling)
	(mh-thread-previous-sibling, mh-thread-ancestor)
	(mh-thread-delete, mh-thread-refile): Ditto.

2005-12-14  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-speed-flists-interval): Rename to
	mh-speed-update-interval.
	(mh-speed-run-flists-flag): Delete. Setting
	mh-speed-flists-interval to 0 accomplishes the same thing.

	* mh-speed.el (mh-folder-speedbar-buttons, mh-speed-flists): Use
	mh-speed-update-interval instead of mh-speed-run-flists-flag.
	(mh-speed-toggle, mh-speed-view, mh-speed-refresh): Sync
	docstrings with manual.

2005-12-09  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-path): Move here from mh-init.el.
	(mh-variant): Mention that mh-path can be customized.
	(mh-invisible-header-fields-internal): Add X-ContentStamp,
	X-MAIL-INFO, and X-UNTD- from NetZero.

	* mh-init.el (mh-path): Move defcustom to mh-customize.el.

2005-12-04  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-sortm-args): Sync docstrings with manual.
	(mh-invisible-header-fields-internal): Add X-Bugzilla-* and
	X-Virus-Scanned.

	* mh-customize.el (mh-insert-signature-hook): Rename
	mh-letter-insert-signature-hook to mh-insert-signature-hook.

	* mh-comp.el (mh-insert-signature): Ditto.

	* mh-customize.el (mh-fetch-x-image-url): Change default from 'ask
	to nil. Remove t option. Sync docstring with manual (closes SF
	#831278).
	(mh-invisible-header-fields-internal): Remove X-Image-URL so that
	users can see it, look it up in the manual's index, and discover
	mh-fetch-x-image-url (closes SF #831278).

	* mh-customize.el (mh-new-messages-folders): Rename from
	mh-index-new-messages-folders.
	(mh-ticked-messages-folders): Rename from
	mh-index-ticked-messages-folders.

	* mh-index.el (mh-index-sequenced-messages)
	(mh-index-new-messages): Ditto.

	* mh-comp.el (mh-forward): Went over all uses of the word "RANGE"
	in the docstrings and made usage consistent. Generally speaking,
	"messages in range" and "range of messages" is redundant and just
	"range" can be used in most circumstances. Also ensured that
	mh-interactive-range was mentioned in all interactive functions
	that use a range which describes the range argument for both users
	and programmers.

	* mh-e.el (mh-delete-msg-no-motion, mh-refile-msg)
	(mh-refile-or-write-again, mh-rescan-folder, mh-undo)
	(mh-visit-folder, mh-scan-folder, mh-regenerate-headers)
	(mh-notate-user-sequences, mh-delete-msg-from-seq, mh-catchup):
	Ditto.

	* mh-funcs.el (mh-copy-msg, mh-pack-folder, mh-pack-folder-1):
	Ditto.

	* mh-junk.el (mh-junk-blacklist, mh-junk-whitelist): Ditto.

	* mh-print.el (mh-ps-print-range, mh-ps-print-msg)
	(mh-ps-print-msg-file, mh-print-msg): Ditto.

	* mh-seq.el (mh-put-msg-in-seq, mh-range-to-msg-list)
	(mh-narrow-to-range, mh-toggle-tick): Ditto.

2005-12-01  Bill Wohler  <wohler@newt.com>

	Rewrote Reading Mail chapter in manual which affected mh-show
	customization group and related functions.

	* mh-comp.el (mh-letter-mode): Use mh-highlight-citation-style
	instead of mh-highlight-citation-p.
	(mh-letter-toggle-header-field-display): "Ellipsed" isn't a word,
	I think, so use "truncated".

	* mh-customize.el (mh-folder, mh-folder-faces): Group's manual
	section is Folders, not Organizing. Parent of mh-folder-faces is
	mh-folder, not mh-show.
	(mh-speed): Rename to mh-speedbar for consistency with mh-toolbar.
	(mh-thread): New group that corresponds with manual's Threading
	chapter.
	(mh-letter-faces): Group's manual section is Editing Drafts, not
	Sending Mail.
	(mh-sortm-args): New customization variable that used to be a
	defvar.
	(mh-index-new-messages-folders, mh-index-ticked-messages-folders):
	Move from mh-index group to mh-folders group.
	(mh-alias-local-users-prefix, mh-large-folder)
	(mh-recursive-folders-flag, mh-before-quit-hook)
	(mh-folder-mode-hook, mh-kill-folder-suppress-prompt-hook)
	(mh-quit-hook, mh-refile-msg-hook): Move from mh-show group to
	mh-folder group.
	(mh-highlight-citation-style): Rename from
	mh-highlight-citation-p. Sync docstrings with manual.
	(mh-mhl-format-file): Rename from mhl-formfile. Sync docstrings
	with manual.
	(mh-show-threads-flag): Move from mh-show group to mh-thread
	group.
	(mh-find-path-hook): Move from mh-show group to mh-e group.
	(mh-folder-updated-hook): Add to mh-folder group.
	(mh-forward-hook): Move from mh-folder to mh-sending-mail group.
	(mh-unseen-updated-hook): Move from mh-show to mh-sequences group.
	(mh-bury-show-buffer-flag, mh-clean-message-header-flag)
	(mh-decode-mime-flag, mh-display-buttons-for-alternatives-flag)
	(mh-display-buttons-for-inline-parts-flag)
	(mh-do-not-confirm-flag, mh-fetch-x-image-url)
	(mh-graphical-smileys-flag, mh-graphical-emphasis-flag)
	(mh-invisible-header-fields-default, mh-invisible-header-fields)
	(mh-lpr-command-format, mh-max-inline-image-height)
	(mh-max-inline-image-width)
	(mh-mime-save-parts-default-directory, mh-print-background-flag)
	(mh-show-maximum-size, mh-show-use-goto-addr-flag)
	(mh-show-use-xface-flag, mh-store-default-directory)
	(mh-summary-height, mh-delete-msg-hook
	(mh-show-hook, mh-show-mode-hook): Sync docstrings with manual.

	* mh-e.el
	(mh-scan-format-mh, mh-scan-good-msg-regexp)
	(mh-scan-deleted-msg-regexp, mh-scan-refiled-msg-regexp)
	(mh-scan-cur-msg-number-regexp, mh-scan-subject-regexp): Use
	non-fontification instead of non-fontifying.
	(mh-header-display): Use mh-mhl-format-file instead of
	mhl-formfile. Sync docstrings with manual.
	(mh-next-undeleted-msg, mh-previous-undeleted-msg): Rename arg to
	count. Sync docstrings with manual.
	(mh-refile-or-write-again): Use output from mh-write-msg-to-file
	so that message doesn't change when using this command. Sync
	docstrings with manual.
	(mh-page-msg, mh-previous-page): Rename arg to lines. Sync
	docstrings with manual.
	(mh-write-msg-to-file): Rename msg to message. Rename no-headers
	to no-header. Sync docstrings with manual.
	(mh-ps-print-map): Delete keybindings for deleted commands
	mh-ps-print-toggle-mime and mh-ps-print-msg-show.
	(mh-help-messages): Update printing help.
	(mh-delete-msg, mh-delete-msg-no-motion, mh-first-msg)
	(mh-last-msg, mh-previous-unread-msg, mh-next-button)
	(mh-prev-button, mh-folder-toggle-mime-part)
	(mh-folder-inline-mime-part, mh-folder-save-mime-part)
	(mh-next-unread-msg, mh-toggle-mime-buttons): Sync docstrings with
	manual.

	* mh-funcs.el (mh-sortm-args): Now a customization option and in
	mh-customize.el.
	(mh-pipe-msg): Rename include-headers to include-header. Sync
	docstrings with manual.
	(mh-burst-digest, mh-page-digest, mh-page-digest-backwards)
	(mh-store-msg): Sync docstrings with manual.

	* mh-mime.el (mh-mime-save-parts): Rename arg to prompt. Sync
	docstrings with manual.
	(mh-toggle-mh-decode-mime-flag): Use English in message, not Lisp.
	Sync docstrings with manual.
	(mh-mm-display-part, mh-mm-inline-message): Use
	mh-highlight-citation-style instead of mh-highlight-citation-p.
	(mh-press-button): Sync docstrings with manual.
	(mh-display-with-external-viewer): Fix default output in
	minibuffer. Sync docstrings with manual.

	* mh-print.el: (mh-ps-print-mime, mh-ps-print-toggle-mime):
	Delete.
	(mh-ps-print-color-option): Incorporate docstring from
	ps-print-color-p.
	(mh-ps-spool-buffer): Remove unused code. Fix indent. Slimline
	docstring.
	(mh-ps-spool-msg): Slimline docstring. Rename from
	mh-ps-spool-a-msg. Rewrite to use existing show buffer when
	available.
	(mh-ps-print-range): Extract method from common code in
	mh-ps-print-msg and mh-ps-print-msg-file.
	(mh-ps-print-preprint): Clean docstring. Use filename "mh-%s".
	(mh-ps-print-msg-show): Delete. Can use either
	mh-ps-print-msg-show or mh-ps-print-msg-show to same effect with
	new code in mh-ps-spool-msg.
	(mh-print-msg): Use mh-mhl-format-file instead of mhl-formfile.
	Sync docstrings with manual.
	(mh-ps-print-msg, mh-ps-print-msg-file)
	(mh-ps-print-toggle-faces, mh-ps-print-toggle-color): Sync
	docstrings with manual.
	
	* mh-utils.el (mh-show-ps-print-msg-show)
	mh-show-ps-print-toggle-mime): Delete.
	(mh-show-ps-print-map): Update accordingly.
	(mh-show-mode): Use mh-highlight-citation-style instead of
	mh-highlight-citation-p.
	(mh-show-xface, mh-display-msg): Use mh-mhl-format-file instead of
	mhl-formfile.
	(mh-show): Use mh-mhl-format-file instead of mhl-formfile. Sync
	docstrings with manual.
	(mh-show-font-lock-fontify-region, mh-modify, mh-goto-msg): Sync
	docstrings with manual.

2005-12-01  Bill Wohler  <wohler@newt.com>

	* mh-init.el (mh-defface-compat): Checkdoc fix.

	* mh-junk.el (mh-bogofilter-blacklist, mh-bogofilter-whitelist):
	Bogofilter is lowercase except at beginning of sentence and in
	titles.

2005-11-04  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-min-colors-defined-flag, mh-defface-compat):
	Move to mh-init.el to minimize bulk of mh-customize.el.

	* mh-init.el: Modify commentary since file is used for load and
	initialization as well as setting and getting the variant.
	(mh-min-colors-defined-flag, mh-defface-compat): Move here from
	mh-customize.el.

	* mh-customize.el: Refactor faces. Move grayscale requirements
	last before t. Use uniform line breaks.
	(mh-min-colors-defined-flag): New variable.
	(mh-defface-compat): New function. Provides backward compatibility
	for face specs.
	(mh-show-header, mh-show-date, mh-show-cc, mh-folder-to)
	(mh-folder-refiled, mh-folder-cur-msg-number, mh-folder-cur-msg)
	(mh-folder-body): Use mh-defface-compat.

2005-11-03  Dan Nicolaescu  <dann@ics.uci.edu>

	* mh-customize.el (mh-folder-body-face, mh-folder-cur-msg-face)
	(mh-folder-cur-msg-number-face, mh-folder-refiled-face)
	(mh-folder-to-face): Use the min-colors attribute instead of the
	type attribute.

2005-11-03  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-refile-preserves-sequences-flag)
	(mh-tick-seq, mh-update-sequences-after-mh-show-flag): Sync
	docstrings with manual.

	* mh-e.el (mh-update-sequences): Sync docstrings with manual.

	* mh-seq.el (mh-delete-seq, mh-list-sequences, mh-narrow-to-seq)
	(mh-widen, mh-toggle-tick, mh-narrow-to-tick): Sync docstrings
	with manual.

2005-11-01  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-redist-full-contents) Convert defvar to
	defcustom.
	(mh-smail, mh-extract-rejected-mail, mh-forward, mh-redistribute)
	(mh-reply, mh-send, mh-send-other-window)
	(mh-fill-paragraph-function): Sync docstrings with manual.
	(mh-edit-again, mh-extract-rejected-mail, mh-redistribute): Rename
	msg argument to message (to make for a better docstring).

	* mh-customize.el (mh-redist-full-contents-flag): Convert defvar
	to defcustom. Rename by adding -flag.
	(mh-compose-forward-as-mime-flag)
	(mh-compose-letter-function, mh-forward-subject-format)
	(mh-insert-x-mailer-flag, mh-reply-default-reply-to)
	(mh-reply-show-message-flag, mh-letter-mode-hook): Sync docstrings
	with manual.

	* mh-print.el (mh-ps-spool-buffer, mh-ps-spool-a-msg)
	(mh-ps-print-msg): Remove debugging messages.
	(mh-ps-print-msg-show, mh-ps-print-msg-show)
	(mh-ps-print-toggle-color, mh-ps-print-toggle-mime): Remove period
	after message per conventions.

2005-10-30  Bill Wohler  <wohler@newt.com>

	* mh-e.el (mh-scan-good-msg-regexp, mh-scan-deleted-msg-regexp)
	(mh-scan-refiled-msg-regexp, mh-scan-cur-msg-number-regexp): Sync
	docstrings with manual.

	* mh-customize.el (mh-compose-space-does-completion-flag)
	(mh-signature-separator-flag, mh-interpret-number-as-range-flag)
	(mh-adaptive-cmd-note-flag): Use "Non-nil means" instead of "On
	means" to remain checkdoc clean and consistent with Emacs. I
	raised this issue with the Emacs developers and Stallman agrees
	that "On means" should be allowed in custom docstrings but that
	this change requires thought and should wait until after the Emacs
	22 release.

2005-10-28  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-annotate-msg): Use new variable
	mh-scan-field-destination-offset rather than hard-coding 1.

	* mh-customize.el (mh-interpret-number-as-range-flag): Add * to
	docstring.
	(mh-adaptive-cmd-note-flag-check, mh-scan-format-file-check): New
	functions to check input for mh-adaptive-cmd-note-flag and
	mh-scan-format-file respectively.
	(mh-adaptive-cmd-note-flag, mh-scan-format-file): Docstring fixes,
	add :set.

	* mh-e.el: (mh-scan-field-destination-offset): New variable. The
	destination is the -, t, b, c, or n character for Replied, To, cc,
	Bcc, or Newsgroups respectively.
	(mh-make-folder, mh-regenerate-headers, mh-generate-new-cmd-note)
	Call new function mh-msg-num-width-to-column to make leap between
	width and column more explicit.
	(mh-msg-num-width-to-column): New function that steals logic from
	old mh-set-cmd-note. Also, throw error if mh-scan-format-file
	isn't t since we can't adapt the scan lines in this case.
	(mh-set-cmd-note): Now just simply sets mh-cmd-note which will
	make the documentation more clear.
	(mh-generate-new-cmd-note): Docstring fix--mh-cmd-note is a
	column, not a width.
	(mh-add-sequence-notation, mh-remove-sequence-notation): Use new
	variable mh-scan-field-destination-offset rather than hard-coding
	1.

	* mh-utils.el (mh-cmd-note) Synced docstring with manual.
	(mh-notate): Use new variable mh-scan-field-destination-offset
	rather than hard-coding 1.
	(mh-message-number-width): Rename to mh-msg-num-width to be
	consistent with mh-get-msg-num and mh-msg-num-width-to-column.

	* mh-customize.el (mh-x-face-file, mh-show-use-xface-flag)
	(mail-citation-hook): Quote URLs in docstrings and precede with
	`URL'. The former will suppress checkdoc warnings, the latter will
	turn them into hyperlinks in Emacs 22 (I just added the code to do
	that today).
	(mh-scan-format-file): Checkdoc fix.

2005-10-27  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-adaptive-cmd-note-flag)
	(mh-scan-format-file, mh-scan-prog): Sync docstrings with manual.

	* mh-e.el (mh-scan-format-mh, mh-note-deleted, mh-note-refiled)
	(mh-note-cur, mh-scan-good-msg-regexp)
	(mh-scan-deleted-msg-regexp, mh-scan-refiled-msg-regexp)
	(mh-scan-valid-regexp, mh-scan-cur-msg-number-regexp)
	(mh-scan-date-regexp, mh-scan-rcpt-regexp, mh-scan-body-regexp)
	(mh-scan-subject-regexp, mh-scan-format-regexp)
	(mh-folder-font-lock-keywords, mh-set-cmd-note): Sync docstrings
	with manual.

	* mh-funcs.el (mh-note-copied): Sync docstrings with manual.

	* mh-utils.el (mh-goto-msg): Use mh-scan-msg-search-regexp instead
	of hard-coded string.
	(mh-mail-header-separator, mh-signature-separator-regexp): Use
	"regular expression" in docstring instead of regexp.
	(mh-scan-msg-number-regexp)
	(mh-scan-msg-overflow-regexp, mh-scan-msg-format-regexp)
	(mh-scan-msg-format-string, mh-scan-msg-search-regexp)
	(mh-cmd-note): Sync docstrings with manual.

	* mh-comp.el (mh-insert-signature, mh-insert-auto-fields):
	Checkdoc fixes.

	* mh-customize.el (mh-compose-insertion, mh-x-face-file): Ditto.

	* mh-mime.el (mh-mh-to-mime, mh-mml-attach-file)
	(mh-mml-secure-message-sign, mh-mml-secure-message-encrypt)
	(mh-mml-secure-message-signencrypt): Ditto.

2005-10-24  Bill Wohler  <wohler@newt.com>

	* mh-gnus.el: Load mml.el in order to see if
	mml-minibuffer-read-disposition is defined or not.

	* mh-mime.el: Now that mh-gnus.el loads mml, we shouldn't need the
	mml autoloads.

2005-10-23  Miles Bader  <miles@gnu.org>

	* .arch-inventory: New file.

2005-10-23  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-interpret-number-as-range-flag): Sync
	docstring with manual.

	* mh-identity.el (mh-assoc-ignore-case): Merge with version in
	mh-alias.el and move to mh-acros.el

	* mh-alias.el (mh-assoc-ignore-case): Merge with version in
	mh-identity.el and move to mh-acros.el

	* mh-acros.el (mh-assoc-ignore-case): Merge of function from
	mh-identity.el and mh-alias.el.

	* mh-mime.el: Autoload mm-uu for mm-uu-dissect to avoid compiler
	warning in Emacs 22.

2005-10-23  Satyaki Das  <satyaki@theforce.stanford.edu>

	* mh-identity.el (mh-assoc-ignore-case): New macro that uses
	assoc-string (if the function is available) and falls back on
	assoc-ignore-case if assoc-string is not found.
	(mh-identity-field-handler): Use mh-assoc-ignore-case since
	assoc-ignore-case is a obsolete function in Emacs 22.

	* mh-e.el (mh-folder-buttons-init-flag): New variable that keeps
	track of whether the tool-bar in mh-folder-mode has been
	initialized yet.
	(mh-folder-mode): Initialize the tool-bar for folders the first
	time we get into mh-letter-mode.

	* mh-customize.el (mh-buffer-exists-p): New function which tests
	presence of buffers of a given mode.
	(mh-tool-bar-define): New functions
	mh-tool-bar-folder-buttons-init and
	mh-tool-bar-letter-buttons-init are defined. These functions are
	used to create the tool-bar from the corresponding customizable
	variables.

	* mh-comp.el (mh-letter-buttons-init-flag): New variable that
	keeps track of whether the tool-bar in mh-letter-mode has been
	initialized yet.
	(mh-letter-mode): Initialize the tool-bar for drafts the first
	time we get into mh-letter-mode.

2005-10-23  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-letter-menu): Rename
	mh-mhn-compose-external-compressed-tar to
	mh-mh-compose-external-compressed-tar. Rename
	mh-mhn-compose-anon-ftp to mh-mh-compose-anon-ftp. Rename
	mh-edit-mhn to mh-mh-to-mime. Rename mh-mhn-directive-present-p to
	mh-mh-directive-present-p. Rename mh-revert-mhn-edit to
	mh-mh-to-mime-undo. Rename mh-gnus-pgp-support-flag to
	mh-pgp-support-flag. Rename mh-compose-insertion value from 'mhn
	to 'mh.
	(mh-insert-signature): Rename mh-mhn-directive-present-p to
	mh-mh-directive-present-p.
	(mh-send-letter): Rename mh-mhn-directive-present-p to
	mh-mh-directive-present-p. Rename mh-edit-mhn to mh-mh-to-mime.
	(mh-letter-mode-map): Rename mh-edit-mhn to mh-mh-to-mime. Rename
	mh-mhn-compose-anon-ftp to mh-mh-compose-anon-ftp. Rename
	mh-mhn-compose-external-compressed-tar to
	mh-mh-compose-external-compressed-tar. Rename mh-revert-mhn-edit
	to mh-mh-to-mime-undo. Rename mh-mhn-compose-external-type to
	mh-mh-compose-external-type. Rename mh-mhn-compose-anon-ftp to
	mh-mh-compose-anon-ftp. Rename
	mh-mhn-compose-external-compressed-tar to
	mh-mh-compose-external-compressed-tar. Rename mh-revert-mhn-edit
	to mh-mh-to-mime-undo. Rename mh-mhn-compose-external-type to
	mh-mh-compose-external-type.
	(mh-send-letter, mh-letter-mode-map): Rename mh-edit-mhn to
	mh-mh-to-mime, mh-revert-mhn-edit to mh-mh-to-mime-undo.
	(mh-reply, mh-yank-cur-msg, mh-insert-prefix-string): Rename
	mh-yank-from-start-of-msg to mh-yank-behavior.
	(mh-letter-mode, mh-to-field, mh-to-fcc, mh-insert-signature)
	(mh-check-whom, mh-insert-auto-fields, mh-send-letter)
	(mh-insert-letter, mh-yank-cur-msg, mh-insert-prefix-string)
	(mh-fully-kill-draft, mh-open-line, mh-letter-complete)
	(mh-letter-complete-or-space, mh-letter-confirm-address)
	(mh-letter-next-header-field-or-indent)
	(mh-letter-previous-header-field)
	(mh-letter-toggle-header-field-display): Sync docstrings with
	manual.

	* mh-customize.el (mh-edit-mhn-hook): Rename to
	mh-mh-to-mime-hook.
	(mh-yank-from-start-of-msg): Rename to mh-yank-behavior.
	(mh-compose-insertion): Rename values from 'gnus and 'mhn to 'mh
	and user-visible values from mhn and Gnus to MH and MML.
	(mh-before-send-letter-hook): Add 'ispell-message option.
	(mh-mml-method-default): Rename mh-gnus-pgp-support-flag to
	mh-pgp-support-flag.
	(mh-compose-insertion, mh-compose-space-does-completion-flag)
	(mh-delete-yanked-msg-window-flag)
	(mh-extract-from-attribution-verb, mh-ins-buf-prefix)
	(mh-letter-complete-function, mh-letter-fill-column)
	(mh-mml-method-default, mh-signature-file-name)
	(mh-signature-separator-flag, mh-x-face-file)
	(mh-yank-behavior, mail-citation-hook)
	(mh-before-send-letter-hook, mh-mh-to-mime-hook): Sync docstrings
	with manual.

	* mh-gnus.el (mml-minibuffer-read-disposition): New function
	provided for Emacs 21 environments that lack it.

	* mh-mime.el (mh-mml-query-cryptographic-method): Use default
	prompt convention.
	(mh-compose-forward): mh-mh-forward-message requires string arg.
	(mh-minibuffer-read-type): New function.
	(mh-mhn-args): Rename to mh-mh-to-mime-args.
	(mh-mhn-compose-insertion): Rename to mh-mh-attach-file.
	(mh-mhn-compose-forw): Rename to mh-mh-forward-message.
	(mh-mhn-compose-type): Rename to mh-mh-compose-type.
	(mh-mhn-compose-anon-ftp): Rename to mh-mh-compose-anon-ftp.
	Rename mh-mhn-compose-external-type to
	mh-mh-compose-external-type.
	(mh-mhn-compose-external-compressed-tar): Rename to
	mh-mh-compose-external-compressed-tar. Rename
	mh-mhn-compose-external-type to mh-mh-compose-external-type.
	(mh-mhn-compose-external-type): Rename to
	mh-mh-compose-external-type.
	(mh-edit-mhn): Rename to mh-mh-to-mime. Rename mh-mhn-args to
	mh-mh-to-mime-args. Rename mh-edit-mhn-hook to mh-mh-to-mime-hook.
	Use correct program in message.
	(mh-mhn-directive-present-p): Rename to mh-mh-directive-present-p.
	(mh-mml-directive-present-p): Rename to mh-mml-tag-present-p.
	(mh-compose-forward, mh-mh-attach-file)
	(mh-mh-compose-anon-ftp, mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-type, mh-mh-forward-message)
	(mh-mml-attach-file): Use mml-minibuffer-read-description,
	mh-minibuffer-read-type.
	(mh-mime-content-types): Move comment about only being used in
	Emacs 20 to docstring.
	(mh-mh-compose-external-type): Rename extra-param argument to
	parameters.
	(mh-mml-to-mime, mh-secure-message, mh-mml-unsecure-message)
	(mh-mime-display-part, mh-mime-display-single): Rename
	mh-gnus-pgp-support-flag to mh-pgp-support-flag.
	(mh-compose-insertion): Rename mh-mhn-compose-insertion to
	mh-mh-attach-file.
	(mh-compose-forward): Rename mh-mhn-compose-forw to
	mh-mh-forward-message.
	(mh-mhn-compose-insertion): Rename mh-mhn-compose-type to
	mh-mh-compose-type.
	(mh-compose-insertion, mh-compose-forward, mh-mh-to-mime-args)
	(mh-mh-attach-file, mh-mh-compose-type)
	(mh-mh-compose-anon-ftp, mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-type, mh-mh-forward-message)
	(mh-mh-to-mime, mh-mh-quote-unescaped-sharp)
	(mh-mh-to-mime-undo, mh-mh-directive-present-p, mh-mml-to-mime)
	(mh-mml-attach-file, mh-secure-message, mh-mml-unsecure-message)
	(mh-mml-secure-message-sign, mh-mml-secure-message-encrypt)
	(mh-mml-directive-present-p, mh-destroy-postponed-handles)
	(mh-display-smileys, mh-display-emphasis, mh-mime-save-parts):
	Sync docstrings with manual.

	* mh-utils.el (mh-gnus-pgp-support-flag): Rename to
	mh-pgp-support-flag.

2005-10-17  Peter S Galbraith  <psg@debian.org>

	* mh-identity.el (mh-identity-field-handler): Use
	`assoc-ignore-case' to compare against header field for mixed-case
	"From:".

2005-10-17  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-folder-tool-bar-map): Rename image file
	left_arrow to left-arrow, right_arrow to right-arrow, mail_compose
	to mail/compose, fld_open to fld-open.
	(mh-letter-tool-bar-map): Rename image file mail_send to
	mail/send.

2005-10-16  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-display-completion-list-compat): New macro which
	calls `display-completion-list' correctly in older environments.
	Versions of Emacs prior to version 22 lacked a COMMON-SUBSTRING
	argument.
	(mh-complete-word): Use it.

	* mh-init.el (mh-image-load-path): Use locate-library to find
	MH-E. This simplified the code a lot. Flattened out nested
	statements even more.

2005-10-16  Satyaki Das  <satyaki@theforce.stanford.edu>

	* mh-init.el (mh-image-load-path): Remove use of pushnew since it
	causes a compiler warning.

	* mh-utils.el (mh-display-msg): Do MIME cleanup before inserting
	the message to be viewed (closes SF #1306141).

2005-10-16  Masatake YAMATO  <jet@gyve.org>

	* mh-comp.el (mh-complete-word): Pass the common prefix substring
	of completion to `display-completion-list'.

2005-10-15  Satyaki Das  <satyaki@theforce.stanford.edu>

	* mh-init.el (mh-image-load-path-called-flag): New variable which
	is used by mh-image-load-path so that it runs only once.
	(mh-image-load-path): Modify so that it gets run only once. Also
	flatten out heavily nested if statements to make it clearer.

	* mh-e.el (mh-folder-mode): Call mh-image-load-path to allow Emacs
	to find images used in the toolbar.

	* mh-customize.el (:folder): Remove call to mh-image-load-path.

2005-10-14  Bill Wohler  <wohler@newt.com>

	* mh-e.el (Version, mh-version): Add +cvs to version.

2005-10-14  Bill Wohler	 <wohler@newt.com>

	Released MH-E version 7.85.

	* mh-e.el (Version, mh-version): Update for release 7.85.

2005-10-14  Bill Wohler  <wohler@newt.com>

	* mh-e.el, mh-funcs.el, mh-init.el, mh-mime.el, mh-pick.el: *
	mh-seq.el, mh-utils.el: Ran mh-unit. Continued copyright lines
	need to be indented.

	* mh-e.el: mh-folder-tick-face had been renamed to mh-folder-tick
	but the code that invoked the face had not been updated. Tick
	highlighting working again.

	* mh-seq.el (mh-non-seq-mode-line-annotation): Move
	make-variable-buffer-local call to top level to avoid warnings in
	CVS Emacs.

	* mh-comp.el (mh-insert-letter): Replace deprecated read-input
	with read-string.

2005-10-09  Bill Wohler  <wohler@newt.com>

	* mh-init.el (mh-image-load-path): New function that adds the path
	to the MH-E images to the image-load-path or load-path depending
	on the version of Emacs.

	* mh-customize.el: Call mh-image-load-path just before
	mh-tool-bar-define so that the toolbar images can be found.

2005-10-04  Bill Wohler  <wohler@newt.com>

	* ChangeLog: Move contents into ChangeLog.1 and trim.

	* ChangeLog.1: New file. Contains old ChangeLog.


  Copyright (C) 2005 Free Software Foundation, Inc.

  Copying and distribution of this file, with or without modification,
  are permitted in any medium without royalty provided the copyright
  notice and this notice are preserved.

;; Local Variables:
;; sentence-end-double-space: nil
;; End:

;;; arch-tag: 87324964-69b6-4925-a3c2-9c1df53d7d51
