2005-11-04  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-min-colors-defined-flag, mh-defface-compat):
	Move to mh-init.el to minimize bulk of mh-customize.el.

	* mh-init.el: Modify commentary since file is used for load and
	initialization as well as setting and getting the variant.
	(mh-min-colors-defined-flag, mh-defface-compat): Move
	here from mh-customize.el. 

	* mh-customize.el: Refactor faces. Move grayscale requirements
	last before t. Use uniform line breaks.
	(mh-min-colors-defined-flag): New variable.
	(mh-defface-compat): New function. Provides backward compatibility
	for face specs.
	(mh-show-header, mh-show-date, mh-show-cc, mh-folder-to) 
	(mh-folder-refiled, mh-folder-cur-msg-number, mh-folder-cur-msg) 
	(mh-folder-body): Use mh-defface-compat.

2005-11-03  Dan Nicolaescu  <dann@ics.uci.edu>

	* mh-customize.el (mh-folder-body-face, mh-folder-cur-msg-face)
	(mh-folder-cur-msg-number-face, mh-folder-refiled-face)
	(mh-folder-to-face): Use the min-colors attribute instead of the
	type attribute.

2005-11-03  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-refile-preserves-sequences-flag)
	(mh-tick-seq, mh-update-sequences-after-mh-show-flag): Sync
	docstrings with manual.

	* mh-e.el (mh-update-sequences): Sync docstrings with manual.

	* mh-seq.el (mh-delete-seq, mh-list-sequences, mh-narrow-to-seq) 
	(mh-widen, mh-toggle-tick, mh-narrow-to-tick): Sync docstrings
	with manual.

2005-11-01  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-redist-full-contents) Convert defvar to
	defcustom.
	(mh-smail, mh-extract-rejected-mail, mh-forward, mh-redistribute)
	(mh-reply, mh-send, mh-send-other-window)
	(mh-fill-paragraph-function): Sync docstrings with manual.
	(mh-edit-again, mh-extract-rejected-mail, mh-redistribute): Rename
	msg argument to message (to make for a better docstring).

	* mh-customize.el (mh-redist-full-contents-flag): Convert defvar
	to defcustom. Rename by adding -flag.
	(mh-compose-forward-as-mime-flag)
	(mh-compose-letter-function, mh-forward-subject-format)
	(mh-insert-x-mailer-flag, mh-reply-default-reply-to)
	(mh-reply-show-message-flag, mh-letter-mode-hook): Sync docstrings
	with manual.

	* mh-print.el (mh-ps-spool-buffer, mh-ps-spool-a-msg) 
	(mh-ps-print-msg): Remove debugging messages.
	(mh-ps-print-msg-show, mh-ps-print-msg-show) 
	(mh-ps-print-toggle-color, mh-ps-print-toggle-mime): Remove period
	after message per conventions.

2005-10-30  Bill Wohler  <wohler@newt.com>

	* mh-e.el (mh-scan-good-msg-regexp, mh-scan-deleted-msg-regexp) 
	(mh-scan-refiled-msg-regexp, mh-scan-cur-msg-number-regexp): Sync
	docstrings with manual.

	* mh-customize.el (mh-compose-space-does-completion-flag)
	(mh-signature-separator-flag, mh-interpret-number-as-range-flag)
	(mh-adaptive-cmd-note-flag): Use "Non-nil means" instead of "On
	means" to remain checkdoc clean and consistent with Emacs. I
	raised this issue with the Emacs developers and Stallman agrees
	that "On means" should be allowed in custom docstrings but that
	this change requires thought and should wait until after the Emacs
	22 release.

2005-10-28  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-annotate-msg): Use new variable
	mh-scan-field-destination-offset rather than hard-coding 1.

	* mh-customize.el (mh-interpret-number-as-range-flag): Add * to
	docstring.
	(mh-adaptive-cmd-note-flag-check, mh-scan-format-file-check): New
	functions to check input for mh-adaptive-cmd-note-flag and
	mh-scan-format-file respectively.
	(mh-adaptive-cmd-note-flag, mh-scan-format-file): Docstring fixes,
	add :set.

	* mh-e.el: (mh-scan-field-destination-offset): New variable. The
	destination is the -, t, b, c, or n character for Replied, To, cc,
	Bcc, or Newsgroups respectively.
	(mh-make-folder, mh-regenerate-headers, mh-generate-new-cmd-note)
	Call new function mh-msg-num-width-to-column to make leap between
	width and column more explicit.
	(mh-msg-num-width-to-column): New function that steals logic from
	old mh-set-cmd-note. Also, throw error if mh-scan-format-file
	isn't t since we can't adapt the scan lines in this case.
	(mh-set-cmd-note): Now just simply sets mh-cmd-note which will
	make the documentation more clear.
	(mh-generate-new-cmd-note): Docstring fix--mh-cmd-note is a
	column, not a width.
	(mh-add-sequence-notation, mh-remove-sequence-notation): Use new
	variable mh-scan-field-destination-offset rather than hard-coding
	1. 

	* mh-utils.el (mh-cmd-note) Synced docstring with manual.
	(mh-notate): Use new variable mh-scan-field-destination-offset
	rather than hard-coding 1.
	(mh-message-number-width): Rename to mh-msg-num-width to be
	consistent with mh-get-msg-num and mh-msg-num-width-to-column.

	* mh-customize.el (mh-x-face-file, mh-show-use-xface-flag)
	(mail-citation-hook): Quote URLs in docstrings and precede with
	`URL'. The former will suppress checkdoc warnings, the latter will
	turn them into hyperlinks in Emacs 22 (I just added the code
	to do that today).
	(mh-scan-format-file): Checkdoc fix.

2005-10-27  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-adaptive-cmd-note-flag)
	(mh-scan-format-file, mh-scan-prog): Sync docstrings with manual.

	* mh-e.el (mh-scan-format-mh, mh-note-deleted, mh-note-refiled)
	(mh-note-cur, mh-scan-good-msg-regexp)
	(mh-scan-deleted-msg-regexp, mh-scan-refiled-msg-regexp)
	(mh-scan-valid-regexp, mh-scan-cur-msg-number-regexp)
	(mh-scan-date-regexp, mh-scan-rcpt-regexp, mh-scan-body-regexp)
	(mh-scan-subject-regexp, mh-scan-format-regexp)
	(mh-folder-font-lock-keywords, mh-set-cmd-note): Sync docstrings
	with manual.

	* mh-funcs.el (mh-note-copied): Sync docstrings with manual.

	* mh-utils.el (mh-goto-msg): Use mh-scan-msg-search-regexp instead
	of hard-coded string.
	(mh-mail-header-separator, mh-signature-separator-regexp): Use
	"regular expression" in docstring instead of regexp.
	(mh-scan-msg-number-regexp)
	(mh-scan-msg-overflow-regexp, mh-scan-msg-format-regexp)
	(mh-scan-msg-format-string, mh-scan-msg-search-regexp)
	(mh-cmd-note): Sync docstrings with manual.

	* mh-comp.el (mh-insert-signature, mh-insert-auto-fields):
	Checkdoc fixes.

	* mh-customize.el (mh-compose-insertion, mh-x-face-file): Ditto.
	
	* mh-mime.el (mh-mh-to-mime, mh-mml-attach-file) 
	(mh-mml-secure-message-sign, mh-mml-secure-message-encrypt) 
	(mh-mml-secure-message-signencrypt): Ditto

2005-10-24  Bill Wohler  <wohler@newt.com>

	* mh-gnus.el: Load mml.el in order to see if
	mml-minibuffer-read-disposition is defined or not.

	* mh-mime.el: Now that mh-gnus.el loads mml, we shouldn't need the
	mml autoloads.

2005-10-23  Miles Bader  <miles@gnu.org>

	* .arch-inventory: New file.

2005-10-23  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-interpret-number-as-range-flag): Sync
	docstring with manual.

	* mh-identity.el (mh-assoc-ignore-case): Merge with version in
	mh-alias.el and move to mh-acros.el

	* mh-alias.el (mh-assoc-ignore-case): Merge with version in
	mh-identity.el and move to mh-acros.el

	* mh-acros.el (mh-assoc-ignore-case): Merge of function from
	mh-identity.el and mh-alias.el.

	* mh-mime.el: Autoload mm-uu for mm-uu-dissect to avoid compiler
	warning in Emacs 22.

2005-10-23  Satyaki Das  <satyaki@theforce.stanford.edu>

	* mh-identity.el (mh-assoc-ignore-case): New macro that uses
	assoc-string (if the function is available) and falls back on
	assoc-ignore-case if assoc-string is not found.
	(mh-identity-field-handler): Use mh-assoc-ignore-case since
	assoc-ignore-case is a obsolete function in Emacs 22.

	* mh-e.el (mh-folder-buttons-init-flag): New variable that keeps
	track of whether the tool-bar in mh-folder-mode has been
	initialized yet.
	(mh-folder-mode): Initialize the tool-bar for folders the first
	time we get into mh-letter-mode.

	* mh-customize.el (mh-buffer-exists-p): New function which tests
	presence of buffers of a given mode.
	(mh-tool-bar-define): New functions
	mh-tool-bar-folder-buttons-init and
	mh-tool-bar-letter-buttons-init are defined. These functions are
	used to create the tool-bar from the corresponding customizable
	variables.

	* mh-comp.el (mh-letter-buttons-init-flag): New variable that
	keeps track of whether the tool-bar in mh-letter-mode has been
	initialized yet.
	(mh-letter-mode): Initialize the tool-bar for drafts the first
	time we get into mh-letter-mode.

2005-10-23  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-letter-menu): Rename
	mh-mhn-compose-external-compressed-tar to
	mh-mh-compose-external-compressed-tar. Rename
	mh-mhn-compose-anon-ftp to mh-mh-compose-anon-ftp. Rename
	mh-edit-mhn to mh-mh-to-mime. Rename mh-mhn-directive-present-p to
	mh-mh-directive-present-p. Rename mh-revert-mhn-edit to
	mh-mh-to-mime-undo. Rename mh-gnus-pgp-support-flag to
	mh-pgp-support-flag. Rename mh-compose-insertion value from 'mhn
	to 'mh.
	(mh-insert-signature): Rename mh-mhn-directive-present-p to
	mh-mh-directive-present-p.
	(mh-send-letter): Rename mh-mhn-directive-present-p to
	mh-mh-directive-present-p. Rename mh-edit-mhn to mh-mh-to-mime.
	(mh-letter-mode-map): Rename mh-edit-mhn to mh-mh-to-mime. Rename
	mh-mhn-compose-anon-ftp to mh-mh-compose-anon-ftp. Rename
	mh-mhn-compose-external-compressed-tar to
	mh-mh-compose-external-compressed-tar. Rename mh-revert-mhn-edit
	to mh-mh-to-mime-undo. Rename mh-mhn-compose-external-type to
	mh-mh-compose-external-type. Rename mh-mhn-compose-anon-ftp to
	mh-mh-compose-anon-ftp. Rename
	mh-mhn-compose-external-compressed-tar to
	mh-mh-compose-external-compressed-tar. Rename mh-revert-mhn-edit
	to mh-mh-to-mime-undo. Rename mh-mhn-compose-external-type to
	mh-mh-compose-external-type.
	(mh-send-letter, mh-letter-mode-map): Rename mh-edit-mhn to
	mh-mh-to-mime, mh-revert-mhn-edit to mh-mh-to-mime-undo.
	(mh-reply, mh-yank-cur-msg, mh-insert-prefix-string): Rename
	mh-yank-from-start-of-msg to mh-yank-behavior.
	(mh-letter-mode, mh-to-field, mh-to-fcc, mh-insert-signature)
	(mh-check-whom, mh-insert-auto-fields, mh-send-letter)
	(mh-insert-letter, mh-yank-cur-msg, mh-insert-prefix-string)
	(mh-fully-kill-draft, mh-open-line, mh-letter-complete)
	(mh-letter-complete-or-space, mh-letter-confirm-address)
	(mh-letter-next-header-field-or-indent)
	(mh-letter-previous-header-field)
	(mh-letter-toggle-header-field-display): Sync docstrings with
	manual.

	* mh-customize.el (mh-edit-mhn-hook): Rename to
	mh-mh-to-mime-hook.
	(mh-yank-from-start-of-msg): Rename to mh-yank-behavior.
	(mh-compose-insertion): Rename values from 'gnus and 'mhn to 'mh
	and user-visible values from mhn and Gnus to MH and MML.
	(mh-before-send-letter-hook): Added 'ispell-message option.
	(mh-mml-method-default): Rename mh-gnus-pgp-support-flag to
	mh-pgp-support-flag.
	(mh-compose-insertion, mh-compose-space-does-completion-flag)
	(mh-delete-yanked-msg-window-flag)
	(mh-extract-from-attribution-verb, mh-ins-buf-prefix)
	(mh-letter-complete-function, mh-letter-fill-column)
	(mh-mml-method-default, mh-signature-file-name)
	(mh-signature-separator-flag, mh-x-face-file)
	(mh-yank-behavior, mail-citation-hook)
	(mh-before-send-letter-hook, mh-mh-to-mime-hook): Sync docstrings
	with manual.

	* mh-gnus.el (mml-minibuffer-read-disposition): New function
	provided for Emacs 21 environments that lack it.

	* mh-mime.el (mh-mml-query-cryptographic-method): Use default
	prompt convention.
	(mh-compose-forward): mh-mh-forward-message requires string arg.
	(mh-minibuffer-read-type): New function.
	(mh-mhn-args): Rename to mh-mh-to-mime-args.
	(mh-mhn-compose-insertion): Rename to mh-mh-attach-file.
	(mh-mhn-compose-forw): Rename to mh-mh-forward-message.
	(mh-mhn-compose-type): Rename to mh-mh-compose-type.
	(mh-mhn-compose-anon-ftp): Rename to mh-mh-compose-anon-ftp.
	Rename mh-mhn-compose-external-type to
	mh-mh-compose-external-type.
	(mh-mhn-compose-external-compressed-tar): Rename to
	mh-mh-compose-external-compressed-tar. Rename
	mh-mhn-compose-external-type to mh-mh-compose-external-type.
	(mh-mhn-compose-external-type): Rename to
	mh-mh-compose-external-type.
	(mh-edit-mhn): Rename to mh-mh-to-mime. Rename mh-mhn-args to
	mh-mh-to-mime-args. Rename mh-edit-mhn-hook to mh-mh-to-mime-hook.
	Use correct program in message.
	(mh-mhn-directive-present-p): Rename to mh-mh-directive-present-p.
	(mh-mml-directive-present-p): Rename to mh-mml-tag-present-p.
	(mh-compose-forward, mh-mh-attach-file)
	(mh-mh-compose-anon-ftp, mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-type, mh-mh-forward-message)
	(mh-mml-attach-file): Use mml-minibuffer-read-description,
	mh-minibuffer-read-type.
	(mh-mime-content-types): Moved comment about only being used in
	Emacs 20 to docstring.
	(mh-mh-compose-external-type): Rename extra-param argument to
	parameters.
	(mh-mml-to-mime, mh-secure-message)
	(mh-mml-unsecure-message, mh-mime-display-part)
	(mh-mime-display-single): Rename mh-gnus-pgp-support-flag to
	mh-pgp-support-flag.
	(mh-compose-insertion): Rename mh-mhn-compose-insertion to
	mh-mh-attach-file.
	(mh-compose-forward): Rename mh-mhn-compose-forw to
	mh-mh-forward-message.
	(mh-mhn-compose-insertion): Rename mh-mhn-compose-type to
	mh-mh-compose-type.
	(mh-compose-insertion, mh-compose-forward, mh-mh-to-mime-args)
	(mh-mh-attach-file, mh-mh-compose-type)
	(mh-mh-compose-anon-ftp, mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-compressed-tar)
	(mh-mh-compose-external-type, mh-mh-forward-message)
	(mh-mh-to-mime, mh-mh-quote-unescaped-sharp,
	(mh-mh-to-mime-undo, mh-mh-directive-present-p, mh-mml-to-mime)
	(mh-mml-attach-file, mh-secure-message, mh-mml-unsecure-message)
	(mh-mml-secure-message-sign, mh-mml-secure-message-encrypt)
	(mh-mml-directive-present-p, mh-destroy-postponed-handles)
	(mh-display-smileys, mh-display-emphasis, mh-mime-save-parts):
	Sync docstrings with manual.

	* mh-utils.el (mh-gnus-pgp-support-flag): Rename to
	mh-pgp-support-flag.

2005-10-17  Peter S Galbraith  <psg@debian.org>

	* mh-identity.el (mh-identity-field-handler): Use
	`assoc-ignore-case' to compare against header field for mixed-case
	"From:".

2005-10-17  Bill Wohler  <wohler@newt.com>

	* mh-customize.el (mh-folder-tool-bar-map): Renamed image file
	left_arrow to left-arrow, right_arrow to right-arrow, mail_compose
	to mail/compose, fld_open to fld-open.
	(mh-letter-tool-bar-map): Renamed image file mail_send to
	mail/send.

2005-10-16  Bill Wohler  <wohler@newt.com>

	* mh-comp.el (mh-display-completion-list-compat): New macro which
	calls `display-completion-list' correctly in older environments.
	Versions of Emacs prior to version 22 lacked a COMMON-SUBSTRING
	argument.
	(mh-complete-word): Use it.

	* mh-init.el (mh-image-load-path): Use locate-library to find
	MH-E. This simplified the code a lot. Flattened out nested
	statements even more.

2005-10-16  Satyaki Das  <satyaki@theforce.stanford.edu>

	* mh-init.el (mh-image-load-path): Remove use of pushnew since it
	causes a compiler warning.

	* mh-utils.el (mh-display-msg): Do MIME cleanup before inserting
	the message to be viewed (closes SF #1306141).

2005-10-16  Masatake YAMATO  <jet@gyve.org>

	* mh-comp.el (mh-complete-word): Pass the common
	prefix substring of completion to `display-completion-list'.

2005-10-15  Satyaki Das  <satyaki@theforce.stanford.edu>

	* mh-init.el (mh-image-load-path-called-flag): New variable which
	is used by mh-image-load-path so that it runs only once.
	(mh-image-load-path): Modified so that it gets run only once. Also
	flatten out heavily nested if statements to make it clearer.

	* mh-e.el (mh-folder-mode): Call mh-image-load-path to allow Emacs
	to find images used in the toolbar.

	* mh-customize.el (:folder): Remove call to mh-image-load-path.

2005-10-14  Bill Wohler  <wohler@newt.com>

	* mh-e.el (Version, mh-version): Added +cvs to version.

2005-10-14  Bill Wohler	 <wohler@newt.com>

	Released MH-E version 7.85.
	  
	* mh-e.el (Version, mh-version): Updated for release 7.85.
	
2005-10-14  Bill Wohler  <wohler@newt.com>

	* mh-e.el, mh-funcs.el, mh-init.el, mh-mime.el, mh-pick.el:
	* mh-seq.el, mh-utils.el: Ran mh-unit. Continued copyright lines
	need to be indented. 
	
	* mh-e.el: mh-folder-tick-face had been renamed to mh-folder-tick
	but the code that invoked the face had not been updated. Tick
	highlighting working again.

	* mh-seq.el (mh-non-seq-mode-line-annotation): Moved
	make-variable-buffer-local call to top level to avoid warnings in
	CVS Emacs.

	* mh-comp.el (mh-insert-letter): Replaced deprecated read-input
	with read-string.

2005-10-09  Bill Wohler  <wohler@newt.com>

	* mh-init.el (mh-image-load-path): New function that adds the path
	to the MH-E images to the image-load-path or load-path depending
	on the version of Emacs.

	* mh-customize.el: Call mh-image-load-path just before
	mh-tool-bar-define so that the toolbar images can be found.

2005-10-04  Bill Wohler  <wohler@newt.com>

	* ChangeLog: Moved contents into ChangeLog.1 and trimmed.
	
	* ChangeLog.1: New file. Contains old ChangeLog.


  Copyright (C) 2005 Free Software Foundation, Inc.

  Copying and distribution of this file, with or without modification,
  are permitted in any medium without royalty provided the copyright
  notice and this notice are preserved.

;;; arch-tag: 87324964-69b6-4925-a3c2-9c1df53d7d51
