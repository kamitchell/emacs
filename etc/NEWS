GNU Emacs NEWS -- history of user-visible changes.

Copyright (C) 2007 Free Software Foundation, Inc.
See the end of the file for license conditions.

Please send Emacs bug reports to emacs-pretest-bug@gnu.org.
If possible, use M-x report-emacs-bug.

This file is about changes in Emacs version 23.

See files NEWS.22, NEWS.21, NEWS.20, NEWS.19, NEWS.18, and NEWS.1-17
for changes in older Emacs versions.

You can narrow news to a specific version by calling `view-emacs-news'
with a prefix argument or by typing C-u C-h C-n.

Temporary note:
 +++ indicates that the appropriate manual has already been updated.
 --- means no change in the manuals is called for.
When you add a new item, please add it without either +++ or ---
so we will look at it and add it to the manual.


* About external Lisp packages


* Installation Changes in Emacs 23.1

** The default X toolkit is now Gtk+, rather than Lucid.

** configure now checks for libgif before libungif when searching for
a GIF library.

** Support for systems without alloca has been removed.

** The `emacstool' utility has been removed.


* Changes in Emacs 23.1

** Emacs now supports using both X displays and ttys in one session.
You can also use any number of different ttys.

You can test for the presence of this feature in your Lisp code by
testing for the `multi-tty' feature.

** Emacs comes with a new set of icons for Mac OS X.
OS-X-style icons (an application icon and a relevant document icon)
were contributed by Kentaro Ohkouchi.
Source files for these icons can be found in Emacs.app/Contents/Resources.

** Built-in functions (subr) can now have an interactive specification
that is not a prompt string.  If the `intspec' parameter of a `DEFUN'
starts with a `(', the string is evaluated as a Lisp form.

** set-file-modes is now interactive and can take the mode value in
symbolic notation thanks to auxiliary functions.

** split-window-preferred-function specifies whether display-buffer should
split windows vertically or horizontally.

** Emacsclient has been extended to support opening a new terminal
frame.  Its behavior has been changed to open a new Emacs frame by
default.  Use the -c option to get the old behavior of opening files in
the currently selected Emacs frame.

** The refcards are now shipped as PDF files.

** Emacs now supports the SVG image format through librsvg2.

** If you set find-file-confirm-nonexistent-file to t, then C-x C-f
requires confirmation before opening a non-existent file.

** If the gpm mouse server is running and t-mouse-mode enabled, Emacs uses a
Unix socket in a GNU/Linux console to talk to server, rather than faking events
using the client program mev.  This C level approach provides mouse
highlighting, and help echoing in the minibuffer.

** The new variable next-error-recenter specifies how next-error should
recenter the visited source file.  Its value can be a number (for example,
0 for top line, -1 for bottom line), or nil for no recentering.

** The mode-line displays a `@' if the default-directory for the current buffer
is on a remote machine, or a hyphen otherwise.

** The mode-line displays a mode menu when mouse-1 is clicked on a minor mode,
in the same way as it already did for major modes.

** The new command balance-windows-area balances windows both vertically
and horizontally.

** The new command close-display-connection can be used to close a connection
to a remote display, e.g. because the display is about to become unreachable.

** The command shell prompts for the default directory, when it is
called with a prefix, and the default directory is a remote file name.
This is because some file name handlers (like ange-ftp) are not able to
run processes remotely.

** The new command `display-time-world' starts an updating time display
using several time zones, in a buffer.

* Startup Changes in Emacs 23.1

** New user option `initial-buffer-choice' specifies what to display
after starting Emacs: startup screen, *scratch* buffer, visiting a
file or directory.

** New alias `argv' for `command-line-args-left'
This is a convenience alias, so that one can write `(pop argv)'
inside of --eval command line arguments in order to access
following arguments.

** The abbrev file is no longer read at startup in batch mode.

* Incompatible Editing Changes in Emacs 23.1


* Editing Changes in Emacs 23.1

+++
** M-q now fills the region if the region is active and
`transient-mark-mode' is turned on.  Otherwise, it fills the current
paragraph.

+++
** M-$ now checks spelling of the region if the region is active and
`transient-mark-mode' is turned on.  Otherwise, it checks spelling of the
word at point.

** TAB now indents the region if the region is active and
`transient-mark-mode' is turned on.

** C-z now invokes `suspend-frame', C-x C-c now invokes
`save-buffers-kill-terminal'.

** New command kill-matching-buffers kills buffers whose name matches a regexp.

** `interprogram-paste-function' can now return one string or a list
of strings.  In the latter case, Emacs puts the second and following
strings on the kill ring.

** Minibuffer changes:

*** isearch started in the minibuffer searches in the minibuffer history.
Reverse isearch commands (C-r, C-M-r) search in previous minibuffer
history elements, and forward isearch commands (C-s, C-M-s) search in
next history elements.  When the reverse search reaches the first history
element, it wraps to the last history element, and the forward search
wraps to the first history element.  When the search is terminated, the
history element containing the search string becomes the current.


* New Modes and Packages in Emacs 23.1

** The package doc-view.el has been added.  It supports viewing of PDF,
PostScript and DVI documents inside an Emacs buffer by converting the
document to a set of PNG images first.  One can also search for a
regular expression in the document.  The commentary of the file explains
its usage.

** A new game called `bubbles' has been added.

** minibuffer-indicate-depth-mode shows the minibuffer depth in the prompt.


* Changes in Specialized Modes and Packages in Emacs 23.1

** diff-fine-highlight highlights char-level details of changes in a diff hunk.
** archive-mode has basic support to browse Rar archives.
** talk.el has been extended for multiple tty support.

** compilation-auto-jump-to-first-error tells `compile' to jump to
the first error encountered during compilations.

** In the `copyright' package, you can specify your copyright holders's names.
Only copyright lines with holders matching copyright-names-regexp will be
considered for update.

** eldoc highlights the function argument under point
with the face `eldoc-highlight-function-argument'.

** VC
*** Clicking on the VC mode-line entry now pops the VC menu.

*** The VC mode-line entry now has a tooltip that explains the VC file status.

*** VC now supports applying VC operations to a set of files at a time.

This enables VC to work much more effectively with changeset-oriented
version-control systems such as Subversion, GNU Arch, Mercurial, and
Bzr. VC will now pass a multiple-file commit to these systems
as a single changeset.

** sgml-electric-tag-pair-mode lets you simultaneously edit matched tag pairs.

** The appearance of superscript and subscript in TeX is more customizable.
See the documentation of the variables: tex-fontify-script,
tex-font-script-display, tex-suscript-height-ratio, and
tex-suscript-height-minimum.

** BibTeX mode:

*** New `bibtex-entry-format' options `whitespace', `braces', and
`string', disabled by default.

*** New variable `bibtex-cite-matcher-alist' contains rules to
identify cited keys in BibTeX entries, used by `bibtex-find-crossref.

*** Command `bibtex-url' now allows multiple URLs per entry.

+++
** Tramp

*** New connection methods.
The new methods "plinkx", "plink2", "psftp", "sftp" and "fish" have
been introduced.  There are also new so-called gateway methods
"tunnel" and "socks".

*** Multihop syntax has been removed.
The pseudo-method "multi" has been removed.  Instead of, multi hops
can be specified by the new variable `tramp-default-proxies-alist'.

*** More default settings.
Default values can be set via the variables `tramp-default-user',
`tramp-default-user-alist' and `tramp-default-host'.

*** Connection information is cached.
In order to reduce connection setup, information about used
connections are kept persistent in a file.  The name of this file is
defined in the variable `tramp-persistency-file-name'.

*** Control of remote processes.
Running processes on a remote host can be controlled by settings in
`tramp-remote-path' and `tramp-remote-process-environment'.

*** Success of remote copy is checked.
When the variable `file-precious-flag' is set, the success of a remote
file copy is checked via the file's checksum.

** Miscellaneous programming mode changes

*** The file etc/emacs.py now supports both Python 2 and 3, meaning
that either version can be used as inferior Python by python.el.

*** The variable `fortran-line-length' can change the fixed-form line-length.

** Miscellaneous

*** comint-mode uses `start-file-process' now (see Lisp Changes).
If `default-directory' is a remote file name, subprocesses are started
on the corresponding remote system.

*** C-x C-q in dired-mode now runs the command wdired-change-to-wdired-mode,
and C-x C-q in wdired-mode exits it with asking a question about
saving changes.

*** The new command `eshell/info' runs info in an eshell buffer.


* Changes in Emacs 23.1 on non-free operating systems

---
** IPv6 is supported on MS-Windows.
Emacs now supports IPv6 on Windows XP and later, and earlier versions
of Windows with third party IPv6 stacks installed. Previously IPv6 was
supported on other platforms, but not on Windows due to using the winsock
1.1 header file, even though Emacs was linking to the winsock 2 library.


* Incompatible Lisp Changes in Emacs 23.1

+++
** The function `dired-call-process' has been removed.


* Lisp Changes in Emacs 23.1

** `frame-inherited-parameters' lets new frames inherit parameters from
the selected frame.
** New keymap `input-decode-map' overrides like key-translation-map, but
applies before function-key-map.  Also it is terminal-local contrary to
key-translation-map.  Terminal-specific key-sequences are generally added to
this map rather than to function-key-map now.

** Changes related to multiple tty support.

*** $TERM is now set to `dumb' for subprocesses.  If you want to know the
$TERM inherited by Emacs you will have to look inside initial-environment.

*** $DISPLAY is now dynamically inherited from the frame's `display'.

*** The `window-system' variable has been made frame-local. The new
`initial-window-system' variable contains the `window-system' value
for the first frame.

*** You can specify a terminal device (`tty' parameter) and a terminal
type (`tty-type' parameter) to `make-terminal-frame'.

*** The new function `make-frame-on-tty' allows you to create a new
frame on another tty device interactively.

*** The function `make-frame-on-display' now works during a tty
session, and `make-frame-on-tty' works during a graphical session.

*** New functions: `delete-tty', `suspend-tty', `resume-tty'.

*** A new data type for terminals with functions: `get-device-terminal',
`terminal-parameters', `terminal-parameter', `set-terminal-parameter'.

*** New hooks: `suspend-tty-functions' and `resume-tty-functions'
are called after a tty frame has been suspended or resumed,
respectively.  The functions are called with the terminal id of the frame
being suspended/resumed as a parameter.

*** New function: `environment'.

*** New variable: `local-function-key-map'.
This in addition to the global function-key-map variable that
already existed.  The global variable is not used directly any more;
instead, the local-function-key-map is initialized so as to inherit from
function-key-map.

*** `initial-environment' holds the environment inherited from Emacs's parent.

*** The `keyboard-translate-table' variable and the terminal and
keyboard coding systems have been made terminal-local.

*** In addition to the global function-key-map, Emacs has terminal-local
local-function-key-map variables, and uses them instead of the
global keymaps to set up translations and function key sequences
relevant to a specific terminal device.


** You can now also pass the value of the `invisible' property to invisible-p
to check whether it would cause the text to be invisible.  Convenient when
checking invisibility of text which has no buffer position
(e.g. in before/after-strings).

** Non-breaking space now acts as whitespace.

+++
** In `condition-case', a handler can specify "let the debugger run first".

You do this by writing `debug' in the list of conditions to be handled,
like this:

    (condition-case nil
	(foo bar)
      ((debug error) nil))

** The `require-match' argument to `completing-read' accepts a new value
`confirm-only'.

+++
** The regexp form \(?<num>:<regexp>\) specifies the group number explicitly.

** New function `window-full-width-p' returns t if a window is as wide
as its frame.

** The new function `split-string-and-unquote' does (what?)

** The new function `combine-and-quote-strings' does (what?)

** The new function `image-refresh' refreshes all images associated
with a given image specification.

+++
** New variable `user-emacs-directory'.
Use this instead of "~/.emacs.d".

+++
** The new function `start-file-process is similar to `start-process',
but obeys file handlers.  The file handler is chosen based on
`default-directory'.  The functions `start-file-process-shell-command'
and `process-file-shell-command' are also new; they call internally
`start-file-process and `process-file', respectively.

+++
** `file-remote-p' has new optional parameters IDENTIFICATION and CONNECTED.
IDENTIFICATION specifies which part of the remote identifier has to be
returned.  With CONNECTED passed non-nil, it is checked whether a
remote connection has been established already.

** The two new functions `looking-at-p' and `string-match-p' can do
the same matching as `looking-at' and `string-match' without changing
the match data.

** The interactive-form of a function can be added post-facto via the
`interactive-form' symbol property.  Mostly useful to add complex interactive
forms to subroutines.

* New Packages for Lisp Programming in Emacs 23.1

** The new package avl-tree.el deals with the AVL tree data structure.


----------------------------------------------------------------------
This file is part of GNU Emacs.

GNU Emacs is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 3, or (at your option)
any later version.

GNU Emacs is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with GNU Emacs; see the file COPYING.  If not, write to the
Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, MA 02110-1301, USA.


Local variables:
mode: outline
paragraph-separate: "[ 	]*$"
end:

arch-tag: e759449d-88b3-4de4-9900-3a6c3dfa23e2
